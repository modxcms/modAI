!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.modAI=t():e.modAI=t()}(self,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{chatHistory:()=>h,executor:()=>r,history:()=>d,ui:()=>ie,window:()=>ue});const n={buffered:{chatgpt:{content:e=>{const t=e?.choices?.[0]?.message?.content;if(!t)throw new Error(_("modai.cmp.failed_request"));return{id:e.id,content:t}},image:e=>{const t=e?.data?.[0]?.url;if(!t)throw new Error(_("modai.cmp.failed_request"));return{id:`chatgpt-${Date.now()}-${Math.round(1e3*Math.random())}`,url:t}}},claude:{content:e=>{const t=e?.content?.[0]?.text;if(!t)throw new Error(_("modai.cmp.failed_request"));return{id:e.id,content:t}}},gemini:{content:e=>{const t=e?.candidates?.[0]?.content?.parts?.[0]?.text;if(!t)throw new Error(_("modai.cmp.failed_request"));return{id:`gemini-${Date.now()}-${Math.round(1e3*Math.random())}`,content:t}},image:e=>{const t=e?.predictions?.[0]?.bytesBase64Encoded;if(!t)throw new Error(_("modai.cmp.failed_request"));return{id:`gemini-${Date.now()}-${Math.round(1e3*Math.random())}`,url:`data:image/png;base64,${t}`}}}},stream:{chatgpt:{content:(e,t)=>{const n=t?.content??"",o=e.choices[0]?.delta?.content||"";return{...t,id:e.id,content:`${n}${o}`}}},claude:{content:(e,t)=>{const n=t?.content??"",o=e.delta?.text||"";return{...t,content:`${n}${o}`}}},gemini:{content:(e,t)=>{const n=t?.content??"",o=e.candidates[0]?.content?.parts[0]?.text||"";return{...t,content:`${n}${o}`}}}}},o=async e=>{if(!e.ok){const t=await e.json();if(t?.error)throw new Error(t.error.message);throw new Error(`${e.status} ${e.statusText}`)}},a=async(e,t,o,a,i)=>{if(!e.body)throw new Error("failed");const r=e.body.getReader(),s=new TextDecoder("utf-8");let d="",l={id:`${t}-${Date.now()}-${Math.round(1e3*Math.random())}`,content:""};for(;!i||!i.aborted;){const{done:e,value:i}=await r.read();if(e)break;const c=s.decode(i,{stream:!0});if("gemini"===t){const e=c.trim().split(",\r\n").map((e=>e.replace(/^\[|]$/g,""))).filter((e=>""!==e.trim()));for(const i of e)try{const e=JSON.parse(i);l=n.stream[t][o](e,l),a&&a(l)}catch{}}if("chatgpt"===t){d+=c;let e,i=0;for(;-1!==(e=d.indexOf("\n",i));){const r=d.slice(i,e).trim();if(i=e+1,r.startsWith("data: ")){const e=r.slice(6);if("[DONE]"===e)continue;try{const i=JSON.parse(e);l=n.stream[t][o](i,l),a&&a(l)}catch{}}}d=d.slice(i)}if("claude"===t){d+=c;let e,i=0;for(;-1!==(e=d.indexOf("\n",i));){const r=d.slice(i,e).trim();if(i=e+1,r.startsWith("data: ")){const e=r.slice(6);try{const i=JSON.parse(e);if("message_start"===i.type){l.id=i.message.id;continue}if("content_block_delta"!==i.type)continue;l=n.stream[t][o](i,l),a&&a(l)}catch{}}}d=d.slice(i)}}return l},i=async(e,t,i,r)=>{const s=(r=r||new AbortController).signal,d=await fetch(`${modAI.apiURL}?action=${e}`,{signal:s,method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});if(!d.ok){const e=await d.json();if(e.error)throw new Error(e.error.message);throw new Error(e.detail)}const l=d.headers.get("x-modai-service")??"chatgpt",c=d.headers.get("x-modai-parser")??"content",p=1===parseInt(d.headers.get("x-modai-stream")??"0");if(1!==parseInt(d.headers.get("x-modai-proxy")??"0")){return(async(e,t,i)=>{if("object"!=typeof e||!e.forExecutor)return e;const r=e.forExecutor,s=(i=i||new AbortController).signal;if(!r.service||!r.parser)throw new Error(_("modai.cmp.service_required"));if(!n[r.stream?"stream":"buffered"]?.[r.service]?.[r.parser])throw new Error(_("modai.cmp.service_unsupported"));if(r.stream)return(async e=>{if("content"!==r.parser)throw new Error(_("modai.cmp.service_unsupported"));const n=await fetch(e.url,{signal:s,method:"POST",body:e.body,headers:e.headers});return await o(n),a(n,r.service,r.parser,t)})(r);const d=await(async e=>{const t=await fetch(e.url,{signal:s,method:"POST",body:e.body,headers:e.headers});await o(t);const n=await t.json();if(n.error)throw new Error(n.error.message);return n})(r);return n.buffered[r.service][r.parser](d)})(await d.json(),i,r)}if(!l||!c)throw r.abort(),new Error(_("modai.cmp.service_required"));if(!n[p?"stream":"buffered"]?.[l]?.[c])throw r.abort(),new Error(_("modai.cmp.service_unsupported"));if(!p){const e=await d.json();return n.buffered[l][c](e)}if("content"!==c)throw new Error(_("modai.cmp.service_unsupported"));return await a(d,l,c,i,s)},r={mgr:{download:{image:async e=>await(async(e,t)=>{const n=await fetch(`${modAI.apiURL}?action=Download\\Image`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});if(!n.ok){const e=await n.json();if(e.error)throw new Error(e.error.message);throw new Error(e.detail)}return await n.json()})(0,e)},prompt:{freeText:async(e,t,n)=>i("Prompt\\FreeText",e,t,n),text:async(e,t,n)=>i("Prompt\\Text",e,t,n),vision:async(e,t,n)=>i("Prompt\\Vision",e,t,n),image:async(e,t)=>i("Prompt\\Image",e,void 0,t)}}},s={},d={_formatOutput(e,t){const n=s[e],o=n.visible>0,a=n.visible!==n.values.length-1;return{value:void 0!==t?t:n.values[n.visible]??null,nextStatus:a,prevStatus:o,current:n.visible+1,total:n.values.length,context:n.context}},insert(e,t,n=!1){const o=s[e];n||(o.visible=o.values.push(t)-1);const a=this._formatOutput(e,t);return"function"==typeof o.syncUI&&o.syncUI(a,n),a},next(e){const t=s[e];if(t.visible===t.values.length-1)return this._formatOutput(e);t.visible++;const n=this._formatOutput(e);return"function"==typeof t.syncUI&&t.syncUI(n),n},prev(e){const t=s[e];if(t.visible<=0)return this._formatOutput(e);t.visible--;const n=this._formatOutput(e);return"function"==typeof t.syncUI&&t.syncUI(n),n},init(e,t,n,o){return s[e]||(s[e]={visible:-1,values:[],context:o}),s[e].syncUI=t,n&&(s[e].values=[n],s[e].visible=0),{cachedItem:s[e],getData:()=>this._formatOutput(e),getAll:()=>s[e].values,syncUI:()=>{"function"==typeof s[e].syncUI&&s[e].syncUI(this._formatOutput(e),!1)},insert:(t,n=!1)=>this.insert(e,t,n),next:()=>this.next(e),prev:()=>this.prev(e)}}},l=(e,t)=>{Object.assign(e.style,t)},c=(e,t,n="")=>{const o=document.createElement(e);return t&&l(o,t),n&&(o.textContent=n),o},p=e=>/<[^>]*>/g.test(e)?e:e.replace(/\r\n|\n|\r/g,"<br>"),g={},m="assistant",u=(e,t,n,o,a=!1,i="text")=>{const r=g[e];if(!r)return;const s={content:t,role:n,id:o,hidden:a,type:i,ctx:{}},d=r.history.push(s)-1;o&&(r.idRef[o]=r.history[d]),s.el=r.onAddMessage(s)},h={init:(e,t)=>(g[e]||(g[e]={history:[],idRef:{},onAddMessage:t}),g[e].onAddMessage=t,{addUserMessage:(t,n,o,a="text")=>{u(e,t,"user",n,o,a)},addAssistantMessage:(t,n,o="text")=>{u(e,t,m,n,!1,o)},updateAssistantMessage:(t,n,o="text")=>{((e,t,n,o="text")=>{const a=g[e];if(!a)return;if(!a.idRef[t])return void u(e,n,m,t,!1,o);const i=a.idRef[t];i.content=n,i.el&&i.el.update&&i.el.update(i)})(e,t,n,o)},getAssistantMessage:t=>((e,t)=>{const n=g[e];if(n)return n.idRef[t]})(e,t),getMessages:()=>g[e].history,getMessagesHistory:()=>g[e].history.map((e=>({role:e.role,content:e.content})))})},f={loadingText:"Loading...",completedText:"Completed!",completedTextDuration:2e3,disabled:!1},x={backgroundColor:"#edf2f7",border:"1px solid #cbd5e0",borderRadius:"4px",padding:"3px 8px",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",color:"#4a5568",opacity:"1"},y={display:"inline-block",width:"14px",height:"14px",marginRight:"5px",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},b={opacity:"0.5",cursor:"not-allowed"},v={copy:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%234a5568' viewBox='0 0 16 16'%3E%3Cpath d='M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z'/%3E%3Cpath d='M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z'/%3E%3C/svg%3E",insert:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%234a5568' viewBox='0 0 16 16'%3E%3Cpath d='M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z'/%3E%3Cpath d='M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z'/%3E%3C/svg%3E"},w=e=>{e={...f,...e};const t=c("button",x);t.className="action-button",t.enable=()=>{t.disabled=!1,l(t,x)},t.disable=()=>{t.disabled=!0,l(t,{...x,...b})},e.disabled&&t.disable();const n=c("span",{...y,backgroundImage:`url("${v[e.icon]}")`});return t.append(n),t.append(document.createTextNode(e.label)),t.addEventListener("click",(async()=>{const n=t.innerHTML,o=e.onClick(e.message,e.modal);if(o instanceof Promise){t.innerHTML=`\n                <span style="\n                    display: inline-block;\n                    margin-right: 5px;\n                    width: 12px;\n                    height: 12px;\n                    position: relative;\n                    animation: spin 1s linear infinite;\n                ">\n                    <span style="\n                        position: absolute;\n                        width: 3px;\n                        height: 3px;\n                        background-color: currentColor;\n                        border-radius: 50%;\n                        top: 0;\n                        left: 50%;\n                        transform: translate(-50%, 0);\n                    "></span>\n                    <span style="\n                        position: absolute;\n                        width: 3px;\n                        height: 3px;\n                        background-color: currentColor;\n                        border-radius: 50%;\n                        top: 50%;\n                        right: 0;\n                        transform: translate(0, -50%);\n                    "></span>\n                    <span style="\n                        position: absolute;\n                        width: 3px;\n                        height: 3px;\n                        background-color: currentColor;\n                        border-radius: 50%;\n                        bottom: 0;\n                        left: 50%;\n                        transform: translate(-50%, 0);\n                    "></span>\n                    <span style="\n                        position: absolute;\n                        width: 3px;\n                        height: 3px;\n                        background-color: currentColor;\n                        border-radius: 50%;\n                        top: 50%;\n                        left: 0;\n                        transform: translate(0, -50%);\n                    "></span>\n                </span>\n                ${e.loadingText}\n            `;const n=document.createElement("style");n.textContent="\n                @keyframes spin {\n                    from { transform: rotate(0deg); }\n                    to { transform: rotate(360deg); }\n                }\n            ",document.head.appendChild(n),await o,document.head.removeChild(n)}t.innerHTML=`\n                <span style="margin-right: 5px;">✓</span>\n                ${e.completedText}\n            `,await new Promise((e=>setTimeout(e,2e3))),t.innerHTML=n})),t},C=["text","image"],E={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.3)",display:"none",zIndex:"100"},k={position:"fixed",width:"1000px",minHeight:"170px",maxHeight:"600px",backgroundColor:"#fff",borderRadius:"10px",boxShadow:"0 5px 15px rgba(0, 0, 0, 0.3)",display:"none",flexDirection:"column",overflow:"hidden",zIndex:"101",top:"50%",left:"50%",transform:"translate(-50%, -50%)",transition:"height 0.3s ease-in-out"},M={backgroundColor:"#00B6DE",color:"white",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move"},T={fontWeight:"bold",fontSize:"16px"},I={display:"flex",gap:"10px"},S={background:"none",border:"none",color:"white",fontSize:"16px",cursor:"pointer"},A={flex:"1",padding:"15px",overflowY:"auto",backgroundColor:"#f9f9f9",width:"100%",boxSizing:"border-box",display:"none"},L={marginBottom:"20px",borderRadius:"8px",position:"relative",wordWrap:"break-word",width:"100%",boxSizing:"border-box"},$={width:"100%",backgroundColor:"#ffffff",border:"1px solid #e2e8f0",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.05)"},B={width:"fit-content",padding:"10px 15px",backgroundColor:"#4299e1",color:"white",marginLeft:"auto",borderBottomRightRadius:"5px"},O={padding:"12px",width:"100%",maxWidth:"100%",overflow:"hidden",boxSizing:"border-box"},z={display:"flex",padding:"8px 12px",gap:"8px",backgroundColor:"#f7fafc",borderTop:"1px solid #e2e8f0",borderRadius:"0 0 8px 8px"},H={display:"flex",padding:"15px",borderTop:"1px solid #e2e8f0",backgroundColor:"white",position:"relative"},D={display:"flex",width:"100%",gap:"10px"},R={flex:"1",position:"relative",minHeight:"48px",maxHeight:"150px",display:"flex"},j={width:"100%",padding:"12px 15px",border:"1px solid #e2e8f0",borderRadius:"10px",outline:"none",fontSize:"14px",resize:"none",minHeight:"48px",maxHeight:"150px",overflowY:"auto",backgroundColor:"#fff",cursor:"inherit"},P={display:"flex",flexDirection:"column",gap:"4px",width:"100px"},N={backgroundColor:"#6CB24A",color:"white",border:"none",borderRadius:"12px",padding:"8px 16px",cursor:"pointer",fontWeight:"bold",height:"40px",minWidth:"100px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",opacity:"1"},U={display:"flex",gap:"4px",justifyContent:"space-between"},q={backgroundColor:"transparent",border:"1px solid #e2e8f0",borderRadius:"8px",width:"48px",height:"32px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s",opacity:"1"},V={width:"16px",height:"16px",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M2.01 21L23 12 2.01 3 2 10l15 2-15 2z'/%3E%3C/svg%3E\")",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},F={width:"16px",height:"16px",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23DC2626'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M6 6h12v12H6z'/%3E%3C/svg%3E\")",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},W={width:"16px",height:"16px",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%234B5563'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z'/%3E%3C/svg%3E\")",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},Y={opacity:"0.5",cursor:"not-allowed"},J={backgroundColor:"#f3f4f6",cursor:"not-allowed"},X={display:"none",position:"absolute",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(243, 244, 246, 0.9)",borderRadius:"10px",color:"#6B7280",fontSize:"14px",alignItems:"center",justifyContent:"center",gap:"4px",flexDirection:"row",zIndex:"10",backdropFilter:"blur(2px)",border:"1px solid #e2e8f0",pointerEvents:"none"},G={padding:"5px 15px",display:"flex",alignItems:"center",gap:"10px",borderTop:"1px solid #e2e8f0",backgroundColor:"white"},K={fontSize:"14px",color:"#4B5563",fontWeight:"500"},Q={display:"flex",gap:"4px"},Z={padding:"6px 12px",fontSize:"13px",border:"1px solid #e2e8f0",borderRadius:"6px",backgroundColor:"#fff",color:"#4B5563",cursor:"pointer",transition:"all 0.2s",opacity:"1"},ee={backgroundColor:"#00B6DE",color:"#fff",borderColor:"#00B6DE"},te={width:"fit-content",padding:"10px 15px",backgroundColor:"#DC2626",color:"white",marginLeft:"auto",borderBottomRightRadius:"5px",display:"flex",alignItems:"center",gap:"8px"},ne={width:"16px",height:"16px",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z'/%3E%3C/svg%3E\")",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},oe=e=>{if(!e.key)return void alert("key is required config property");e.type||(e.type="text"),e.availableTypes||(e.availableTypes=[]),e.availableTypes=e.availableTypes.filter((e=>C.includes(e))),e.availableTypes.length>0&&!e.availableTypes.includes(e.type)&&e.availableTypes.unshift(e.type);const t=()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",a),b.modalOverlay&&b.modalOverlay.remove(),b&&b.remove()},n=e=>{b.isDragging=!0;const t=b.getBoundingClientRect();b.offsetX=e.clientX-t.left,b.offsetY=e.clientY-t.top,document.body.style.userSelect="none"},o=e=>{if(!b.isDragging)return;const t=e.clientX-b.offsetX,n=e.clientY-b.offsetY;b.style.left=t+"px",b.style.top=n+"px",b.style.transform="none"},a=()=>{b.isDragging=!1,document.body.style.userSelect=""},i=()=>{b.isLoading&&b.abortController&&(b.abortController.abort(),b.abortController=void 0,f(!1))},s=()=>{if(0!==y.getMessages().length)if("text"!==e.type)if("image"!==e.type);else{const e=y.getMessages().reverse().find((e=>"user"===e.role));e&&x(e.content)}else x("Try again")},d=e=>{"none"===b.chatMessages.style.display&&(b.chatMessages.style.display="block");const t=c("div",{...L,...te}),n=c("span",ne);t.appendChild(n);const o=c("span");return o.textContent=e,t.appendChild(o),b.chatMessages.appendChild(t),b.chatMessages.scrollTop=b.chatMessages.scrollHeight,t},g=(t,n)=>{"none"===b.chatMessages.style.display&&(b.chatMessages.style.display="block");const o=c("div",{...L,...$}),a=n||"msg-"+Date.now(),i=c("div",O),s=((e,t,n=[])=>{const o=p(e),a=c("iframe",{width:"100%",border:"none",backgroundColor:"white",pointerEvents:"none",maxWidth:"100%",boxSizing:"border-box"});return a.srcdoc=`\n        <html>\n        <head>\n            <style>\n                html {\n                    width: 100%;\n                    max-width: 100%;\n                    padding: 0;\n                    margin: 0;\n                }\n                body {\n                    margin: 0;\n                    padding: 0;\n                    font-family: Arial, sans-serif;\n                    overflow-x: hidden;\n                    width: 100%;\n                    max-width: 100%;\n                    box-sizing: border-box;\n                }\n                * {\n                    box-sizing: border-box;\n                    max-width: 100%;\n                }\n                pre {\n                    white-space: pre-wrap;\n                    word-wrap: break-word;\n                    overflow-wrap: break-word;\n                    max-width: 100%;\n                    padding: 12px;\n                    margin: 0;\n                    background-color: #f5f7fa;\n                    border-radius: 5px;\n                    font-size: 14px;\n                }\n                img {\n                    max-width: 100%;\n                    height: auto;\n                    display: block;\n                }\n                code {\n                    white-space: pre-wrap;\n                    word-wrap: break-word;\n                    max-width: 100%;\n                    display: block;\n                    overflow-x: hidden;\n                    font-size: 14px;\n                }\n                table {\n                    width: 100%;\n                    max-width: 100%;\n                    overflow-x: hidden;\n                    display: block;\n                    border-collapse: collapse;\n                }\n                div {\n                    max-width: 100%;\n                    overflow-wrap: break-word;\n                    word-wrap: break-word;\n                    box-sizing: border-box;\n                }\n                p {\n                    margin: 0 0 0.5em 0;\n                    max-width: 100%;\n                }\n                h1, h2, h3, h4, h5, h6 {\n                    margin: 0 0 0.1em 0;\n                    max-width: 100%;\n                }\n            </style>\n            ${n.map((e=>`<link rel="stylesheet" type="text/css" href="${e}" />`)).join("")}\n        </head>\n        <body style="padding: 0; max-width: 100%; width: 100%; box-sizing: border-box;">${o}</body>\n        </html>\n    `,a.syncHeight=()=>{const e=a.contentWindow?.document.body;if(!e)return;const n=e.getElementsByTagName("*");let o=e.offsetHeight;for(let e=0;e<n.length;e++){const t=n[e],a=t.offsetTop+t.offsetHeight;o=Math.max(o,a)}a.style.height=o+5+"px",e.style.overflow="hidden",t.chatMessages.scrollTop=t.chatMessages.scrollHeight},a.onload=a.syncHeight,a})(t,b,e.customCSS??[]);i.appendChild(s);const d=c("div",z),l=y.getAssistantMessage(a);if(l&&("text"===e.type&&(!1!==e.textActions?.copy&&d.append(w({message:l,modal:b,disabled:b.isLoading,icon:"copy",label:"Copy",completedText:"Copied!",onClick:"function"==typeof e.textActions?.copy?e.textActions.copy:u})),"function"==typeof e.textActions?.insert&&d.append(w({message:l,modal:b,disabled:b.isLoading,icon:"insert",label:"Insert",completedText:"Inserted!",onClick:e.textActions.insert}))),"image"===e.type)){!1!==e.imageActions?.copy&&d.append(w({message:l,modal:b,disabled:b.isLoading,icon:"copy",label:"Copy",loadingText:"Downloading...",completedText:"Copied!",onClick:async(t,n)=>{const o="function"==typeof e.textActions?.copy?e.textActions.copy:u;if(!0===t.ctx.downloaded)return void o(t,n);const a=await r.mgr.download.image({url:t.content,field:e.field,namespace:e.namespace,resource:e.resource,mediaSource:e.image?.mediaSource});t.content=a.fullUrl,t.ctx.downloaded=!0,t.ctx.url=a.url,t.ctx.fullUrl=a.fullUrl,o(t,n)}}));const t=e.imageActions?.insert;"function"==typeof t&&d.append(w({message:l,modal:b,disabled:b.isLoading,icon:"insert",label:"Insert",completedText:"Inserted!",loadingText:"Downloading...",onClick:async(n,o)=>{if(!0===n.ctx.downloaded)return void t(n,o);const a=await r.mgr.download.image({url:n.content,field:e.field,namespace:e.namespace,resource:e.resource,mediaSource:e.image?.mediaSource});n.content=a.fullUrl,n.ctx.downloaded=!0,n.ctx.url=a.url,n.ctx.fullUrl=a.fullUrl,t(n,o)}}))}return o.append(i,d),b.chatMessages.appendChild(o),b.chatMessages.scrollTop=b.chatMessages.scrollHeight,o.update=e=>{const t=s.contentDocument;t&&("image"===e.type?t.body.innerHTML=`<img src="${e.content}" />`:t.body.innerHTML=p(e.content),s.syncHeight())},o},m=e=>{if(!e.hidden)return"user"===e.role?(e=>{"none"===b.chatMessages.style.display&&(b.chatMessages.style.display="block");const t=c("div",{...L,...B});return t.innerHTML=p(e),t.update=e=>{t.innerHTML=p(e.content)},b.chatMessages.appendChild(t),b.chatMessages.scrollTop=b.chatMessages.scrollHeight,t})(e.content):"image"===e.type?g(`<img src="${e.content}" />`,e.id):g(e.content,e.id)},u=async e=>{if(navigator.clipboard&&navigator.clipboard.writeText)try{await navigator.clipboard.writeText(e.content)}catch{d(_("modai.cmp.failed_copy"))}else try{const t=c("textarea");t.value=e.content,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}catch(e){d(_("modai.cmp.failed_copy"))}},f=t=>{b.isLoading=t,b.loadingIndicator.style.display=t?"flex":"none",b.messageInput.disabled=t,l(b.messageInput,t?{...j,...J}:j),b.sendBtn.disabled=t,l(b.sendBtn,t?{...N,...Y}:N),b.stopBtn.disabled=!t,l(b.stopBtn,t?q:{...q,...Y});const n=y.getMessages().length>0;b.tryAgainBtn.disabled=t||!n,l(b.tryAgainBtn,t||!n?{...q,...Y}:q),Object.values(b.typeButtons).forEach((n=>{n.disabled=t;const o=n.textContent?.toLowerCase()===e.type;l(n,t?{...Z,...o?ee:{},...Y}:{...Z,...o?ee:{}})})),b.chatMessages.querySelectorAll(".action-button").forEach((e=>{t?e.disable?.():e?.enable?.()}))},x=async(t,n)=>{const o=t?t.trim():b.messageInput.value.trim();if(!o||b.isLoading)return;f(!0),b.messageInput.value="",b.abortController=new AbortController;const a=y.getMessagesHistory(),i="user-msg-"+Date.now()+Math.round(1e3*Math.random());y.addUserMessage(o,i,n);try{if("text"===e.type){const t=await r.mgr.prompt.freeText({namespace:e.namespace,context:e.context,prompt:o,field:e.field||"",messages:a},(e=>{y.updateAssistantMessage(e.id,e.content)}),b.abortController);y.updateAssistantMessage(t.id,t.content)}if("image"===e.type){const e=await r.mgr.prompt.image({prompt:o},b.abortController);y.addAssistantMessage(e.url,e.id,"image")}b.abortController=void 0}catch(e){if(e instanceof Error){if("AbortError"===e.name)return;return void d(e.message)}d("Unknown error")}f(!1)};let y=h.init(`${e.key}/${e.type}`,(e=>m(e)));const b=(()=>{const r=c("div",E),d=c("div",k),p=c("div",M),g=c("div",T,"modAI Assistant"),u=c("div",I),f=c("button",S,"✕");u.append(f),p.append(g,u);const v=c("div",A),w=c("div",H),C=c("div",D),_=c("div",R),L=c("textarea",j);L.placeholder="Type your message...";const $=c("div",P),B=c("button",N),O=c("span",V),z=document.createTextNode("Send");B.append(O,z);const J=c("div",U),te=c("button",{...q,...Y}),ne=c("span",F);te.appendChild(ne),te.title="Stop Generation";const oe=c("button",q),ae=c("span",W);oe.appendChild(ae),oe.title="Try Again",0===y.getMessages().length&&(oe.disabled=!0,l(oe,{...q,...Y})),J.append(te,oe),$.append(B,J),_.append(L),C.append(_,$);const ie=c("div",X);ie.innerHTML='\n        <style>\n            @keyframes loadingDotPulse {\n                0%, 80%, 100% { transform: scale(0.6); opacity: 0.3; }\n                40% { transform: scale(1); opacity: 1; }\n            }\n            .loading-dots {\n                display: flex;\n                gap: 4px;\n                padding: 8px 16px;\n                background-color: rgba(255, 255, 255, 0.8);\n                border-radius: 16px;\n            }\n            .loading-dot {\n                width: 8px;\n                height: 8px;\n                background-color: #6B7280;\n                border-radius: 50%;\n                display: inline-block;\n                animation: loadingDotPulse 1.4s infinite ease-in-out both;\n            }\n            .loading-dot:nth-child(1) { animation-delay: -0.32s; }\n            .loading-dot:nth-child(2) { animation-delay: -0.16s; }\n            .loading-dot:nth-child(3) { animation-delay: 0s; }\n        </style>\n        <div class="loading-dots">\n            <div class="loading-dot"></div>\n            <div class="loading-dot"></div>\n            <div class="loading-dot"></div>\n        </div>\n    ',_.append(ie);const re=c("div",G),se=c("div",K,"Generate:"),de=c("div",Q),le={},ce=e.availableTypes??[];return ce.forEach((t=>{const n=c("button",Z,t.charAt(0).toUpperCase()+t.slice(1));t===e.type&&l(n,{...Z,...ee}),n.addEventListener("click",(()=>{Object.values(le).forEach((e=>{l(e,Z)})),l(n,{...Z,...ee}),(t=>{for(e.type=t,y=h.init(`${e.key}/${e.type}`,(e=>m(e)));b.chatMessages.firstChild;)b.chatMessages.removeChild(b.chatMessages.firstChild);b.chatMessages.style.display="none";const n=y.getMessages().filter((e=>!e.hidden));n.length>0&&(b.chatMessages.style.display="block",n.forEach((e=>{m(e)})))})(t)})),le[t]=n,de.appendChild(n)})),re.append(se,de),w.append(C),d.append(p,v,w),ce.length>0&&d.append(re),document.body.append(r,d),f.addEventListener("click",t),B.addEventListener("click",(()=>x())),te.addEventListener("click",i),oe.addEventListener("click",s),L.addEventListener("keydown",(e=>{if("Enter"===e.key){if(e.shiftKey)return;e.preventDefault(),x()}})),p.addEventListener("mousedown",n),document.addEventListener("mousemove",o),document.addEventListener("mouseup",a),d.modalOverlay=r,d.chatHeader=p,d.closeBtn=f,d.chatMessages=v,d.messageInput=L,d.sendBtn=B,d.tryAgainBtn=oe,d.stopBtn=te,d.loadingIndicator=ie,d.typeSelector=re,d.typeButtons=le,d.isDragging=!1,d.isLoading=!1,d.abortController=void 0,d.offsetX=0,d.offsetY=0,d})();return b.api={sendMessage:x,closeModal:t},(()=>{b.chatMessages.innerHTML="",b.chatMessages.style.display="none",b.style.visibility="hidden",b.style.display="flex",b.modalOverlay.style.display="block";const e=y.getMessages().filter((e=>!e.hidden));e.length>0&&(b.chatMessages.style.display="block",e.forEach((e=>{m(e)}))),setTimeout((()=>{b.chatMessages.scrollTop=b.chatMessages.scrollHeight,b.style.visibility="visible"}),100)})(),b},ae=(e,t={})=>{const n={indicatorType:t.indicatorType||"spinner",overlayColor:t.overlayColor||"rgba(255, 255, 255, 0.7)",indicatorColor:t.indicatorColor||"#3498db"},o=document.createElement("div"),a=document.createElement("div"),i=window.getComputedStyle(e),r=e.getBoundingClientRect();t.indicatorColor||(n.indicatorType=r.height<=50?"dots":"spinner"),o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.backgroundColor=n.overlayColor,o.style.display="flex",o.style.justifyContent="center",o.style.alignItems="center",o.style.zIndex="10000",o.style.borderRadius=i.borderRadius;let s="";if("spinner"===n.indicatorType)a.style.border="4px solid #f3f3f3",a.style.borderTop=`4px solid ${n.indicatorColor}`,a.style.borderRadius="50%",a.style.width="30px",a.style.height="30px",a.style.animation="textareaOverlaySpin 1s linear infinite",s="\n      @keyframes textareaOverlaySpin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n    ";else if("dots"===n.indicatorType){a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.height="20px";for(let e=0;e<3;e++){const t=document.createElement("div");t.style.width="8px",t.style.height="8px",t.style.borderRadius="50%",t.style.backgroundColor=n.indicatorColor,t.style.margin="0 4px",t.style.animation="textareaOverlayDotPulse 1.4s infinite ease-in-out",t.style.animationDelay=.2*e+"s",a.appendChild(t)}s="\n      @keyframes textareaOverlayDotPulse {\n        0%, 80%, 100% { transform: scale(0); opacity: 0.5; }\n        40% { transform: scale(1); opacity: 1; }\n      }\n    "}const d=document.createElement("style");d.textContent=s,document.head.appendChild(d),o.appendChild(a);const l=window.getComputedStyle(e.parentElement);let c;-1===["relative","absolute","fixed"].indexOf(l.position)?(c=document.createElement("div"),c.style.position="relative",c.style.width=`${r.width}px`,c.style.height=`${r.height}px`,c.style.display="inline-block",e.parentNode?.insertBefore(c,e),c.appendChild(e)):c=e.parentElement,o.style.display="none",c.appendChild(o);const p=e.getBoundingClientRect();return c!==e.parentElement&&(c.style.width=`${p.width}px`,c.style.height=`${p.height}px`),o.style.display="flex",e.setAttribute("disabled","disabled"),()=>{o.style.display="none",e.removeAttribute("disabled"),o.remove(),d.remove(),c!==e.parentElement&&(c.parentNode?.insertBefore(e,c),c.remove())}},ie={createLoadingOverlay:ae,localChat:e=>oe(e)},re=(e,t)=>{e.context.els.forEach((({wrapper:n,field:o})=>{const a=o.getValue();o.setValue(e.value),o.fireEvent("change",o,e.value,a),t&&(o.el.dom.scrollTop=o.el.dom.scrollHeight),e.total>0&&n.historyNav.show(),n.historyNav.info.update(e.current,e.total),e.prevStatus?n.historyNav.prevButton.enable():n.historyNav.prevButton.disable(),e.nextStatus?n.historyNav.nextButton.enable():n.historyNav.nextButton.disable()}))},se=()=>{const e=document.createElement("button");return e.className="modai-generate",e.innerText="✦",e.type="button",e.title="Generate using AI",e},de=e=>{const t=document.createElement("button");t.type="button",t.title="Previous Version",t.className="modai-history_prev",t.disable=()=>{t.disabled=!0},t.enable=()=>{t.disabled=!1},t.innerHTML="prev",t.addEventListener("click",(()=>{e.prev()}));const n=document.createElement("button");n.type="button",n.title="Next Version",n.className="modai-history_next",n.disable=()=>{n.disabled=!0},n.enable=()=>{n.disabled=!1},n.innerHTML="next",n.addEventListener("click",(()=>{e.next()}));const o=document.createElement("span");o.update=(e,t)=>{o.innerText=`${e}/${t}`},o.innerText="";const a=document.createElement("span");return a.show=()=>{a.style.display="initial"},a.hide=()=>{a.style.display="none"},a.prevButton=t,a.nextButton=n,a.info=o,a.appendChild(t),a.appendChild(n),a.appendChild(o),a.hide(),t.disable(),n.disable(),a},le=e=>{const t=se();return t.addEventListener("click",(()=>{ie.localChat({key:e,field:e,type:"text",availableTypes:["text","image"],resource:MODx.request.id})})),t},ce=(e,t)=>{const n=document.createElement("span"),o=se();o.addEventListener("click",(async()=>{const n=ae(e.el.dom);try{const e=await r.mgr.prompt.text({id:MODx.request.id,field:t});a.insert(e.content),n()}catch(e){n(),Ext.Msg.alert("Failed",_("modai.cmp.failed_try_again",{msg:e.message}))}})),n.appendChild(o);const a=d.init(t,re,e.getValue(),{});a.cachedItem.context.els||(a.cachedItem.context.els=[]),a.cachedItem.context.els.push({field:e,wrapper:n});const i=de(a);return n.appendChild(i),n.historyNav=i,n},pe=(e,t,n)=>{const o=se();return o.addEventListener("click",(()=>{ie.localChat({key:t,field:t,type:"image",resource:MODx.request.id,image:{mediaSource:parseInt(e)||void 0},imageActions:{copy:!1,insert:(e,t)=>{n(e),t.api.closeModal()}}})})),o},ge=(e,t)=>{const n=Ext.getCmp(e);if(!n)return;const o=document.createElement("span"),a=se();a.addEventListener("click",(async()=>{const e=ae(n.el.dom);try{const n=await r.mgr.prompt.text({id:MODx.request.id,field:t},(e=>{i.insert(e.content,!0)}));i.insert(n.content),e()}catch(t){e(),Ext.Msg.alert("Failed",_("modai.cmp.failed_try_again",{msg:t.message}))}})),o.appendChild(a);const i=d.init(t,re,n.getValue(),{});i.cachedItem.context.els||(i.cachedItem.context.els=[]),i.cachedItem.context.els.push({field:n,wrapper:o});const s=de(i);o.appendChild(s),o.historyNav=s,n.label.appendChild(o)},me=(e,t)=>{const n=Ext.getCmp(e.firstElementChild?.id),o=pe(n.imageBrowser.source,t,(function(e){n.imageBrowser.setValue(e.ctx.url),n.onImageChange(e.ctx.url)})),a=se();a.style.marginTop="6px",a.addEventListener("click",(async()=>{const e=n.imagePreview.el.dom,o=document.createElement("canvas"),a=o.getContext("2d");if(!a)return;o.width=e.width,o.height=e.height,a.drawImage(e,0,0);const i=o.toDataURL("image/png"),s=ae(n.altTextField.items.items[0].el.dom);try{const e=await r.mgr.prompt.vision({image:i,field:t},(e=>{n.altTextField.items.items[0].setValue(e.content),n.altTextField.items.items[0].el.dom.scrollTop=n.altTextField.items.items[0].el.dom.scrollHeight,n.image.altTag=e.content,n.updateValue()}));n.altTextField.items.items[0].setValue(e.content),n.image.altTag=e.content,n.updateValue(),s()}catch(e){s(),Ext.Msg.alert("Failed",_("modai.cmp.failed_try_again",{msg:e.message}))}})),n.altTextField.el.dom.style.display="flex",n.altTextField.el.dom.style.justifyItems="center",n.altTextField.el.dom.style.alignItems="center",n.el.dom.parentElement.parentElement.parentElement.querySelector("label").appendChild(o),n.altTextField.el.dom.appendChild(a)};Ext.onReady((function(){Ext.defer((function(){(()=>{const e={pagetitle:["modx-resource-pagetitle"],longtitle:["modx-resource-longtitle","seosuite-longtitle"],introtext:["modx-resource-introtext"],description:["modx-resource-description","seosuite-description"],content:["modx-resource-content"]};for(const t of modAI?.resourceFields||[])e[t]&&("content"!==t?e[t].forEach((e=>{ge(e,`res.${t}`)})):Ext.getCmp("modx-resource-content").el.dom.querySelector("label").appendChild(le("res.content")))})(),(()=>{const e=Ext.getCmp("modx-panel-resource").getForm();for(const[t,n]of modAI?.tvs||[]){const o=Ext.get(`tv${t}-tr`);if(!o)continue;const a=e.findField(`tv${t}`),i=`tv.${n}`;if(a){if("textfield"===a.xtype||"textarea"===a.xtype){const e=MODx.config[`modai.tv.${n}.text.prompt`],t=o.dom.querySelector("label");if(!t)return;e?t.appendChild(ce(a,i)):t.appendChild(le(i))}if("modx-panel-tv-image"===a.xtype){const e=pe(a.source,i,(function(e){const t={relativeUrl:e.ctx.url,url:e.ctx.url};a.items.items[1].fireEvent("select",t),a.fireEvent("select",t)})),t=o.dom.querySelector("label");if(!t)return;t.appendChild(e)}}else{const e=o.dom.querySelector(".imageplus-panel-input");e&&me(e,i)}}})()}),500)}));const ue={};return t})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WkEsRUFBTVMsWUFBWXlOLEVBQ3RCLENBbkNBLEtBTkEsQ0FDSSxNQUFNSyxFQUFlMUMsRUFBUWMsSUFBSWdELGNBQWMsMEJBQzNDcEIsR0FDQUQsR0FBZ0JDLEVBQWNkLEVBR3RDLENBb0NKLEdBcUNRc0QsRUFDSixHQUFHLElBQ1AsSUNuYUcsTUFBTSxHQUFTLENBQUMsRSIsInNvdXJjZXMiOlsid2VicGFjazovL21vZEFJL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9tb2RBSS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9tb2RBSS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vbW9kQUkvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9tb2RBSS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL21vZEFJLy4vX2J1aWxkL2pzL3NyYy9leGVjdXRvci50cyIsIndlYnBhY2s6Ly9tb2RBSS8uL19idWlsZC9qcy9zcmMvaGlzdG9yeS50cyIsIndlYnBhY2s6Ly9tb2RBSS8uL19idWlsZC9qcy9zcmMvdWkvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vbW9kQUkvLi9fYnVpbGQvanMvc3JjL2NoYXRIaXN0b3J5LnRzIiwid2VicGFjazovL21vZEFJLy4vX2J1aWxkL2pzL3NyYy91aS9hY3Rpb25CdXR0b24udHMiLCJ3ZWJwYWNrOi8vbW9kQUkvLi9fYnVpbGQvanMvc3JjL3VpL21vZGFsLnRzIiwid2VicGFjazovL21vZEFJLy4vX2J1aWxkL2pzL3NyYy91aS9pZnJhbWUudHMiLCJ3ZWJwYWNrOi8vbW9kQUkvLi9fYnVpbGQvanMvc3JjL3VpL292ZXJsYXkudHMiLCJ3ZWJwYWNrOi8vbW9kQUkvLi9fYnVpbGQvanMvc3JjL3VpL2luZGV4LnRzIiwid2VicGFjazovL21vZEFJLy4vX2J1aWxkL2pzL3NyYy9yZXNvdXJjZS50cyIsIndlYnBhY2s6Ly9tb2RBSS8uL19idWlsZC9qcy9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wibW9kQUlcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wibW9kQUlcIl0gPSBmYWN0b3J5KCk7XG59KShzZWxmLCAoKSA9PiB7XG5yZXR1cm4gIiwiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJ0eXBlIFNlcnZpY2VUeXBlID0gJ2NoYXRncHQnIHwgJ2NsYXVkZScgfCAnZ2VtaW5pJztcbnR5cGUgQnVmZmVyTW9kZSA9ICdidWZmZXJlZCcgfCAnc3RyZWFtJztcblxuZXhwb3J0IHR5cGUgU2VydmljZVJlc3BvbnNlID0gVGV4dERhdGEgfCBJbWFnZURhdGE7XG5cbnR5cGUgU2VydmljZUhhbmRsZXJzID0ge1xuICAgIGJ1ZmZlcmVkOiB7XG4gICAgICAgIGNoYXRncHQ6IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IChkYXRhOiBhbnkpID0+IFRleHREYXRhO1xuICAgICAgICAgICAgaW1hZ2U6IChkYXRhOiBhbnkpID0+IEltYWdlRGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgY2xhdWRlOiB7XG4gICAgICAgICAgICBjb250ZW50OiAoZGF0YTogYW55KSA9PiBUZXh0RGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgZ2VtaW5pOiB7XG4gICAgICAgICAgICBjb250ZW50OiAoZGF0YTogYW55KSA9PiBUZXh0RGF0YTtcbiAgICAgICAgICAgIGltYWdlOiAoZGF0YTogYW55KSA9PiBJbWFnZURhdGE7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBzdHJlYW06IHtcbiAgICAgICAgY2hhdGdwdDoge1xuICAgICAgICAgICAgY29udGVudDogKG5ld0RhdGE6IGFueSwgY3VycmVudERhdGE6IFRleHREYXRhKSA9PiBUZXh0RGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgY2xhdWRlOiB7XG4gICAgICAgICAgICBjb250ZW50OiAobmV3RGF0YTogYW55LCBjdXJyZW50RGF0YTogVGV4dERhdGEpID0+IFRleHREYXRhO1xuICAgICAgICB9O1xuICAgICAgICBnZW1pbmk6IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IChuZXdEYXRhOiBhbnksIGN1cnJlbnREYXRhOiBUZXh0RGF0YSkgPT4gVGV4dERhdGE7XG4gICAgICAgIH07XG4gICAgfTtcbn1cblxudHlwZSBGb3JFeGVjdXRvciA9IHtcbiAgICB1cmw6IHN0cmluZztcbiAgICBib2R5OiBzdHJpbmc7XG4gICAgc2VydmljZTogc3RyaW5nO1xuICAgIGhlYWRlcnM6IEhlYWRlcnNJbml0O1xuICAgIHBhcnNlcjogc3RyaW5nO1xuICAgIHN0cmVhbTogYm9vbGVhbjtcbn07XG5cbnR5cGUgRXhlY3V0b3JEYXRhID0ge1xuICAgIGZvckV4ZWN1dG9yOiBGb3JFeGVjdXRvcjtcbn0gfCBzdHJpbmc7XG5cbnR5cGUgRnJlZVRleHRQYXJhbXMgPSB7XG4gICAgcHJvbXB0OiBzdHJpbmc7XG4gICAgZmllbGQ/OiBzdHJpbmc7XG4gICAgY29udGV4dD86IHN0cmluZztcbiAgICBuYW1lc3BhY2U/OiBzdHJpbmc7XG4gICAgbWVzc2FnZXM6IHtyb2xlOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZ31bXTtcbn1cblxudHlwZSBUZXh0UGFyYW1zID0ge1xuICAgIGZpZWxkPzogc3RyaW5nO1xuICAgIG5hbWVzcGFjZT86IHN0cmluZztcbiAgICBpZDogc3RyaW5nIHwgbnVtYmVyO1xufVxuXG50eXBlIFZpc2lvblBhcmFtcyA9IHtcbiAgICBmaWVsZD86IHN0cmluZztcbiAgICBuYW1lc3BhY2U/OiBzdHJpbmc7XG4gICAgaW1hZ2U6IHN0cmluZztcbn1cblxudHlwZSBJbWFnZVBhcmFtcyA9IHtcbiAgICBwcm9tcHQ6IHN0cmluZztcbiAgICBmaWVsZD86IHN0cmluZztcbiAgICBuYW1lc3BhY2U/OiBzdHJpbmc7XG59XG5cbnR5cGUgRG93bmxvYWRJbWFnZVBhcmFtcyA9IHtcbiAgICB1cmw6IHN0cmluZ1xuICAgIGZpZWxkPzogc3RyaW5nO1xuICAgIG5hbWVzcGFjZT86IHN0cmluZztcbiAgICByZXNvdXJjZT86IHN0cmluZyB8IG51bWJlcjtcbiAgICBtZWRpYVNvdXJjZT86IHN0cmluZyB8IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIFRleHREYXRhID0ge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgY29udGVudDogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSBJbWFnZURhdGEgPSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICB1cmw6IHN0cmluZztcbn1cblxudHlwZSBDaHVua1N0cmVhbTxEID0gdW5rbm93bj4gPSAoZGF0YTogRCkgPT4gdm9pZDtcblxuY29uc3Qgc2VydmljZXM6IFNlcnZpY2VIYW5kbGVycyA9IHtcbiAgICBidWZmZXJlZDoge1xuICAgICAgICBjaGF0Z3B0OiB7XG4gICAgICAgICAgICBjb250ZW50OiAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkYXRhPy5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2U/LmNvbnRlbnQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKF8oJ21vZGFpLmNtcC5mYWlsZWRfcmVxdWVzdCcpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IGRhdGEuaWQ7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW1hZ2U6IChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXJsID0gZGF0YT8uZGF0YT8uWzBdPy51cmw7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXVybCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXygnbW9kYWkuY21wLmZhaWxlZF9yZXF1ZXN0JykpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBgY2hhdGdwdC0ke0RhdGUubm93KCl9LSR7TWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKjEwMDApfWAsXG4gICAgICAgICAgICAgICAgICAgIHVybFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2xhdWRlOiB7XG4gICAgICAgICAgICBjb250ZW50OiAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkYXRhPy5jb250ZW50Py5bMF0/LnRleHQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKF8oJ21vZGFpLmNtcC5mYWlsZWRfcmVxdWVzdCcpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IGRhdGEuaWQ7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGdlbWluaToge1xuICAgICAgICAgICAgY29udGVudDogKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZGF0YT8uY2FuZGlkYXRlcz8uWzBdPy5jb250ZW50Py5wYXJ0cz8uWzBdPy50ZXh0O1xuXG4gICAgICAgICAgICAgICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihfKCdtb2RhaS5jbXAuZmFpbGVkX3JlcXVlc3QnKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGBnZW1pbmktJHtEYXRlLm5vdygpfS0ke01hdGgucm91bmQoTWF0aC5yYW5kb20oKSoxMDAwKX1gLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpbWFnZTogKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlNjQgPSBkYXRhPy5wcmVkaWN0aW9ucz8uWzBdPy5ieXRlc0Jhc2U2NEVuY29kZWQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXygnbW9kYWkuY21wLmZhaWxlZF9yZXF1ZXN0JykpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBgZ2VtaW5pLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkqMTAwMCl9YCxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBgZGF0YTppbWFnZS9wbmc7YmFzZTY0LCR7YmFzZTY0fWBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHN0cmVhbToge1xuICAgICAgICBjaGF0Z3B0OiB7XG4gICAgICAgICAgICBjb250ZW50OiAobmV3RGF0YSwgY3VycmVudERhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50Q29udGVudCA9IGN1cnJlbnREYXRhPy5jb250ZW50ID8/ICcnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBuZXdEYXRhLmNob2ljZXNbMF0/LmRlbHRhPy5jb250ZW50IHx8ICcnO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudERhdGEsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBuZXdEYXRhLmlkLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBgJHtjdXJyZW50Q29udGVudH0ke2NvbnRlbnR9YFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNsYXVkZToge1xuICAgICAgICAgICAgY29udGVudDogKG5ld0RhdGEsIGN1cnJlbnREYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudENvbnRlbnQgPSBjdXJyZW50RGF0YT8uY29udGVudCA/PyAnJztcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBuZXdEYXRhLmRlbHRhPy50ZXh0IHx8ICcnO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudERhdGEsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGAke2N1cnJlbnRDb250ZW50fSR7Y29udGVudH1gXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZ2VtaW5pOiB7XG4gICAgICAgICAgICBjb250ZW50OiAobmV3RGF0YSwgY3VycmVudERhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50Q29udGVudCA9IGN1cnJlbnREYXRhPy5jb250ZW50ID8/ICcnO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IG5ld0RhdGEuY2FuZGlkYXRlc1swXT8uY29udGVudD8ucGFydHNbMF0/LnRleHQgfHwgJyc7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogYCR7Y3VycmVudENvbnRlbnR9JHtjb250ZW50fWBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbn07XG5cbmNvbnN0IGVycm9ySGFuZGxlciA9IGFzeW5jIChyZXM6IFJlc3BvbnNlKSA9PiB7XG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGlmIChkYXRhPy5lcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEuZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH1gKTtcbiAgICB9XG59XG5cbmNvbnN0IGhhbmRsZVN0cmVhbSA9IGFzeW5jIChyZXM6IFJlc3BvbnNlLCBzZXJ2aWNlOiBzdHJpbmcsIHBhcnNlcjogJ2NvbnRlbnQnLCBvbkNodW5rU3RyZWFtPzogQ2h1bmtTdHJlYW08VGV4dERhdGE+LCBzaWduYWw/OiBBYm9ydFNpZ25hbCk6IFByb21pc2U8VGV4dERhdGE+ID0+IHtcbiAgICBpZiAoIXJlcy5ib2R5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignZmFpbGVkJyk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVhZGVyID0gcmVzLmJvZHkuZ2V0UmVhZGVyKCk7XG4gICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKTtcbiAgICBsZXQgYnVmZmVyID0gJyc7XG4gICAgbGV0IGN1cnJlbnREYXRhOiBUZXh0RGF0YSA9IHtcbiAgICAgICAgaWQ6IGAke3NlcnZpY2V9LSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkqMTAwMCl9YCxcbiAgICAgICAgY29udGVudDogJycsXG4gICAgfTtcblxuXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgaWYgKHNpZ25hbCAmJiBzaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7ZG9uZSwgdmFsdWV9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgaWYgKGRvbmUpIGJyZWFrO1xuXG4gICAgICAgIGNvbnN0IGNodW5rID0gZGVjb2Rlci5kZWNvZGUodmFsdWUsIHtzdHJlYW06IHRydWV9KTtcblxuICAgICAgICBpZiAoc2VydmljZSA9PT0gJ2dlbWluaScpIHtcbiAgICAgICAgICAgIGNvbnN0IGpzb25MaW5lcyA9IGNodW5rLnRyaW0oKS5zcGxpdChcIixcXHJcXG5cIikubWFwKChsaW5lKSA9PiBsaW5lLnJlcGxhY2UoL15cXFt8XSQvZywgJycpKS5maWx0ZXIobGluZSA9PiBsaW5lLnRyaW0oKSAhPT0gJycpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGpzb25MaW5lcykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSBKU09OLnBhcnNlKGxpbmUpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGF0YSA9IHNlcnZpY2VzLnN0cmVhbVtzZXJ2aWNlXVtwYXJzZXJdKHBhcnNlZERhdGEsIGN1cnJlbnREYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9uQ2h1bmtTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2h1bmtTdHJlYW0oY3VycmVudERhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlcnZpY2UgPT09ICdjaGF0Z3B0Jykge1xuICAgICAgICAgICAgYnVmZmVyICs9IGNodW5rO1xuXG4gICAgICAgICAgICBsZXQgbGFzdE5ld2xpbmVJbmRleCA9IDA7XG4gICAgICAgICAgICBsZXQgbmV3bGluZUluZGV4O1xuXG4gICAgICAgICAgICB3aGlsZSAoKG5ld2xpbmVJbmRleCA9IGJ1ZmZlci5pbmRleE9mKCdcXG4nLCBsYXN0TmV3bGluZUluZGV4KSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IGJ1ZmZlci5zbGljZShsYXN0TmV3bGluZUluZGV4LCBuZXdsaW5lSW5kZXgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBsYXN0TmV3bGluZUluZGV4ID0gbmV3bGluZUluZGV4ICsgMTtcblxuICAgICAgICAgICAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJ2RhdGE6ICcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBsaW5lLnNsaWNlKDYpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhID09PSAnW0RPTkVdJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGF0YSA9IHNlcnZpY2VzLnN0cmVhbVtzZXJ2aWNlXVtwYXJzZXJdKHBhcnNlZERhdGEsIGN1cnJlbnREYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkNodW5rU3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaHVua1N0cmVhbShjdXJyZW50RGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBidWZmZXIgPSBidWZmZXIuc2xpY2UobGFzdE5ld2xpbmVJbmRleCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VydmljZSA9PT0gJ2NsYXVkZScpIHtcbiAgICAgICAgICAgIGJ1ZmZlciArPSBjaHVuaztcblxuICAgICAgICAgICAgbGV0IGxhc3ROZXdsaW5lSW5kZXggPSAwO1xuICAgICAgICAgICAgbGV0IG5ld2xpbmVJbmRleDtcblxuICAgICAgICAgICAgd2hpbGUgKChuZXdsaW5lSW5kZXggPSBidWZmZXIuaW5kZXhPZignXFxuJywgbGFzdE5ld2xpbmVJbmRleCkpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBidWZmZXIuc2xpY2UobGFzdE5ld2xpbmVJbmRleCwgbmV3bGluZUluZGV4KS50cmltKCk7XG4gICAgICAgICAgICAgICAgbGFzdE5ld2xpbmVJbmRleCA9IG5ld2xpbmVJbmRleCArIDE7XG5cbiAgICAgICAgICAgICAgICBpZiAobGluZS5zdGFydHNXaXRoKCdkYXRhOiAnKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gbGluZS5zbGljZSg2KTtcblxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkRGF0YS50eXBlID09PSAnbWVzc2FnZV9zdGFydCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGF0YS5pZCA9IHBhcnNlZERhdGEubWVzc2FnZS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZERhdGEudHlwZSAhPT0gJ2NvbnRlbnRfYmxvY2tfZGVsdGEnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREYXRhID0gc2VydmljZXMuc3RyZWFtW3NlcnZpY2VdW3BhcnNlcl0ocGFyc2VkRGF0YSwgY3VycmVudERhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uQ2h1bmtTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNodW5rU3RyZWFtKGN1cnJlbnREYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCB7fVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnVmZmVyID0gYnVmZmVyLnNsaWNlKGxhc3ROZXdsaW5lSW5kZXgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGN1cnJlbnREYXRhO1xuXG59XG5cbmNvbnN0IHNlcnZpY2VFeGVjdXRvciA9IGFzeW5jIDxEIGV4dGVuZHMgU2VydmljZVJlc3BvbnNlPihkZXRhaWxzOiBFeGVjdXRvckRhdGEsIG9uQ2h1bmtTdHJlYW0/OiBDaHVua1N0cmVhbTxEPiwgY29udHJvbGxlcj86IEFib3J0Q29udHJvbGxlcik6IFByb21pc2U8RD4gPT4ge1xuICAgIGlmICh0eXBlb2YgZGV0YWlscyAhPT0gJ29iamVjdCcgfHwgIWRldGFpbHMuZm9yRXhlY3V0b3IpIHtcbiAgICAgICAgcmV0dXJuIGRldGFpbHMgYXMgdW5rbm93biBhcyBEO1xuICAgIH1cblxuICAgIGNvbnN0IGV4ZWN1dG9yRGV0YWlscyA9IGRldGFpbHMuZm9yRXhlY3V0b3I7XG5cbiAgICBjb250cm9sbGVyID0gIWNvbnRyb2xsZXIgPyBuZXcgQWJvcnRDb250cm9sbGVyKCkgOiBjb250cm9sbGVyO1xuICAgIGNvbnN0IHNpZ25hbCA9IGNvbnRyb2xsZXIuc2lnbmFsO1xuXG4gICAgY29uc3QgY2FsbFNlcnZpY2UgPSBhc3luYyAoZGV0YWlsczogRm9yRXhlY3V0b3IpID0+IHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goZGV0YWlscy51cmwsIHtcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgYm9keTogZGV0YWlscy5ib2R5LFxuICAgICAgICAgICAgaGVhZGVyczogZGV0YWlscy5oZWFkZXJzXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF3YWl0IGVycm9ySGFuZGxlcihyZXMpO1xuXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgICAgIGlmIChkYXRhLmVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5lcnJvci5tZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIGNvbnN0IGNhbGxTdHJlYW1TZXJ2aWNlID0gYXN5bmMgKGRldGFpbHM6IEZvckV4ZWN1dG9yKSA9PiB7XG4gICAgICAgIGlmIChleGVjdXRvckRldGFpbHMucGFyc2VyICE9PSAnY29udGVudCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihfKCdtb2RhaS5jbXAuc2VydmljZV91bnN1cHBvcnRlZCcpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGRldGFpbHMudXJsLCB7XG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGJvZHk6IGRldGFpbHMuYm9keSxcbiAgICAgICAgICAgIGhlYWRlcnM6IGRldGFpbHMuaGVhZGVyc1xuICAgICAgICB9KTtcblxuICAgICAgICBhd2FpdCBlcnJvckhhbmRsZXIocmVzKTtcblxuICAgICAgICByZXR1cm4gaGFuZGxlU3RyZWFtKHJlcywgZXhlY3V0b3JEZXRhaWxzLnNlcnZpY2UsIGV4ZWN1dG9yRGV0YWlscy5wYXJzZXIsIG9uQ2h1bmtTdHJlYW0gYXMgQ2h1bmtTdHJlYW08VGV4dERhdGE+KTtcbiAgICB9XG5cbiAgICBpZiAoIWV4ZWN1dG9yRGV0YWlscy5zZXJ2aWNlIHx8ICFleGVjdXRvckRldGFpbHMucGFyc2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihfKCdtb2RhaS5jbXAuc2VydmljZV9yZXF1aXJlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAoIXNlcnZpY2VzW2V4ZWN1dG9yRGV0YWlscy5zdHJlYW0gPyAnc3RyZWFtJyA6ICdidWZmZXJlZCcgYXMgQnVmZmVyTW9kZV0/LltleGVjdXRvckRldGFpbHMuc2VydmljZSBhcyBTZXJ2aWNlVHlwZV0/LltleGVjdXRvckRldGFpbHMucGFyc2VyIGFzIGtleW9mIFNlcnZpY2VIYW5kbGVyc1tCdWZmZXJNb2RlXVtTZXJ2aWNlVHlwZV1dKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihfKCdtb2RhaS5jbXAuc2VydmljZV91bnN1cHBvcnRlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAoZXhlY3V0b3JEZXRhaWxzLnN0cmVhbSkge1xuICAgICAgICByZXR1cm4gY2FsbFN0cmVhbVNlcnZpY2UoZXhlY3V0b3JEZXRhaWxzKSBhcyBQcm9taXNlPEQ+O1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjYWxsU2VydmljZShleGVjdXRvckRldGFpbHMpO1xuICAgIHJldHVybiBzZXJ2aWNlc1snYnVmZmVyZWQnXVtleGVjdXRvckRldGFpbHMuc2VydmljZSBhcyBTZXJ2aWNlVHlwZV1bZXhlY3V0b3JEZXRhaWxzLnBhcnNlciBhcyBrZXlvZiBTZXJ2aWNlSGFuZGxlcnNbJ2J1ZmZlcmVkJ11bU2VydmljZVR5cGVdXShkYXRhKSBhcyBEO1xufVxuXG5jb25zdCBtb2R4RmV0Y2ggPSBhc3luYyA8Uj4oYWN0aW9uOiBzdHJpbmcsIHBhcmFtczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHttb2RBSS5hcGlVUkx9P2FjdGlvbj0ke2FjdGlvbn1gLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXJhbXMpLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICBpZiAoZGF0YS5lcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEuZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5kZXRhaWwpO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCByZXMuanNvbigpIGFzIFI7XG59XG5cbmNvbnN0IGFpRmV0Y2ggPSBhc3luYyA8RCBleHRlbmRzIFNlcnZpY2VSZXNwb25zZT4oYWN0aW9uOiBzdHJpbmcsIHBhcmFtczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sIG9uQ2h1bmtTdHJlYW0/OiBDaHVua1N0cmVhbTxEPiwgY29udHJvbGxlcj86IEFib3J0Q29udHJvbGxlcik6IFByb21pc2U8RD4gPT4ge1xuICAgIGNvbnRyb2xsZXIgPSAhY29udHJvbGxlciA/IG5ldyBBYm9ydENvbnRyb2xsZXIoKSA6IGNvbnRyb2xsZXI7XG4gICAgY29uc3Qgc2lnbmFsID0gY29udHJvbGxlci5zaWduYWw7XG5cbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHttb2RBSS5hcGlVUkx9P2FjdGlvbj0ke2FjdGlvbn1gLCB7XG4gICAgICAgIHNpZ25hbCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBhcmFtcyksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGlmIChkYXRhLmVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5lcnJvci5tZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLmRldGFpbCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2VydmljZSA9IHJlcy5oZWFkZXJzLmdldCgneC1tb2RhaS1zZXJ2aWNlJykgPz8gJ2NoYXRncHQnO1xuICAgIGNvbnN0IHBhcnNlciA9IHJlcy5oZWFkZXJzLmdldCgneC1tb2RhaS1wYXJzZXInKSA/PyAnY29udGVudCc7XG4gICAgY29uc3Qgc3RyZWFtID0gcGFyc2VJbnQocmVzLmhlYWRlcnMuZ2V0KCd4LW1vZGFpLXN0cmVhbScpID8/ICcwJykgPT09IDE7XG4gICAgY29uc3QgcHJveHkgPSBwYXJzZUludChyZXMuaGVhZGVycy5nZXQoJ3gtbW9kYWktcHJveHknKSA/PyAnMCcpID09PSAxO1xuXG4gICAgaWYgKCFwcm94eSkge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHNlcnZpY2VFeGVjdXRvcjxEPihkYXRhLCBvbkNodW5rU3RyZWFtLCBjb250cm9sbGVyKTtcbiAgICB9XG5cbiAgICBpZiAoIXNlcnZpY2UgfHwgIXBhcnNlcikge1xuICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihfKCdtb2RhaS5jbXAuc2VydmljZV9yZXF1aXJlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAoIXNlcnZpY2VzW3N0cmVhbSA/ICdzdHJlYW0nIDogJ2J1ZmZlcmVkJyBhcyBCdWZmZXJNb2RlXT8uW3NlcnZpY2UgYXMgU2VydmljZVR5cGVdPy5bcGFyc2VyIGFzIGtleW9mIFNlcnZpY2VIYW5kbGVyc1tCdWZmZXJNb2RlXVtTZXJ2aWNlVHlwZV1dKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKF8oJ21vZGFpLmNtcC5zZXJ2aWNlX3Vuc3VwcG9ydGVkJykpO1xuICAgIH1cblxuICAgIGlmICghc3RyZWFtKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICByZXR1cm4gc2VydmljZXNbJ2J1ZmZlcmVkJ11bc2VydmljZSBhcyBTZXJ2aWNlVHlwZV1bcGFyc2VyIGFzIGtleW9mIFNlcnZpY2VIYW5kbGVyc1snYnVmZmVyZWQnXVtTZXJ2aWNlVHlwZV1dKGRhdGEpIGFzIEQ7XG4gICAgfVxuXG4gICAgaWYgKHBhcnNlciAhPT0gJ2NvbnRlbnQnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihfKCdtb2RhaS5jbXAuc2VydmljZV91bnN1cHBvcnRlZCcpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXdhaXQgaGFuZGxlU3RyZWFtKHJlcywgc2VydmljZSwgcGFyc2VyLCBvbkNodW5rU3RyZWFtIGFzIENodW5rU3RyZWFtPFRleHREYXRhPiwgc2lnbmFsKSBhcyBEO1xufVxuXG5leHBvcnQgY29uc3QgZXhlY3V0b3IgPSB7XG4gICAgbWdyOiB7XG4gICAgICAgIGRvd25sb2FkOiB7XG4gICAgICAgICAgICBpbWFnZTogYXN5bmMgKHBhcmFtczogRG93bmxvYWRJbWFnZVBhcmFtcykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBtb2R4RmV0Y2g8e3VybDogc3RyaW5nOyBmdWxsVXJsOiBzdHJpbmd9PignRG93bmxvYWRcXFxcSW1hZ2UnLCBwYXJhbXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBwcm9tcHQ6IHtcbiAgICAgICAgICAgIGZyZWVUZXh0OiBhc3luYyAocGFyYW1zOiBGcmVlVGV4dFBhcmFtcywgb25DaHVua1N0cmVhbT86IENodW5rU3RyZWFtPFRleHREYXRhPiwgY29udHJvbGxlcj86IEFib3J0Q29udHJvbGxlcikgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBhaUZldGNoKCdQcm9tcHRcXFxcRnJlZVRleHQnLCBwYXJhbXMsIG9uQ2h1bmtTdHJlYW0sIGNvbnRyb2xsZXIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRleHQ6IGFzeW5jIChwYXJhbXM6IFRleHRQYXJhbXMsIG9uQ2h1bmtTdHJlYW0/OiBDaHVua1N0cmVhbTxUZXh0RGF0YT4sIGNvbnRyb2xsZXI/OiBBYm9ydENvbnRyb2xsZXIpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWlGZXRjaCgnUHJvbXB0XFxcXFRleHQnLCBwYXJhbXMsIG9uQ2h1bmtTdHJlYW0sIGNvbnRyb2xsZXIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZpc2lvbjogYXN5bmMgKHBhcmFtczogVmlzaW9uUGFyYW1zLCBvbkNodW5rU3RyZWFtPzogQ2h1bmtTdHJlYW08VGV4dERhdGE+LCBjb250cm9sbGVyPzogQWJvcnRDb250cm9sbGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFpRmV0Y2goJ1Byb21wdFxcXFxWaXNpb24nLCBwYXJhbXMsIG9uQ2h1bmtTdHJlYW0sIGNvbnRyb2xsZXIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGltYWdlOiBhc3luYyAocGFyYW1zOiBJbWFnZVBhcmFtcywgY29udHJvbGxlcj86IEFib3J0Q29udHJvbGxlcikgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBhaUZldGNoPEltYWdlRGF0YT4oJ1Byb21wdFxcXFxJbWFnZScsIHBhcmFtcywgdW5kZWZpbmVkLCBjb250cm9sbGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuIiwidHlwZSBDYWNoZTxDID0gdW5rbm93bj4gPSB7XG4gICAgdmlzaWJsZTogbnVtYmVyO1xuICAgIHZhbHVlczogc3RyaW5nW107XG4gICAgY29udGV4dDogQztcbiAgICBzeW5jVUk/OiAoZGF0YTogRGF0YU91dHB1dDxDPiwgbm9TdG9yZT86IGJvb2xlYW4pID0+IHZvaWQ7XG59XG5cbmV4cG9ydCB0eXBlIERhdGFPdXRwdXQ8QyA9IHVua25vd24+ID0ge1xuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgbmV4dFN0YXR1czogYm9vbGVhbixcbiAgICBwcmV2U3RhdHVzOiBib29sZWFuLFxuICAgIGN1cnJlbnQ6IG51bWJlcixcbiAgICB0b3RhbDogbnVtYmVyLFxuICAgIGNvbnRleHQ6IEMsXG59XG5cbmNvbnN0IF9jYWNoZTogUmVjb3JkPHN0cmluZywgQ2FjaGU+ID0ge307XG5cbmV4cG9ydCBjb25zdCBoaXN0b3J5ID0ge1xuICAgIF9mb3JtYXRPdXRwdXQoa2V5OiBzdHJpbmcsIHZhbHVlPzogc3RyaW5nKTogRGF0YU91dHB1dCB7XG4gICAgICAgIGNvbnN0IGNhY2hlZEl0ZW0gPSBfY2FjaGVba2V5XTtcblxuICAgICAgICBjb25zdCBwcmV2U3RhdHVzID0gKGNhY2hlZEl0ZW0udmlzaWJsZSA+IDApO1xuICAgICAgICBjb25zdCBuZXh0U3RhdHVzID0gKGNhY2hlZEl0ZW0udmlzaWJsZSAhPT0gY2FjaGVkSXRlbS52YWx1ZXMubGVuZ3RoIC0gMSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiAoY2FjaGVkSXRlbS52YWx1ZXNbY2FjaGVkSXRlbS52aXNpYmxlXSA/PyBudWxsKSxcbiAgICAgICAgICAgIG5leHRTdGF0dXMsXG4gICAgICAgICAgICBwcmV2U3RhdHVzLFxuICAgICAgICAgICAgY3VycmVudDogY2FjaGVkSXRlbS52aXNpYmxlICsgMSxcbiAgICAgICAgICAgIHRvdGFsOiBjYWNoZWRJdGVtLnZhbHVlcy5sZW5ndGgsXG4gICAgICAgICAgICBjb250ZXh0OiBjYWNoZWRJdGVtLmNvbnRleHQsXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGluc2VydChrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZywgbm9TdG9yZTogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IGNhY2hlZEl0ZW0gPSBfY2FjaGVba2V5XTtcblxuICAgICAgICBpZiAoIW5vU3RvcmUpIHtcbiAgICAgICAgICAgIGNhY2hlZEl0ZW0udmlzaWJsZSA9IGNhY2hlZEl0ZW0udmFsdWVzLnB1c2godmFsdWUpIC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHRoaXMuX2Zvcm1hdE91dHB1dChrZXksIHZhbHVlKTtcbiAgICAgICAgaWYgKHR5cGVvZiBjYWNoZWRJdGVtLnN5bmNVSSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkSXRlbS5zeW5jVUkob3V0cHV0LCBub1N0b3JlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfSxcbiAgICBuZXh0KGtleTogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGNhY2hlZEl0ZW0gPSBfY2FjaGVba2V5XTtcblxuICAgICAgICBpZiAoY2FjaGVkSXRlbS52aXNpYmxlID09PSBjYWNoZWRJdGVtLnZhbHVlcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZm9ybWF0T3V0cHV0KGtleSk7XG4gICAgICAgIH1cblxuICAgICAgICBjYWNoZWRJdGVtLnZpc2libGUrKztcblxuICAgICAgICBjb25zdCBvdXRwdXQgPSB0aGlzLl9mb3JtYXRPdXRwdXQoa2V5KTtcblxuICAgICAgICBpZiAodHlwZW9mIGNhY2hlZEl0ZW0uc3luY1VJID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRJdGVtLnN5bmNVSShvdXRwdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9LFxuICAgIHByZXYoa2V5OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgY2FjaGVkSXRlbSA9IF9jYWNoZVtrZXldO1xuXG4gICAgICAgIGlmIChjYWNoZWRJdGVtLnZpc2libGUgPD0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1hdE91dHB1dChrZXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FjaGVkSXRlbS52aXNpYmxlLS07XG5cbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gdGhpcy5fZm9ybWF0T3V0cHV0KGtleSk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjYWNoZWRJdGVtLnN5bmNVSSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkSXRlbS5zeW5jVUkob3V0cHV0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfSxcbiAgICBpbml0PEM+KGtleTogc3RyaW5nLCBzeW5jVUk/OiAoZGF0YTogRGF0YU91dHB1dDxDPiwgbm9TdG9yZT86IGJvb2xlYW4pID0+IHZvaWQsIGluaXRWYWx1ZT86IHN0cmluZywgY29udGV4dD86IEMpIHtcbiAgICAgICAgaWYgKCFfY2FjaGVba2V5XSkge1xuICAgICAgICAgICAgX2NhY2hlW2tleV0gPSB7XG4gICAgICAgICAgICAgICAgdmlzaWJsZTogLTEsXG4gICAgICAgICAgICAgICAgdmFsdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBfY2FjaGVba2V5XS5zeW5jVUkgPSBzeW5jVUk7XG5cbiAgICAgICAgaWYgKGluaXRWYWx1ZSkge1xuICAgICAgICAgICAgX2NhY2hlW2tleV0udmFsdWVzID0gW2luaXRWYWx1ZV07XG4gICAgICAgICAgICBfY2FjaGVba2V5XS52aXNpYmxlID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjYWNoZWRJdGVtOiBfY2FjaGVba2V5XSBhcyBDYWNoZTxDPixcbiAgICAgICAgICAgIGdldERhdGE6ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZm9ybWF0T3V0cHV0KGtleSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0QWxsOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jYWNoZVtrZXldLnZhbHVlcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzeW5jVUk6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIF9jYWNoZVtrZXldLnN5bmNVSSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBfY2FjaGVba2V5XS5zeW5jVUkodGhpcy5fZm9ybWF0T3V0cHV0KGtleSksIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW5zZXJ0OiAodmFsdWU6IHN0cmluZywgbm9TdG9yZTogYm9vbGVhbiA9IGZhbHNlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0KGtleSwgdmFsdWUsIG5vU3RvcmUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5leHQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uZXh0KGtleSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJldjogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByZXYoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59O1xuIiwiZXhwb3J0IGNvbnN0IGFwcGx5U3R5bGVzID0gKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBzdHlsZU9iajogUGFydGlhbDxDU1NTdHlsZURlY2xhcmF0aW9uPikgPT4ge1xuICAgIE9iamVjdC5hc3NpZ24oZWxlbWVudC5zdHlsZSwgc3R5bGVPYmopO1xufVxuXG5leHBvcnQgY29uc3QgY3JlYXRlRWxlbWVudCA9IDxLIGV4dGVuZHMga2V5b2YgSFRNTEVsZW1lbnRUYWdOYW1lTWFwPih0eXBlOiBLLCBzdHlsZU9iaj86IFBhcnRpYWw8Q1NTU3R5bGVEZWNsYXJhdGlvbj4sIHRleHRDb250ZW50OiBzdHJpbmcgPSAnJyk6IEhUTUxFbGVtZW50VGFnTmFtZU1hcFtLXSA9PiB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XG5cbiAgICBpZiAoc3R5bGVPYmopIHtcbiAgICAgICAgYXBwbHlTdHlsZXMoZWxlbWVudCwgc3R5bGVPYmopO1xuICAgIH1cblxuICAgIGlmICh0ZXh0Q29udGVudCkge1xuICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gdGV4dENvbnRlbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cbmV4cG9ydCBjb25zdCBubFRvQnIgPSAoY29udGVudDogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIC88W14+XSo+L2cudGVzdChjb250ZW50KSA/IGNvbnRlbnQgOiBjb250ZW50LnJlcGxhY2UoL1xcclxcbnxcXG58XFxyL2csICc8YnI+Jyk7XG59XG4iLCJleHBvcnQgdHlwZSBNZXNzYWdlVHlwZSA9ICd0ZXh0JyB8ICdpbWFnZSc7XG5cbmV4cG9ydCB0eXBlIFVwZGF0YWJsZUhUTUxFbGVtZW50ID0gSFRNTEVsZW1lbnQgJiB7XG4gICAgdXBkYXRlPzogKG1zZzogTWVzc2FnZSkgPT4gdm9pZFxufTtcblxuZXhwb3J0IHR5cGUgTWVzc2FnZSA9IHtcbiAgICBjb250ZW50OiBzdHJpbmc7XG4gICAgaWQ6IHN0cmluZztcbiAgICBoaWRkZW46IGJvb2xlYW47XG4gICAgcm9sZTogc3RyaW5nO1xuICAgIHR5cGU6IE1lc3NhZ2VUeXBlO1xuICAgIGVsPzogVXBkYXRhYmxlSFRNTEVsZW1lbnQ7XG4gICAgY3R4OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbn07XG5cbnR5cGUgTmFtZXNwYWNlID0ge1xuICAgIGhpc3Rvcnk6IE1lc3NhZ2VbXTtcbiAgICBpZFJlZjogUmVjb3JkPHN0cmluZywgTWVzc2FnZT47XG4gICAgb25BZGRNZXNzYWdlOiAobXNnOiBNZXNzYWdlKSA9PiBVcGRhdGFibGVIVE1MRWxlbWVudCB8IHVuZGVmaW5lZDtcbn07XG5cbmNvbnN0IF9uYW1lc3BhY2U6IFJlY29yZDxzdHJpbmcsIE5hbWVzcGFjZT4gPSB7fTtcblxuY29uc3QgUk9MRVMgPSB7XG4gICAgJ3VzZXInOiAndXNlcicsXG4gICAgJ2Fzc2lzdGFudCc6ICdhc3Npc3RhbnQnLFxufTtcblxuY29uc3QgYWRkTWVzc2FnZSA9IChrZXk6IHN0cmluZywgY29udGVudDogc3RyaW5nLCByb2xlOiBzdHJpbmcsIGlkOiBzdHJpbmcsIGhpZGRlbjogYm9vbGVhbiA9IGZhbHNlLCB0eXBlOiBNZXNzYWdlVHlwZSA9ICd0ZXh0JykgPT4ge1xuICAgIGNvbnN0IG5hbWVzcGFjZSA9IF9uYW1lc3BhY2Vba2V5XTtcbiAgICBpZiAoIW5hbWVzcGFjZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbXNnT2JqZWN0OiBNZXNzYWdlID0ge2NvbnRlbnQsIHJvbGUsIGlkLCBoaWRkZW4sIHR5cGUsIGN0eDoge319O1xuXG4gICAgY29uc3QgaW5kZXggPSBuYW1lc3BhY2UuaGlzdG9yeS5wdXNoKG1zZ09iamVjdCkgLSAxO1xuICAgIGlmIChpZCkge1xuICAgICAgICBuYW1lc3BhY2UuaWRSZWZbaWRdID0gbmFtZXNwYWNlLmhpc3RvcnlbaW5kZXhdO1xuICAgIH1cblxuICAgIG1zZ09iamVjdC5lbCA9IG5hbWVzcGFjZS5vbkFkZE1lc3NhZ2UobXNnT2JqZWN0KTtcbn1cblxuY29uc3QgdXBkYXRlTWVzc2FnZSA9IChrZXk6IHN0cmluZywgaWQ6IHN0cmluZywgY29udGVudDogc3RyaW5nLCB0eXBlOiBNZXNzYWdlVHlwZSA9ICd0ZXh0JykgPT4ge1xuICAgIGNvbnN0IG5hbWVzcGFjZSA9IF9uYW1lc3BhY2Vba2V5XTtcbiAgICBpZiAoIW5hbWVzcGFjZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFuYW1lc3BhY2UuaWRSZWZbaWRdKSB7XG4gICAgICAgIGFkZE1lc3NhZ2Uoa2V5LCBjb250ZW50LCBST0xFUy5hc3Npc3RhbnQsIGlkLCBmYWxzZSwgdHlwZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtc2cgPSBuYW1lc3BhY2UuaWRSZWZbaWRdO1xuICAgIG1zZy5jb250ZW50ID0gY29udGVudDtcblxuICAgIGlmIChtc2cuZWwgJiYgbXNnLmVsLnVwZGF0ZSkge1xuICAgICAgICBtc2cuZWwudXBkYXRlKG1zZyk7XG4gICAgfVxufVxuXG5jb25zdCBnZXRNZXNzYWdlID0gKGtleTogc3RyaW5nLCBpZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgbmFtZXNwYWNlID0gX25hbWVzcGFjZVtrZXldO1xuICAgIGlmICghbmFtZXNwYWNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gbmFtZXNwYWNlLmlkUmVmW2lkXTtcbn1cblxuZXhwb3J0IGNvbnN0IGNoYXRIaXN0b3J5ID0ge1xuICAgIGluaXQ6IChrZXk6IHN0cmluZywgb25BZGRNZXNzYWdlOiBOYW1lc3BhY2VbJ29uQWRkTWVzc2FnZSddKSA9PiB7XG4gICAgICAgIGlmICghX25hbWVzcGFjZVtrZXldKSB7XG4gICAgICAgICAgICBfbmFtZXNwYWNlW2tleV0gPSB7XG4gICAgICAgICAgICAgICAgaGlzdG9yeTogW10sXG4gICAgICAgICAgICAgICAgaWRSZWY6IHt9LFxuICAgICAgICAgICAgICAgIG9uQWRkTWVzc2FnZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBfbmFtZXNwYWNlW2tleV0ub25BZGRNZXNzYWdlID0gb25BZGRNZXNzYWdlO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhZGRVc2VyTWVzc2FnZTogKGNvbnRlbnQ6IHN0cmluZywgaWQ6IHN0cmluZywgaGlkZGVuPzogYm9vbGVhbiwgdHlwZTogTWVzc2FnZVR5cGUgPSAndGV4dCcpID0+IHtcbiAgICAgICAgICAgICAgICBhZGRNZXNzYWdlKGtleSwgY29udGVudCwgUk9MRVMudXNlciwgaWQsIGhpZGRlbiwgdHlwZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWRkQXNzaXN0YW50TWVzc2FnZTogKGNvbnRlbnQ6IHN0cmluZywgaWQ6IHN0cmluZywgdHlwZTogTWVzc2FnZVR5cGUgPSAndGV4dCcpID0+IHtcbiAgICAgICAgICAgICAgICBhZGRNZXNzYWdlKGtleSwgY29udGVudCwgUk9MRVMuYXNzaXN0YW50LCBpZCwgZmFsc2UsIHR5cGUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVwZGF0ZUFzc2lzdGFudE1lc3NhZ2U6IChpZDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcsIHR5cGU6IE1lc3NhZ2VUeXBlID0gJ3RleHQnKSA9PiB7XG4gICAgICAgICAgICAgICAgdXBkYXRlTWVzc2FnZShrZXksIGlkLCBjb250ZW50LCB0eXBlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRBc3Npc3RhbnRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRNZXNzYWdlKGtleSwgaWQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldE1lc3NhZ2VzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9uYW1lc3BhY2Vba2V5XS5oaXN0b3J5O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldE1lc3NhZ2VzSGlzdG9yeTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBfbmFtZXNwYWNlW2tleV0uaGlzdG9yeS5tYXAoKG0pID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IG0ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogbS5jb250ZW50LFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59O1xuIiwiaW1wb3J0IHthcHBseVN0eWxlcywgY3JlYXRlRWxlbWVudH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7TWVzc2FnZX0gZnJvbSBcIi4uL2NoYXRIaXN0b3J5XCI7XG5pbXBvcnQge01vZGFsfSBmcm9tIFwiLi9tb2RhbFwiO1xuXG50eXBlIEFjdGlvbkJ1dHRvbkNvbmZpZyA9IHtcbiAgICBsYWJlbDogc3RyaW5nO1xuICAgIGljb246IGtleW9mIHR5cGVvZiBpY29ucztcbiAgICBtZXNzYWdlOiBNZXNzYWdlO1xuICAgIGxvYWRpbmdUZXh0Pzogc3RyaW5nO1xuICAgIGNvbXBsZXRlZFRleHQ/OiBzdHJpbmc7XG4gICAgbW9kYWw6IE1vZGFsO1xuICAgIGNvbXBsZXRlZFRleHREdXJhdGlvbj86IG51bWJlcjtcbiAgICBvbkNsaWNrOiAobXNnOiBNZXNzYWdlLCBtb2RhbDogTW9kYWwpID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+O1xuICAgIGRpc2FibGVkPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IHR5cGUgQWN0aW9uQnV0dG9uID0gSFRNTEJ1dHRvbkVsZW1lbnQgJiB7XG4gICAgZGlzYWJsZT86ICgpID0+IHZvaWQ7XG4gICAgZW5hYmxlPzogKCkgPT4gdm9pZDtcbn07XG5cbmNvbnN0IGRlZmF1bHRDb25maWc6IFBhcnRpYWw8QWN0aW9uQnV0dG9uQ29uZmlnPiA9IHtcbiAgICBsb2FkaW5nVGV4dDogJ0xvYWRpbmcuLi4nLFxuICAgIGNvbXBsZXRlZFRleHQ6ICdDb21wbGV0ZWQhJyxcbiAgICBjb21wbGV0ZWRUZXh0RHVyYXRpb246IDIwMDAsXG4gICAgZGlzYWJsZWQ6IGZhbHNlLFxufTtcblxuY29uc3Qgc3R5bGVzID0ge1xuICAgIGFjdGlvbkJ1dHRvbjoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZWRmMmY3JyxcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkICNjYmQ1ZTAnLFxuICAgICAgICBib3JkZXJSYWRpdXM6ICc0cHgnLFxuICAgICAgICBwYWRkaW5nOiAnM3B4IDhweCcsXG4gICAgICAgIGZvbnRTaXplOiAnMTJweCcsXG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICBjb2xvcjogJyM0YTU1NjgnLFxuICAgICAgICBvcGFjaXR5OiAnMScsXG4gICAgfSxcbiAgICBpY29uOiB7XG4gICAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuICAgICAgICB3aWR0aDogJzE0cHgnLFxuICAgICAgICBoZWlnaHQ6ICcxNHB4JyxcbiAgICAgICAgbWFyZ2luUmlnaHQ6ICc1cHgnLFxuICAgICAgICBiYWNrZ3JvdW5kU2l6ZTogJ2NvbnRhaW4nLFxuICAgICAgICBiYWNrZ3JvdW5kUmVwZWF0OiAnbm8tcmVwZWF0JyxcbiAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiAnY2VudGVyJ1xuICAgIH0sXG4gICAgZGlzYWJsZWRCdXR0b246IHtcbiAgICAgICAgb3BhY2l0eTogJzAuNScsXG4gICAgICAgIGN1cnNvcjogJ25vdC1hbGxvd2VkJ1xuICAgIH0sXG59O1xuXG5jb25zdCBpY29ucyA9IHtcbiAgICBjb3B5OiBcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9XFwnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXCcgd2lkdGg9XFwnMTZcXCcgaGVpZ2h0PVxcJzE2XFwnIGZpbGw9XFwnJTIzNGE1NTY4XFwnIHZpZXdCb3g9XFwnMCAwIDE2IDE2XFwnJTNFJTNDcGF0aCBkPVxcJ000IDEuNUgzYTIgMiAwIDAgMC0yIDJWMTRhMiAyIDAgMCAwIDIgMmgxMGEyIDIgMCAwIDAgMi0yVjMuNWEyIDIgMCAwIDAtMi0yaC0xdjFoMWExIDEgMCAwIDEgMSAxVjE0YTEgMSAwIDAgMS0xIDFIM2ExIDEgMCAwIDEtMS0xVjMuNWExIDEgMCAwIDEgMS0xaDF2LTF6XFwnLyUzRSUzQ3BhdGggZD1cXCdNOS41IDFhLjUuNSAwIDAgMSAuNS41djFhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV2LTFhLjUuNSAwIDAgMSAuNS0uNWgzem0tMy0xQTEuNSAxLjUgMCAwIDAgNSAxLjV2MUExLjUgMS41IDAgMCAwIDYuNSA0aDNBMS41IDEuNSAwIDAgMCAxMSAyLjV2LTFBMS41IDEuNSAwIDAgMCA5LjUgMGgtM3pcXCcvJTNFJTNDL3N2ZyUzRVwiLFxuICAgIGluc2VydDogXCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPVxcJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFwnIHdpZHRoPVxcJzE2XFwnIGhlaWdodD1cXCcxNlxcJyBmaWxsPVxcJyUyMzRhNTU2OFxcJyB2aWV3Qm94PVxcJzAgMCAxNiAxNlxcJyUzRSUzQ3BhdGggZD1cXCdNOCAxNUE3IDcgMCAxIDEgOCAxYTcgNyAwIDAgMSAwIDE0em0wIDFBOCA4IDAgMSAwIDggMGE4IDggMCAwIDAgMCAxNnpcXCcvJTNFJTNDcGF0aCBkPVxcJ004IDRhLjUuNSAwIDAgMSAuNS41djNoM2EuNS41IDAgMCAxIDAgMWgtM3YzYS41LjUgMCAwIDEtMSAwdi0zaC0zYS41LjUgMCAwIDEgMC0xaDN2LTNBLjUuNSAwIDAgMSA4IDR6XFwnLyUzRSUzQy9zdmclM0VcIixcbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUFjdGlvbkJ1dHRvbiA9IChjb25maWc6IEFjdGlvbkJ1dHRvbkNvbmZpZykgPT4ge1xuICAgIGNvbmZpZyA9IHtcbiAgICAgICAgLi4uZGVmYXVsdENvbmZpZyxcbiAgICAgICAgLi4uY29uZmlnLFxuICAgIH07XG5cbiAgICBjb25zdCBidXR0b24gPSBjcmVhdGVFbGVtZW50KCdidXR0b24nLCBzdHlsZXMuYWN0aW9uQnV0dG9uKSBhcyBBY3Rpb25CdXR0b247XG4gICAgYnV0dG9uLmNsYXNzTmFtZSA9ICdhY3Rpb24tYnV0dG9uJztcbiAgICBidXR0b24uZW5hYmxlID0gKCkgPT4ge1xuICAgICAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgYXBwbHlTdHlsZXMoYnV0dG9uLCBzdHlsZXMuYWN0aW9uQnV0dG9uKTtcbiAgICB9XG4gICAgYnV0dG9uLmRpc2FibGUgPSAoKSA9PiB7XG4gICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGFwcGx5U3R5bGVzKGJ1dHRvbiwgey4uLnN0eWxlcy5hY3Rpb25CdXR0b24sIC4uLnN0eWxlcy5kaXNhYmxlZEJ1dHRvbn0pO1xuICAgIH1cblxuICAgIGlmIChjb25maWcuZGlzYWJsZWQpIHtcbiAgICAgICAgYnV0dG9uLmRpc2FibGUoKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb3B5SWNvbiA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgIC4uLnN0eWxlcy5pY29uLFxuICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6IGB1cmwoXCIke2ljb25zW2NvbmZpZy5pY29uXX1cIilgXG4gICAgfSk7XG4gICAgYnV0dG9uLmFwcGVuZChjb3B5SWNvbik7XG5cbiAgICBidXR0b24uYXBwZW5kKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNvbmZpZy5sYWJlbCkpO1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxIVE1MID0gYnV0dG9uLmlubmVySFRNTDtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gY29uZmlnLm9uQ2xpY2soY29uZmlnLm1lc3NhZ2UsIGNvbmZpZy5tb2RhbCk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9XCJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDVweDtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEycHg7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTJweDtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlO1xuICAgICAgICAgICAgICAgIFwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDNweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogM3B4O1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogY3VycmVudENvbG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAzcHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDNweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IGN1cnJlbnRDb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogNTAlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLCAtNTAlKTtcbiAgICAgICAgICAgICAgICAgICAgXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDNweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogM3B4O1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogY3VycmVudENvbG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAzcHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDNweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IGN1cnJlbnRDb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogNTAlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsIC01MCUpO1xuICAgICAgICAgICAgICAgICAgICBcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICR7Y29uZmlnLmxvYWRpbmdUZXh0fVxuICAgICAgICAgICAgYDtcblxuICAgICAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSBgXG4gICAgICAgICAgICAgICAgQGtleWZyYW1lcyBzcGluIHtcbiAgICAgICAgICAgICAgICAgICAgZnJvbSB7IHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyB9XG4gICAgICAgICAgICAgICAgICAgIHRvIHsgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcblxuICAgICAgICAgICAgYXdhaXQgcmVzdWx0O1xuXG4gICAgICAgICAgICBkb2N1bWVudC5oZWFkLnJlbW92ZUNoaWxkKHN0eWxlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9XCJtYXJnaW4tcmlnaHQ6IDVweDtcIj7inJM8L3NwYW4+XG4gICAgICAgICAgICAgICAgJHtjb25maWcuY29tcGxldGVkVGV4dH1cbiAgICAgICAgICAgIGA7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAyMDAwKSk7XG4gICAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPSBvcmlnaW5hbEhUTUw7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYnV0dG9uO1xufVxuIiwiaW1wb3J0IHthcHBseVN0eWxlcywgY3JlYXRlRWxlbWVudCwgbmxUb0JyfSBmcm9tIFwiLi91dGlsc1wiO1xuaW1wb3J0IHtjcmVhdGVDb250ZW50SWZyYW1lfSBmcm9tIFwiLi9pZnJhbWVcIjtcbmltcG9ydCB7ZXhlY3V0b3J9IGZyb20gXCIuLi9leGVjdXRvclwiO1xuaW1wb3J0IHtjaGF0SGlzdG9yeSwgTWVzc2FnZSwgVXBkYXRhYmxlSFRNTEVsZW1lbnR9IGZyb20gXCIuLi9jaGF0SGlzdG9yeVwiO1xuaW1wb3J0IHtBY3Rpb25CdXR0b24sIGNyZWF0ZUFjdGlvbkJ1dHRvbn0gZnJvbSBcIi4vYWN0aW9uQnV0dG9uXCI7XG5cbmNvbnN0IG1vZGFsVHlwZXMgPSBbJ3RleHQnLCAnaW1hZ2UnXSBhcyBjb25zdDtcbnR5cGUgTW9kYWxUeXBlID0gKHR5cGVvZiBtb2RhbFR5cGVzKVtudW1iZXJdO1xuXG5leHBvcnQgdHlwZSBNb2RhbENvbmZpZyA9IHtcbiAgICBrZXk6IHN0cmluZztcbiAgICBuYW1lc3BhY2U/OiBzdHJpbmc7XG4gICAgY29udGV4dD86IHN0cmluZztcbiAgICBmaWVsZD86IHN0cmluZztcbiAgICBjdXN0b21DU1M/OiBzdHJpbmdbXTtcbiAgICB0eXBlPzogTW9kYWxUeXBlLFxuICAgIGF2YWlsYWJsZVR5cGVzPzogTW9kYWxUeXBlW10sXG4gICAgcmVzb3VyY2U/OiBudW1iZXI7XG4gICAgaW1hZ2U/OiB7XG4gICAgICAgIG1lZGlhU291cmNlPzogbnVtYmVyO1xuICAgIH07XG4gICAgdGV4dEFjdGlvbnM/OiB7XG4gICAgICAgIGNvcHk/OiBib29sZWFuIHwgKChtc2c6IE1lc3NhZ2UsIG1vZGFsOiBNb2RhbCkgPT4gdm9pZCk7XG4gICAgICAgIGluc2VydD86IChtc2c6IE1lc3NhZ2UsIG1vZGFsOiBNb2RhbCkgPT4gdm9pZDtcbiAgICB9LFxuICAgIGltYWdlQWN0aW9ucz86IHtcbiAgICAgICAgY29weT86IGJvb2xlYW4gfCAoKG1zZzogTWVzc2FnZSwgbW9kYWw6IE1vZGFsKSA9PiB2b2lkKTtcbiAgICAgICAgaW5zZXJ0PzogKG1zZzogTWVzc2FnZSwgbW9kYWw6IE1vZGFsKSA9PiB2b2lkO1xuICAgIH1cbn07XG5cbmV4cG9ydCB0eXBlIE1vZGFsID0gSFRNTERpdkVsZW1lbnQgJiB7XG4gICAgbW9kYWxPdmVybGF5OiBIVE1MRGl2RWxlbWVudDtcbiAgICBjaGF0SGVhZGVyOiBIVE1MRGl2RWxlbWVudDtcbiAgICBjaGF0TWVzc2FnZXM6IEhUTUxEaXZFbGVtZW50O1xuICAgIGxvYWRpbmdJbmRpY2F0b3I6IEhUTUxEaXZFbGVtZW50O1xuXG4gICAgbWVzc2FnZUlucHV0OiBIVE1MVGV4dEFyZWFFbGVtZW50O1xuICAgIHR5cGVTZWxlY3RvcjogSFRNTERpdkVsZW1lbnQ7XG4gICAgdHlwZUJ1dHRvbnM6IHtba2V5OiBzdHJpbmddOiBIVE1MQnV0dG9uRWxlbWVudH07XG5cbiAgICBjbG9zZUJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgc2VuZEJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgdHJ5QWdhaW5CdG46IEhUTUxCdXR0b25FbGVtZW50O1xuICAgIHN0b3BCdG46IEhUTUxCdXR0b25FbGVtZW50O1xuXG4gICAgaXNEcmFnZ2luZzogYm9vbGVhbjtcbiAgICBpc0xvYWRpbmc6IGJvb2xlYW47XG4gICAgYWJvcnRDb250cm9sbGVyPzogQWJvcnRDb250cm9sbGVyO1xuICAgIG9mZnNldFg6IG51bWJlcjtcbiAgICBvZmZzZXRZOiBudW1iZXI7XG5cbiAgICBhcGk6IHtcbiAgICAgICAgc2VuZE1lc3NhZ2U6IChwcm92aWRlZE1lc3NhZ2U/OiBzdHJpbmcsIGhpZGVQcm9tcHQ/OiBib29sZWFuKSA9PiBQcm9taXNlPHZvaWQ+O1xuICAgICAgICBjbG9zZU1vZGFsOiAoKSA9PiB2b2lkO1xuICAgIH1cbn07XG5cbmNvbnN0IHN0eWxlcyA9IHtcbiAgICByZXNldFN0eWxlczoge1xuICAgICAgICBtYXJnaW46ICcwJyxcbiAgICAgICAgcGFkZGluZzogJzAnLFxuICAgICAgICBib3hTaXppbmc6ICdib3JkZXItYm94JyxcbiAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsLCBzYW5zLXNlcmlmJ1xuICAgIH0sXG4gICAgbW9kYWxPdmVybGF5OiB7XG4gICAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICAgICB0b3A6ICcwJyxcbiAgICAgICAgbGVmdDogJzAnLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgwLCAwLCAwLCAwLjMpJyxcbiAgICAgICAgZGlzcGxheTogJ25vbmUnLFxuICAgICAgICB6SW5kZXg6ICcxMDAnXG4gICAgfSxcbiAgICBjaGF0TW9kYWw6IHtcbiAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgICAgIHdpZHRoOiAnMTAwMHB4JyxcbiAgICAgICAgbWluSGVpZ2h0OiAnMTcwcHgnLFxuICAgICAgICBtYXhIZWlnaHQ6ICc2MDBweCcsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmZmYnLFxuICAgICAgICBib3JkZXJSYWRpdXM6ICcxMHB4JyxcbiAgICAgICAgYm94U2hhZG93OiAnMCA1cHggMTVweCByZ2JhKDAsIDAsIDAsIDAuMyknLFxuICAgICAgICBkaXNwbGF5OiAnbm9uZScsXG4gICAgICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgIHpJbmRleDogJzEwMScsXG4gICAgICAgIHRvcDogJzUwJScsXG4gICAgICAgIGxlZnQ6ICc1MCUnLFxuICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoLTUwJSwgLTUwJSknLFxuICAgICAgICB0cmFuc2l0aW9uOiAnaGVpZ2h0IDAuM3MgZWFzZS1pbi1vdXQnXG4gICAgfSxcbiAgICBjaGF0SGVhZGVyOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyMwMEI2REUnLFxuICAgICAgICBjb2xvcjogJ3doaXRlJyxcbiAgICAgICAgcGFkZGluZzogJzE1cHgnLFxuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICBjdXJzb3I6ICdtb3ZlJ1xuICAgIH0sXG4gICAgY2hhdFRpdGxlOiB7XG4gICAgICAgIGZvbnRXZWlnaHQ6ICdib2xkJyxcbiAgICAgICAgZm9udFNpemU6ICcxNnB4J1xuICAgIH0sXG4gICAgY2hhdENvbnRyb2xzOiB7XG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgZ2FwOiAnMTBweCdcbiAgICB9LFxuICAgIGNvbnRyb2xCdXR0b246IHtcbiAgICAgICAgYmFja2dyb3VuZDogJ25vbmUnLFxuICAgICAgICBib3JkZXI6ICdub25lJyxcbiAgICAgICAgY29sb3I6ICd3aGl0ZScsXG4gICAgICAgIGZvbnRTaXplOiAnMTZweCcsXG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInXG4gICAgfSxcbiAgICBjaGF0TWVzc2FnZXM6IHtcbiAgICAgICAgZmxleDogJzEnLFxuICAgICAgICBwYWRkaW5nOiAnMTVweCcsXG4gICAgICAgIG92ZXJmbG93WTogJ2F1dG8nLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZjlmOWY5JyxcbiAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsXG4gICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgIH0sXG4gICAgbWVzc2FnZToge1xuICAgICAgICBtYXJnaW5Cb3R0b206ICcyMHB4JyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnOHB4JyxcbiAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAgIHdvcmRXcmFwOiAnYnJlYWstd29yZCcsXG4gICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnXG4gICAgfSxcbiAgICBhaU1lc3NhZ2U6IHtcbiAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2ZmZmZmZicsXG4gICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCAjZTJlOGYwJyxcbiAgICAgICAgYm94U2hhZG93OiAnMCAycHggNXB4IHJnYmEoMCwgMCwgMCwgMC4wNSknXG4gICAgfSxcbiAgICB1c2VyTWVzc2FnZToge1xuICAgICAgICB3aWR0aDogJ2ZpdC1jb250ZW50JyxcbiAgICAgICAgcGFkZGluZzogJzEwcHggMTVweCcsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyM0Mjk5ZTEnLFxuICAgICAgICBjb2xvcjogJ3doaXRlJyxcbiAgICAgICAgbWFyZ2luTGVmdDogJ2F1dG8nLFxuICAgICAgICBib3JkZXJCb3R0b21SaWdodFJhZGl1czogJzVweCdcbiAgICB9LFxuICAgIG1lc3NhZ2VDb250ZW50OiB7XG4gICAgICAgIHBhZGRpbmc6ICcxMnB4JyxcbiAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgbWF4V2lkdGg6ICcxMDAlJyxcbiAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgICBib3hTaXppbmc6ICdib3JkZXItYm94J1xuICAgIH0sXG4gICAgbWVzc2FnZUFjdGlvbnM6IHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBwYWRkaW5nOiAnOHB4IDEycHgnLFxuICAgICAgICBnYXA6ICc4cHgnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZjdmYWZjJyxcbiAgICAgICAgYm9yZGVyVG9wOiAnMXB4IHNvbGlkICNlMmU4ZjAnLFxuICAgICAgICBib3JkZXJSYWRpdXM6ICcwIDAgOHB4IDhweCdcbiAgICB9LFxuICAgIGFjdGlvbkJ1dHRvbjoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZWRmMmY3JyxcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkICNjYmQ1ZTAnLFxuICAgICAgICBib3JkZXJSYWRpdXM6ICc0cHgnLFxuICAgICAgICBwYWRkaW5nOiAnM3B4IDhweCcsXG4gICAgICAgIGZvbnRTaXplOiAnMTJweCcsXG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICBjb2xvcjogJyM0YTU1NjgnXG4gICAgfSxcbiAgICBjaGF0SW5wdXQ6IHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBwYWRkaW5nOiAnMTVweCcsXG4gICAgICAgIGJvcmRlclRvcDogJzFweCBzb2xpZCAjZTJlOGYwJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnd2hpdGUnLFxuICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJ1xuICAgIH0sXG4gICAgaW5wdXRSb3c6IHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBnYXA6ICcxMHB4J1xuICAgIH0sXG4gICAgaW5wdXRXcmFwcGVyOiB7XG4gICAgICAgIGZsZXg6ICcxJyxcbiAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAgIG1pbkhlaWdodDogJzQ4cHgnLFxuICAgICAgICBtYXhIZWlnaHQ6ICcxNTBweCcsXG4gICAgICAgIGRpc3BsYXk6ICdmbGV4J1xuICAgIH0sXG4gICAgaW5wdXQ6IHtcbiAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgcGFkZGluZzogJzEycHggMTVweCcsXG4gICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCAjZTJlOGYwJyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnMTBweCcsXG4gICAgICAgIG91dGxpbmU6ICdub25lJyxcbiAgICAgICAgZm9udFNpemU6ICcxNHB4JyxcbiAgICAgICAgcmVzaXplOiAnbm9uZScsXG4gICAgICAgIG1pbkhlaWdodDogJzQ4cHgnLFxuICAgICAgICBtYXhIZWlnaHQ6ICcxNTBweCcsXG4gICAgICAgIG92ZXJmbG93WTogJ2F1dG8nLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZmZmJyxcbiAgICAgICAgY3Vyc29yOiAnaW5oZXJpdCdcbiAgICB9LFxuICAgIGJ1dHRvbnNDb2x1bW46IHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcbiAgICAgICAgZ2FwOiAnNHB4JyxcbiAgICAgICAgd2lkdGg6ICcxMDBweCdcbiAgICB9LFxuICAgIHNlbmRCdXR0b246IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzZDQjI0QScsXG4gICAgICAgIGNvbG9yOiAnd2hpdGUnLFxuICAgICAgICBib3JkZXI6ICdub25lJyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnMTJweCcsXG4gICAgICAgIHBhZGRpbmc6ICc4cHggMTZweCcsXG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICBmb250V2VpZ2h0OiAnYm9sZCcsXG4gICAgICAgIGhlaWdodDogJzQwcHgnLFxuICAgICAgICBtaW5XaWR0aDogJzEwMHB4JyxcbiAgICAgICAgZm9udFNpemU6ICcxNHB4JyxcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgICAgICBnYXA6ICc2cHgnLFxuICAgICAgICBvcGFjaXR5OiAnMScsXG4gICAgfSxcbiAgICBhY3Rpb25CdXR0b25zUm93OiB7XG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgZ2FwOiAnNHB4JyxcbiAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJ1xuICAgIH0sXG4gICAgaWNvbkJ1dHRvbjoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCAjZTJlOGYwJyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnOHB4JyxcbiAgICAgICAgd2lkdGg6ICc0OHB4JyxcbiAgICAgICAgaGVpZ2h0OiAnMzJweCcsXG4gICAgICAgIHBhZGRpbmc6ICcwJyxcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICAgICAgdHJhbnNpdGlvbjogJ2JhY2tncm91bmQtY29sb3IgMC4ycycsXG4gICAgICAgIG9wYWNpdHk6ICcxJyxcbiAgICB9LFxuICAgIHNlbmRJY29uOiB7XG4gICAgICAgIHdpZHRoOiAnMTZweCcsXG4gICAgICAgIGhlaWdodDogJzE2cHgnLFxuICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6ICd1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPVxcJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFwnIHZpZXdCb3g9XFwnMCAwIDI0IDI0XFwnIGZpbGw9XFwnd2hpdGVcXCclM0UlM0NwYXRoIGQ9XFwnTTIuMDEgMjFMMjMgMTIgMi4wMSAzIDIgMTBsMTUgMi0xNSAyelxcJy8lM0UlM0Mvc3ZnJTNFXCIpJyxcbiAgICAgICAgYmFja2dyb3VuZFNpemU6ICdjb250YWluJyxcbiAgICAgICAgYmFja2dyb3VuZFJlcGVhdDogJ25vLXJlcGVhdCcsXG4gICAgICAgIGJhY2tncm91bmRQb3NpdGlvbjogJ2NlbnRlcidcbiAgICB9LFxuICAgIHN0b3BJY29uOiB7XG4gICAgICAgIHdpZHRoOiAnMTZweCcsXG4gICAgICAgIGhlaWdodDogJzE2cHgnLFxuICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6ICd1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPVxcJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFwnIHZpZXdCb3g9XFwnMCAwIDI0IDI0XFwnIGZpbGw9XFwnJTIzREMyNjI2XFwnJTNFJTNDcGF0aCBkPVxcJ00wIDBoMjR2MjRIMHpcXCcgZmlsbD1cXCdub25lXFwnLyUzRSUzQ3BhdGggZD1cXCdNNiA2aDEydjEySDZ6XFwnLyUzRSUzQy9zdmclM0VcIiknLFxuICAgICAgICBiYWNrZ3JvdW5kU2l6ZTogJ2NvbnRhaW4nLFxuICAgICAgICBiYWNrZ3JvdW5kUmVwZWF0OiAnbm8tcmVwZWF0JyxcbiAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiAnY2VudGVyJ1xuICAgIH0sXG4gICAgcmVmcmVzaEljb246IHtcbiAgICAgICAgd2lkdGg6ICcxNnB4JyxcbiAgICAgICAgaGVpZ2h0OiAnMTZweCcsXG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogJ3VybChcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9XFwnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXCcgdmlld0JveD1cXCcwIDAgMjQgMjRcXCcgZmlsbD1cXCclMjM0QjU1NjNcXCclM0UlM0NwYXRoIGQ9XFwnTTAgMGgyNHYyNEgwelxcJyBmaWxsPVxcJ25vbmVcXCcvJTNFJTNDcGF0aCBkPVxcJ00xNy42NSA2LjM1QTcuOTU4IDcuOTU4IDAgMCAwIDEyIDRjLTQuNDIgMC03Ljk5IDMuNTgtNy45OSA4czMuNTcgOCA3Ljk5IDhjMy43MyAwIDYuODQtMi41NSA3LjczLTZoLTIuMDhBNS45OSA1Ljk5IDAgMCAxIDEyIDE4Yy0zLjMxIDAtNi0yLjY5LTYtNnMyLjY5LTYgNi02YzEuNjYgMCAzLjE0LjY5IDQuMjIgMS43OEwxMyAxMWg3VjRsLTIuMzUgMi4zNXpcXCcvJTNFJTNDL3N2ZyUzRVwiKScsXG4gICAgICAgIGJhY2tncm91bmRTaXplOiAnY29udGFpbicsXG4gICAgICAgIGJhY2tncm91bmRSZXBlYXQ6ICduby1yZXBlYXQnLFxuICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246ICdjZW50ZXInXG4gICAgfSxcbiAgICBpY29uOiB7XG4gICAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuICAgICAgICB3aWR0aDogJzE0cHgnLFxuICAgICAgICBoZWlnaHQ6ICcxNHB4JyxcbiAgICAgICAgbWFyZ2luUmlnaHQ6ICc1cHgnLFxuICAgICAgICBiYWNrZ3JvdW5kU2l6ZTogJ2NvbnRhaW4nLFxuICAgICAgICBiYWNrZ3JvdW5kUmVwZWF0OiAnbm8tcmVwZWF0JyxcbiAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiAnY2VudGVyJ1xuICAgIH0sXG4gICAgZGlzYWJsZWRCdXR0b246IHtcbiAgICAgICAgb3BhY2l0eTogJzAuNScsXG4gICAgICAgIGN1cnNvcjogJ25vdC1hbGxvd2VkJ1xuICAgIH0sXG4gICAgbG9hZGluZ0lucHV0OiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmM2Y0ZjYnLFxuICAgICAgICBjdXJzb3I6ICdub3QtYWxsb3dlZCdcbiAgICB9LFxuICAgIGxvYWRpbmdJbmRpY2F0b3I6IHtcbiAgICAgICAgZGlzcGxheTogJ25vbmUnLFxuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgdG9wOiAnMCcsXG4gICAgICAgIGxlZnQ6ICcwJyxcbiAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjQzLCAyNDQsIDI0NiwgMC45KScsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzEwcHgnLFxuICAgICAgICBjb2xvcjogJyM2QjcyODAnLFxuICAgICAgICBmb250U2l6ZTogJzE0cHgnLFxuICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgICAgICBnYXA6ICc0cHgnLFxuICAgICAgICBmbGV4RGlyZWN0aW9uOiAncm93JyxcbiAgICAgICAgekluZGV4OiAnMTAnLFxuICAgICAgICBiYWNrZHJvcEZpbHRlcjogJ2JsdXIoMnB4KScsXG4gICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCAjZTJlOGYwJyxcbiAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnXG4gICAgfSxcbiAgICBsb2FkaW5nRG90OiB7XG4gICAgICAgIHdpZHRoOiAnNnB4JyxcbiAgICAgICAgaGVpZ2h0OiAnNnB4JyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzlDQTNBRicsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzUwJScsXG4gICAgICAgIGFuaW1hdGlvbjogJ2xvYWRpbmdEb3RQdWxzZSAxLjRzIGluZmluaXRlJyxcbiAgICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaydcbiAgICB9LFxuICAgIHR5cGVTZWxlY3Rvcjoge1xuICAgICAgICBwYWRkaW5nOiAnNXB4IDE1cHgnLFxuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICBnYXA6ICcxMHB4JyxcbiAgICAgICAgYm9yZGVyVG9wOiAnMXB4IHNvbGlkICNlMmU4ZjAnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZSdcbiAgICB9LFxuICAgIHR5cGVMYWJlbDoge1xuICAgICAgICBmb250U2l6ZTogJzE0cHgnLFxuICAgICAgICBjb2xvcjogJyM0QjU1NjMnLFxuICAgICAgICBmb250V2VpZ2h0OiAnNTAwJ1xuICAgIH0sXG4gICAgdHlwZVRvZ2dsZUdyb3VwOiB7XG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgZ2FwOiAnNHB4J1xuICAgIH0sXG4gICAgdHlwZVRvZ2dsZUJ1dHRvbjoge1xuICAgICAgICBwYWRkaW5nOiAnNnB4IDEycHgnLFxuICAgICAgICBmb250U2l6ZTogJzEzcHgnLFxuICAgICAgICBib3JkZXI6ICcxcHggc29saWQgI2UyZThmMCcsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzZweCcsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmZmYnLFxuICAgICAgICBjb2xvcjogJyM0QjU1NjMnLFxuICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgdHJhbnNpdGlvbjogJ2FsbCAwLjJzJyxcbiAgICAgICAgb3BhY2l0eTogJzEnLFxuICAgIH0sXG4gICAgdHlwZVRvZ2dsZUJ1dHRvbkFjdGl2ZToge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMDBCNkRFJyxcbiAgICAgICAgY29sb3I6ICcjZmZmJyxcbiAgICAgICAgYm9yZGVyQ29sb3I6ICcjMDBCNkRFJ1xuICAgIH0sXG4gICAgZXJyb3JNZXNzYWdlOiB7XG4gICAgICAgIHdpZHRoOiAnZml0LWNvbnRlbnQnLFxuICAgICAgICBwYWRkaW5nOiAnMTBweCAxNXB4JyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0RDMjYyNicsXG4gICAgICAgIGNvbG9yOiAnd2hpdGUnLFxuICAgICAgICBtYXJnaW5MZWZ0OiAnYXV0bycsXG4gICAgICAgIGJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzOiAnNXB4JyxcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgZ2FwOiAnOHB4J1xuICAgIH0sXG4gICAgZXJyb3JJY29uOiB7XG4gICAgICAgIHdpZHRoOiAnMTZweCcsXG4gICAgICAgIGhlaWdodDogJzE2cHgnLFxuICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6ICd1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPVxcJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFwnIHZpZXdCb3g9XFwnMCAwIDI0IDI0XFwnIGZpbGw9XFwnd2hpdGVcXCclM0UlM0NwYXRoIGQ9XFwnTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMFMxNy41MiAyIDEyIDJ6bTEgMTVoLTJ2LTJoMnYyem0wLTRoLTJWN2gydjZ6XFwnLyUzRSUzQy9zdmclM0VcIiknLFxuICAgICAgICBiYWNrZ3JvdW5kU2l6ZTogJ2NvbnRhaW4nLFxuICAgICAgICBiYWNrZ3JvdW5kUmVwZWF0OiAnbm8tcmVwZWF0JyxcbiAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiAnY2VudGVyJ1xuICAgIH0sXG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlTW9kYWwgPSAoY29uZmlnOiBNb2RhbENvbmZpZykgPT4ge1xuICAgIGlmICghY29uZmlnLmtleSkge1xuICAgICAgICBhbGVydCgna2V5IGlzIHJlcXVpcmVkIGNvbmZpZyBwcm9wZXJ0eScpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFjb25maWcudHlwZSkge1xuICAgICAgICBjb25maWcudHlwZSA9ICd0ZXh0JztcbiAgICB9XG5cbiAgICBpZiAoIWNvbmZpZy5hdmFpbGFibGVUeXBlcykge1xuICAgICAgICBjb25maWcuYXZhaWxhYmxlVHlwZXMgPSBbXTtcbiAgICB9XG5cbiAgICBjb25maWcuYXZhaWxhYmxlVHlwZXMgPSBjb25maWcuYXZhaWxhYmxlVHlwZXMuZmlsdGVyKCh0eXBlOiBNb2RhbFR5cGUpID0+IG1vZGFsVHlwZXMuaW5jbHVkZXModHlwZSkpO1xuXG4gICAgaWYgKGNvbmZpZy5hdmFpbGFibGVUeXBlcy5sZW5ndGggPiAwICYmICFjb25maWcuYXZhaWxhYmxlVHlwZXMuaW5jbHVkZXMoY29uZmlnLnR5cGUpKSB7XG4gICAgICAgIGNvbmZpZy5hdmFpbGFibGVUeXBlcy51bnNoaWZ0KGNvbmZpZy50eXBlKTtcbiAgICB9XG5cbiAgICBjb25zdCBidWlsZE1vZGFsID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBtb2RhbE92ZXJsYXkgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBzdHlsZXMubW9kYWxPdmVybGF5KTtcblxuICAgICAgICBjb25zdCBjaGF0TW9kYWwgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBzdHlsZXMuY2hhdE1vZGFsKSBhcyBNb2RhbDtcblxuICAgICAgICBjb25zdCBjaGF0SGVhZGVyID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLmNoYXRIZWFkZXIpO1xuICAgICAgICBjb25zdCBjaGF0VGl0bGUgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBzdHlsZXMuY2hhdFRpdGxlLCAnbW9kQUkgQXNzaXN0YW50Jyk7XG4gICAgICAgIGNvbnN0IGNoYXRDb250cm9scyA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy5jaGF0Q29udHJvbHMpO1xuXG4gICAgICAgIGNvbnN0IGNsb3NlQnRuID0gY3JlYXRlRWxlbWVudCgnYnV0dG9uJywgc3R5bGVzLmNvbnRyb2xCdXR0b24sICfinJUnKTtcbiAgICAgICAgY2hhdENvbnRyb2xzLmFwcGVuZChjbG9zZUJ0bik7XG4gICAgICAgIGNoYXRIZWFkZXIuYXBwZW5kKGNoYXRUaXRsZSwgY2hhdENvbnRyb2xzKTtcblxuICAgICAgICBjb25zdCBjaGF0TWVzc2FnZXMgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBzdHlsZXMuY2hhdE1lc3NhZ2VzKTtcblxuICAgICAgICBjb25zdCBjaGF0SW5wdXRBcmVhID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLmNoYXRJbnB1dCk7XG5cbiAgICAgICAgY29uc3QgaW5wdXRSb3cgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBzdHlsZXMuaW5wdXRSb3cpO1xuICAgICAgICBjb25zdCBpbnB1dFdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBzdHlsZXMuaW5wdXRXcmFwcGVyKTtcblxuICAgICAgICBjb25zdCBtZXNzYWdlSW5wdXQgPSBjcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScsIHN0eWxlcy5pbnB1dCk7XG4gICAgICAgIG1lc3NhZ2VJbnB1dC5wbGFjZWhvbGRlciA9ICdUeXBlIHlvdXIgbWVzc2FnZS4uLic7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uc0NvbHVtbiA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy5idXR0b25zQ29sdW1uKTtcblxuICAgICAgICBjb25zdCBzZW5kQnRuID0gY3JlYXRlRWxlbWVudCgnYnV0dG9uJywgc3R5bGVzLnNlbmRCdXR0b24pO1xuICAgICAgICBjb25zdCBzZW5kSWNvbiA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCBzdHlsZXMuc2VuZEljb24pO1xuICAgICAgICBjb25zdCBzZW5kVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdTZW5kJyk7XG4gICAgICAgIHNlbmRCdG4uYXBwZW5kKHNlbmRJY29uLCBzZW5kVGV4dCk7XG5cbiAgICAgICAgY29uc3QgYWN0aW9uQnV0dG9uc1JvdyA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy5hY3Rpb25CdXR0b25zUm93KTtcblxuICAgICAgICBjb25zdCBzdG9wQnRuID0gY3JlYXRlRWxlbWVudCgnYnV0dG9uJywgey4uLnN0eWxlcy5pY29uQnV0dG9uLCAuLi5zdHlsZXMuZGlzYWJsZWRCdXR0b259KTtcbiAgICAgICAgY29uc3Qgc3RvcEljb24gPSBjcmVhdGVFbGVtZW50KCdzcGFuJywgc3R5bGVzLnN0b3BJY29uKTtcbiAgICAgICAgc3RvcEJ0bi5hcHBlbmRDaGlsZChzdG9wSWNvbik7XG4gICAgICAgIHN0b3BCdG4udGl0bGUgPSAnU3RvcCBHZW5lcmF0aW9uJztcblxuICAgICAgICBjb25zdCB0cnlBZ2FpbkJ0biA9IGNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHN0eWxlcy5pY29uQnV0dG9uKTtcbiAgICAgICAgY29uc3QgcmVmcmVzaEljb24gPSBjcmVhdGVFbGVtZW50KCdzcGFuJywgc3R5bGVzLnJlZnJlc2hJY29uKTtcbiAgICAgICAgdHJ5QWdhaW5CdG4uYXBwZW5kQ2hpbGQocmVmcmVzaEljb24pO1xuICAgICAgICB0cnlBZ2FpbkJ0bi50aXRsZSA9ICdUcnkgQWdhaW4nO1xuXG4gICAgICAgIGlmIChoaXN0b3J5LmdldE1lc3NhZ2VzKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0cnlBZ2FpbkJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICBhcHBseVN0eWxlcyh0cnlBZ2FpbkJ0biwgey4uLnN0eWxlcy5pY29uQnV0dG9uLCAuLi5zdHlsZXMuZGlzYWJsZWRCdXR0b259KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFjdGlvbkJ1dHRvbnNSb3cuYXBwZW5kKHN0b3BCdG4sIHRyeUFnYWluQnRuKTtcbiAgICAgICAgYnV0dG9uc0NvbHVtbi5hcHBlbmQoc2VuZEJ0biwgYWN0aW9uQnV0dG9uc1Jvdyk7XG4gICAgICAgIGlucHV0V3JhcHBlci5hcHBlbmQobWVzc2FnZUlucHV0KTtcbiAgICAgICAgaW5wdXRSb3cuYXBwZW5kKGlucHV0V3JhcHBlciwgYnV0dG9uc0NvbHVtbik7XG5cbiAgICAgICAgY29uc3QgbG9hZGluZ0luZGljYXRvciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy5sb2FkaW5nSW5kaWNhdG9yKTtcbiAgICAgICAgbG9hZGluZ0luZGljYXRvci5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxzdHlsZT5cbiAgICAgICAgICAgIEBrZXlmcmFtZXMgbG9hZGluZ0RvdFB1bHNlIHtcbiAgICAgICAgICAgICAgICAwJSwgODAlLCAxMDAlIHsgdHJhbnNmb3JtOiBzY2FsZSgwLjYpOyBvcGFjaXR5OiAwLjM7IH1cbiAgICAgICAgICAgICAgICA0MCUgeyB0cmFuc2Zvcm06IHNjYWxlKDEpOyBvcGFjaXR5OiAxOyB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubG9hZGluZy1kb3RzIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGdhcDogNHB4O1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxNnB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmxvYWRpbmctZG90IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogOHB4O1xuICAgICAgICAgICAgICAgIGhlaWdodDogOHB4O1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM2QjcyODA7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgICAgICAgICBhbmltYXRpb246IGxvYWRpbmdEb3RQdWxzZSAxLjRzIGluZmluaXRlIGVhc2UtaW4tb3V0IGJvdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubG9hZGluZy1kb3Q6bnRoLWNoaWxkKDEpIHsgYW5pbWF0aW9uLWRlbGF5OiAtMC4zMnM7IH1cbiAgICAgICAgICAgIC5sb2FkaW5nLWRvdDpudGgtY2hpbGQoMikgeyBhbmltYXRpb24tZGVsYXk6IC0wLjE2czsgfVxuICAgICAgICAgICAgLmxvYWRpbmctZG90Om50aC1jaGlsZCgzKSB7IGFuaW1hdGlvbi1kZWxheTogMHM7IH1cbiAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgPGRpdiBjbGFzcz1cImxvYWRpbmctZG90c1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxvYWRpbmctZG90XCI+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibG9hZGluZy1kb3RcIj48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsb2FkaW5nLWRvdFwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgICAgIGlucHV0V3JhcHBlci5hcHBlbmQobG9hZGluZ0luZGljYXRvcik7XG5cbiAgICAgICAgY29uc3QgdHlwZVNlbGVjdG9yID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLnR5cGVTZWxlY3Rvcik7XG4gICAgICAgIGNvbnN0IHR5cGVMYWJlbCA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy50eXBlTGFiZWwsICdHZW5lcmF0ZTonKTtcbiAgICAgICAgY29uc3QgdHlwZVRvZ2dsZUdyb3VwID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLnR5cGVUb2dnbGVHcm91cCk7XG5cbiAgICAgICAgY29uc3QgdHlwZUJ1dHRvbnM6IHtba2V5OiBzdHJpbmddOiBIVE1MQnV0dG9uRWxlbWVudH0gPSB7fTtcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlVHlwZXMgPSBjb25maWcuYXZhaWxhYmxlVHlwZXMgPz8gW107XG5cbiAgICAgICAgYXZhaWxhYmxlVHlwZXMuZm9yRWFjaCgodHlwZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gY3JlYXRlRWxlbWVudCgnYnV0dG9uJywgc3R5bGVzLnR5cGVUb2dnbGVCdXR0b24sIHR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0eXBlLnNsaWNlKDEpKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSBjb25maWcudHlwZSkge1xuICAgICAgICAgICAgICAgIGFwcGx5U3R5bGVzKGJ1dHRvbiwgey4uLnN0eWxlcy50eXBlVG9nZ2xlQnV0dG9uLCAuLi5zdHlsZXMudHlwZVRvZ2dsZUJ1dHRvbkFjdGl2ZX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXModHlwZUJ1dHRvbnMpLmZvckVhY2goYnRuID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXBwbHlTdHlsZXMoYnRuLCBzdHlsZXMudHlwZVRvZ2dsZUJ1dHRvbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYXBwbHlTdHlsZXMoYnV0dG9uLCB7Li4uc3R5bGVzLnR5cGVUb2dnbGVCdXR0b24sIC4uLnN0eWxlcy50eXBlVG9nZ2xlQnV0dG9uQWN0aXZlfSk7XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2hUeXBlKHR5cGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0eXBlQnV0dG9uc1t0eXBlXSA9IGJ1dHRvbjtcbiAgICAgICAgICAgIHR5cGVUb2dnbGVHcm91cC5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIHR5cGVTZWxlY3Rvci5hcHBlbmQodHlwZUxhYmVsLCB0eXBlVG9nZ2xlR3JvdXApO1xuICAgICAgICBjaGF0SW5wdXRBcmVhLmFwcGVuZChpbnB1dFJvdyk7XG4gICAgICAgIGNoYXRNb2RhbC5hcHBlbmQoY2hhdEhlYWRlciwgY2hhdE1lc3NhZ2VzLCBjaGF0SW5wdXRBcmVhKTtcblxuICAgICAgICBpZiAoYXZhaWxhYmxlVHlwZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY2hhdE1vZGFsLmFwcGVuZCh0eXBlU2VsZWN0b3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQobW9kYWxPdmVybGF5LCBjaGF0TW9kYWwpO1xuXG4gICAgICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNb2RhbCk7XG4gICAgICAgIHNlbmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBzZW5kTWVzc2FnZSgpKTtcbiAgICAgICAgc3RvcEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0b3BHZW5lcmF0aW9uKTtcbiAgICAgICAgdHJ5QWdhaW5CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0cnlBZ2Fpbik7XG4gICAgICAgIG1lc3NhZ2VJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdm9pZCBzZW5kTWVzc2FnZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjaGF0SGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGluaXREcmFnKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZHJhZyk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBlbmREcmFnKTtcblxuICAgICAgICBjaGF0TW9kYWwubW9kYWxPdmVybGF5ID0gbW9kYWxPdmVybGF5O1xuICAgICAgICBjaGF0TW9kYWwuY2hhdEhlYWRlciA9IGNoYXRIZWFkZXI7XG4gICAgICAgIGNoYXRNb2RhbC5jbG9zZUJ0biA9IGNsb3NlQnRuO1xuICAgICAgICBjaGF0TW9kYWwuY2hhdE1lc3NhZ2VzID0gY2hhdE1lc3NhZ2VzO1xuICAgICAgICBjaGF0TW9kYWwubWVzc2FnZUlucHV0ID0gbWVzc2FnZUlucHV0O1xuICAgICAgICBjaGF0TW9kYWwuc2VuZEJ0biA9IHNlbmRCdG47XG4gICAgICAgIGNoYXRNb2RhbC50cnlBZ2FpbkJ0biA9IHRyeUFnYWluQnRuO1xuICAgICAgICBjaGF0TW9kYWwuc3RvcEJ0biA9IHN0b3BCdG47XG4gICAgICAgIGNoYXRNb2RhbC5sb2FkaW5nSW5kaWNhdG9yID0gbG9hZGluZ0luZGljYXRvcjtcbiAgICAgICAgY2hhdE1vZGFsLnR5cGVTZWxlY3RvciA9IHR5cGVTZWxlY3RvcjtcbiAgICAgICAgY2hhdE1vZGFsLnR5cGVCdXR0b25zID0gdHlwZUJ1dHRvbnM7XG5cbiAgICAgICAgY2hhdE1vZGFsLmlzRHJhZ2dpbmcgPSBmYWxzZTtcbiAgICAgICAgY2hhdE1vZGFsLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICBjaGF0TW9kYWwuYWJvcnRDb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICBjaGF0TW9kYWwub2Zmc2V0WCA9IDA7XG4gICAgICAgIGNoYXRNb2RhbC5vZmZzZXRZID0gMDtcblxuICAgICAgICByZXR1cm4gY2hhdE1vZGFsO1xuICAgIH1cblxuICAgIGNvbnN0IG9wZW5Nb2RhbCA9ICgpID0+IHtcbiAgICAgICAgbW9kYWwuY2hhdE1lc3NhZ2VzLmlubmVySFRNTCA9ICcnO1xuICAgICAgICBtb2RhbC5jaGF0TWVzc2FnZXMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICBtb2RhbC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgIG1vZGFsLm1vZGFsT3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IGhpc3RvcnkuZ2V0TWVzc2FnZXMoKS5maWx0ZXIoKG0pID0+ICFtLmhpZGRlbik7XG4gICAgICAgIGlmIChtZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBtb2RhbC5jaGF0TWVzc2FnZXMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBtZXNzYWdlcy5mb3JFYWNoKChtc2cpID0+IHtcbiAgICAgICAgICAgICAgICByZW5kZXJNZXNzYWdlKG1zZyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgbW9kYWwuY2hhdE1lc3NhZ2VzLnNjcm9sbFRvcCA9IG1vZGFsLmNoYXRNZXNzYWdlcy5zY3JvbGxIZWlnaHQ7XG4gICAgICAgICAgICBtb2RhbC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICB9LCAxMDApO1xuXG4gICAgICAgIHJldHVybiBtb2RhbDtcbiAgICB9XG5cbiAgICBjb25zdCBjbG9zZU1vZGFsID0gKCkgPT4ge1xuICAgICAgICAvLyBSZW1vdmUgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGRyYWcpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZW5kRHJhZyk7XG5cbiAgICAgICAgaWYgKG1vZGFsLm1vZGFsT3ZlcmxheSkge1xuICAgICAgICAgICAgbW9kYWwubW9kYWxPdmVybGF5LnJlbW92ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1vZGFsKSB7XG4gICAgICAgICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGluaXREcmFnID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgbW9kYWwuaXNEcmFnZ2luZyA9IHRydWU7XG5cbiAgICAgICAgY29uc3QgcmVjdCA9IG1vZGFsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIG1vZGFsLm9mZnNldFggPSBlLmNsaWVudFggLSByZWN0LmxlZnQ7XG4gICAgICAgIG1vZGFsLm9mZnNldFkgPSBlLmNsaWVudFkgLSByZWN0LnRvcDtcblxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnVzZXJTZWxlY3QgPSAnbm9uZSc7XG4gICAgfVxuXG4gICAgY29uc3QgZHJhZyA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmICghbW9kYWwuaXNEcmFnZ2luZykgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IG5ld1ggPSBlLmNsaWVudFggLSBtb2RhbC5vZmZzZXRYO1xuICAgICAgICBjb25zdCBuZXdZID0gZS5jbGllbnRZIC0gbW9kYWwub2Zmc2V0WTtcblxuICAgICAgICBtb2RhbC5zdHlsZS5sZWZ0ID0gbmV3WCArICdweCc7XG4gICAgICAgIG1vZGFsLnN0eWxlLnRvcCA9IG5ld1kgKyAncHgnO1xuXG4gICAgICAgIG1vZGFsLnN0eWxlLnRyYW5zZm9ybSA9ICdub25lJztcbiAgICB9XG5cbiAgICBjb25zdCBlbmREcmFnID0gKCkgPT4ge1xuICAgICAgICBtb2RhbC5pc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUudXNlclNlbGVjdCA9ICcnO1xuICAgIH1cblxuICAgIGNvbnN0IHN0b3BHZW5lcmF0aW9uID0gKCkgPT4ge1xuICAgICAgICBpZiAoIW1vZGFsLmlzTG9hZGluZyB8fCAhbW9kYWwuYWJvcnRDb250cm9sbGVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBtb2RhbC5hYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgbW9kYWwuYWJvcnRDb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICBzZXRMb2FkaW5nU3RhdGUoZmFsc2UpO1xuICAgIH1cblxuICAgIGNvbnN0IHRyeUFnYWluID0gKCkgPT4ge1xuICAgICAgICBpZiAoaGlzdG9yeS5nZXRNZXNzYWdlcygpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbmZpZy50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgIHZvaWQgc2VuZE1lc3NhZ2UoJ1RyeSBhZ2FpbicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbmZpZy50eXBlID09PSAnaW1hZ2UnKSB7XG4gICAgICAgICAgICBjb25zdCBsYXRlc3RVc2VyTXNnID0gaGlzdG9yeS5nZXRNZXNzYWdlcygpLnJldmVyc2UoKS5maW5kKChtc2cpID0+IG1zZy5yb2xlID09PSAndXNlcicpO1xuICAgICAgICAgICAgaWYgKGxhdGVzdFVzZXJNc2cpIHtcbiAgICAgICAgICAgICAgICB2b2lkIHNlbmRNZXNzYWdlKGxhdGVzdFVzZXJNc2cuY29udGVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGFkZFVzZXJNZXNzYWdlID0gKGNvbnRlbnQ6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAobW9kYWwuY2hhdE1lc3NhZ2VzLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykge1xuICAgICAgICAgICAgbW9kYWwuY2hhdE1lc3NhZ2VzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZURpdjogVXBkYXRhYmxlSFRNTEVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAuLi5zdHlsZXMubWVzc2FnZSxcbiAgICAgICAgICAgIC4uLnN0eWxlcy51c2VyTWVzc2FnZVxuICAgICAgICB9KTtcblxuICAgICAgICBtZXNzYWdlRGl2LmlubmVySFRNTCA9IG5sVG9Ccihjb250ZW50KTtcblxuICAgICAgICBtZXNzYWdlRGl2LnVwZGF0ZSA9IChtc2cpID0+IHtcbiAgICAgICAgICAgIG1lc3NhZ2VEaXYuaW5uZXJIVE1MID0gbmxUb0JyKG1zZy5jb250ZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vZGFsLmNoYXRNZXNzYWdlcy5hcHBlbmRDaGlsZChtZXNzYWdlRGl2KTtcbiAgICAgICAgbW9kYWwuY2hhdE1lc3NhZ2VzLnNjcm9sbFRvcCA9IG1vZGFsLmNoYXRNZXNzYWdlcy5zY3JvbGxIZWlnaHQ7XG5cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VEaXY7XG4gICAgfVxuXG4gICAgY29uc3QgYWRkRXJyb3JNZXNzYWdlID0gKGNvbnRlbnQ6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAobW9kYWwuY2hhdE1lc3NhZ2VzLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykge1xuICAgICAgICAgICAgbW9kYWwuY2hhdE1lc3NhZ2VzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZURpdiA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgIC4uLnN0eWxlcy5tZXNzYWdlLFxuICAgICAgICAgICAgLi4uc3R5bGVzLmVycm9yTWVzc2FnZVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBlcnJvckljb24gPSBjcmVhdGVFbGVtZW50KCdzcGFuJywgc3R5bGVzLmVycm9ySWNvbik7XG4gICAgICAgIG1lc3NhZ2VEaXYuYXBwZW5kQ2hpbGQoZXJyb3JJY29uKTtcblxuICAgICAgICBjb25zdCB0ZXh0U3BhbiA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgdGV4dFNwYW4udGV4dENvbnRlbnQgPSBjb250ZW50O1xuICAgICAgICBtZXNzYWdlRGl2LmFwcGVuZENoaWxkKHRleHRTcGFuKTtcblxuICAgICAgICBtb2RhbC5jaGF0TWVzc2FnZXMuYXBwZW5kQ2hpbGQobWVzc2FnZURpdik7XG4gICAgICAgIG1vZGFsLmNoYXRNZXNzYWdlcy5zY3JvbGxUb3AgPSBtb2RhbC5jaGF0TWVzc2FnZXMuc2Nyb2xsSGVpZ2h0O1xuXG4gICAgICAgIHJldHVybiBtZXNzYWdlRGl2O1xuICAgIH1cblxuICAgIGNvbnN0IGFkZEFzc2lzdGFudE1lc3NhZ2UgPSAoY29udGVudDogc3RyaW5nLCBwcm92aWRlZElkPzogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmIChtb2RhbC5jaGF0TWVzc2FnZXMuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgICBtb2RhbC5jaGF0TWVzc2FnZXMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtZXNzYWdlRGl2OiBVcGRhdGFibGVIVE1MRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgIC4uLnN0eWxlcy5tZXNzYWdlLFxuICAgICAgICAgICAgLi4uc3R5bGVzLmFpTWVzc2FnZVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBtZXNzYWdlSWQgPSBwcm92aWRlZElkIHx8ICdtc2ctJyArIERhdGUubm93KCk7XG5cbiAgICAgICAgY29uc3QgY29udGVudERpdiA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy5tZXNzYWdlQ29udGVudCk7XG5cbiAgICAgICAgY29uc3QgaWZyYW1lID0gY3JlYXRlQ29udGVudElmcmFtZShjb250ZW50LCBtb2RhbCwgY29uZmlnLmN1c3RvbUNTUyA/PyBbXSk7XG5cbiAgICAgICAgY29udGVudERpdi5hcHBlbmRDaGlsZChpZnJhbWUpO1xuXG4gICAgICAgIGNvbnN0IGFjdGlvbnNEaXYgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBzdHlsZXMubWVzc2FnZUFjdGlvbnMpO1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBoaXN0b3J5LmdldEFzc2lzdGFudE1lc3NhZ2UobWVzc2FnZUlkKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmIChjb25maWcudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy50ZXh0QWN0aW9ucz8uY29weSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uc0Rpdi5hcHBlbmQoY3JlYXRlQWN0aW9uQnV0dG9uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBtb2RhbC5pc0xvYWRpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnY29weScsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ0NvcHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkVGV4dDogJ0NvcGllZCEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdHlwZW9mIGNvbmZpZy50ZXh0QWN0aW9ucz8uY29weSA9PT0gJ2Z1bmN0aW9uJyA/IGNvbmZpZy50ZXh0QWN0aW9ucy5jb3B5IDogY29weVRvQ2xpcGJvYXJkXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy50ZXh0QWN0aW9ucz8uaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbnNEaXYuYXBwZW5kKGNyZWF0ZUFjdGlvbkJ1dHRvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogbW9kYWwuaXNMb2FkaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2luc2VydCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ0luc2VydCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWRUZXh0OiAnSW5zZXJ0ZWQhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGNvbmZpZy50ZXh0QWN0aW9ucy5pbnNlcnRcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNvbmZpZy50eXBlID09PSAnaW1hZ2UnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5pbWFnZUFjdGlvbnM/LmNvcHkgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbnNEaXYuYXBwZW5kKGNyZWF0ZUFjdGlvbkJ1dHRvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogbW9kYWwuaXNMb2FkaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2NvcHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDb3B5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdUZXh0OiAnRG93bmxvYWRpbmcuLi4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkVGV4dDogJ0NvcGllZCEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogYXN5bmMgKG1zZywgbW9kYWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gdHlwZW9mIGNvbmZpZy50ZXh0QWN0aW9ucz8uY29weSA9PT0gJ2Z1bmN0aW9uJyA/IGNvbmZpZy50ZXh0QWN0aW9ucy5jb3B5IDogY29weVRvQ2xpcGJvYXJkO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1zZy5jdHguZG93bmxvYWRlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyKG1zZywgbW9kYWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBleGVjdXRvci5tZ3IuZG93bmxvYWQuaW1hZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IG1zZy5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogY29uZmlnLmZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IGNvbmZpZy5uYW1lc3BhY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlOiBjb25maWcucmVzb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhU291cmNlOiBjb25maWcuaW1hZ2U/Lm1lZGlhU291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnLmNvbnRlbnQgPSBkYXRhLmZ1bGxVcmw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnLmN0eC5kb3dubG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2cuY3R4LnVybCA9IGRhdGEudXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZy5jdHguZnVsbFVybCA9IGRhdGEuZnVsbFVybDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXIobXNnLCBtb2RhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBpbnNlcnRDYiA9IGNvbmZpZy5pbWFnZUFjdGlvbnM/Lmluc2VydDtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGluc2VydENiID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbnNEaXYuYXBwZW5kKGNyZWF0ZUFjdGlvbkJ1dHRvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogbW9kYWwuaXNMb2FkaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2luc2VydCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ0luc2VydCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWRUZXh0OiAnSW5zZXJ0ZWQhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdUZXh0OiAnRG93bmxvYWRpbmcuLi4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogYXN5bmMgKG1zZywgbW9kYWwpID0+IHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtc2cuY3R4LmRvd25sb2FkZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0Q2IobXNnLCBtb2RhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGV4ZWN1dG9yLm1nci5kb3dubG9hZC5pbWFnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogbXNnLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiBjb25maWcuZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogY29uZmlnLm5hbWVzcGFjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2U6IGNvbmZpZy5yZXNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWFTb3VyY2U6IGNvbmZpZy5pbWFnZT8ubWVkaWFTb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2cuY29udGVudCA9IGRhdGEuZnVsbFVybDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2cuY3R4LmRvd25sb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZy5jdHgudXJsID0gZGF0YS51cmw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnLmN0eC5mdWxsVXJsID0gZGF0YS5mdWxsVXJsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0Q2IobXNnLCBtb2RhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBtZXNzYWdlRGl2LmFwcGVuZChjb250ZW50RGl2LCBhY3Rpb25zRGl2KTtcblxuICAgICAgICBtb2RhbC5jaGF0TWVzc2FnZXMuYXBwZW5kQ2hpbGQobWVzc2FnZURpdik7XG4gICAgICAgIG1vZGFsLmNoYXRNZXNzYWdlcy5zY3JvbGxUb3AgPSBtb2RhbC5jaGF0TWVzc2FnZXMuc2Nyb2xsSGVpZ2h0O1xuXG4gICAgICAgIG1lc3NhZ2VEaXYudXBkYXRlID0gKG1zZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaWZyYW1lRG9jdW1lbnQgPSBpZnJhbWUuY29udGVudERvY3VtZW50O1xuICAgICAgICAgICAgaWYgKCFpZnJhbWVEb2N1bWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtc2cudHlwZSA9PT0gJ2ltYWdlJykge1xuICAgICAgICAgICAgICAgIGlmcmFtZURvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gYDxpbWcgc3JjPVwiJHttc2cuY29udGVudH1cIiAvPmA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmcmFtZURvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gbmxUb0JyKG1zZy5jb250ZW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWZyYW1lLnN5bmNIZWlnaHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtZXNzYWdlRGl2O1xuICAgIH1cblxuICAgIGNvbnN0IHJlbmRlck1lc3NhZ2UgPSAobXNnOiBNZXNzYWdlKSA9PiB7XG4gICAgICAgIGlmIChtc2cuaGlkZGVuKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobXNnLnJvbGUgPT09ICd1c2VyJykge1xuICAgICAgICAgICAgcmV0dXJuIGFkZFVzZXJNZXNzYWdlKG1zZy5jb250ZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtc2cudHlwZSA9PT0gJ2ltYWdlJykge1xuICAgICAgICAgICAgcmV0dXJuIGFkZEFzc2lzdGFudE1lc3NhZ2UoYDxpbWcgc3JjPVwiJHttc2cuY29udGVudH1cIiAvPmAsIG1zZy5pZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYWRkQXNzaXN0YW50TWVzc2FnZShtc2cuY29udGVudCwgbXNnLmlkKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb3B5VG9DbGlwYm9hcmQgPSBhc3luYyAobWVzc2FnZTogTWVzc2FnZSkgPT4ge1xuICAgICAgICBpZiAobmF2aWdhdG9yLmNsaXBib2FyZCAmJiBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChtZXNzYWdlLmNvbnRlbnQpO1xuICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JNZXNzYWdlKF8oJ21vZGFpLmNtcC5mYWlsZWRfY29weScpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dGFyZWEgPSBjcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgICAgICAgICAgICAgIHRleHRhcmVhLnZhbHVlID0gbWVzc2FnZS5jb250ZW50O1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dGFyZWEpO1xuICAgICAgICAgICAgICAgIHRleHRhcmVhLnNlbGVjdCgpO1xuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJjb3B5XCIpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGV4dGFyZWEpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JNZXNzYWdlKF8oJ21vZGFpLmNtcC5mYWlsZWRfY29weScpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHNldExvYWRpbmdTdGF0ZSA9IChsb2FkaW5nOiBib29sZWFuKSA9PiB7XG4gICAgICAgIG1vZGFsLmlzTG9hZGluZyA9IGxvYWRpbmc7XG5cbiAgICAgICAgaWYgKGxvYWRpbmcpIHtcbiAgICAgICAgICAgIG1vZGFsLmxvYWRpbmdJbmRpY2F0b3Iuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1vZGFsLmxvYWRpbmdJbmRpY2F0b3Iuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuXG4gICAgICAgIG1vZGFsLm1lc3NhZ2VJbnB1dC5kaXNhYmxlZCA9IGxvYWRpbmc7XG4gICAgICAgIGlmIChsb2FkaW5nKSB7XG4gICAgICAgICAgICBhcHBseVN0eWxlcyhtb2RhbC5tZXNzYWdlSW5wdXQsIHsuLi5zdHlsZXMuaW5wdXQsIC4uLnN0eWxlcy5sb2FkaW5nSW5wdXR9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFwcGx5U3R5bGVzKG1vZGFsLm1lc3NhZ2VJbnB1dCwgc3R5bGVzLmlucHV0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vZGFsLnNlbmRCdG4uZGlzYWJsZWQgPSBsb2FkaW5nO1xuICAgICAgICBpZiAobG9hZGluZykge1xuICAgICAgICAgICAgYXBwbHlTdHlsZXMobW9kYWwuc2VuZEJ0biwgey4uLnN0eWxlcy5zZW5kQnV0dG9uLCAuLi5zdHlsZXMuZGlzYWJsZWRCdXR0b259KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFwcGx5U3R5bGVzKG1vZGFsLnNlbmRCdG4sIHN0eWxlcy5zZW5kQnV0dG9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vZGFsLnN0b3BCdG4uZGlzYWJsZWQgPSAhbG9hZGluZztcbiAgICAgICAgaWYgKGxvYWRpbmcpIHtcbiAgICAgICAgICAgIGFwcGx5U3R5bGVzKG1vZGFsLnN0b3BCdG4sIHN0eWxlcy5pY29uQnV0dG9uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFwcGx5U3R5bGVzKG1vZGFsLnN0b3BCdG4sIHsuLi5zdHlsZXMuaWNvbkJ1dHRvbiwgLi4uc3R5bGVzLmRpc2FibGVkQnV0dG9ufSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBoYXNNZXNzYWdlcyA9IGhpc3RvcnkuZ2V0TWVzc2FnZXMoKS5sZW5ndGggPiAwO1xuICAgICAgICBtb2RhbC50cnlBZ2FpbkJ0bi5kaXNhYmxlZCA9IGxvYWRpbmcgfHwgIWhhc01lc3NhZ2VzO1xuICAgICAgICBpZiAobG9hZGluZyB8fCAhaGFzTWVzc2FnZXMpIHtcbiAgICAgICAgICAgIGFwcGx5U3R5bGVzKG1vZGFsLnRyeUFnYWluQnRuLCB7Li4uc3R5bGVzLmljb25CdXR0b24sIC4uLnN0eWxlcy5kaXNhYmxlZEJ1dHRvbn0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXBwbHlTdHlsZXMobW9kYWwudHJ5QWdhaW5CdG4sIHN0eWxlcy5pY29uQnV0dG9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIE9iamVjdC52YWx1ZXMobW9kYWwudHlwZUJ1dHRvbnMpLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGxvYWRpbmc7XG4gICAgICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IGJ1dHRvbi50ZXh0Q29udGVudD8udG9Mb3dlckNhc2UoKSA9PT0gY29uZmlnLnR5cGU7XG5cbiAgICAgICAgICAgIGlmIChsb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgYXBwbHlTdHlsZXMoYnV0dG9uLCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnN0eWxlcy50eXBlVG9nZ2xlQnV0dG9uLFxuICAgICAgICAgICAgICAgICAgICAuLi4oaXNBY3RpdmUgPyBzdHlsZXMudHlwZVRvZ2dsZUJ1dHRvbkFjdGl2ZSA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgLi4uc3R5bGVzLmRpc2FibGVkQnV0dG9uXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFwcGx5U3R5bGVzKGJ1dHRvbiwge1xuICAgICAgICAgICAgICAgICAgICAuLi5zdHlsZXMudHlwZVRvZ2dsZUJ1dHRvbixcbiAgICAgICAgICAgICAgICAgICAgLi4uKGlzQWN0aXZlID8gc3R5bGVzLnR5cGVUb2dnbGVCdXR0b25BY3RpdmUgOiB7fSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYWN0aW9uQnV0dG9ucyA9IG1vZGFsLmNoYXRNZXNzYWdlcy5xdWVyeVNlbGVjdG9yQWxsKCcuYWN0aW9uLWJ1dHRvbicpIGFzIE5vZGVMaXN0T2Y8QWN0aW9uQnV0dG9uPjtcbiAgICAgICAgYWN0aW9uQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICBpZiAobG9hZGluZykge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5kaXNhYmxlPy4oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uPy5lbmFibGU/LigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBzZW5kTWVzc2FnZSA9IGFzeW5jIChwcm92aWRlZE1lc3NhZ2U/OiBzdHJpbmcsIGhpZGVQcm9tcHQ/OiBib29sZWFuKSA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBwcm92aWRlZE1lc3NhZ2UgPyBwcm92aWRlZE1lc3NhZ2UudHJpbSgpIDogbW9kYWwubWVzc2FnZUlucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgICAgaWYgKCFtZXNzYWdlIHx8IG1vZGFsLmlzTG9hZGluZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0TG9hZGluZ1N0YXRlKHRydWUpO1xuXG4gICAgICAgIG1vZGFsLm1lc3NhZ2VJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICBtb2RhbC5hYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBoaXN0b3J5LmdldE1lc3NhZ2VzSGlzdG9yeSgpO1xuICAgICAgICBjb25zdCBtZXNzYWdlSWQgPSAndXNlci1tc2ctJyArIERhdGUubm93KCkgKyAoTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTAwMCkpO1xuICAgICAgICBoaXN0b3J5LmFkZFVzZXJNZXNzYWdlKG1lc3NhZ2UsIG1lc3NhZ2VJZCwgaGlkZVByb21wdCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChjb25maWcudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGV4ZWN1dG9yLm1nci5wcm9tcHQuZnJlZVRleHQoXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogY29uZmlnLm5hbWVzcGFjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IGNvbmZpZy5jb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0OiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IGNvbmZpZy5maWVsZCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS51cGRhdGVBc3Npc3RhbnRNZXNzYWdlKGRhdGEuaWQsIGRhdGEuY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLmFib3J0Q29udHJvbGxlclxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBoaXN0b3J5LnVwZGF0ZUFzc2lzdGFudE1lc3NhZ2UoZGF0YS5pZCwgZGF0YS5jb250ZW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNvbmZpZy50eXBlID09PSAnaW1hZ2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGV4ZWN1dG9yLm1nci5wcm9tcHQuaW1hZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBwcm9tcHQ6IG1lc3NhZ2VcbiAgICAgICAgICAgICAgICB9LCBtb2RhbC5hYm9ydENvbnRyb2xsZXIpO1xuXG4gICAgICAgICAgICAgICAgaGlzdG9yeS5hZGRBc3Npc3RhbnRNZXNzYWdlKGRhdGEudXJsLCBkYXRhLmlkLCAnaW1hZ2UnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbW9kYWwuYWJvcnRDb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnIubmFtZSA9PT0gXCJBYm9ydEVycm9yXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGFkZEVycm9yTWVzc2FnZShlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhZGRFcnJvck1lc3NhZ2UoJ1Vua25vd24gZXJyb3InKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldExvYWRpbmdTdGF0ZShmYWxzZSk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3dpdGNoVHlwZSA9ICh0eXBlOiBNb2RhbFR5cGUpID0+IHtcbiAgICAgICAgY29uZmlnLnR5cGUgPSB0eXBlO1xuXG4gICAgICAgIGhpc3RvcnkgPSBjaGF0SGlzdG9yeS5pbml0KFxuICAgICAgICAgICAgYCR7Y29uZmlnLmtleX0vJHtjb25maWcudHlwZX1gLFxuICAgICAgICAgICAgKG1zZykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXJNZXNzYWdlKG1zZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgd2hpbGUgKG1vZGFsLmNoYXRNZXNzYWdlcy5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICBtb2RhbC5jaGF0TWVzc2FnZXMucmVtb3ZlQ2hpbGQobW9kYWwuY2hhdE1lc3NhZ2VzLmZpcnN0Q2hpbGQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbW9kYWwuY2hhdE1lc3NhZ2VzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gaGlzdG9yeS5nZXRNZXNzYWdlcygpLmZpbHRlcigobSkgPT4gIW0uaGlkZGVuKTtcbiAgICAgICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG1vZGFsLmNoYXRNZXNzYWdlcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIG1lc3NhZ2VzLmZvckVhY2goKG1zZykgPT4ge1xuICAgICAgICAgICAgICAgIHJlbmRlck1lc3NhZ2UobXNnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGhpc3RvcnkgPSBjaGF0SGlzdG9yeS5pbml0KFxuICAgICAgICBgJHtjb25maWcua2V5fS8ke2NvbmZpZy50eXBlfWAsXG4gICAgICAgIChtc2cpID0+IHtcbiAgICAgICAgICAgIHJldHVybiByZW5kZXJNZXNzYWdlKG1zZyk7XG4gICAgICAgIH1cbiAgICApO1xuXG4gICAgY29uc3QgbW9kYWwgPSBidWlsZE1vZGFsKCk7XG5cbiAgICBtb2RhbC5hcGkgPSB7XG4gICAgICAgIHNlbmRNZXNzYWdlLFxuICAgICAgICBjbG9zZU1vZGFsLFxuICAgIH1cblxuICAgIG9wZW5Nb2RhbCgpO1xuXG4gICAgcmV0dXJuIG1vZGFsO1xufVxuIiwiaW1wb3J0IHtjcmVhdGVFbGVtZW50LCBubFRvQnJ9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgdHlwZSB7IE1vZGFsIH0gZnJvbSBcIi4vbW9kYWxcIjtcblxuZXhwb3J0IHR5cGUgSWZyYW1lID0gSFRNTElGcmFtZUVsZW1lbnQgJiB7XG4gICAgc3luY0hlaWdodDogKCkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNvbnRlbnRJZnJhbWUgPSAocHJvdmlkZWRDb250ZW50OiBzdHJpbmcsIG1vZGFsOiBNb2RhbCwgY3VzdG9tQ1NTOiBzdHJpbmdbXSA9IFtdKSA9PiB7XG4gICAgY29uc3QgY29udGVudCA9IG5sVG9Ccihwcm92aWRlZENvbnRlbnQpO1xuXG4gICAgY29uc3QgaWZyYW1lID0gY3JlYXRlRWxlbWVudCgnaWZyYW1lJywge1xuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBib3JkZXI6ICdub25lJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnd2hpdGUnLFxuICAgICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZScsXG4gICAgICAgIG1heFdpZHRoOiAnMTAwJScsXG4gICAgICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnXG4gICAgfSkgYXMgSWZyYW1lO1xuXG4gICAgaWZyYW1lLnNyY2RvYyA9IGBcbiAgICAgICAgPGh0bWw+XG4gICAgICAgIDxoZWFkPlxuICAgICAgICAgICAgPHN0eWxlPlxuICAgICAgICAgICAgICAgIGh0bWwge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJvZHkge1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3cteDogaGlkZGVuO1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAqIHtcbiAgICAgICAgICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcmUge1xuICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gICAgICAgICAgICAgICAgICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDtcbiAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY3ZmE7XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbWcge1xuICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogYXV0bztcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvZGUge1xuICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gICAgICAgICAgICAgICAgICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3cteDogaGlkZGVuO1xuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRhYmxlIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3cteDogaGlkZGVuO1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGl2IHtcbiAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdy13cmFwOiBicmVhay13b3JkO1xuICAgICAgICAgICAgICAgICAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XG4gICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHAge1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDAgMCAwLjVlbSAwO1xuICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGgxLCBoMiwgaDMsIGg0LCBoNSwgaDYge1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDAgMCAwLjFlbSAwO1xuICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICR7Y3VzdG9tQ1NTLm1hcCgoY3NzKSA9PiB7XG4gICAgICAgIHJldHVybiBgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIHR5cGU9XCJ0ZXh0L2Nzc1wiIGhyZWY9XCIke2Nzc31cIiAvPmA7XG4gICAgfSkuam9pbignJyl9XG4gICAgICAgIDwvaGVhZD5cbiAgICAgICAgPGJvZHkgc3R5bGU9XCJwYWRkaW5nOiAwOyBtYXgtd2lkdGg6IDEwMCU7IHdpZHRoOiAxMDAlOyBib3gtc2l6aW5nOiBib3JkZXItYm94O1wiPiR7Y29udGVudH08L2JvZHk+XG4gICAgICAgIDwvaHRtbD5cbiAgICBgO1xuXG4gICAgaWZyYW1lLnN5bmNIZWlnaHQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBpZnJhbWUuY29udGVudFdpbmRvdz8uZG9jdW1lbnQuYm9keTtcbiAgICAgICAgaWYgKCFib2R5KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbGVtZW50cyA9IGJvZHkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJyonKTtcbiAgICAgICAgbGV0IG1heEhlaWdodCA9IGJvZHkub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50c1tpXSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IGJvdHRvbSA9IGVsZW1lbnQub2Zmc2V0VG9wICsgZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICBtYXhIZWlnaHQgPSBNYXRoLm1heChtYXhIZWlnaHQsIGJvdHRvbSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZnJhbWUuc3R5bGUuaGVpZ2h0ID0gKG1heEhlaWdodCArIDUpICsgJ3B4JztcbiAgICAgICAgYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuXG4gICAgICAgIG1vZGFsLmNoYXRNZXNzYWdlcy5zY3JvbGxUb3AgPSBtb2RhbC5jaGF0TWVzc2FnZXMuc2Nyb2xsSGVpZ2h0O1xuICAgIH1cblxuICAgIGlmcmFtZS5vbmxvYWQgPSBpZnJhbWUuc3luY0hlaWdodDtcblxuICAgIHJldHVybiBpZnJhbWU7XG59XG4iLCJ0eXBlIFRleHRhcmVhT3ZlcmxheU9wdGlvbnMgPSB7XG4gICAgaW5kaWNhdG9yVHlwZT86ICdzcGlubmVyJyB8ICdkb3RzJztcbiAgICBvdmVybGF5Q29sb3I/OiBzdHJpbmc7XG4gICAgaW5kaWNhdG9yQ29sb3I/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVMb2FkaW5nT3ZlcmxheSA9IChlbGVtZW50OiBIVE1MRWxlbWVudCwgb3B0aW9uczogVGV4dGFyZWFPdmVybGF5T3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICBpbmRpY2F0b3JUeXBlOiBvcHRpb25zLmluZGljYXRvclR5cGUgfHwgJ3NwaW5uZXInLFxuICAgICAgICBvdmVybGF5Q29sb3I6IG9wdGlvbnMub3ZlcmxheUNvbG9yIHx8ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNyknLFxuICAgICAgICBpbmRpY2F0b3JDb2xvcjogb3B0aW9ucy5pbmRpY2F0b3JDb2xvciB8fCAnIzM0OThkYidcbiAgICB9O1xuXG4gICAgY29uc3Qgb3ZlcmxheTogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCBpbmRpY2F0b3I6IEhUTUxEaXZFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICBjb25zdCB0ZXh0YXJlYVN0eWxlczogQ1NTU3R5bGVEZWNsYXJhdGlvbiA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuICAgIGNvbnN0IHRleHRhcmVhUmVjdDogRE9NUmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICBpZiAoIW9wdGlvbnMuaW5kaWNhdG9yQ29sb3IpIHtcbiAgICAgICAgY29uZmlnLmluZGljYXRvclR5cGUgPSB0ZXh0YXJlYVJlY3QuaGVpZ2h0IDw9IDUwID8gJ2RvdHMnIDogJ3NwaW5uZXInO1xuICAgIH1cblxuICAgIG92ZXJsYXkuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIG92ZXJsYXkuc3R5bGUudG9wID0gJzAnO1xuICAgIG92ZXJsYXkuc3R5bGUubGVmdCA9ICcwJztcbiAgICBvdmVybGF5LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIG92ZXJsYXkuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgIG92ZXJsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29uZmlnLm92ZXJsYXlDb2xvcjtcbiAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgb3ZlcmxheS5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdjZW50ZXInO1xuICAgIG92ZXJsYXkuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgIG92ZXJsYXkuc3R5bGUuekluZGV4ID0gJzEwMDAwJztcbiAgICBvdmVybGF5LnN0eWxlLmJvcmRlclJhZGl1cyA9IHRleHRhcmVhU3R5bGVzLmJvcmRlclJhZGl1cztcblxuICAgIGxldCBzdHlsZVRleHQgPSAnJztcblxuICAgIGlmIChjb25maWcuaW5kaWNhdG9yVHlwZSA9PT0gJ3NwaW5uZXInKSB7XG4gICAgICAgIC8vIEFwcGx5IHN0eWxlcyB0byB0aGUgc3Bpbm5lclxuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYm9yZGVyID0gYDRweCBzb2xpZCAjZjNmM2YzYDtcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmJvcmRlclRvcCA9IGA0cHggc29saWQgJHtjb25maWcuaW5kaWNhdG9yQ29sb3J9YDtcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc1MCUnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUud2lkdGggPSAnMzBweCc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5oZWlnaHQgPSAnMzBweCc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5hbmltYXRpb24gPSAndGV4dGFyZWFPdmVybGF5U3BpbiAxcyBsaW5lYXIgaW5maW5pdGUnO1xuXG4gICAgICAgIC8vIEFkZCBzcGlubmVyIGFuaW1hdGlvblxuICAgICAgICBzdHlsZVRleHQgPSBgXG4gICAgICBAa2V5ZnJhbWVzIHRleHRhcmVhT3ZlcmxheVNwaW4ge1xuICAgICAgICAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyB9XG4gICAgICAgIDEwMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XG4gICAgICB9XG4gICAgYDtcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy5pbmRpY2F0b3JUeXBlID09PSAnZG90cycpIHtcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdjZW50ZXInO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuaGVpZ2h0ID0gJzIwcHgnO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBkb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGRvdC5zdHlsZS53aWR0aCA9ICc4cHgnO1xuICAgICAgICAgICAgZG90LnN0eWxlLmhlaWdodCA9ICc4cHgnO1xuICAgICAgICAgICAgZG90LnN0eWxlLmJvcmRlclJhZGl1cyA9ICc1MCUnO1xuICAgICAgICAgICAgZG90LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbmZpZy5pbmRpY2F0b3JDb2xvcjtcbiAgICAgICAgICAgIGRvdC5zdHlsZS5tYXJnaW4gPSAnMCA0cHgnO1xuICAgICAgICAgICAgZG90LnN0eWxlLmFuaW1hdGlvbiA9IGB0ZXh0YXJlYU92ZXJsYXlEb3RQdWxzZSAxLjRzIGluZmluaXRlIGVhc2UtaW4tb3V0YDtcbiAgICAgICAgICAgIGRvdC5zdHlsZS5hbmltYXRpb25EZWxheSA9IGAke2kgKiAwLjJ9c2A7XG4gICAgICAgICAgICBpbmRpY2F0b3IuYXBwZW5kQ2hpbGQoZG90KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0eWxlVGV4dCA9IGBcbiAgICAgIEBrZXlmcmFtZXMgdGV4dGFyZWFPdmVybGF5RG90UHVsc2Uge1xuICAgICAgICAwJSwgODAlLCAxMDAlIHsgdHJhbnNmb3JtOiBzY2FsZSgwKTsgb3BhY2l0eTogMC41OyB9XG4gICAgICAgIDQwJSB7IHRyYW5zZm9ybTogc2NhbGUoMSk7IG9wYWNpdHk6IDE7IH1cbiAgICAgIH1cbiAgICBgO1xuICAgIH1cblxuICAgIGNvbnN0IHN0eWxlU2hlZXQ6IEhUTUxTdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlU2hlZXQudGV4dENvbnRlbnQgPSBzdHlsZVRleHQ7XG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZVNoZWV0KTtcblxuICAgIG92ZXJsYXkuYXBwZW5kQ2hpbGQoaW5kaWNhdG9yKTtcblxuICAgIGNvbnN0IHBhcmVudFN0eWxlczogQ1NTU3R5bGVEZWNsYXJhdGlvbiA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQucGFyZW50RWxlbWVudCBhcyBFbGVtZW50KTtcbiAgICBsZXQgd3JhcHBlcjogSFRNTEVsZW1lbnQ7XG5cbiAgICBpZiAoWydyZWxhdGl2ZScsICdhYnNvbHV0ZScsICdmaXhlZCddLmluZGV4T2YocGFyZW50U3R5bGVzLnBvc2l0aW9uKSA9PT0gLTEpIHtcbiAgICAgICAgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB3cmFwcGVyLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICAgICAgd3JhcHBlci5zdHlsZS53aWR0aCA9IGAke3RleHRhcmVhUmVjdC53aWR0aH1weGA7XG4gICAgICAgIHdyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gYCR7dGV4dGFyZWFSZWN0LmhlaWdodH1weGA7XG4gICAgICAgIHdyYXBwZXIuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuXG4gICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZT8uaW5zZXJ0QmVmb3JlKHdyYXBwZXIsIGVsZW1lbnQpO1xuICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHdyYXBwZXIgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgfVxuXG4gICAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQob3ZlcmxheSk7XG5cbiAgICBjb25zdCB1cGRhdGVkUmVjdDogRE9NUmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgaWYgKHdyYXBwZXIgIT09IGVsZW1lbnQucGFyZW50RWxlbWVudCkge1xuICAgICAgICB3cmFwcGVyLnN0eWxlLndpZHRoID0gYCR7dXBkYXRlZFJlY3Qud2lkdGh9cHhgO1xuICAgICAgICB3cmFwcGVyLnN0eWxlLmhlaWdodCA9IGAke3VwZGF0ZWRSZWN0LmhlaWdodH1weGA7XG4gICAgfVxuXG4gICAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuXG4gICAgcmV0dXJuICgpOiB2b2lkID0+IHtcbiAgICAgICAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcblxuICAgICAgICBvdmVybGF5LnJlbW92ZSgpO1xuICAgICAgICBzdHlsZVNoZWV0LnJlbW92ZSgpO1xuICAgICAgICBpZiAod3JhcHBlciAhPT0gZWxlbWVudC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICB3cmFwcGVyLnBhcmVudE5vZGU/Lmluc2VydEJlZm9yZShlbGVtZW50LCB3cmFwcGVyKTtcbiAgICAgICAgICAgIHdyYXBwZXIucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuIiwiaW1wb3J0IHtjcmVhdGVNb2RhbCwgdHlwZSBNb2RhbENvbmZpZ30gZnJvbSBcIi4vbW9kYWxcIjtcbmltcG9ydCB7IGNyZWF0ZUxvYWRpbmdPdmVybGF5IH0gZnJvbSAnLi9vdmVybGF5J1xuXG5cbmV4cG9ydCBjb25zdCB1aSA9IHtcbiAgICBjcmVhdGVMb2FkaW5nT3ZlcmxheSxcbiAgICBsb2NhbENoYXQ6IChjb25maWc6IE1vZGFsQ29uZmlnKSA9PiB7XG4gICAgICAgIHJldHVybiBjcmVhdGVNb2RhbChjb25maWcpO1xuICAgIH1cbn07XG4iLCJpbXBvcnQge2V4ZWN1dG9yfSBmcm9tIFwiLi9leGVjdXRvclwiO1xuaW1wb3J0IHtEYXRhT3V0cHV0LCBoaXN0b3J5fSBmcm9tICcuL2hpc3RvcnknO1xuaW1wb3J0IHt1aX0gZnJvbSBcIi4vdWlcIjtcbmltcG9ydCB7Y3JlYXRlTG9hZGluZ092ZXJsYXl9IGZyb20gXCIuL3VpL292ZXJsYXlcIjtcbmltcG9ydCB7TWVzc2FnZX0gZnJvbSBcIi4vY2hhdEhpc3RvcnlcIjtcblxudHlwZSBEYXRhQ29udGV4dCA9IHtlbHM6IHsgZmllbGQ6IGFueSwgd3JhcHBlcjogSGlzdG9yeUVsZW1lbnQgfVtdfTtcbnR5cGUgSGlzdG9yeUJ1dHRvbiA9IEhUTUxCdXR0b25FbGVtZW50ICYge1xuICAgIGVuYWJsZTogKCkgPT4gdm9pZDtcbiAgICBkaXNhYmxlOiAoKSA9PiB2b2lkO1xufTtcbnR5cGUgSGlzdG9yeUluZm8gPSBIVE1MRWxlbWVudCAmIHtcbiAgICB1cGRhdGU6IChzaG93aW5nOiBudW1iZXIsIHRvdGFsOiBudW1iZXIpID0+IHZvaWQ7XG59O1xudHlwZSBIaXN0b3J5TmF2ID0gSFRNTEVsZW1lbnQgJiB7XG4gICAgc2hvdzogKCkgPT4gdm9pZDtcbiAgICBoaWRlOiAoKSA9PiB2b2lkO1xuICAgIHByZXZCdXR0b246IEhpc3RvcnlCdXR0b247XG4gICAgbmV4dEJ1dHRvbjogSGlzdG9yeUJ1dHRvbjtcbiAgICBpbmZvOiBIaXN0b3J5SW5mbztcbn07XG50eXBlIEhpc3RvcnlFbGVtZW50ID0gSFRNTEVsZW1lbnQgJiB7IGhpc3RvcnlOYXY6IEhpc3RvcnlOYXYgfVxuXG5jb25zdCBoaXN0b3J5TmF2U3luYyA9IChkYXRhOiBEYXRhT3V0cHV0PERhdGFDb250ZXh0Piwgbm9TdG9yZT86IGJvb2xlYW4pID0+IHtcbiAgICBkYXRhLmNvbnRleHQuZWxzLmZvckVhY2goKHt3cmFwcGVyLCBmaWVsZH0pID0+IHtcbiAgICAgICAgY29uc3QgcHJldlZhbHVlID0gZmllbGQuZ2V0VmFsdWUoKTtcbiAgICAgICAgZmllbGQuc2V0VmFsdWUoZGF0YS52YWx1ZSk7XG4gICAgICAgIGZpZWxkLmZpcmVFdmVudCgnY2hhbmdlJywgZmllbGQsIGRhdGEudmFsdWUsIHByZXZWYWx1ZSk7XG5cbiAgICAgICAgaWYgKG5vU3RvcmUpIHtcbiAgICAgICAgICAgIGZpZWxkLmVsLmRvbS5zY3JvbGxUb3AgPSBmaWVsZC5lbC5kb20uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGEudG90YWwgPiAwKSB7XG4gICAgICAgICAgICB3cmFwcGVyLmhpc3RvcnlOYXYuc2hvdygpO1xuICAgICAgICB9XG5cbiAgICAgICAgd3JhcHBlci5oaXN0b3J5TmF2LmluZm8udXBkYXRlKGRhdGEuY3VycmVudCwgZGF0YS50b3RhbCk7XG5cbiAgICAgICAgaWYgKGRhdGEucHJldlN0YXR1cykge1xuICAgICAgICAgICAgd3JhcHBlci5oaXN0b3J5TmF2LnByZXZCdXR0b24uZW5hYmxlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3cmFwcGVyLmhpc3RvcnlOYXYucHJldkJ1dHRvbi5kaXNhYmxlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YS5uZXh0U3RhdHVzKSB7XG4gICAgICAgICAgICB3cmFwcGVyLmhpc3RvcnlOYXYubmV4dEJ1dHRvbi5lbmFibGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdyYXBwZXIuaGlzdG9yeU5hdi5uZXh0QnV0dG9uLmRpc2FibGUoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuY29uc3QgY3JlYXRlV2FuZEVsID0gKCkgPT4ge1xuICAgIGNvbnN0IHdhbmRFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHdhbmRFbC5jbGFzc05hbWUgPSAnbW9kYWktZ2VuZXJhdGUnO1xuICAgIHdhbmRFbC5pbm5lclRleHQgPSAn4pymJ1xuICAgIHdhbmRFbC50eXBlID0gJ2J1dHRvbidcbiAgICB3YW5kRWwudGl0bGUgPSAnR2VuZXJhdGUgdXNpbmcgQUknXG5cbiAgICByZXR1cm4gd2FuZEVsO1xufVxuXG5jb25zdCBjcmVhdGVIaXN0b3J5TmF2ID0gKGNhY2hlOiBSZXR1cm5UeXBlPHR5cGVvZiBoaXN0b3J5LmluaXQ8RGF0YUNvbnRleHQ+PikgPT4ge1xuICAgIGNvbnN0IHByZXZCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKSBhcyBIaXN0b3J5QnV0dG9uO1xuICAgIHByZXZCdXR0b24udHlwZSA9ICdidXR0b24nO1xuICAgIHByZXZCdXR0b24udGl0bGUgPSAnUHJldmlvdXMgVmVyc2lvbic7XG4gICAgcHJldkJ1dHRvbi5jbGFzc05hbWUgPSAnbW9kYWktaGlzdG9yeV9wcmV2JztcbiAgICBwcmV2QnV0dG9uLmRpc2FibGUgPSAoKSA9PiB7XG4gICAgICAgIHByZXZCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgICBwcmV2QnV0dG9uLmVuYWJsZSA9ICgpID0+IHtcbiAgICAgICAgcHJldkJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBwcmV2QnV0dG9uLmlubmVySFRNTCA9ICdwcmV2JztcbiAgICBwcmV2QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjYWNoZS5wcmV2KCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBuZXh0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJykgYXMgSGlzdG9yeUJ1dHRvbjtcbiAgICBuZXh0QnV0dG9uLnR5cGUgPSAnYnV0dG9uJztcbiAgICBuZXh0QnV0dG9uLnRpdGxlID0gJ05leHQgVmVyc2lvbic7XG4gICAgbmV4dEJ1dHRvbi5jbGFzc05hbWUgPSAnbW9kYWktaGlzdG9yeV9uZXh0JztcbiAgICBuZXh0QnV0dG9uLmRpc2FibGUgPSAoKSA9PiB7XG4gICAgICAgIG5leHRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgICBuZXh0QnV0dG9uLmVuYWJsZSA9ICgpID0+IHtcbiAgICAgICAgbmV4dEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBuZXh0QnV0dG9uLmlubmVySFRNTCA9ICduZXh0JztcbiAgICBuZXh0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjYWNoZS5uZXh0KCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBpbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpIGFzIEhpc3RvcnlJbmZvO1xuICAgIGluZm8udXBkYXRlID0gKHNob3dpbmcsIHRvdGFsKSA9PiB7XG4gICAgICAgIGluZm8uaW5uZXJUZXh0ID0gYCR7c2hvd2luZ30vJHt0b3RhbH1gO1xuICAgIH1cbiAgICBpbmZvLmlubmVyVGV4dCA9ICcnO1xuXG4gICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSBhcyBIaXN0b3J5TmF2O1xuICAgIHdyYXBwZXIuc2hvdyA9ICgpID0+IHtcbiAgICAgICAgd3JhcHBlci5zdHlsZS5kaXNwbGF5ID0gJ2luaXRpYWwnO1xuICAgIH1cblxuICAgIHdyYXBwZXIuaGlkZSA9ICgpID0+IHtcbiAgICAgICAgd3JhcHBlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cblxuICAgIHdyYXBwZXIucHJldkJ1dHRvbiA9IHByZXZCdXR0b247XG4gICAgd3JhcHBlci5uZXh0QnV0dG9uID0gbmV4dEJ1dHRvbjtcbiAgICB3cmFwcGVyLmluZm8gPSBpbmZvO1xuXG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChwcmV2QnV0dG9uKTtcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKG5leHRCdXR0b24pO1xuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoaW5mbyk7XG5cbiAgICB3cmFwcGVyLmhpZGUoKTtcbiAgICBwcmV2QnV0dG9uLmRpc2FibGUoKTtcbiAgICBuZXh0QnV0dG9uLmRpc2FibGUoKTtcblxuICAgIHJldHVybiB3cmFwcGVyO1xufVxuXG5jb25zdCBjcmVhdGVGcmVlVGV4dFByb21wdCA9IChmaWVsZE5hbWU6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHdhbmRFbCA9IGNyZWF0ZVdhbmRFbCgpO1xuICAgIHdhbmRFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdWkubG9jYWxDaGF0KHtcbiAgICAgICAgICAgIGtleTogZmllbGROYW1lLFxuICAgICAgICAgICAgZmllbGQ6IGZpZWxkTmFtZSxcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgIGF2YWlsYWJsZVR5cGVzOiBbJ3RleHQnLCAnaW1hZ2UnXSxcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHJlc291cmNlOiBNT0R4LnJlcXVlc3QuaWQsXG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHdhbmRFbDtcbn1cblxuY29uc3QgY3JlYXRlRm9yY2VkVGV4dFByb21wdCA9IChmaWVsZDogYW55LCBmaWVsZE5hbWU6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGFpV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSBhcyBIaXN0b3J5RWxlbWVudDtcblxuICAgIGNvbnN0IHdhbmRFbCA9IGNyZWF0ZVdhbmRFbCgpO1xuICAgIHdhbmRFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgZG9uZSA9IGNyZWF0ZUxvYWRpbmdPdmVybGF5KGZpZWxkLmVsLmRvbSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWN1dG9yLm1nci5wcm9tcHQudGV4dCh7XG4gICAgICAgICAgICAgICAgLy9AdHMtZXhwZWN0LWVycm9yIEV4dFxuICAgICAgICAgICAgICAgIGlkOiBNT0R4LnJlcXVlc3QuaWQsXG4gICAgICAgICAgICAgICAgZmllbGQ6IGZpZWxkTmFtZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjYWNoZS5pbnNlcnQocmVzdWx0LmNvbnRlbnQpO1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgIC8vQHRzLWV4cGVjdC1lcnJvciBFeHRcbiAgICAgICAgICAgIEV4dC5Nc2cuYWxlcnQoXCJGYWlsZWRcIiwgXygnbW9kYWkuY21wLmZhaWxlZF90cnlfYWdhaW4nLCB7XCJtc2dcIjogZXJyLm1lc3NhZ2V9KSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGFpV3JhcHBlci5hcHBlbmRDaGlsZCh3YW5kRWwpO1xuXG4gICAgY29uc3QgY2FjaGUgPSBoaXN0b3J5LmluaXQoXG4gICAgICAgIGZpZWxkTmFtZSxcbiAgICAgICAgaGlzdG9yeU5hdlN5bmMsXG4gICAgICAgIGZpZWxkLmdldFZhbHVlKCksXG4gICAgICAgIHt9IGFzIERhdGFDb250ZXh0XG4gICAgKTtcblxuICAgIGlmICghY2FjaGUuY2FjaGVkSXRlbS5jb250ZXh0LmVscykge1xuICAgICAgICBjYWNoZS5jYWNoZWRJdGVtLmNvbnRleHQuZWxzID0gW107XG4gICAgfVxuICAgIGNhY2hlLmNhY2hlZEl0ZW0uY29udGV4dC5lbHMucHVzaCh7ZmllbGQsIHdyYXBwZXI6IGFpV3JhcHBlcn0pO1xuXG4gICAgY29uc3QgaGlzdG9yeU5hdiA9IGNyZWF0ZUhpc3RvcnlOYXYoY2FjaGUpO1xuXG4gICAgYWlXcmFwcGVyLmFwcGVuZENoaWxkKGhpc3RvcnlOYXYpO1xuICAgIGFpV3JhcHBlci5oaXN0b3J5TmF2ID0gaGlzdG9yeU5hdjtcblxuICAgIHJldHVybiBhaVdyYXBwZXI7XG59XG5cbmNvbnN0IGNyZWF0ZUltYWdlUHJvbXB0ID0gKG1lZGlhU291cmNlOiBzdHJpbmcsIGZpZWxkTmFtZTogc3RyaW5nLCBvblN1Y2Nlc3M6IChtc2c6IE1lc3NhZ2UpID0+IHZvaWQpID0+IHtcbiAgICBjb25zdCBpbWFnZVdhbmQgPSBjcmVhdGVXYW5kRWwoKTtcbiAgICBpbWFnZVdhbmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHVpLmxvY2FsQ2hhdCh7XG4gICAgICAgICAgICBrZXk6IGZpZWxkTmFtZSxcbiAgICAgICAgICAgIGZpZWxkOiBmaWVsZE5hbWUsXG4gICAgICAgICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgcmVzb3VyY2U6IE1PRHgucmVxdWVzdC5pZCxcbiAgICAgICAgICAgIGltYWdlOiB7XG4gICAgICAgICAgICAgICAgbWVkaWFTb3VyY2U6IHBhcnNlSW50KG1lZGlhU291cmNlKSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW1hZ2VBY3Rpb25zOiB7XG4gICAgICAgICAgICAgICAgY29weTogZmFsc2UsXG4gICAgICAgICAgICAgICAgaW5zZXJ0OiAobXNnLCBtb2RhbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBvblN1Y2Nlc3MobXNnKTtcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwuYXBpLmNsb3NlTW9kYWwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGltYWdlV2FuZDtcbn1cblxuY29uc3QgYXR0YWNoRmllbGQgPSAoY21wOiBzdHJpbmcsIGZpZWxkTmFtZTogc3RyaW5nKSA9PiB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBFeHRcbiAgICBjb25zdCBmaWVsZCA9IEV4dC5nZXRDbXAoY21wKTtcbiAgICBpZiAoIWZpZWxkKSByZXR1cm47XG5cbiAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpIGFzIEhpc3RvcnlFbGVtZW50O1xuXG4gICAgY29uc3Qgd2FuZEVsID0gY3JlYXRlV2FuZEVsKCk7XG4gICAgd2FuZEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBkb25lID0gY3JlYXRlTG9hZGluZ092ZXJsYXkoZmllbGQuZWwuZG9tKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY3V0b3IubWdyLnByb21wdC50ZXh0KHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIE1PRHhcbiAgICAgICAgICAgICAgICBpZDogTU9EeC5yZXF1ZXN0LmlkLFxuICAgICAgICAgICAgICAgIGZpZWxkOiBmaWVsZE5hbWVcbiAgICAgICAgICAgIH0sIChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgY2FjaGUuaW5zZXJ0KGRhdGEuY29udGVudCwgdHJ1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhY2hlLmluc2VydChyZXN1bHQuY29udGVudCk7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBFeHRcbiAgICAgICAgICAgIEV4dC5Nc2cuYWxlcnQoXCJGYWlsZWRcIiwgXygnbW9kYWkuY21wLmZhaWxlZF90cnlfYWdhaW4nLCB7XCJtc2dcIjogZXJyLm1lc3NhZ2V9KSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQod2FuZEVsKTtcblxuICAgIGNvbnN0IGNhY2hlID0gaGlzdG9yeS5pbml0PERhdGFDb250ZXh0PihcbiAgICAgICAgZmllbGROYW1lLFxuICAgICAgICBoaXN0b3J5TmF2U3luYyxcbiAgICAgICAgZmllbGQuZ2V0VmFsdWUoKSxcbiAgICAgICAge30gYXMgRGF0YUNvbnRleHQsXG4gICAgKTtcblxuICAgIGlmICghY2FjaGUuY2FjaGVkSXRlbS5jb250ZXh0LmVscykge1xuICAgICAgICBjYWNoZS5jYWNoZWRJdGVtLmNvbnRleHQuZWxzID0gW107XG4gICAgfVxuICAgIGNhY2hlLmNhY2hlZEl0ZW0uY29udGV4dC5lbHMucHVzaCh7ZmllbGQsIHdyYXBwZXJ9KTtcblxuICAgIGNvbnN0IGhpc3RvcnlOYXYgPSBjcmVhdGVIaXN0b3J5TmF2KGNhY2hlKTtcblxuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoaGlzdG9yeU5hdik7XG4gICAgd3JhcHBlci5oaXN0b3J5TmF2ID0gaGlzdG9yeU5hdjtcblxuICAgIGZpZWxkLmxhYmVsLmFwcGVuZENoaWxkKHdyYXBwZXIpO1xufVxuXG5jb25zdCBhdHRhY2hJbWFnZVBsdXMgPSAoaW1nUGx1c1BhbmVsOiBFbGVtZW50LCBmaWVsZE5hbWU6IHN0cmluZykgPT4ge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgRXh0XG4gICAgY29uc3QgaW1hZ2VQbHVzID0gRXh0LmdldENtcChpbWdQbHVzUGFuZWwuZmlyc3RFbGVtZW50Q2hpbGQ/LmlkKTtcblxuICAgIGNvbnN0IGltYWdlV2FuZCA9IGNyZWF0ZUltYWdlUHJvbXB0KFxuICAgICAgICBpbWFnZVBsdXMuaW1hZ2VCcm93c2VyLnNvdXJjZSxcbiAgICAgICAgZmllbGROYW1lLFxuICAgICAgICBmdW5jdGlvbihtc2cpIHtcbiAgICAgICAgICAgIGltYWdlUGx1cy5pbWFnZUJyb3dzZXIuc2V0VmFsdWUobXNnLmN0eC51cmwpO1xuICAgICAgICAgICAgaW1hZ2VQbHVzLm9uSW1hZ2VDaGFuZ2UobXNnLmN0eC51cmwpXG4gICAgICAgIH1cbiAgICApO1xuXG4gICAgY29uc3QgYWx0VGV4dFdhbmQgPSBjcmVhdGVXYW5kRWwoKTtcbiAgICBhbHRUZXh0V2FuZC5zdHlsZS5tYXJnaW5Ub3AgPSAnNnB4JztcbiAgICBhbHRUZXh0V2FuZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgaW1nRWxlbWVudCA9IGltYWdlUGx1cy5pbWFnZVByZXZpZXcuZWwuZG9tO1xuXG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgaWYgKCFjdHgpIHJldHVybjtcblxuICAgICAgICBjYW52YXMud2lkdGggPSBpbWdFbGVtZW50LndpZHRoO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaW1nRWxlbWVudC5oZWlnaHQ7XG5cbiAgICAgICAgY3R4LmRyYXdJbWFnZShpbWdFbGVtZW50LCAwLCAwKTtcblxuICAgICAgICBjb25zdCBiYXNlNjREYXRhID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7XG5cbiAgICAgICAgY29uc3QgZG9uZSA9IGNyZWF0ZUxvYWRpbmdPdmVybGF5KGltYWdlUGx1cy5hbHRUZXh0RmllbGQuaXRlbXMuaXRlbXNbMF0uZWwuZG9tKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY3V0b3IubWdyLnByb21wdC52aXNpb24oe1xuICAgICAgICAgICAgICAgIGltYWdlOiBiYXNlNjREYXRhLFxuICAgICAgICAgICAgICAgIGZpZWxkOiBmaWVsZE5hbWVcbiAgICAgICAgICAgIH0sIChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgaW1hZ2VQbHVzLmFsdFRleHRGaWVsZC5pdGVtcy5pdGVtc1swXS5zZXRWYWx1ZShkYXRhLmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGltYWdlUGx1cy5hbHRUZXh0RmllbGQuaXRlbXMuaXRlbXNbMF0uZWwuZG9tLnNjcm9sbFRvcCA9IGltYWdlUGx1cy5hbHRUZXh0RmllbGQuaXRlbXMuaXRlbXNbMF0uZWwuZG9tLnNjcm9sbEhlaWdodDtcbiAgICAgICAgICAgICAgICBpbWFnZVBsdXMuaW1hZ2UuYWx0VGFnID0gZGF0YS5jb250ZW50O1xuICAgICAgICAgICAgICAgIGltYWdlUGx1cy51cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpbWFnZVBsdXMuYWx0VGV4dEZpZWxkLml0ZW1zLml0ZW1zWzBdLnNldFZhbHVlKHJlc3VsdC5jb250ZW50KTtcbiAgICAgICAgICAgIGltYWdlUGx1cy5pbWFnZS5hbHRUYWcgPSByZXN1bHQuY29udGVudDtcbiAgICAgICAgICAgIGltYWdlUGx1cy51cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgRXh0XG4gICAgICAgICAgICBFeHQuTXNnLmFsZXJ0KFwiRmFpbGVkXCIsIF8oJ21vZGFpLmNtcC5mYWlsZWRfdHJ5X2FnYWluJywge1wibXNnXCI6IGVyci5tZXNzYWdlfSkpO1xuICAgICAgICB9XG5cbiAgICB9KTtcblxuICAgIGltYWdlUGx1cy5hbHRUZXh0RmllbGQuZWwuZG9tLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgaW1hZ2VQbHVzLmFsdFRleHRGaWVsZC5lbC5kb20uc3R5bGUuanVzdGlmeUl0ZW1zID0gJ2NlbnRlcic7XG4gICAgaW1hZ2VQbHVzLmFsdFRleHRGaWVsZC5lbC5kb20uc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuXG4gICAgaW1hZ2VQbHVzLmVsLmRvbS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCdsYWJlbCcpLmFwcGVuZENoaWxkKGltYWdlV2FuZCk7XG4gICAgaW1hZ2VQbHVzLmFsdFRleHRGaWVsZC5lbC5kb20uYXBwZW5kQ2hpbGQoYWx0VGV4dFdhbmQpO1xufTtcblxuY29uc3QgYXR0YWNoQ29udGVudCA9ICgpID0+IHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIEV4dFxuICAgIGNvbnN0IGNtcCA9IEV4dC5nZXRDbXAoJ21vZHgtcmVzb3VyY2UtY29udGVudCcpO1xuICAgIGNvbnN0IGxhYmVsID0gY21wLmVsLmRvbS5xdWVyeVNlbGVjdG9yKCdsYWJlbCcpO1xuICAgIGxhYmVsLmFwcGVuZENoaWxkKGNyZWF0ZUZyZWVUZXh0UHJvbXB0KCdyZXMuY29udGVudCcpKTtcbn07XG5cbmNvbnN0IGF0dGFjaFRWcyA9ICgpID0+IHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIEV4dFxuICAgIGNvbnN0IGZvcm0gPSBFeHQuZ2V0Q21wKCdtb2R4LXBhbmVsLXJlc291cmNlJykuZ2V0Rm9ybSgpO1xuICAgIGZvciAoY29uc3QgW3R2SWQsIHR2TmFtZV0gb2YgKG1vZEFJPy50dnMgfHwgW10pKSB7XG4gICAgICAgIC8vQHRzLWV4cGVjdC1lcnJvciBFeHRcbiAgICAgICAgY29uc3Qgd3JhcHBlciA9IEV4dC5nZXQoYHR2JHt0dklkfS10cmApO1xuICAgICAgICBpZiAoIXdyYXBwZXIpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmllbGQgPSBmb3JtLmZpbmRGaWVsZChgdHYke3R2SWR9YCk7XG4gICAgICAgIGNvbnN0IGZpZWxkTmFtZSA9IGB0di4ke3R2TmFtZX1gO1xuXG4gICAgICAgIGlmICghZmllbGQpIHtcbiAgICAgICAgICAgIGNvbnN0IGltZ1BsdXNQYW5lbCA9IHdyYXBwZXIuZG9tLnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZXBsdXMtcGFuZWwtaW5wdXQnKTtcbiAgICAgICAgICAgIGlmIChpbWdQbHVzUGFuZWwpIHtcbiAgICAgICAgICAgICAgICBhdHRhY2hJbWFnZVBsdXMoaW1nUGx1c1BhbmVsLCBmaWVsZE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGQueHR5cGUgPT09ICd0ZXh0ZmllbGQnIHx8IGZpZWxkLnh0eXBlID09PSAndGV4dGFyZWEnKSB7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIE1PRHhcbiAgICAgICAgICAgIGNvbnN0IHByb21wdCA9IE1PRHguY29uZmlnW2Btb2RhaS50di4ke3R2TmFtZX0udGV4dC5wcm9tcHRgXTtcblxuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSB3cmFwcGVyLmRvbS5xdWVyeVNlbGVjdG9yKCdsYWJlbCcpO1xuICAgICAgICAgICAgaWYgKCFsYWJlbCkgcmV0dXJuO1xuXG4gICAgICAgICAgICBpZiAocHJvbXB0KSB7XG4gICAgICAgICAgICAgICAgbGFiZWwuYXBwZW5kQ2hpbGQoY3JlYXRlRm9yY2VkVGV4dFByb21wdChmaWVsZCwgZmllbGROYW1lKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxhYmVsLmFwcGVuZENoaWxkKGNyZWF0ZUZyZWVUZXh0UHJvbXB0KGZpZWxkTmFtZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkLnh0eXBlID09PSAnbW9keC1wYW5lbC10di1pbWFnZScpIHtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlV2FuZCA9IGNyZWF0ZUltYWdlUHJvbXB0KFxuICAgICAgICAgICAgICAgIGZpZWxkLnNvdXJjZSxcbiAgICAgICAgICAgICAgICBmaWVsZE5hbWUsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24obXNnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBldmVudERhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmVVcmw6IG1zZy5jdHgudXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogbXNnLmN0eC51cmxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLml0ZW1zLml0ZW1zWzFdLmZpcmVFdmVudCgnc2VsZWN0JywgZXZlbnREYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQuZmlyZUV2ZW50KCdzZWxlY3QnLCBldmVudERhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gd3JhcHBlci5kb20ucXVlcnlTZWxlY3RvcignbGFiZWwnKTtcbiAgICAgICAgICAgIGlmICghbGFiZWwpIHJldHVybjtcblxuICAgICAgICAgICAgbGFiZWwuYXBwZW5kQ2hpbGQoaW1hZ2VXYW5kKTtcbiAgICAgICAgfVxuICAgIH1cblxufVxuXG5jb25zdCBhdHRhY2hSZXNvdXJjZUZpZWxkcyA9ICgpID0+IHtcbiAgICBjb25zdCBmaWVsZHNNYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHtcbiAgICAgICAgcGFnZXRpdGxlOiBbJ21vZHgtcmVzb3VyY2UtcGFnZXRpdGxlJ10sXG4gICAgICAgIGxvbmd0aXRsZTogWydtb2R4LXJlc291cmNlLWxvbmd0aXRsZScsICdzZW9zdWl0ZS1sb25ndGl0bGUnXSxcbiAgICAgICAgaW50cm90ZXh0OiBbJ21vZHgtcmVzb3VyY2UtaW50cm90ZXh0J10sXG4gICAgICAgIGRlc2NyaXB0aW9uOiBbJ21vZHgtcmVzb3VyY2UtZGVzY3JpcHRpb24nLCAnc2Vvc3VpdGUtZGVzY3JpcHRpb24nXSxcbiAgICAgICAgY29udGVudDogWydtb2R4LXJlc291cmNlLWNvbnRlbnQnXSxcbiAgICB9O1xuXG4gICAgZm9yIChjb25zdCBmaWVsZCBvZiBtb2RBST8ucmVzb3VyY2VGaWVsZHMgfHwgW10pIHtcbiAgICAgICAgaWYgKCFmaWVsZHNNYXBbZmllbGRdKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWVsZCA9PT0gJ2NvbnRlbnQnKSB7XG4gICAgICAgICAgICBhdHRhY2hDb250ZW50KCk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZpZWxkc01hcFtmaWVsZF0uZm9yRWFjaCgoY21wSWQpID0+IHtcbiAgICAgICAgICAgIGF0dGFjaEZpZWxkKGNtcElkLCBgcmVzLiR7ZmllbGR9YCk7XG4gICAgICAgIH0pXG5cbiAgICB9XG59XG5cblxuKCgpID0+IHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgRXh0Lm9uUmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgRXh0LmRlZmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYXR0YWNoUmVzb3VyY2VGaWVsZHMoKTtcbiAgICAgICAgICAgIGF0dGFjaFRWcygpO1xuICAgICAgICB9LCA1MDApO1xuICAgIH0pO1xufSkoKTtcbiIsImltcG9ydCAnLi9yZXNvdXJjZSc7XG5cbmV4cG9ydCBjb25zdCB3aW5kb3cgPSB7fTtcblxuZXhwb3J0IHsgY2hhdEhpc3RvcnkgfSBmcm9tICcuL2NoYXRIaXN0b3J5J1xuZXhwb3J0IHsgaGlzdG9yeSB9IGZyb20gJy4vaGlzdG9yeSdcbmV4cG9ydCB7IGV4ZWN1dG9yIH0gZnJvbSAnLi9leGVjdXRvcidcbmV4cG9ydCB7IHVpIH0gZnJvbSAnLi91aSdcblxuIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInNlcnZpY2VzIiwiYnVmZmVyZWQiLCJjaGF0Z3B0IiwiY29udGVudCIsImRhdGEiLCJjaG9pY2VzIiwibWVzc2FnZSIsIkVycm9yIiwiXyIsImlkIiwiaW1hZ2UiLCJ1cmwiLCJEYXRlIiwibm93IiwiTWF0aCIsInJvdW5kIiwicmFuZG9tIiwiY2xhdWRlIiwidGV4dCIsImdlbWluaSIsImNhbmRpZGF0ZXMiLCJwYXJ0cyIsImJhc2U2NCIsInByZWRpY3Rpb25zIiwiYnl0ZXNCYXNlNjRFbmNvZGVkIiwic3RyZWFtIiwibmV3RGF0YSIsImN1cnJlbnREYXRhIiwiY3VycmVudENvbnRlbnQiLCJkZWx0YSIsImVycm9ySGFuZGxlciIsImFzeW5jIiwicmVzIiwib2siLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiaGFuZGxlU3RyZWFtIiwic2VydmljZSIsInBhcnNlciIsIm9uQ2h1bmtTdHJlYW0iLCJzaWduYWwiLCJib2R5IiwicmVhZGVyIiwiZ2V0UmVhZGVyIiwiZGVjb2RlciIsIlRleHREZWNvZGVyIiwiYnVmZmVyIiwiYWJvcnRlZCIsImRvbmUiLCJyZWFkIiwiY2h1bmsiLCJkZWNvZGUiLCJqc29uTGluZXMiLCJ0cmltIiwic3BsaXQiLCJtYXAiLCJsaW5lIiwicmVwbGFjZSIsImZpbHRlciIsInBhcnNlZERhdGEiLCJKU09OIiwicGFyc2UiLCJuZXdsaW5lSW5kZXgiLCJsYXN0TmV3bGluZUluZGV4IiwiaW5kZXhPZiIsInNsaWNlIiwic3RhcnRzV2l0aCIsInR5cGUiLCJhaUZldGNoIiwiYWN0aW9uIiwicGFyYW1zIiwiY29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsImZldGNoIiwibW9kQUkiLCJhcGlVUkwiLCJtZXRob2QiLCJzdHJpbmdpZnkiLCJoZWFkZXJzIiwiZGV0YWlsIiwicGFyc2VJbnQiLCJkZXRhaWxzIiwiZm9yRXhlY3V0b3IiLCJleGVjdXRvckRldGFpbHMiLCJjYWxsU3RyZWFtU2VydmljZSIsImNhbGxTZXJ2aWNlIiwic2VydmljZUV4ZWN1dG9yIiwiYWJvcnQiLCJleGVjdXRvciIsIm1nciIsImRvd25sb2FkIiwibW9keEZldGNoIiwicHJvbXB0IiwiZnJlZVRleHQiLCJ2aXNpb24iLCJ1bmRlZmluZWQiLCJfY2FjaGUiLCJfZm9ybWF0T3V0cHV0IiwiY2FjaGVkSXRlbSIsInByZXZTdGF0dXMiLCJ2aXNpYmxlIiwibmV4dFN0YXR1cyIsInZhbHVlcyIsImxlbmd0aCIsImN1cnJlbnQiLCJ0b3RhbCIsImNvbnRleHQiLCJpbnNlcnQiLCJub1N0b3JlIiwicHVzaCIsIm91dHB1dCIsInRoaXMiLCJzeW5jVUkiLCJuZXh0IiwicHJldiIsImluaXQiLCJpbml0VmFsdWUiLCJnZXREYXRhIiwiZ2V0QWxsIiwiYXBwbHlTdHlsZXMiLCJlbGVtZW50Iiwic3R5bGVPYmoiLCJhc3NpZ24iLCJzdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImRvY3VtZW50IiwibmxUb0JyIiwidGVzdCIsIl9uYW1lc3BhY2UiLCJST0xFUyIsImFkZE1lc3NhZ2UiLCJyb2xlIiwiaGlkZGVuIiwibmFtZXNwYWNlIiwibXNnT2JqZWN0IiwiY3R4IiwiaW5kZXgiLCJoaXN0b3J5IiwiaWRSZWYiLCJlbCIsIm9uQWRkTWVzc2FnZSIsImNoYXRIaXN0b3J5IiwiYWRkVXNlck1lc3NhZ2UiLCJhZGRBc3Npc3RhbnRNZXNzYWdlIiwidXBkYXRlQXNzaXN0YW50TWVzc2FnZSIsIm1zZyIsInVwZGF0ZSIsInVwZGF0ZU1lc3NhZ2UiLCJnZXRBc3Npc3RhbnRNZXNzYWdlIiwiZ2V0TWVzc2FnZSIsImdldE1lc3NhZ2VzIiwiZ2V0TWVzc2FnZXNIaXN0b3J5IiwibSIsImRlZmF1bHRDb25maWciLCJsb2FkaW5nVGV4dCIsImNvbXBsZXRlZFRleHQiLCJjb21wbGV0ZWRUZXh0RHVyYXRpb24iLCJkaXNhYmxlZCIsInN0eWxlcyIsImJhY2tncm91bmRDb2xvciIsImJvcmRlciIsImJvcmRlclJhZGl1cyIsInBhZGRpbmciLCJmb250U2l6ZSIsImN1cnNvciIsImRpc3BsYXkiLCJhbGlnbkl0ZW1zIiwiY29sb3IiLCJvcGFjaXR5Iiwid2lkdGgiLCJoZWlnaHQiLCJtYXJnaW5SaWdodCIsImJhY2tncm91bmRTaXplIiwiYmFja2dyb3VuZFJlcGVhdCIsImJhY2tncm91bmRQb3NpdGlvbiIsImljb25zIiwiY29weSIsImNyZWF0ZUFjdGlvbkJ1dHRvbiIsImNvbmZpZyIsImJ1dHRvbiIsImNsYXNzTmFtZSIsImVuYWJsZSIsImRpc2FibGUiLCJjb3B5SWNvbiIsImJhY2tncm91bmRJbWFnZSIsImljb24iLCJhcHBlbmQiLCJjcmVhdGVUZXh0Tm9kZSIsImxhYmVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9yaWdpbmFsSFRNTCIsImlubmVySFRNTCIsInJlc3VsdCIsIm9uQ2xpY2siLCJtb2RhbCIsIlByb21pc2UiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJyZW1vdmVDaGlsZCIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwibW9kYWxUeXBlcyIsInBvc2l0aW9uIiwidG9wIiwibGVmdCIsInpJbmRleCIsIm1pbkhlaWdodCIsIm1heEhlaWdodCIsImJveFNoYWRvdyIsImZsZXhEaXJlY3Rpb24iLCJvdmVyZmxvdyIsInRyYW5zZm9ybSIsInRyYW5zaXRpb24iLCJqdXN0aWZ5Q29udGVudCIsImZvbnRXZWlnaHQiLCJnYXAiLCJiYWNrZ3JvdW5kIiwiZmxleCIsIm92ZXJmbG93WSIsImJveFNpemluZyIsIm1hcmdpbkJvdHRvbSIsIndvcmRXcmFwIiwibWFyZ2luTGVmdCIsImJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzIiwibWF4V2lkdGgiLCJib3JkZXJUb3AiLCJvdXRsaW5lIiwicmVzaXplIiwibWluV2lkdGgiLCJiYWNrZHJvcEZpbHRlciIsInBvaW50ZXJFdmVudHMiLCJib3JkZXJDb2xvciIsImNyZWF0ZU1vZGFsIiwiYWxlcnQiLCJhdmFpbGFibGVUeXBlcyIsImluY2x1ZGVzIiwidW5zaGlmdCIsImNsb3NlTW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZHJhZyIsImVuZERyYWciLCJtb2RhbE92ZXJsYXkiLCJyZW1vdmUiLCJpbml0RHJhZyIsImUiLCJpc0RyYWdnaW5nIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIm9mZnNldFgiLCJjbGllbnRYIiwib2Zmc2V0WSIsImNsaWVudFkiLCJ1c2VyU2VsZWN0IiwibmV3WCIsIm5ld1kiLCJzdG9wR2VuZXJhdGlvbiIsImlzTG9hZGluZyIsImFib3J0Q29udHJvbGxlciIsInNldExvYWRpbmdTdGF0ZSIsInRyeUFnYWluIiwibGF0ZXN0VXNlck1zZyIsInJldmVyc2UiLCJmaW5kIiwic2VuZE1lc3NhZ2UiLCJhZGRFcnJvck1lc3NhZ2UiLCJjaGF0TWVzc2FnZXMiLCJtZXNzYWdlRGl2IiwiZXJyb3JJY29uIiwidGV4dFNwYW4iLCJzY3JvbGxUb3AiLCJzY3JvbGxIZWlnaHQiLCJwcm92aWRlZElkIiwibWVzc2FnZUlkIiwiY29udGVudERpdiIsImlmcmFtZSIsInByb3ZpZGVkQ29udGVudCIsImN1c3RvbUNTUyIsInNyY2RvYyIsImNzcyIsImpvaW4iLCJzeW5jSGVpZ2h0IiwiY29udGVudFdpbmRvdyIsImVsZW1lbnRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJvZmZzZXRIZWlnaHQiLCJpIiwiYm90dG9tIiwib2Zmc2V0VG9wIiwibWF4Iiwib25sb2FkIiwiY3JlYXRlQ29udGVudElmcmFtZSIsImFjdGlvbnNEaXYiLCJ0ZXh0QWN0aW9ucyIsImNvcHlUb0NsaXBib2FyZCIsImltYWdlQWN0aW9ucyIsImhhbmRsZXIiLCJkb3dubG9hZGVkIiwiZmllbGQiLCJyZXNvdXJjZSIsIm1lZGlhU291cmNlIiwiZnVsbFVybCIsImluc2VydENiIiwiaWZyYW1lRG9jdW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJyZW5kZXJNZXNzYWdlIiwibmF2aWdhdG9yIiwiY2xpcGJvYXJkIiwid3JpdGVUZXh0IiwidGV4dGFyZWEiLCJzZWxlY3QiLCJleGVjQ29tbWFuZCIsImVyciIsImxvYWRpbmciLCJsb2FkaW5nSW5kaWNhdG9yIiwibWVzc2FnZUlucHV0Iiwic2VuZEJ0biIsInN0b3BCdG4iLCJoYXNNZXNzYWdlcyIsInRyeUFnYWluQnRuIiwidHlwZUJ1dHRvbnMiLCJmb3JFYWNoIiwiaXNBY3RpdmUiLCJ0b0xvd2VyQ2FzZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwcm92aWRlZE1lc3NhZ2UiLCJoaWRlUHJvbXB0IiwibWVzc2FnZXMiLCJuYW1lIiwiY2hhdE1vZGFsIiwiY2hhdEhlYWRlciIsImNoYXRUaXRsZSIsImNoYXRDb250cm9scyIsImNsb3NlQnRuIiwiY2hhdElucHV0QXJlYSIsImlucHV0Um93IiwiaW5wdXRXcmFwcGVyIiwicGxhY2Vob2xkZXIiLCJidXR0b25zQ29sdW1uIiwic2VuZEljb24iLCJzZW5kVGV4dCIsImFjdGlvbkJ1dHRvbnNSb3ciLCJzdG9wSWNvbiIsInRpdGxlIiwicmVmcmVzaEljb24iLCJ0eXBlU2VsZWN0b3IiLCJ0eXBlTGFiZWwiLCJ0eXBlVG9nZ2xlR3JvdXAiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsImJ0biIsImZpcnN0Q2hpbGQiLCJzd2l0Y2hUeXBlIiwic2hpZnRLZXkiLCJwcmV2ZW50RGVmYXVsdCIsImJ1aWxkTW9kYWwiLCJhcGkiLCJ2aXNpYmlsaXR5Iiwib3Blbk1vZGFsIiwiY3JlYXRlTG9hZGluZ092ZXJsYXkiLCJvcHRpb25zIiwiaW5kaWNhdG9yVHlwZSIsIm92ZXJsYXlDb2xvciIsImluZGljYXRvckNvbG9yIiwib3ZlcmxheSIsImluZGljYXRvciIsInRleHRhcmVhU3R5bGVzIiwid2luZG93IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInRleHRhcmVhUmVjdCIsInN0eWxlVGV4dCIsImFuaW1hdGlvbiIsImRvdCIsIm1hcmdpbiIsImFuaW1hdGlvbkRlbGF5Iiwic3R5bGVTaGVldCIsInBhcmVudFN0eWxlcyIsInBhcmVudEVsZW1lbnQiLCJ3cmFwcGVyIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsInVwZGF0ZWRSZWN0Iiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwidWkiLCJsb2NhbENoYXQiLCJoaXN0b3J5TmF2U3luYyIsImVscyIsInByZXZWYWx1ZSIsImdldFZhbHVlIiwic2V0VmFsdWUiLCJmaXJlRXZlbnQiLCJkb20iLCJoaXN0b3J5TmF2Iiwic2hvdyIsImluZm8iLCJwcmV2QnV0dG9uIiwibmV4dEJ1dHRvbiIsImNyZWF0ZVdhbmRFbCIsIndhbmRFbCIsImlubmVyVGV4dCIsImNyZWF0ZUhpc3RvcnlOYXYiLCJjYWNoZSIsInNob3dpbmciLCJoaWRlIiwiY3JlYXRlRnJlZVRleHRQcm9tcHQiLCJmaWVsZE5hbWUiLCJNT0R4IiwicmVxdWVzdCIsImNyZWF0ZUZvcmNlZFRleHRQcm9tcHQiLCJhaVdyYXBwZXIiLCJFeHQiLCJNc2ciLCJjcmVhdGVJbWFnZVByb21wdCIsIm9uU3VjY2VzcyIsImltYWdlV2FuZCIsImF0dGFjaEZpZWxkIiwiY21wIiwiZ2V0Q21wIiwiYXR0YWNoSW1hZ2VQbHVzIiwiaW1nUGx1c1BhbmVsIiwiaW1hZ2VQbHVzIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJpbWFnZUJyb3dzZXIiLCJzb3VyY2UiLCJvbkltYWdlQ2hhbmdlIiwiYWx0VGV4dFdhbmQiLCJtYXJnaW5Ub3AiLCJpbWdFbGVtZW50IiwiaW1hZ2VQcmV2aWV3IiwiY2FudmFzIiwiZ2V0Q29udGV4dCIsImRyYXdJbWFnZSIsImJhc2U2NERhdGEiLCJ0b0RhdGFVUkwiLCJhbHRUZXh0RmllbGQiLCJpdGVtcyIsImFsdFRhZyIsInVwZGF0ZVZhbHVlIiwianVzdGlmeUl0ZW1zIiwicXVlcnlTZWxlY3RvciIsIm9uUmVhZHkiLCJkZWZlciIsImZpZWxkc01hcCIsInBhZ2V0aXRsZSIsImxvbmd0aXRsZSIsImludHJvdGV4dCIsImRlc2NyaXB0aW9uIiwicmVzb3VyY2VGaWVsZHMiLCJjbXBJZCIsImF0dGFjaFJlc291cmNlRmllbGRzIiwiZm9ybSIsImdldEZvcm0iLCJ0dklkIiwidHZOYW1lIiwidHZzIiwiZmluZEZpZWxkIiwieHR5cGUiLCJldmVudERhdGEiLCJyZWxhdGl2ZVVybCIsImF0dGFjaFRWcyJdLCJzb3VyY2VSb290IjoiIn0=
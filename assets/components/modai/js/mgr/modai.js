!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.modAI=t():e.modAI=t()}(self,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{chatHistory:()=>h,executor:()=>r,history:()=>d,ui:()=>le,window:()=>xe});const n={buffered:{chatgpt:{content:e=>{const t=e?.choices?.[0]?.message?.content;if(!t)throw new Error(_("modai.cmp.failed_request"));return{id:e.id,content:t}},image:e=>{let t=e?.data?.[0]?.url;if(!t){if(t=e?.data?.[0]?.b64_json,!t)throw new Error(_("modai.cmp.failed_request"));t=`data:image/png;base64,${t}`}return{id:`chatgpt-${Date.now()}-${Math.round(1e3*Math.random())}`,url:t}}},claude:{content:e=>{const t=e?.content?.[0]?.text;if(!t)throw new Error(_("modai.cmp.failed_request"));return{id:e.id,content:t}}},gemini:{content:e=>{const t=e?.candidates?.[0]?.content?.parts?.[0]?.text;if(!t)throw new Error(_("modai.cmp.failed_request"));return{id:`gemini-${Date.now()}-${Math.round(1e3*Math.random())}`,content:t}},image:e=>{const t=e?.predictions?.[0]?.bytesBase64Encoded;if(!t)throw new Error(_("modai.cmp.failed_request"));return{id:`gemini-${Date.now()}-${Math.round(1e3*Math.random())}`,url:`data:image/png;base64,${t}`}}}},stream:{chatgpt:{content:(e,t)=>{const n=t?.content??"",o=e.choices[0]?.delta?.content||"";return{...t,id:e.id,content:`${n}${o}`}}},claude:{content:(e,t)=>{const n=t?.content??"",o=e.delta?.text||"";return{...t,content:`${n}${o}`}}},gemini:{content:(e,t)=>{const n=t?.content??"",o=e.candidates[0]?.content?.parts[0]?.text||"";return{...t,content:`${n}${o}`}}}}},o=async e=>{if(!e.ok){const t=await e.json();if(t?.error)throw new Error(t.error.message);throw new Error(`${e.status} ${e.statusText}`)}},a=async(e,t,o,a,i)=>{if(!e.body)throw new Error("failed");const r=e.body.getReader(),s=new TextDecoder("utf-8");let d="",l={id:`${t}-${Date.now()}-${Math.round(1e3*Math.random())}`,content:""};for(;!i||!i.aborted;){const{done:e,value:i}=await r.read();if(e)break;const c=s.decode(i,{stream:!0});if("gemini"===t){const e=c.trim().split(",\r\n").map((e=>e.replace(/^\[|]$/g,""))).filter((e=>""!==e.trim()));for(const i of e)try{const e=JSON.parse(i);l=n.stream[t][o](e,l),a&&(console.log("currentData",l),a(l))}catch{}}if("chatgpt"===t){d+=c;let e,i=0;for(;-1!==(e=d.indexOf("\n",i));){const r=d.slice(i,e).trim();if(i=e+1,r.startsWith("data: ")){const e=r.slice(6);if("[DONE]"===e)continue;try{const i=JSON.parse(e);l=n.stream[t][o](i,l),a&&a(l)}catch{}}}d=d.slice(i)}if("claude"===t){d+=c;let e,i=0;for(;-1!==(e=d.indexOf("\n",i));){const r=d.slice(i,e).trim();if(i=e+1,r.startsWith("data: ")){const e=r.slice(6);try{const i=JSON.parse(e);if("message_start"===i.type){l.id=i.message.id;continue}if("content_block_delta"!==i.type)continue;l=n.stream[t][o](i,l),a&&a(l)}catch{}}}d=d.slice(i)}}return l},i=async(e,t,i,r)=>{const s=(r=r||new AbortController).signal,d=await fetch(`${modAI.apiURL}?action=${e}`,{signal:s,method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});if(!d.ok){const e=await d.json();if(e.error)throw new Error(e.error.message);throw new Error(e.detail)}const l=d.headers.get("x-modai-service")??"chatgpt",c=d.headers.get("x-modai-parser")??"content",p=1===parseInt(d.headers.get("x-modai-stream")??"0");if(1!==parseInt(d.headers.get("x-modai-proxy")??"0")){return(async(e,t,i)=>{if("object"!=typeof e||!e.forExecutor)return e;const r=e.forExecutor,s=(i=i||new AbortController).signal;if(!r.service||!r.parser)throw new Error(_("modai.cmp.service_required"));if(!n[r.stream?"stream":"buffered"]?.[r.service]?.[r.parser])throw new Error(_("modai.cmp.service_unsupported"));if(r.stream)return(async e=>{if(console.log("calling service as stream"),"content"!==r.parser)throw new Error(_("modai.cmp.service_unsupported"));const n=await fetch(e.url,{signal:s,method:"POST",body:e.body,headers:e.headers});return await o(n),a(n,r.service,r.parser,t)})(r);const d=await(async e=>{const t=await fetch(e.url,{signal:s,method:"POST",body:e.body,headers:e.headers});await o(t);const n=await t.json();if(n.error)throw new Error(n.error.message);return n})(r);return n.buffered[r.service][r.parser](d)})(await d.json(),i,r)}if(!l||!c)throw r.abort(),new Error(_("modai.cmp.service_required"));if(!n[p?"stream":"buffered"]?.[l]?.[c])throw r.abort(),new Error(_("modai.cmp.service_unsupported"));if(!p){const e=await d.json();return n.buffered[l][c](e)}if("content"!==c)throw new Error(_("modai.cmp.service_unsupported"));return await a(d,l,c,i,s)},r={mgr:{download:{image:async e=>await(async(e,t)=>{const n=await fetch(`${modAI.apiURL}?action=Download\\Image`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});if(!n.ok){const e=await n.json();if(e.error)throw new Error(e.error.message);throw new Error(e.detail)}return await n.json()})(0,e)},prompt:{freeText:async(e,t,n)=>i("Prompt\\FreeText",e,t,n),text:async(e,t,n)=>i("Prompt\\Text",e,t,n),vision:async(e,t,n)=>i("Prompt\\Vision",e,t,n),image:async(e,t)=>i("Prompt\\Image",e,void 0,t)}}},s={},d={_formatOutput(e,t){const n=s[e],o=n.visible>0,a=n.visible!==n.values.length-1;return{value:void 0!==t?t:n.values[n.visible]??null,nextStatus:a,prevStatus:o,current:n.visible+1,total:n.values.length,context:n.context}},insert(e,t,n=!1){const o=s[e];n||(o.visible=o.values.push(t)-1);const a=this._formatOutput(e,t);return"function"==typeof o.syncUI&&o.syncUI(a,n),a},next(e){const t=s[e];if(t.visible===t.values.length-1)return this._formatOutput(e);t.visible++;const n=this._formatOutput(e);return"function"==typeof t.syncUI&&t.syncUI(n),n},prev(e){const t=s[e];if(t.visible<=0)return this._formatOutput(e);t.visible--;const n=this._formatOutput(e);return"function"==typeof t.syncUI&&t.syncUI(n),n},init(e,t,n,o){return s[e]||(s[e]={visible:-1,values:[],context:o}),s[e].syncUI=t,n&&(s[e].values=[n],s[e].visible=0),{cachedItem:s[e],getData:()=>this._formatOutput(e),getAll:()=>s[e].values,syncUI:()=>{"function"==typeof s[e].syncUI&&s[e].syncUI(this._formatOutput(e),!1)},insert:(t,n=!1)=>this.insert(e,t,n),next:()=>this.next(e),prev:()=>this.prev(e)}}},l=(e,t)=>{Object.assign(e.style,t)},c=(e,t,n="")=>{const o=document.createElement(e);return t&&l(o,t),n&&(o.textContent=n),o},p=e=>/<[^>]*>/g.test(e)?e:e.replace(/\r\n|\n|\r/g,"<br>"),g={},m="assistant",u=(e,t,n,o,a=!1,i="text")=>{const r=g[e];if(!r)return;const s={content:t,role:n,id:o,hidden:a,type:i,ctx:{}},d=r.history.push(s)-1;o&&(r.idRef[o]=r.history[d]),s.el=r.onAddMessage(s)},h={init:(e,t)=>(g[e]||(g[e]={history:[],idRef:{},onAddMessage:t}),g[e].onAddMessage=t,{addUserMessage:(t,n,o,a="text")=>{u(e,t,"user",n,o,a)},addAssistantMessage:(t,n,o="text")=>{u(e,t,m,n,!1,o)},updateAssistantMessage:(t,n,o="text")=>{((e,t,n,o="text")=>{const a=g[e];if(!a)return;if(!a.idRef[t])return void u(e,n,m,t,!1,o);const i=a.idRef[t];i.content=n,i.el&&i.el.update&&i.el.update(i)})(e,t,n,o)},getAssistantMessage:t=>((e,t)=>{const n=g[e];if(n)return n.idRef[t]})(e,t),getMessages:()=>g[e].history,getMessagesHistory:()=>g[e].history.map((e=>({role:e.role,content:e.content})))})},f={loadingText:"Loading...",completedText:"Completed!",completedTextDuration:2e3,disabled:!1},y={backgroundColor:"#edf2f7",border:"1px solid #cbd5e0",borderRadius:"4px",padding:"3px 8px",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",color:"#4a5568",opacity:"1"},x={display:"inline-block",width:"14px",height:"14px",marginRight:"5px",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},b={opacity:"0.5",cursor:"not-allowed"},w={copy:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%234a5568' viewBox='0 0 16 16'%3E%3Cpath d='M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z'/%3E%3Cpath d='M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z'/%3E%3C/svg%3E",insert:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%234a5568' viewBox='0 0 16 16'%3E%3Cpath d='M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z'/%3E%3Cpath d='M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z'/%3E%3C/svg%3E"},v=e=>{e={...f,...e};const t=c("button",y);t.className="action-button",t.enable=()=>{t.disabled=!1,l(t,y)},t.disable=()=>{t.disabled=!0,l(t,{...y,...b})},e.disabled&&t.disable();const n=c("span",{...x,backgroundImage:`url("${w[e.icon]}")`});return t.append(n),t.append(document.createTextNode(e.label)),t.addEventListener("click",(async()=>{const n=t.innerHTML,o=e.onClick(e.message,e.modal);if(o instanceof Promise){t.innerHTML=`\n                <span style="\n                    display: inline-block;\n                    margin-right: 5px;\n                    width: 12px;\n                    height: 12px;\n                    position: relative;\n                    animation: spin 1s linear infinite;\n                ">\n                    <span style="\n                        position: absolute;\n                        width: 3px;\n                        height: 3px;\n                        background-color: currentColor;\n                        border-radius: 50%;\n                        top: 0;\n                        left: 50%;\n                        transform: translate(-50%, 0);\n                    "></span>\n                    <span style="\n                        position: absolute;\n                        width: 3px;\n                        height: 3px;\n                        background-color: currentColor;\n                        border-radius: 50%;\n                        top: 50%;\n                        right: 0;\n                        transform: translate(0, -50%);\n                    "></span>\n                    <span style="\n                        position: absolute;\n                        width: 3px;\n                        height: 3px;\n                        background-color: currentColor;\n                        border-radius: 50%;\n                        bottom: 0;\n                        left: 50%;\n                        transform: translate(-50%, 0);\n                    "></span>\n                    <span style="\n                        position: absolute;\n                        width: 3px;\n                        height: 3px;\n                        background-color: currentColor;\n                        border-radius: 50%;\n                        top: 50%;\n                        left: 0;\n                        transform: translate(0, -50%);\n                    "></span>\n                </span>\n                ${e.loadingText}\n            `;const n=document.createElement("style");n.textContent="\n                @keyframes spin {\n                    from { transform: rotate(0deg); }\n                    to { transform: rotate(360deg); }\n                }\n            ",document.head.appendChild(n),await o,document.head.removeChild(n)}t.innerHTML=`\n                <span style="margin-right: 5px;">✓</span>\n                ${e.completedText}\n            `,await new Promise((e=>setTimeout(e,2e3))),t.innerHTML=n})),t},C={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.3)",display:"none",zIndex:"100"},E={position:"fixed",width:"1000px",minHeight:"170px",maxHeight:"600px",backgroundColor:"#fff",borderRadius:"10px",boxShadow:"0 5px 15px rgba(0, 0, 0, 0.3)",display:"none",flexDirection:"column",overflow:"hidden",zIndex:"101",top:"50%",left:"50%",transform:"translate(-50%, -50%)",transition:"height 0.3s ease-in-out"},k={backgroundColor:"#00B6DE",color:"white",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move"},M={fontWeight:"bold",fontSize:"16px"},T={display:"flex",gap:"10px"},I={background:"none",border:"none",color:"white",fontSize:"16px",cursor:"pointer"},A={flex:"1",padding:"15px",overflowY:"auto",backgroundColor:"#f9f9f9",width:"100%",boxSizing:"border-box",display:"none"},S={marginBottom:"20px",borderRadius:"8px",position:"relative",wordWrap:"break-word",width:"100%",boxSizing:"border-box"},L={width:"100%",backgroundColor:"#ffffff",border:"1px solid #e2e8f0",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.05)"},z={width:"fit-content",padding:"10px 15px",backgroundColor:"#4299e1",color:"white",marginLeft:"auto",borderBottomRightRadius:"5px"},D={padding:"12px",width:"100%",maxWidth:"100%",overflow:"hidden",boxSizing:"border-box"},$={display:"flex",padding:"8px 12px",gap:"8px",backgroundColor:"#f7fafc",borderTop:"1px solid #e2e8f0",borderRadius:"0 0 8px 8px"},B={display:"flex",padding:"15px",borderTop:"1px solid #e2e8f0",backgroundColor:"white",position:"relative"},O={display:"flex",width:"100%",gap:"10px"},H={flex:"1",position:"relative",minHeight:"48px",maxHeight:"150px",display:"flex"},R={width:"100%",padding:"12px 15px",border:"1px solid #e2e8f0",borderRadius:"10px",outline:"none",fontSize:"14px",resize:"none",minHeight:"48px",maxHeight:"150px",overflowY:"auto",backgroundColor:"#fff",cursor:"inherit"},P={display:"flex",flexDirection:"column",gap:"4px",width:"100px"},j={backgroundColor:"#6CB24A",color:"white",border:"none",borderRadius:"12px",padding:"8px 16px",cursor:"pointer",fontWeight:"bold",height:"40px",minWidth:"100px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",opacity:"1"},U={display:"flex",gap:"4px",justifyContent:"space-between"},F={backgroundColor:"transparent",border:"1px solid #e2e8f0",borderRadius:"8px",width:"48px",height:"32px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s",opacity:"1"},N={width:"16px",height:"16px",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M2.01 21L23 12 2.01 3 2 10l15 2-15 2z'/%3E%3C/svg%3E\")",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},q={width:"16px",height:"16px",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23DC2626'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M6 6h12v12H6z'/%3E%3C/svg%3E\")",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},W={width:"16px",height:"16px",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%234B5563'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z'/%3E%3C/svg%3E\")",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},V={opacity:"0.5",cursor:"not-allowed"},Y={backgroundColor:"#f3f4f6",cursor:"not-allowed"},J={display:"none",position:"absolute",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(243, 244, 246, 0.9)",borderRadius:"10px",color:"#6B7280",fontSize:"14px",alignItems:"center",justifyContent:"center",gap:"4px",flexDirection:"row",zIndex:"10",backdropFilter:"blur(2px)",border:"1px solid #e2e8f0",pointerEvents:"none"},X={padding:"5px 15px",display:"flex",alignItems:"center",gap:"10px",borderTop:"1px solid #e2e8f0",backgroundColor:"white"},G={fontSize:"14px",color:"#4B5563",fontWeight:"500"},K={display:"flex",gap:"4px"},Q={padding:"6px 12px",fontSize:"13px",border:"1px solid #e2e8f0",borderRadius:"6px",backgroundColor:"#fff",color:"#4B5563",cursor:"pointer",transition:"all 0.2s",opacity:"1"},Z={backgroundColor:"#00B6DE",color:"#fff",borderColor:"#00B6DE"},ee={width:"fit-content",padding:"10px 15px",backgroundColor:"#DC2626",color:"white",marginLeft:"auto",borderBottomRightRadius:"5px",display:"flex",alignItems:"center",gap:"8px"},te={width:"16px",height:"16px",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z'/%3E%3C/svg%3E\")",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},ne={position:"absolute",top:"5px",left:"5px",width:"71px",height:"71px",borderRadius:"6px",overflow:"hidden",border:"1px solid #e2e8f0",backgroundColor:"#f8fafc",cursor:"pointer",transition:"transform 0.2s ease"},oe={width:"100%",height:"100%",objectFit:"cover"},ae={position:"absolute",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",cursor:"pointer",opacity:"0",transition:"opacity 0.2s ease"},ie=["text","image"];let re=!1;const se=e=>{if(re)return;if(!e.key)return void alert("key is required config property");void 0===e.overlay&&(e.overlay=!0),e.type||(e.type="text"),e.availableTypes||(e.availableTypes=[]),e.availableTypes=e.availableTypes.filter((e=>ie.includes(e))),e.availableTypes.length>0&&!e.availableTypes.includes(e.type)&&e.availableTypes.unshift(e.type);const t=async(e,t=!1)=>{if(!t&&e instanceof File&&!e.type.startsWith("image/"))return void m("Only image files are allowed");se.uploadedImage&&n();const o=c("div",ne),a=c("img",oe),i=c("div",ae,"×");if(t)a.src=e,se.uploadedImage=a.src;else{const t=await new Promise(((t,n)=>{const o=new FileReader;o.onload=function(e){t(e.target?.result)},o.onerror=function(e){n(e)},o.readAsDataURL(e)}));a.src=t,se.uploadedImage=t}i.addEventListener("click",(e=>{e.stopPropagation(),n()})),o.addEventListener("mouseenter",(()=>{o.style.transform="scale(1.05)",i.style.opacity="1"})),o.addEventListener("mouseleave",(()=>{o.style.transform="",i.style.opacity="0"})),o.append(a,i),se.imagePreview=o,se.messageInput.style.paddingLeft="85px",se.inputWrapper.append(o)},n=()=>{se.imagePreview&&(se.imagePreview.remove(),se.imagePreview=void 0),se.uploadedImage=void 0,se.messageInput.style.paddingLeft="15px"},o=()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",s),se.modalOverlay&&se.modalOverlay.remove(),se&&se.remove(),re=!1},a=e=>{se.isDragging=!0;const t=se.getBoundingClientRect();se.offsetX=e.clientX-t.left,se.offsetY=e.clientY-t.top,document.body.style.userSelect="none"},i=e=>{if(!se.isDragging)return;const t=e.clientX-se.offsetX,n=e.clientY-se.offsetY;se.style.left=t+"px",se.style.top=n+"px",se.style.transform="none"},s=()=>{se.isDragging=!1,document.body.style.userSelect=""},d=()=>{se.isLoading&&se.abortController&&(se.abortController.abort(),se.abortController=void 0,x(!1))},g=()=>{if(0!==w.getMessages().length)if("text"!==e.type)if("image"!==e.type);else{const e=w.getMessages().reverse().find((e=>"user"===e.role));e&&b(e.content)}else b("Try again")},m=e=>{"none"===se.chatMessages.style.display&&(se.chatMessages.style.display="block");const t=c("div",{...S,...ee}),n=c("span",te);t.appendChild(n);const o=c("span");return o.textContent=e,t.appendChild(o),se.chatMessages.appendChild(t),se.chatMessages.scrollTop=se.chatMessages.scrollHeight,t},u=(t,n)=>{"none"===se.chatMessages.style.display&&(se.chatMessages.style.display="block");const o=c("div",{...S,...L}),a=n||"msg-"+Date.now(),i=c("div",D),s=((e,t,n=[])=>{const o=p(e);let a=!1,i=null;const r=c("iframe",{width:"100%",border:"none",backgroundColor:"white",maxWidth:"100%",boxSizing:"border-box"}),s=()=>r.contentDocument||r.contentWindow?.document,d=e=>`\n        <html>\n        <head>\n            <style>\n            html {\n                width: 100%;\n                max-width: 100%;\n                padding: 0;\n                margin: 0;\n            }\n            body {\n                margin: 0;\n                padding: 0;\n                font-family: Arial, sans-serif;\n                overflow-x: hidden;\n                width: 100%;\n                max-width: 100%;\n                box-sizing: border-box;\n            }\n            * {\n                box-sizing: border-box;\n                max-width: 100%;\n            }\n            pre {\n                white-space: pre-wrap;\n                word-wrap: break-word;\n                overflow-wrap: break-word;\n                max-width: 100%;\n                padding: 12px;\n                margin: 0;\n                background-color: #f5f7fa;\n                border-radius: 5px;\n                font-size: 14px;\n            }\n            img {\n                max-width: 100%;\n                height: auto;\n                display: block;\n            }\n            code {\n                white-space: pre-wrap;\n                word-wrap: break-word;\n                max-width: 100%;\n                display: block;\n                overflow-x: hidden;\n                font-size: 14px;\n            }\n            table {\n                width: 100%;\n                max-width: 100%;\n                overflow-x: hidden;\n                display: block;\n                border-collapse: collapse;\n            }\n            div {\n                max-width: 100%;\n                overflow-wrap: break-word;\n                word-wrap: break-word;\n                box-sizing: border-box;\n            }\n            p {\n                margin: 0 0 0.5em 0;\n                max-width: 100%;\n            }\n            h1, h2, h3, h4, h5, h6 {\n                margin: 0 0 0.1em 0;\n                max-width: 100%;\n            }\n        </style>\n            ${n.map((e=>`<link rel="stylesheet" type="text/css" href="${e}" />`)).join("")}\n        </head>\n        <body style="padding: 0; max-width: 100%; width: 100%; box-sizing: border-box;">${e}</body>\n        </html>\n    `,l=(e,t)=>{const o=e.createElement("style");o.textContent="\n            html {\n                width: 100%;\n                max-width: 100%;\n                padding: 0;\n                margin: 0;\n            }\n            body {\n                margin: 0;\n                padding: 0;\n                font-family: Arial, sans-serif;\n                overflow-x: hidden;\n                width: 100%;\n                max-width: 100%;\n                box-sizing: border-box;\n            }\n            * {\n                box-sizing: border-box;\n                max-width: 100%;\n            }\n            pre {\n                white-space: pre-wrap;\n                word-wrap: break-word;\n                overflow-wrap: break-word;\n                max-width: 100%;\n                padding: 12px;\n                margin: 0;\n                background-color: #f5f7fa;\n                border-radius: 5px;\n                font-size: 14px;\n            }\n            img {\n                max-width: 100%;\n                height: auto;\n                display: block;\n            }\n            code {\n                white-space: pre-wrap;\n                word-wrap: break-word;\n                max-width: 100%;\n                display: block;\n                overflow-x: hidden;\n                font-size: 14px;\n            }\n            table {\n                width: 100%;\n                max-width: 100%;\n                overflow-x: hidden;\n                display: block;\n                border-collapse: collapse;\n            }\n            div {\n                max-width: 100%;\n                overflow-wrap: break-word;\n                word-wrap: break-word;\n                box-sizing: border-box;\n            }\n            p {\n                margin: 0 0 0.5em 0;\n                max-width: 100%;\n            }\n            h1, h2, h3, h4, h5, h6 {\n                margin: 0 0 0.1em 0;\n                max-width: 100%;\n            }\n        ",e.head.appendChild(o),n.forEach((t=>{const n=e.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=t,e.head.appendChild(n)})),e.body.innerHTML=t,e.body.style.padding="0",e.body.style.maxWidth="100%",e.body.style.width="100%",e.body.style.boxSizing="border-box"};return r.syncContent=e=>{(e=>{if(!a)return i=e,void(r.srcdoc=d(e));const t=s();if(!t)return i=e,void(r.srcdoc=d(e));t.head.querySelector("style")?t.body.innerHTML=e:l(t,e),r.syncHeight()})(e)},r.syncHeight=()=>{const e=r.contentWindow?.document.body;if(!e)return;const n=e.getElementsByTagName("*");let o=e.offsetHeight;for(let e=0;e<n.length;e++){const t=n[e],a=t.offsetTop+t.offsetHeight;o=Math.max(o,a)}r.style.height=o+5+"px",e.style.overflow="hidden",t.chatMessages.scrollTop=t.chatMessages.scrollHeight},r.onload=()=>{if(a=!0,null!==i){const e=i;i=null;const t=s();t&&(l(t,e),r.syncHeight())}r.syncHeight()},r.srcdoc=d(o),r})(Array.isArray(t)?t[0].value:t,se,e.customCSS??[]);i.appendChild(s);const d=c("div",$),l=w.getAssistantMessage(a);if(l&&("text"===e.type&&(!1!==e.textActions?.copy&&d.append(v({message:l,modal:se,disabled:se.isLoading,icon:"copy",label:"Copy",completedText:"Copied!",onClick:"function"==typeof e.textActions?.copy?e.textActions.copy:y})),"function"==typeof e.textActions?.insert&&d.append(v({message:l,modal:se,disabled:se.isLoading,icon:"insert",label:"Insert",completedText:"Inserted!",onClick:e.textActions.insert}))),"image"===e.type)){!1!==e.imageActions?.copy&&d.append(v({message:l,modal:se,disabled:se.isLoading,icon:"copy",label:"Copy",loadingText:"Downloading...",completedText:"Copied!",onClick:async(t,n)=>{const o="function"==typeof e.textActions?.copy?e.textActions.copy:y;if(!0===t.ctx.downloaded)return void o(t,n);const a=await r.mgr.download.image({url:t.content,field:e.field,namespace:e.namespace,resource:e.resource,mediaSource:e.image?.mediaSource});t.content=a.fullUrl,t.ctx.downloaded=!0,t.ctx.url=a.url,t.ctx.fullUrl=a.fullUrl,o(t,n)}}));const t=e.imageActions?.insert;"function"==typeof t&&d.append(v({message:l,modal:se,disabled:se.isLoading,icon:"insert",label:"Insert",completedText:"Inserted!",loadingText:"Downloading...",onClick:async(n,o)=>{if(!0===n.ctx.downloaded)return void t(n,o);const a=await r.mgr.download.image({url:n.content,field:e.field,namespace:e.namespace,resource:e.resource,mediaSource:e.image?.mediaSource});n.content=a.fullUrl,n.ctx.downloaded=!0,n.ctx.url=a.url,n.ctx.fullUrl=a.fullUrl,t(n,o)}}))}return o.append(i,d),se.chatMessages.appendChild(o),se.chatMessages.scrollTop=se.chatMessages.scrollHeight,o.update=e=>{const t=Array.isArray(e.content)?e.content[0].value:e.content,n="image"===e.type?`<img src="${t}" />`:p(t);s.syncContent(n),s.syncHeight()},o},f=e=>{if(!e.hidden)return"user"===e.role?(e=>{"none"===se.chatMessages.style.display&&(se.chatMessages.style.display="block");const t=c("div",{...S,...z});let n,o=null;if(Array.isArray(e)){const[t,...a]=e;n=t.value,o=a}else n=e;const a=c("div",{display:"flex",flexDirection:"column",gap:"8px"}),i=c("div");if(i.innerHTML=p(n),a.appendChild(i),o){const e=c("div",{display:"flex",flexDirection:"row",gap:"8px",flexWrap:"wrap"});for(const t of o){const n=c("div",{width:"100px",height:"100px",borderRadius:"4px",overflow:"hidden",marginTop:"4px"}),o=c("img",{width:"100%",height:"100%",objectFit:"cover"});o.src=t.value,n.appendChild(o),e.appendChild(n)}a.appendChild(e)}return t.appendChild(a),t.update=e=>{const t=Array.isArray(e.content)?e.content[0].value:e.content;i.innerHTML=p(t)},se.chatMessages.appendChild(t),se.chatMessages.scrollTop=se.chatMessages.scrollHeight,t})(e.content):"image"===e.type?u(`<img src="${e.content}" />`,e.id):u(e.content,e.id)},y=async e=>{const t=Array.isArray(e.content)?e.content[0].value:e.content;if(navigator.clipboard&&navigator.clipboard.writeText)try{await navigator.clipboard.writeText(t)}catch{m(_("modai.cmp.failed_copy"))}else try{const e=c("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}catch(e){m(_("modai.cmp.failed_copy"))}},x=t=>{se.isLoading=t,se.loadingIndicator.style.display=t?"flex":"none",se.messageInput.disabled=t,l(se.messageInput,t?{...R,...Y}:R),se.sendBtn.disabled=t,l(se.sendBtn,t?{...j,...V}:j),se.stopBtn.disabled=!t,l(se.stopBtn,t?F:{...F,...V});const n=w.getMessages().length>0;se.tryAgainBtn.disabled=t||!n,l(se.tryAgainBtn,t||!n?{...F,...V}:F),Object.values(se.typeButtons).forEach((n=>{n.disabled=t;const o=n.textContent?.toLowerCase()===e.type;l(n,t?{...Q,...o?Z:{},...V}:{...Q,...o?Z:{}})})),se.chatMessages.querySelectorAll(".action-button").forEach((e=>{t?e.disable?.():e?.enable?.()}))},b=async(t,o)=>{let a=t?t.trim():se.messageInput.value.trim();if(!a||se.isLoading)return;x(!0),se.messageInput.value="",se.abortController=new AbortController,se.uploadedImage&&"text"===e.type&&(a=[{type:"text",value:a},{type:"image",value:se.uploadedImage}]),n();const i=w.getMessagesHistory(),s="user-msg-"+Date.now()+Math.round(1e3*Math.random());w.addUserMessage(a,s,o);try{if("text"===e.type){const t=await r.mgr.prompt.freeText({namespace:e.namespace,context:e.context,prompt:a,field:e.field||"",messages:i},(e=>{w.updateAssistantMessage(e.id,e.content)}),se.abortController);w.updateAssistantMessage(t.id,t.content)}if("image"===e.type){const e=await r.mgr.prompt.image({prompt:a},se.abortController);w.addAssistantMessage(e.url,e.id,"image")}se.abortController=void 0}catch(e){if(e instanceof Error){if("AbortError"===e.name)return;return void m(e.message)}m("Unknown error")}x(!1)};let w=h.init(`${e.key}/${e.type}`,(e=>f(e)));const se=(()=>{const n=c("div",C),r=c("div",E),p=c("div",k),u=c("div",M,"modAI Assistant"),y=c("div",T),x=c("button",I,"✕");y.append(x),p.append(u,y);const v=c("div",A),S=c("div",B),L=c("div",O),_=c("div",H),z=c("textarea",R);z.placeholder="Type your message...",z.addEventListener("dragover",(e=>{e.preventDefault(),e.stopPropagation(),z.style.borderColor="#00B6DE"})),z.addEventListener("dragleave",(e=>{e.preventDefault(),e.stopPropagation(),z.style.borderColor="#e2e8f0"})),z.addEventListener("drop",(async e=>{e.preventDefault(),e.stopPropagation(),z.style.borderColor="#e2e8f0";let n=null,o=null;const a=e.dataTransfer;if(!a)return;const i=a.files;if(i?.length>0){const e=i[0];e.type.startsWith("image/")&&(n=e)}if(!n){const e=a.getData("text/uri-list");e&&(o=e)}if(n)await t(n);else if(o){const e=new URL(window.location.href);if(!o.startsWith(e.origin))return void await t(o,!0);try{const e=await fetch(o);if(e.ok){const n=await e.blob();if(n.type.startsWith("image/")){const e=new File([n],"image.png",{type:n.type});await t(e)}}}catch(e){m("Filed to fetch an image")}}else m("Only image files are allowed")})),z.addEventListener("paste",(async e=>{const n=e.clipboardData?.items;if(n)for(let o=0;o<n.length;o++)if(-1!==n[o].type.indexOf("image")){const a=n[o].getAsFile();if(a){e.preventDefault(),await t(a);break}}})),x.addEventListener("click",(()=>{o()}));const D=c("div",P),$=c("button",j),Y=c("span",N),ee=document.createTextNode("Send");$.append(Y,ee);const te=c("div",U),ne=c("button",{...F,...V}),oe=c("span",q);ne.appendChild(oe),ne.title="Stop Generation";const ae=c("button",F),ie=c("span",W);ae.appendChild(ie),ae.title="Try Again",0===w.getMessages().length&&(ae.disabled=!0,l(ae,{...F,...V})),te.append(ne,ae),D.append($,te),_.append(z),L.append(_,D);const re=c("div",J);re.innerHTML='\n        <style>\n            @keyframes loadingDotPulse {\n                0%, 80%, 100% { transform: scale(0.6); opacity: 0.3; }\n                40% { transform: scale(1); opacity: 1; }\n            }\n            .loading-dots {\n                display: flex;\n                gap: 4px;\n                padding: 8px 16px;\n                background-color: rgba(255, 255, 255, 0.8);\n                border-radius: 16px;\n            }\n            .loading-dot {\n                width: 8px;\n                height: 8px;\n                background-color: #6B7280;\n                border-radius: 50%;\n                display: inline-block;\n                animation: loadingDotPulse 1.4s infinite ease-in-out both;\n            }\n            .loading-dot:nth-child(1) { animation-delay: -0.32s; }\n            .loading-dot:nth-child(2) { animation-delay: -0.16s; }\n            .loading-dot:nth-child(3) { animation-delay: 0s; }\n        </style>\n        <div class="loading-dots">\n            <div class="loading-dot"></div>\n            <div class="loading-dot"></div>\n            <div class="loading-dot"></div>\n        </div>\n    ',_.append(re);const de=c("div",X),le=c("div",G,"Generate:"),ce=c("div",K),pe={},ge=e.availableTypes??[];return ge.forEach((t=>{const n=c("button",Q,t.charAt(0).toUpperCase()+t.slice(1));t===e.type&&l(n,{...Q,...Z}),n.addEventListener("click",(()=>{Object.values(pe).forEach((e=>{l(e,Q)})),l(n,{...Q,...Z}),(t=>{for(e.type=t,w=h.init(`${e.key}/${e.type}`,(e=>f(e)));se.chatMessages.firstChild;)se.chatMessages.removeChild(se.chatMessages.firstChild);se.chatMessages.style.display="none";const n=w.getMessages().filter((e=>!e.hidden));n.length>0&&(se.chatMessages.style.display="block",n.forEach((e=>{f(e)})))})(t)})),pe[t]=n,ce.appendChild(n)})),de.append(le,ce),S.append(L),r.append(p,v,S),ge.length>0&&r.append(de),e.overlay&&document.body.append(n),document.body.append(r),x.addEventListener("click",o),$.addEventListener("click",(()=>b())),ne.addEventListener("click",d),ae.addEventListener("click",g),z.addEventListener("keydown",(e=>{if("Enter"===e.key){if(e.shiftKey)return;e.preventDefault(),b()}})),p.addEventListener("mousedown",a),document.addEventListener("mousemove",i),document.addEventListener("mouseup",s),r.modalOverlay=n,r.chatHeader=p,r.closeBtn=x,r.chatMessages=v,r.messageInput=z,r.sendBtn=$,r.tryAgainBtn=ae,r.stopBtn=ne,r.loadingIndicator=re,r.typeSelector=de,r.typeButtons=pe,r.inputWrapper=_,r.isDragging=!1,r.isLoading=!1,r.abortController=void 0,r.offsetX=0,r.offsetY=0,r})();return se.api={sendMessage:b,closeModal:o},(()=>{se.chatMessages.innerHTML="",se.chatMessages.style.display="none",se.style.visibility="hidden",se.style.display="flex",se.modalOverlay.style.display="block";const e=w.getMessages().filter((e=>!e.hidden));e.length>0&&(se.chatMessages.style.display="block",e.forEach((e=>{f(e)}))),setTimeout((()=>{se.chatMessages.scrollTop=se.chatMessages.scrollHeight,se.style.visibility="visible"}),100)})(),re=!0,se},de=(e,t={})=>{const n={indicatorType:t.indicatorType||"spinner",overlayColor:t.overlayColor||"rgba(255, 255, 255, 0.7)",indicatorColor:t.indicatorColor||"#3498db"},o=document.createElement("div"),a=document.createElement("div"),i=window.getComputedStyle(e),r=e.getBoundingClientRect();t.indicatorColor||(n.indicatorType=r.height<=50?"dots":"spinner"),o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.backgroundColor=n.overlayColor,o.style.display="flex",o.style.justifyContent="center",o.style.alignItems="center",o.style.zIndex="10000",o.style.borderRadius=i.borderRadius;let s="";if("spinner"===n.indicatorType)a.style.border="4px solid #f3f3f3",a.style.borderTop=`4px solid ${n.indicatorColor}`,a.style.borderRadius="50%",a.style.width="30px",a.style.height="30px",a.style.animation="textareaOverlaySpin 1s linear infinite",s="\n      @keyframes textareaOverlaySpin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n    ";else if("dots"===n.indicatorType){a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.height="20px";for(let e=0;e<3;e++){const t=document.createElement("div");t.style.width="8px",t.style.height="8px",t.style.borderRadius="50%",t.style.backgroundColor=n.indicatorColor,t.style.margin="0 4px",t.style.animation="textareaOverlayDotPulse 1.4s infinite ease-in-out",t.style.animationDelay=.2*e+"s",a.appendChild(t)}s="\n      @keyframes textareaOverlayDotPulse {\n        0%, 80%, 100% { transform: scale(0); opacity: 0.5; }\n        40% { transform: scale(1); opacity: 1; }\n      }\n    "}const d=document.createElement("style");d.textContent=s,document.head.appendChild(d),o.appendChild(a);const l=window.getComputedStyle(e.parentElement);let c;-1===["relative","absolute","fixed"].indexOf(l.position)?(c=document.createElement("div"),c.style.position="relative",c.style.width=`${r.width}px`,c.style.height=`${r.height}px`,c.style.display="inline-block",e.parentNode?.insertBefore(c,e),c.appendChild(e)):c=e.parentElement,o.style.display="none",c.appendChild(o);const p=e.getBoundingClientRect();return c!==e.parentElement&&(c.style.width=`${p.width}px`,c.style.height=`${p.height}px`),o.style.display="flex",e.setAttribute("disabled","disabled"),()=>{o.style.display="none",e.removeAttribute("disabled"),o.remove(),d.remove(),c!==e.parentElement&&(c.parentNode?.insertBefore(e,c),c.remove())}},le={createLoadingOverlay:de,localChat:e=>se(e)},ce=(e,t)=>{e.context.els.forEach((({wrapper:n,field:o})=>{const a=o.getValue();o.setValue(e.value),o.fireEvent("change",o,e.value,a),t&&(o.el.dom.scrollTop=o.el.dom.scrollHeight),e.total>0&&n.historyNav.show(),n.historyNav.info.update(e.current,e.total),e.prevStatus?n.historyNav.prevButton.enable():n.historyNav.prevButton.disable(),e.nextStatus?n.historyNav.nextButton.enable():n.historyNav.nextButton.disable()}))},pe=()=>{const e=document.createElement("button");return e.className="modai-generate",e.innerText="✦",e.type="button",e.title="Generate using AI",e},ge=e=>{const t=document.createElement("button");t.type="button",t.title="Previous Version",t.className="modai-history_prev",t.disable=()=>{t.disabled=!0},t.enable=()=>{t.disabled=!1},t.innerHTML="prev",t.addEventListener("click",(()=>{e.prev()}));const n=document.createElement("button");n.type="button",n.title="Next Version",n.className="modai-history_next",n.disable=()=>{n.disabled=!0},n.enable=()=>{n.disabled=!1},n.innerHTML="next",n.addEventListener("click",(()=>{e.next()}));const o=document.createElement("span");o.update=(e,t)=>{o.innerText=`${e}/${t}`},o.innerText="";const a=document.createElement("span");return a.show=()=>{a.style.display="initial"},a.hide=()=>{a.style.display="none"},a.prevButton=t,a.nextButton=n,a.info=o,a.appendChild(t),a.appendChild(n),a.appendChild(o),a.hide(),t.disable(),n.disable(),a},me=e=>{const t=pe();return t.addEventListener("click",(()=>{le.localChat({key:e,field:e,overlay:!1,type:"text",availableTypes:["text","image"],resource:MODx.request.id})})),t},ue=(e,t)=>{const n=document.createElement("span"),o=pe();o.addEventListener("click",(async()=>{const n=de(e.el.dom);try{const e=await r.mgr.prompt.text({id:MODx.request.id,field:t});a.insert(e.content),n()}catch(e){n(),Ext.Msg.alert("Failed",_("modai.cmp.failed_try_again",{msg:e.message}))}})),n.appendChild(o);const a=d.init(t,ce,e.getValue(),{});a.cachedItem.context.els||(a.cachedItem.context.els=[]),a.cachedItem.context.els.push({field:e,wrapper:n});const i=ge(a);return n.appendChild(i),n.historyNav=i,n},he=(e,t,n)=>{const o=pe();return o.addEventListener("click",(()=>{le.localChat({key:t,field:t,type:"image",resource:MODx.request.id,image:{mediaSource:parseInt(e)||void 0},imageActions:{copy:!1,insert:(e,t)=>{n(e),t.api.closeModal()}}})})),o},fe=(e,t)=>{const n=Ext.getCmp(e);if(!n)return;const o=document.createElement("span"),a=pe();a.addEventListener("click",(async()=>{const e=de(n.el.dom);try{const n=await r.mgr.prompt.text({id:MODx.request.id,field:t},(e=>{i.insert(e.content,!0)}));i.insert(n.content),e()}catch(t){e(),Ext.Msg.alert("Failed",_("modai.cmp.failed_try_again",{msg:t.message}))}})),o.appendChild(a);const i=d.init(t,ce,n.getValue(),{});i.cachedItem.context.els||(i.cachedItem.context.els=[]),i.cachedItem.context.els.push({field:n,wrapper:o});const s=ge(i);o.appendChild(s),o.historyNav=s,n.label.appendChild(o)},ye=(e,t)=>{const n=Ext.getCmp(e.firstElementChild?.id),o=he(n.imageBrowser.source,t,(function(e){n.imageBrowser.setValue(e.ctx.url),n.onImageChange(e.ctx.url)})),a=pe();a.style.marginTop="6px",a.addEventListener("click",(async()=>{const e=n.imagePreview.el.dom,o=document.createElement("canvas"),a=o.getContext("2d");if(!a)return;o.width=e.width,o.height=e.height,a.drawImage(e,0,0);const i=o.toDataURL("image/png"),s=de(n.altTextField.items.items[0].el.dom);try{const e=await r.mgr.prompt.vision({image:i,field:t},(e=>{n.altTextField.items.items[0].setValue(e.content),n.altTextField.items.items[0].el.dom.scrollTop=n.altTextField.items.items[0].el.dom.scrollHeight,n.image.altTag=e.content,n.updateValue()}));n.altTextField.items.items[0].setValue(e.content),n.image.altTag=e.content,n.updateValue(),s()}catch(e){s(),Ext.Msg.alert("Failed",_("modai.cmp.failed_try_again",{msg:e.message}))}})),n.altTextField.el.dom.style.display="flex",n.altTextField.el.dom.style.justifyItems="center",n.altTextField.el.dom.style.alignItems="center",n.el.dom.parentElement.parentElement.parentElement.querySelector("label").appendChild(o),n.altTextField.el.dom.appendChild(a)};Ext.onReady((function(){Ext.defer((function(){(()=>{const e={pagetitle:["modx-resource-pagetitle"],longtitle:["modx-resource-longtitle","seosuite-longtitle"],introtext:["modx-resource-introtext"],description:["modx-resource-description","seosuite-description"],content:["modx-resource-content"]};for(const t of modAI?.resourceFields||[])e[t]&&("content"!==t?e[t].forEach((e=>{fe(e,`res.${t}`)})):Ext.getCmp("modx-resource-content").el.dom.querySelector("label").appendChild(me("res.content")))})(),(()=>{const e=Ext.getCmp("modx-panel-resource").getForm();for(const[t,n]of modAI?.tvs||[]){const o=Ext.get(`tv${t}-tr`);if(!o)continue;const a=e.findField(`tv${t}`),i=`tv.${n}`;if(a){if("textfield"===a.xtype||"textarea"===a.xtype){const e=MODx.config[`modai.tv.${n}.text.prompt`],t=o.dom.querySelector("label");if(!t)return;e?t.appendChild(ue(a,i)):t.appendChild(me(i))}if("modx-panel-tv-image"===a.xtype){const e=he(a.source,i,(function(e){const t={relativeUrl:e.ctx.url,url:e.ctx.url};a.items.items[1].fireEvent("select",t),a.fireEvent("select",t)})),t=o.dom.querySelector("label");if(!t)return;t.appendChild(e)}}else{const e=o.dom.querySelector(".imageplus-panel-input");e&&ye(e,i)}}})()}),500)}));const xe={};return t})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBTVMsWUFBWTZRLEdBQXVCaEksRUFBTzZILElBRWhEblIsRUFBTVMsWUFBWXlRLEdBQXFCQyxHQUUvQyxDQUVBLEdBQW9CLHdCQUFoQjdILEVBQU00SyxNQUFpQyxDQUN2QyxNQUFNdEMsRUFBWUYsR0FDZHBJLEVBQU0rSSxPQUNObEIsR0FDQSxTQUFTOVQsR0FDRCxNQUFNOFcsRUFBWSxDQUNkQyxZQUFhL1csRUFBSVYsSUFBSWxJLElBQ3JCQSxJQUFLNEksRUFBSVYsSUFBSWxJLEtBR2pCNlUsRUFBTXlELE1BQU1BLE1BQU0sR0FBR3FELFVBQVUsU0FBVStELEdBQ3pDN0ssRUFBTThHLFVBQVUsU0FBVStELEVBQ2xDLElBR0VuVSxFQUFRdVAsRUFBUWMsSUFBSWxJLGNBQWMsU0FDeEMsSUFBS25JLEVBQU8sT0FFWkEsRUFBTVMsWUFBWW1SLEVBQ3RCLENBbkNBLEtBTkEsQ0FDSSxNQUFNSyxFQUFlMUMsRUFBUWMsSUFBSWxJLGNBQWMsMEJBQzNDOEosR0FDQUQsR0FBZ0JDLEVBQWNkLEVBR3RDLENBb0NKLEdBcUNRa0QsRUFDSixHQUFHLElBQ1AsSUNyYUcsTUFBTSxHQUFTLENBQUMsRSIsInNvdXJjZXMiOlsid2VicGFjazovL21vZEFJL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9tb2RBSS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9tb2RBSS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vbW9kQUkvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9tb2RBSS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL21vZEFJLy4vX2J1aWxkL2pzL3NyYy9leGVjdXRvci50cyIsIndlYnBhY2s6Ly9tb2RBSS8uL19idWlsZC9qcy9zcmMvaGlzdG9yeS50cyIsIndlYnBhY2s6Ly9tb2RBSS8uL19idWlsZC9qcy9zcmMvdWkvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vbW9kQUkvLi9fYnVpbGQvanMvc3JjL2NoYXRIaXN0b3J5LnRzIiwid2VicGFjazovL21vZEFJLy4vX2J1aWxkL2pzL3NyYy91aS9sb2NhbENoYXQvYWN0aW9uQnV0dG9uLnRzIiwid2VicGFjazovL21vZEFJLy4vX2J1aWxkL2pzL3NyYy91aS9sb2NhbENoYXQvc3R5bGVzLnRzIiwid2VicGFjazovL21vZEFJLy4vX2J1aWxkL2pzL3NyYy91aS9sb2NhbENoYXQvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vbW9kQUkvLi9fYnVpbGQvanMvc3JjL3VpL2xvY2FsQ2hhdC9pZnJhbWUudHMiLCJ3ZWJwYWNrOi8vbW9kQUkvLi9fYnVpbGQvanMvc3JjL3VpL292ZXJsYXkudHMiLCJ3ZWJwYWNrOi8vbW9kQUkvLi9fYnVpbGQvanMvc3JjL3VpL2luZGV4LnRzIiwid2VicGFjazovL21vZEFJLy4vX2J1aWxkL2pzL3NyYy9yZXNvdXJjZS50cyIsIndlYnBhY2s6Ly9tb2RBSS8uL19idWlsZC9qcy9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wibW9kQUlcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wibW9kQUlcIl0gPSBmYWN0b3J5KCk7XG59KShzZWxmLCAoKSA9PiB7XG5yZXR1cm4gIiwiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJ0eXBlIFNlcnZpY2VUeXBlID0gJ2NoYXRncHQnIHwgJ2NsYXVkZScgfCAnZ2VtaW5pJztcbnR5cGUgQnVmZmVyTW9kZSA9ICdidWZmZXJlZCcgfCAnc3RyZWFtJztcblxuZXhwb3J0IHR5cGUgU2VydmljZVJlc3BvbnNlID0gVGV4dERhdGEgfCBJbWFnZURhdGE7XG5cbnR5cGUgU2VydmljZUhhbmRsZXJzID0ge1xuICAgIGJ1ZmZlcmVkOiB7XG4gICAgICAgIGNoYXRncHQ6IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IChkYXRhOiBhbnkpID0+IFRleHREYXRhO1xuICAgICAgICAgICAgaW1hZ2U6IChkYXRhOiBhbnkpID0+IEltYWdlRGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgY2xhdWRlOiB7XG4gICAgICAgICAgICBjb250ZW50OiAoZGF0YTogYW55KSA9PiBUZXh0RGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgZ2VtaW5pOiB7XG4gICAgICAgICAgICBjb250ZW50OiAoZGF0YTogYW55KSA9PiBUZXh0RGF0YTtcbiAgICAgICAgICAgIGltYWdlOiAoZGF0YTogYW55KSA9PiBJbWFnZURhdGE7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBzdHJlYW06IHtcbiAgICAgICAgY2hhdGdwdDoge1xuICAgICAgICAgICAgY29udGVudDogKG5ld0RhdGE6IGFueSwgY3VycmVudERhdGE6IFRleHREYXRhKSA9PiBUZXh0RGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgY2xhdWRlOiB7XG4gICAgICAgICAgICBjb250ZW50OiAobmV3RGF0YTogYW55LCBjdXJyZW50RGF0YTogVGV4dERhdGEpID0+IFRleHREYXRhO1xuICAgICAgICB9O1xuICAgICAgICBnZW1pbmk6IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IChuZXdEYXRhOiBhbnksIGN1cnJlbnREYXRhOiBUZXh0RGF0YSkgPT4gVGV4dERhdGE7XG4gICAgICAgIH07XG4gICAgfTtcbn1cblxudHlwZSBGb3JFeGVjdXRvciA9IHtcbiAgICB1cmw6IHN0cmluZztcbiAgICBib2R5OiBzdHJpbmc7XG4gICAgc2VydmljZTogc3RyaW5nO1xuICAgIGhlYWRlcnM6IEhlYWRlcnNJbml0O1xuICAgIHBhcnNlcjogc3RyaW5nO1xuICAgIHN0cmVhbTogYm9vbGVhbjtcbn07XG5cbnR5cGUgRXhlY3V0b3JEYXRhID0ge1xuICAgIGZvckV4ZWN1dG9yOiBGb3JFeGVjdXRvcjtcbn0gfCBzdHJpbmc7XG5cbmV4cG9ydCB0eXBlIFRleHRQcm9tcHQgPSB7dHlwZTogJ3RleHQnLCB2YWx1ZTogc3RyaW5nfVxuZXhwb3J0IHR5cGUgSW1hZ2VQcm9tcHQgPSB7dHlwZTogJ2ltYWdlJywgdmFsdWU6IHN0cmluZ31cblxuZXhwb3J0IHR5cGUgUHJvbXB0ID0gc3RyaW5nIHwgW1RleHRQcm9tcHQsIC4uLkltYWdlUHJvbXB0W11dO1xuXG50eXBlIEZyZWVUZXh0UGFyYW1zID0ge1xuICAgIHByb21wdDogUHJvbXB0O1xuICAgIGZpZWxkPzogc3RyaW5nO1xuICAgIGNvbnRleHQ/OiBzdHJpbmc7XG4gICAgbmFtZXNwYWNlPzogc3RyaW5nO1xuICAgIG1lc3NhZ2VzOiB7cm9sZTogc3RyaW5nLCBjb250ZW50OiBQcm9tcHR9W107XG59XG5cbnR5cGUgVGV4dFBhcmFtcyA9IHtcbiAgICBmaWVsZD86IHN0cmluZztcbiAgICBuYW1lc3BhY2U/OiBzdHJpbmc7XG4gICAgaWQ6IHN0cmluZyB8IG51bWJlcjtcbn1cblxudHlwZSBWaXNpb25QYXJhbXMgPSB7XG4gICAgZmllbGQ/OiBzdHJpbmc7XG4gICAgbmFtZXNwYWNlPzogc3RyaW5nO1xuICAgIGltYWdlOiBzdHJpbmc7XG59XG5cbnR5cGUgSW1hZ2VQYXJhbXMgPSB7XG4gICAgcHJvbXB0OiBzdHJpbmc7XG4gICAgZmllbGQ/OiBzdHJpbmc7XG4gICAgbmFtZXNwYWNlPzogc3RyaW5nO1xufVxuXG50eXBlIERvd25sb2FkSW1hZ2VQYXJhbXMgPSB7XG4gICAgdXJsOiBzdHJpbmdcbiAgICBmaWVsZD86IHN0cmluZztcbiAgICBuYW1lc3BhY2U/OiBzdHJpbmc7XG4gICAgcmVzb3VyY2U/OiBzdHJpbmcgfCBudW1iZXI7XG4gICAgbWVkaWFTb3VyY2U/OiBzdHJpbmcgfCBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBUZXh0RGF0YSA9IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGNvbnRlbnQ6IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgSW1hZ2VEYXRhID0ge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgdXJsOiBzdHJpbmc7XG59XG5cbnR5cGUgQ2h1bmtTdHJlYW08RCA9IHVua25vd24+ID0gKGRhdGE6IEQpID0+IHZvaWQ7XG5cbmNvbnN0IHNlcnZpY2VzOiBTZXJ2aWNlSGFuZGxlcnMgPSB7XG4gICAgYnVmZmVyZWQ6IHtcbiAgICAgICAgY2hhdGdwdDoge1xuICAgICAgICAgICAgY29udGVudDogKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZGF0YT8uY2hvaWNlcz8uWzBdPy5tZXNzYWdlPy5jb250ZW50O1xuXG4gICAgICAgICAgICAgICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihfKCdtb2RhaS5jbXAuZmFpbGVkX3JlcXVlc3QnKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBkYXRhLmlkO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGltYWdlOiAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB1cmwgPSBkYXRhPy5kYXRhPy5bMF0/LnVybDtcblxuICAgICAgICAgICAgICAgIGlmICghdXJsKSB7XG4gICAgICAgICAgICAgICAgICAgdXJsID0gZGF0YT8uZGF0YT8uWzBdPy5iNjRfanNvbjtcblxuICAgICAgICAgICAgICAgICAgIGlmICghdXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihfKCdtb2RhaS5jbXAuZmFpbGVkX3JlcXVlc3QnKSk7XG4gICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHVybCA9IGBkYXRhOmltYWdlL3BuZztiYXNlNjQsJHt1cmx9YFxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBgY2hhdGdwdC0ke0RhdGUubm93KCl9LSR7TWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKjEwMDApfWAsXG4gICAgICAgICAgICAgICAgICAgIHVybFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2xhdWRlOiB7XG4gICAgICAgICAgICBjb250ZW50OiAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkYXRhPy5jb250ZW50Py5bMF0/LnRleHQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKF8oJ21vZGFpLmNtcC5mYWlsZWRfcmVxdWVzdCcpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IGRhdGEuaWQ7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGdlbWluaToge1xuICAgICAgICAgICAgY29udGVudDogKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZGF0YT8uY2FuZGlkYXRlcz8uWzBdPy5jb250ZW50Py5wYXJ0cz8uWzBdPy50ZXh0O1xuXG4gICAgICAgICAgICAgICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihfKCdtb2RhaS5jbXAuZmFpbGVkX3JlcXVlc3QnKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGBnZW1pbmktJHtEYXRlLm5vdygpfS0ke01hdGgucm91bmQoTWF0aC5yYW5kb20oKSoxMDAwKX1gLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpbWFnZTogKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlNjQgPSBkYXRhPy5wcmVkaWN0aW9ucz8uWzBdPy5ieXRlc0Jhc2U2NEVuY29kZWQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXygnbW9kYWkuY21wLmZhaWxlZF9yZXF1ZXN0JykpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBgZ2VtaW5pLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkqMTAwMCl9YCxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBgZGF0YTppbWFnZS9wbmc7YmFzZTY0LCR7YmFzZTY0fWBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHN0cmVhbToge1xuICAgICAgICBjaGF0Z3B0OiB7XG4gICAgICAgICAgICBjb250ZW50OiAobmV3RGF0YSwgY3VycmVudERhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50Q29udGVudCA9IGN1cnJlbnREYXRhPy5jb250ZW50ID8/ICcnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBuZXdEYXRhLmNob2ljZXNbMF0/LmRlbHRhPy5jb250ZW50IHx8ICcnO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudERhdGEsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBuZXdEYXRhLmlkLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBgJHtjdXJyZW50Q29udGVudH0ke2NvbnRlbnR9YFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNsYXVkZToge1xuICAgICAgICAgICAgY29udGVudDogKG5ld0RhdGEsIGN1cnJlbnREYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudENvbnRlbnQgPSBjdXJyZW50RGF0YT8uY29udGVudCA/PyAnJztcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBuZXdEYXRhLmRlbHRhPy50ZXh0IHx8ICcnO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudERhdGEsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGAke2N1cnJlbnRDb250ZW50fSR7Y29udGVudH1gXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZ2VtaW5pOiB7XG4gICAgICAgICAgICBjb250ZW50OiAobmV3RGF0YSwgY3VycmVudERhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50Q29udGVudCA9IGN1cnJlbnREYXRhPy5jb250ZW50ID8/ICcnO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IG5ld0RhdGEuY2FuZGlkYXRlc1swXT8uY29udGVudD8ucGFydHNbMF0/LnRleHQgfHwgJyc7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogYCR7Y3VycmVudENvbnRlbnR9JHtjb250ZW50fWBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbn07XG5cbmNvbnN0IGVycm9ySGFuZGxlciA9IGFzeW5jIChyZXM6IFJlc3BvbnNlKSA9PiB7XG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGlmIChkYXRhPy5lcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEuZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH1gKTtcbiAgICB9XG59XG5cbmNvbnN0IGhhbmRsZVN0cmVhbSA9IGFzeW5jIChyZXM6IFJlc3BvbnNlLCBzZXJ2aWNlOiBzdHJpbmcsIHBhcnNlcjogJ2NvbnRlbnQnLCBvbkNodW5rU3RyZWFtPzogQ2h1bmtTdHJlYW08VGV4dERhdGE+LCBzaWduYWw/OiBBYm9ydFNpZ25hbCk6IFByb21pc2U8VGV4dERhdGE+ID0+IHtcbiAgICBpZiAoIXJlcy5ib2R5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignZmFpbGVkJyk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVhZGVyID0gcmVzLmJvZHkuZ2V0UmVhZGVyKCk7XG4gICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKTtcbiAgICBsZXQgYnVmZmVyID0gJyc7XG4gICAgbGV0IGN1cnJlbnREYXRhOiBUZXh0RGF0YSA9IHtcbiAgICAgICAgaWQ6IGAke3NlcnZpY2V9LSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkqMTAwMCl9YCxcbiAgICAgICAgY29udGVudDogJycsXG4gICAgfTtcblxuXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgaWYgKHNpZ25hbCAmJiBzaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7ZG9uZSwgdmFsdWV9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgaWYgKGRvbmUpIGJyZWFrO1xuXG4gICAgICAgIGNvbnN0IGNodW5rID0gZGVjb2Rlci5kZWNvZGUodmFsdWUsIHtzdHJlYW06IHRydWV9KTtcblxuICAgICAgICBpZiAoc2VydmljZSA9PT0gJ2dlbWluaScpIHtcbiAgICAgICAgICAgIGNvbnN0IGpzb25MaW5lcyA9IGNodW5rLnRyaW0oKS5zcGxpdChcIixcXHJcXG5cIikubWFwKChsaW5lKSA9PiBsaW5lLnJlcGxhY2UoL15cXFt8XSQvZywgJycpKS5maWx0ZXIobGluZSA9PiBsaW5lLnRyaW0oKSAhPT0gJycpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGpzb25MaW5lcykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSBKU09OLnBhcnNlKGxpbmUpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGF0YSA9IHNlcnZpY2VzLnN0cmVhbVtzZXJ2aWNlXVtwYXJzZXJdKHBhcnNlZERhdGEsIGN1cnJlbnREYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9uQ2h1bmtTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2N1cnJlbnREYXRhJywgY3VycmVudERhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb25DaHVua1N0cmVhbShjdXJyZW50RGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VydmljZSA9PT0gJ2NoYXRncHQnKSB7XG4gICAgICAgICAgICBidWZmZXIgKz0gY2h1bms7XG5cbiAgICAgICAgICAgIGxldCBsYXN0TmV3bGluZUluZGV4ID0gMDtcbiAgICAgICAgICAgIGxldCBuZXdsaW5lSW5kZXg7XG5cbiAgICAgICAgICAgIHdoaWxlICgobmV3bGluZUluZGV4ID0gYnVmZmVyLmluZGV4T2YoJ1xcbicsIGxhc3ROZXdsaW5lSW5kZXgpKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lID0gYnVmZmVyLnNsaWNlKGxhc3ROZXdsaW5lSW5kZXgsIG5ld2xpbmVJbmRleCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIGxhc3ROZXdsaW5lSW5kZXggPSBuZXdsaW5lSW5kZXggKyAxO1xuXG4gICAgICAgICAgICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aCgnZGF0YTogJykpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGxpbmUuc2xpY2UoNik7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEgPT09ICdbRE9ORV0nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWREYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREYXRhID0gc2VydmljZXMuc3RyZWFtW3NlcnZpY2VdW3BhcnNlcl0ocGFyc2VkRGF0YSwgY3VycmVudERhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uQ2h1bmtTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNodW5rU3RyZWFtKGN1cnJlbnREYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1ZmZlciA9IGJ1ZmZlci5zbGljZShsYXN0TmV3bGluZUluZGV4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZXJ2aWNlID09PSAnY2xhdWRlJykge1xuICAgICAgICAgICAgYnVmZmVyICs9IGNodW5rO1xuXG4gICAgICAgICAgICBsZXQgbGFzdE5ld2xpbmVJbmRleCA9IDA7XG4gICAgICAgICAgICBsZXQgbmV3bGluZUluZGV4O1xuXG4gICAgICAgICAgICB3aGlsZSAoKG5ld2xpbmVJbmRleCA9IGJ1ZmZlci5pbmRleE9mKCdcXG4nLCBsYXN0TmV3bGluZUluZGV4KSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IGJ1ZmZlci5zbGljZShsYXN0TmV3bGluZUluZGV4LCBuZXdsaW5lSW5kZXgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBsYXN0TmV3bGluZUluZGV4ID0gbmV3bGluZUluZGV4ICsgMTtcblxuICAgICAgICAgICAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJ2RhdGE6ICcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBsaW5lLnNsaWNlKDYpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWREYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWREYXRhLnR5cGUgPT09ICdtZXNzYWdlX3N0YXJ0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREYXRhLmlkID0gcGFyc2VkRGF0YS5tZXNzYWdlLmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkRGF0YS50eXBlICE9PSAnY29udGVudF9ibG9ja19kZWx0YScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudERhdGEgPSBzZXJ2aWNlcy5zdHJlYW1bc2VydmljZV1bcGFyc2VyXShwYXJzZWREYXRhLCBjdXJyZW50RGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob25DaHVua1N0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2h1bmtTdHJlYW0oY3VycmVudERhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBidWZmZXIgPSBidWZmZXIuc2xpY2UobGFzdE5ld2xpbmVJbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY3VycmVudERhdGE7XG5cbn1cblxuY29uc3Qgc2VydmljZUV4ZWN1dG9yID0gYXN5bmMgPEQgZXh0ZW5kcyBTZXJ2aWNlUmVzcG9uc2U+KGRldGFpbHM6IEV4ZWN1dG9yRGF0YSwgb25DaHVua1N0cmVhbT86IENodW5rU3RyZWFtPEQ+LCBjb250cm9sbGVyPzogQWJvcnRDb250cm9sbGVyKTogUHJvbWlzZTxEPiA9PiB7XG4gICAgaWYgKHR5cGVvZiBkZXRhaWxzICE9PSAnb2JqZWN0JyB8fCAhZGV0YWlscy5mb3JFeGVjdXRvcikge1xuICAgICAgICByZXR1cm4gZGV0YWlscyBhcyB1bmtub3duIGFzIEQ7XG4gICAgfVxuXG4gICAgY29uc3QgZXhlY3V0b3JEZXRhaWxzID0gZGV0YWlscy5mb3JFeGVjdXRvcjtcblxuICAgIGNvbnRyb2xsZXIgPSAhY29udHJvbGxlciA/IG5ldyBBYm9ydENvbnRyb2xsZXIoKSA6IGNvbnRyb2xsZXI7XG4gICAgY29uc3Qgc2lnbmFsID0gY29udHJvbGxlci5zaWduYWw7XG5cbiAgICBjb25zdCBjYWxsU2VydmljZSA9IGFzeW5jIChkZXRhaWxzOiBGb3JFeGVjdXRvcikgPT4ge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChkZXRhaWxzLnVybCwge1xuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBkZXRhaWxzLmJvZHksXG4gICAgICAgICAgICBoZWFkZXJzOiBkZXRhaWxzLmhlYWRlcnNcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXdhaXQgZXJyb3JIYW5kbGVyKHJlcyk7XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICAgICAgaWYgKGRhdGEuZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLmVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuXG4gICAgY29uc3QgY2FsbFN0cmVhbVNlcnZpY2UgPSBhc3luYyAoZGV0YWlsczogRm9yRXhlY3V0b3IpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ2NhbGxpbmcgc2VydmljZSBhcyBzdHJlYW0nKTtcbiAgICAgICAgaWYgKGV4ZWN1dG9yRGV0YWlscy5wYXJzZXIgIT09ICdjb250ZW50Jykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKF8oJ21vZGFpLmNtcC5zZXJ2aWNlX3Vuc3VwcG9ydGVkJykpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goZGV0YWlscy51cmwsIHtcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgYm9keTogZGV0YWlscy5ib2R5LFxuICAgICAgICAgICAgaGVhZGVyczogZGV0YWlscy5oZWFkZXJzXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF3YWl0IGVycm9ySGFuZGxlcihyZXMpO1xuXG4gICAgICAgIHJldHVybiBoYW5kbGVTdHJlYW0ocmVzLCBleGVjdXRvckRldGFpbHMuc2VydmljZSwgZXhlY3V0b3JEZXRhaWxzLnBhcnNlciwgb25DaHVua1N0cmVhbSBhcyBDaHVua1N0cmVhbTxUZXh0RGF0YT4pO1xuICAgIH1cblxuICAgIGlmICghZXhlY3V0b3JEZXRhaWxzLnNlcnZpY2UgfHwgIWV4ZWN1dG9yRGV0YWlscy5wYXJzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKF8oJ21vZGFpLmNtcC5zZXJ2aWNlX3JlcXVpcmVkJykpO1xuICAgIH1cblxuICAgIGlmICghc2VydmljZXNbZXhlY3V0b3JEZXRhaWxzLnN0cmVhbSA/ICdzdHJlYW0nIDogJ2J1ZmZlcmVkJyBhcyBCdWZmZXJNb2RlXT8uW2V4ZWN1dG9yRGV0YWlscy5zZXJ2aWNlIGFzIFNlcnZpY2VUeXBlXT8uW2V4ZWN1dG9yRGV0YWlscy5wYXJzZXIgYXMga2V5b2YgU2VydmljZUhhbmRsZXJzW0J1ZmZlck1vZGVdW1NlcnZpY2VUeXBlXV0pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKF8oJ21vZGFpLmNtcC5zZXJ2aWNlX3Vuc3VwcG9ydGVkJykpO1xuICAgIH1cblxuICAgIGlmIChleGVjdXRvckRldGFpbHMuc3RyZWFtKSB7XG4gICAgICAgIHJldHVybiBjYWxsU3RyZWFtU2VydmljZShleGVjdXRvckRldGFpbHMpIGFzIFByb21pc2U8RD47XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGNhbGxTZXJ2aWNlKGV4ZWN1dG9yRGV0YWlscyk7XG4gICAgcmV0dXJuIHNlcnZpY2VzWydidWZmZXJlZCddW2V4ZWN1dG9yRGV0YWlscy5zZXJ2aWNlIGFzIFNlcnZpY2VUeXBlXVtleGVjdXRvckRldGFpbHMucGFyc2VyIGFzIGtleW9mIFNlcnZpY2VIYW5kbGVyc1snYnVmZmVyZWQnXVtTZXJ2aWNlVHlwZV1dKGRhdGEpIGFzIEQ7XG59XG5cbmNvbnN0IG1vZHhGZXRjaCA9IGFzeW5jIDxSPihhY3Rpb246IHN0cmluZywgcGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke21vZEFJLmFwaVVSTH0/YWN0aW9uPSR7YWN0aW9ufWAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBhcmFtcyksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGlmIChkYXRhLmVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5lcnJvci5tZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLmRldGFpbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGF3YWl0IHJlcy5qc29uKCkgYXMgUjtcbn1cblxuY29uc3QgYWlGZXRjaCA9IGFzeW5jIDxEIGV4dGVuZHMgU2VydmljZVJlc3BvbnNlPihhY3Rpb246IHN0cmluZywgcGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiwgb25DaHVua1N0cmVhbT86IENodW5rU3RyZWFtPEQ+LCBjb250cm9sbGVyPzogQWJvcnRDb250cm9sbGVyKTogUHJvbWlzZTxEPiA9PiB7XG4gICAgY29udHJvbGxlciA9ICFjb250cm9sbGVyID8gbmV3IEFib3J0Q29udHJvbGxlcigpIDogY29udHJvbGxlcjtcbiAgICBjb25zdCBzaWduYWwgPSBjb250cm9sbGVyLnNpZ25hbDtcblxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke21vZEFJLmFwaVVSTH0/YWN0aW9uPSR7YWN0aW9ufWAsIHtcbiAgICAgICAgc2lnbmFsLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGFyYW1zKSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgaWYgKGRhdGEuZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLmVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEuZGV0YWlsKTtcbiAgICB9XG5cbiAgICBjb25zdCBzZXJ2aWNlID0gcmVzLmhlYWRlcnMuZ2V0KCd4LW1vZGFpLXNlcnZpY2UnKSA/PyAnY2hhdGdwdCc7XG4gICAgY29uc3QgcGFyc2VyID0gcmVzLmhlYWRlcnMuZ2V0KCd4LW1vZGFpLXBhcnNlcicpID8/ICdjb250ZW50JztcbiAgICBjb25zdCBzdHJlYW0gPSBwYXJzZUludChyZXMuaGVhZGVycy5nZXQoJ3gtbW9kYWktc3RyZWFtJykgPz8gJzAnKSA9PT0gMTtcbiAgICBjb25zdCBwcm94eSA9IHBhcnNlSW50KHJlcy5oZWFkZXJzLmdldCgneC1tb2RhaS1wcm94eScpID8/ICcwJykgPT09IDE7XG5cbiAgICBpZiAoIXByb3h5KSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICByZXR1cm4gc2VydmljZUV4ZWN1dG9yPEQ+KGRhdGEsIG9uQ2h1bmtTdHJlYW0sIGNvbnRyb2xsZXIpO1xuICAgIH1cblxuICAgIGlmICghc2VydmljZSB8fCAhcGFyc2VyKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKF8oJ21vZGFpLmNtcC5zZXJ2aWNlX3JlcXVpcmVkJykpO1xuICAgIH1cblxuICAgIGlmICghc2VydmljZXNbc3RyZWFtID8gJ3N0cmVhbScgOiAnYnVmZmVyZWQnIGFzIEJ1ZmZlck1vZGVdPy5bc2VydmljZSBhcyBTZXJ2aWNlVHlwZV0/LltwYXJzZXIgYXMga2V5b2YgU2VydmljZUhhbmRsZXJzW0J1ZmZlck1vZGVdW1NlcnZpY2VUeXBlXV0pIHtcbiAgICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXygnbW9kYWkuY21wLnNlcnZpY2VfdW5zdXBwb3J0ZWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKCFzdHJlYW0pIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIHJldHVybiBzZXJ2aWNlc1snYnVmZmVyZWQnXVtzZXJ2aWNlIGFzIFNlcnZpY2VUeXBlXVtwYXJzZXIgYXMga2V5b2YgU2VydmljZUhhbmRsZXJzWydidWZmZXJlZCddW1NlcnZpY2VUeXBlXV0oZGF0YSkgYXMgRDtcbiAgICB9XG5cbiAgICBpZiAocGFyc2VyICE9PSAnY29udGVudCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKF8oJ21vZGFpLmNtcC5zZXJ2aWNlX3Vuc3VwcG9ydGVkJykpO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCBoYW5kbGVTdHJlYW0ocmVzLCBzZXJ2aWNlLCBwYXJzZXIsIG9uQ2h1bmtTdHJlYW0gYXMgQ2h1bmtTdHJlYW08VGV4dERhdGE+LCBzaWduYWwpIGFzIEQ7XG59XG5cbmV4cG9ydCBjb25zdCBleGVjdXRvciA9IHtcbiAgICBtZ3I6IHtcbiAgICAgICAgZG93bmxvYWQ6IHtcbiAgICAgICAgICAgIGltYWdlOiBhc3luYyAocGFyYW1zOiBEb3dubG9hZEltYWdlUGFyYW1zKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IG1vZHhGZXRjaDx7dXJsOiBzdHJpbmc7IGZ1bGxVcmw6IHN0cmluZ30+KCdEb3dubG9hZFxcXFxJbWFnZScsIHBhcmFtcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHByb21wdDoge1xuICAgICAgICAgICAgZnJlZVRleHQ6IGFzeW5jIChwYXJhbXM6IEZyZWVUZXh0UGFyYW1zLCBvbkNodW5rU3RyZWFtPzogQ2h1bmtTdHJlYW08VGV4dERhdGE+LCBjb250cm9sbGVyPzogQWJvcnRDb250cm9sbGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFpRmV0Y2goJ1Byb21wdFxcXFxGcmVlVGV4dCcsIHBhcmFtcywgb25DaHVua1N0cmVhbSwgY29udHJvbGxlcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGV4dDogYXN5bmMgKHBhcmFtczogVGV4dFBhcmFtcywgb25DaHVua1N0cmVhbT86IENodW5rU3RyZWFtPFRleHREYXRhPiwgY29udHJvbGxlcj86IEFib3J0Q29udHJvbGxlcikgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBhaUZldGNoKCdQcm9tcHRcXFxcVGV4dCcsIHBhcmFtcywgb25DaHVua1N0cmVhbSwgY29udHJvbGxlcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmlzaW9uOiBhc3luYyAocGFyYW1zOiBWaXNpb25QYXJhbXMsIG9uQ2h1bmtTdHJlYW0/OiBDaHVua1N0cmVhbTxUZXh0RGF0YT4sIGNvbnRyb2xsZXI/OiBBYm9ydENvbnRyb2xsZXIpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWlGZXRjaCgnUHJvbXB0XFxcXFZpc2lvbicsIHBhcmFtcywgb25DaHVua1N0cmVhbSwgY29udHJvbGxlcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW1hZ2U6IGFzeW5jIChwYXJhbXM6IEltYWdlUGFyYW1zLCBjb250cm9sbGVyPzogQWJvcnRDb250cm9sbGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFpRmV0Y2g8SW1hZ2VEYXRhPignUHJvbXB0XFxcXEltYWdlJywgcGFyYW1zLCB1bmRlZmluZWQsIGNvbnRyb2xsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4iLCJ0eXBlIENhY2hlPEMgPSB1bmtub3duPiA9IHtcbiAgICB2aXNpYmxlOiBudW1iZXI7XG4gICAgdmFsdWVzOiBzdHJpbmdbXTtcbiAgICBjb250ZXh0OiBDO1xuICAgIHN5bmNVST86IChkYXRhOiBEYXRhT3V0cHV0PEM+LCBub1N0b3JlPzogYm9vbGVhbikgPT4gdm9pZDtcbn1cblxuZXhwb3J0IHR5cGUgRGF0YU91dHB1dDxDID0gdW5rbm93bj4gPSB7XG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBuZXh0U3RhdHVzOiBib29sZWFuLFxuICAgIHByZXZTdGF0dXM6IGJvb2xlYW4sXG4gICAgY3VycmVudDogbnVtYmVyLFxuICAgIHRvdGFsOiBudW1iZXIsXG4gICAgY29udGV4dDogQyxcbn1cblxuY29uc3QgX2NhY2hlOiBSZWNvcmQ8c3RyaW5nLCBDYWNoZT4gPSB7fTtcblxuZXhwb3J0IGNvbnN0IGhpc3RvcnkgPSB7XG4gICAgX2Zvcm1hdE91dHB1dChrZXk6IHN0cmluZywgdmFsdWU/OiBzdHJpbmcpOiBEYXRhT3V0cHV0IHtcbiAgICAgICAgY29uc3QgY2FjaGVkSXRlbSA9IF9jYWNoZVtrZXldO1xuXG4gICAgICAgIGNvbnN0IHByZXZTdGF0dXMgPSAoY2FjaGVkSXRlbS52aXNpYmxlID4gMCk7XG4gICAgICAgIGNvbnN0IG5leHRTdGF0dXMgPSAoY2FjaGVkSXRlbS52aXNpYmxlICE9PSBjYWNoZWRJdGVtLnZhbHVlcy5sZW5ndGggLSAxKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IChjYWNoZWRJdGVtLnZhbHVlc1tjYWNoZWRJdGVtLnZpc2libGVdID8/IG51bGwpLFxuICAgICAgICAgICAgbmV4dFN0YXR1cyxcbiAgICAgICAgICAgIHByZXZTdGF0dXMsXG4gICAgICAgICAgICBjdXJyZW50OiBjYWNoZWRJdGVtLnZpc2libGUgKyAxLFxuICAgICAgICAgICAgdG90YWw6IGNhY2hlZEl0ZW0udmFsdWVzLmxlbmd0aCxcbiAgICAgICAgICAgIGNvbnRleHQ6IGNhY2hlZEl0ZW0uY29udGV4dCxcbiAgICAgICAgfVxuICAgIH0sXG4gICAgaW5zZXJ0KGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBub1N0b3JlOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgY2FjaGVkSXRlbSA9IF9jYWNoZVtrZXldO1xuXG4gICAgICAgIGlmICghbm9TdG9yZSkge1xuICAgICAgICAgICAgY2FjaGVkSXRlbS52aXNpYmxlID0gY2FjaGVkSXRlbS52YWx1ZXMucHVzaCh2YWx1ZSkgLSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gdGhpcy5fZm9ybWF0T3V0cHV0KGtleSwgdmFsdWUpO1xuICAgICAgICBpZiAodHlwZW9mIGNhY2hlZEl0ZW0uc3luY1VJID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRJdGVtLnN5bmNVSShvdXRwdXQsIG5vU3RvcmUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9LFxuICAgIG5leHQoa2V5OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgY2FjaGVkSXRlbSA9IF9jYWNoZVtrZXldO1xuXG4gICAgICAgIGlmIChjYWNoZWRJdGVtLnZpc2libGUgPT09IGNhY2hlZEl0ZW0udmFsdWVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9mb3JtYXRPdXRwdXQoa2V5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhY2hlZEl0ZW0udmlzaWJsZSsrO1xuXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHRoaXMuX2Zvcm1hdE91dHB1dChrZXkpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY2FjaGVkSXRlbS5zeW5jVUkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZEl0ZW0uc3luY1VJKG91dHB1dCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH0sXG4gICAgcHJldihrZXk6IHN0cmluZykge1xuICAgICAgICBjb25zdCBjYWNoZWRJdGVtID0gX2NhY2hlW2tleV07XG5cbiAgICAgICAgaWYgKGNhY2hlZEl0ZW0udmlzaWJsZSA8PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZm9ybWF0T3V0cHV0KGtleSk7XG4gICAgICAgIH1cblxuICAgICAgICBjYWNoZWRJdGVtLnZpc2libGUtLTtcblxuICAgICAgICBjb25zdCBvdXRwdXQgPSB0aGlzLl9mb3JtYXRPdXRwdXQoa2V5KTtcblxuICAgICAgICBpZiAodHlwZW9mIGNhY2hlZEl0ZW0uc3luY1VJID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRJdGVtLnN5bmNVSShvdXRwdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9LFxuICAgIGluaXQ8Qz4oa2V5OiBzdHJpbmcsIHN5bmNVST86IChkYXRhOiBEYXRhT3V0cHV0PEM+LCBub1N0b3JlPzogYm9vbGVhbikgPT4gdm9pZCwgaW5pdFZhbHVlPzogc3RyaW5nLCBjb250ZXh0PzogQykge1xuICAgICAgICBpZiAoIV9jYWNoZVtrZXldKSB7XG4gICAgICAgICAgICBfY2FjaGVba2V5XSA9IHtcbiAgICAgICAgICAgICAgICB2aXNpYmxlOiAtMSxcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIF9jYWNoZVtrZXldLnN5bmNVSSA9IHN5bmNVSTtcblxuICAgICAgICBpZiAoaW5pdFZhbHVlKSB7XG4gICAgICAgICAgICBfY2FjaGVba2V5XS52YWx1ZXMgPSBbaW5pdFZhbHVlXTtcbiAgICAgICAgICAgIF9jYWNoZVtrZXldLnZpc2libGUgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNhY2hlZEl0ZW06IF9jYWNoZVtrZXldIGFzIENhY2hlPEM+LFxuICAgICAgICAgICAgZ2V0RGF0YTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9mb3JtYXRPdXRwdXQoa2V5KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRBbGw6ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NhY2hlW2tleV0udmFsdWVzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN5bmNVSTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgX2NhY2hlW2tleV0uc3luY1VJID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIF9jYWNoZVtrZXldLnN5bmNVSSh0aGlzLl9mb3JtYXRPdXRwdXQoa2V5KSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpbnNlcnQ6ICh2YWx1ZTogc3RyaW5nLCBub1N0b3JlOiBib29sZWFuID0gZmFsc2UpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbnNlcnQoa2V5LCB2YWx1ZSwgbm9TdG9yZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbmV4dDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5leHQoa2V5KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcmV2OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJldihrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn07XG4iLCJleHBvcnQgY29uc3QgYXBwbHlTdHlsZXMgPSAoZWxlbWVudDogSFRNTEVsZW1lbnQsIHN0eWxlT2JqOiBQYXJ0aWFsPENTU1N0eWxlRGVjbGFyYXRpb24+KSA9PiB7XG4gICAgT2JqZWN0LmFzc2lnbihlbGVtZW50LnN0eWxlLCBzdHlsZU9iaik7XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVFbGVtZW50ID0gPEsgZXh0ZW5kcyBrZXlvZiBIVE1MRWxlbWVudFRhZ05hbWVNYXA+KHR5cGU6IEssIHN0eWxlT2JqPzogUGFydGlhbDxDU1NTdHlsZURlY2xhcmF0aW9uPiwgdGV4dENvbnRlbnQ6IHN0cmluZyA9ICcnKTogSFRNTEVsZW1lbnRUYWdOYW1lTWFwW0tdID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcblxuICAgIGlmIChzdHlsZU9iaikge1xuICAgICAgICBhcHBseVN0eWxlcyhlbGVtZW50LCBzdHlsZU9iaik7XG4gICAgfVxuXG4gICAgaWYgKHRleHRDb250ZW50KSB7XG4gICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0Q29udGVudDtcbiAgICB9XG5cbiAgICByZXR1cm4gZWxlbWVudDtcbn1cblxuZXhwb3J0IGNvbnN0IG5sVG9CciA9IChjb250ZW50OiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gLzxbXj5dKj4vZy50ZXN0KGNvbnRlbnQpID8gY29udGVudCA6IGNvbnRlbnQucmVwbGFjZSgvXFxyXFxufFxcbnxcXHIvZywgJzxicj4nKTtcbn1cbiIsImltcG9ydCB7UHJvbXB0fSBmcm9tIFwiLi9leGVjdXRvclwiO1xuXG5leHBvcnQgdHlwZSBNZXNzYWdlVHlwZSA9ICd0ZXh0JyB8ICdpbWFnZSc7XG5cbmV4cG9ydCB0eXBlIFVwZGF0YWJsZUhUTUxFbGVtZW50ID0gSFRNTEVsZW1lbnQgJiB7XG4gICAgdXBkYXRlPzogKG1zZzogTWVzc2FnZSkgPT4gdm9pZFxufTtcblxuZXhwb3J0IHR5cGUgTWVzc2FnZSA9IHtcbiAgICBjb250ZW50OiBQcm9tcHQ7XG4gICAgaWQ6IHN0cmluZztcbiAgICBoaWRkZW46IGJvb2xlYW47XG4gICAgcm9sZTogc3RyaW5nO1xuICAgIHR5cGU6IE1lc3NhZ2VUeXBlO1xuICAgIGVsPzogVXBkYXRhYmxlSFRNTEVsZW1lbnQ7XG4gICAgY3R4OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbn07XG5cbnR5cGUgTmFtZXNwYWNlID0ge1xuICAgIGhpc3Rvcnk6IE1lc3NhZ2VbXTtcbiAgICBpZFJlZjogUmVjb3JkPHN0cmluZywgTWVzc2FnZT47XG4gICAgb25BZGRNZXNzYWdlOiAobXNnOiBNZXNzYWdlKSA9PiBVcGRhdGFibGVIVE1MRWxlbWVudCB8IHVuZGVmaW5lZDtcbn07XG5cbmNvbnN0IF9uYW1lc3BhY2U6IFJlY29yZDxzdHJpbmcsIE5hbWVzcGFjZT4gPSB7fTtcblxuY29uc3QgUk9MRVMgPSB7XG4gICAgJ3VzZXInOiAndXNlcicsXG4gICAgJ2Fzc2lzdGFudCc6ICdhc3Npc3RhbnQnLFxufTtcblxuY29uc3QgYWRkTWVzc2FnZSA9IChrZXk6IHN0cmluZywgY29udGVudDogUHJvbXB0LCByb2xlOiBzdHJpbmcsIGlkOiBzdHJpbmcsIGhpZGRlbjogYm9vbGVhbiA9IGZhbHNlLCB0eXBlOiBNZXNzYWdlVHlwZSA9ICd0ZXh0JykgPT4ge1xuICAgIGNvbnN0IG5hbWVzcGFjZSA9IF9uYW1lc3BhY2Vba2V5XTtcbiAgICBpZiAoIW5hbWVzcGFjZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbXNnT2JqZWN0OiBNZXNzYWdlID0ge2NvbnRlbnQsIHJvbGUsIGlkLCBoaWRkZW4sIHR5cGUsIGN0eDoge319O1xuXG4gICAgY29uc3QgaW5kZXggPSBuYW1lc3BhY2UuaGlzdG9yeS5wdXNoKG1zZ09iamVjdCkgLSAxO1xuICAgIGlmIChpZCkge1xuICAgICAgICBuYW1lc3BhY2UuaWRSZWZbaWRdID0gbmFtZXNwYWNlLmhpc3RvcnlbaW5kZXhdO1xuICAgIH1cblxuICAgIG1zZ09iamVjdC5lbCA9IG5hbWVzcGFjZS5vbkFkZE1lc3NhZ2UobXNnT2JqZWN0KTtcbn1cblxuY29uc3QgdXBkYXRlTWVzc2FnZSA9IChrZXk6IHN0cmluZywgaWQ6IHN0cmluZywgY29udGVudDogc3RyaW5nLCB0eXBlOiBNZXNzYWdlVHlwZSA9ICd0ZXh0JykgPT4ge1xuICAgIGNvbnN0IG5hbWVzcGFjZSA9IF9uYW1lc3BhY2Vba2V5XTtcbiAgICBpZiAoIW5hbWVzcGFjZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFuYW1lc3BhY2UuaWRSZWZbaWRdKSB7XG4gICAgICAgIGFkZE1lc3NhZ2Uoa2V5LCBjb250ZW50LCBST0xFUy5hc3Npc3RhbnQsIGlkLCBmYWxzZSwgdHlwZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtc2cgPSBuYW1lc3BhY2UuaWRSZWZbaWRdO1xuICAgIG1zZy5jb250ZW50ID0gY29udGVudDtcblxuICAgIGlmIChtc2cuZWwgJiYgbXNnLmVsLnVwZGF0ZSkge1xuICAgICAgICBtc2cuZWwudXBkYXRlKG1zZyk7XG4gICAgfVxufVxuXG5jb25zdCBnZXRNZXNzYWdlID0gKGtleTogc3RyaW5nLCBpZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgbmFtZXNwYWNlID0gX25hbWVzcGFjZVtrZXldO1xuICAgIGlmICghbmFtZXNwYWNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gbmFtZXNwYWNlLmlkUmVmW2lkXTtcbn1cblxuZXhwb3J0IGNvbnN0IGNoYXRIaXN0b3J5ID0ge1xuICAgIGluaXQ6IChrZXk6IHN0cmluZywgb25BZGRNZXNzYWdlOiBOYW1lc3BhY2VbJ29uQWRkTWVzc2FnZSddKSA9PiB7XG4gICAgICAgIGlmICghX25hbWVzcGFjZVtrZXldKSB7XG4gICAgICAgICAgICBfbmFtZXNwYWNlW2tleV0gPSB7XG4gICAgICAgICAgICAgICAgaGlzdG9yeTogW10sXG4gICAgICAgICAgICAgICAgaWRSZWY6IHt9LFxuICAgICAgICAgICAgICAgIG9uQWRkTWVzc2FnZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBfbmFtZXNwYWNlW2tleV0ub25BZGRNZXNzYWdlID0gb25BZGRNZXNzYWdlO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhZGRVc2VyTWVzc2FnZTogKGNvbnRlbnQ6IFByb21wdCwgaWQ6IHN0cmluZywgaGlkZGVuPzogYm9vbGVhbiwgdHlwZTogTWVzc2FnZVR5cGUgPSAndGV4dCcpID0+IHtcbiAgICAgICAgICAgICAgICBhZGRNZXNzYWdlKGtleSwgY29udGVudCwgUk9MRVMudXNlciwgaWQsIGhpZGRlbiwgdHlwZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWRkQXNzaXN0YW50TWVzc2FnZTogKGNvbnRlbnQ6IHN0cmluZywgaWQ6IHN0cmluZywgdHlwZTogTWVzc2FnZVR5cGUgPSAndGV4dCcpID0+IHtcbiAgICAgICAgICAgICAgICBhZGRNZXNzYWdlKGtleSwgY29udGVudCwgUk9MRVMuYXNzaXN0YW50LCBpZCwgZmFsc2UsIHR5cGUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVwZGF0ZUFzc2lzdGFudE1lc3NhZ2U6IChpZDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcsIHR5cGU6IE1lc3NhZ2VUeXBlID0gJ3RleHQnKSA9PiB7XG4gICAgICAgICAgICAgICAgdXBkYXRlTWVzc2FnZShrZXksIGlkLCBjb250ZW50LCB0eXBlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRBc3Npc3RhbnRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRNZXNzYWdlKGtleSwgaWQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldE1lc3NhZ2VzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9uYW1lc3BhY2Vba2V5XS5oaXN0b3J5O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldE1lc3NhZ2VzSGlzdG9yeTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBfbmFtZXNwYWNlW2tleV0uaGlzdG9yeS5tYXAoKG0pID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IG0ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogbS5jb250ZW50LFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59O1xuIiwiaW1wb3J0IHthcHBseVN0eWxlcywgY3JlYXRlRWxlbWVudH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5pbXBvcnQgdHlwZSB7TWVzc2FnZX0gZnJvbSBcIi4uLy4uL2NoYXRIaXN0b3J5XCI7XG5pbXBvcnQgdHlwZSB7TW9kYWx9IGZyb20gXCIuL3R5cGVzXCI7XG5cbnR5cGUgQWN0aW9uQnV0dG9uQ29uZmlnID0ge1xuICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgaWNvbjoga2V5b2YgdHlwZW9mIGljb25zO1xuICAgIG1lc3NhZ2U6IE1lc3NhZ2U7XG4gICAgbG9hZGluZ1RleHQ/OiBzdHJpbmc7XG4gICAgY29tcGxldGVkVGV4dD86IHN0cmluZztcbiAgICBtb2RhbDogTW9kYWw7XG4gICAgY29tcGxldGVkVGV4dER1cmF0aW9uPzogbnVtYmVyO1xuICAgIG9uQ2xpY2s6IChtc2c6IE1lc3NhZ2UsIG1vZGFsOiBNb2RhbCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD47XG4gICAgZGlzYWJsZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgdHlwZSBBY3Rpb25CdXR0b24gPSBIVE1MQnV0dG9uRWxlbWVudCAmIHtcbiAgICBkaXNhYmxlPzogKCkgPT4gdm9pZDtcbiAgICBlbmFibGU/OiAoKSA9PiB2b2lkO1xufTtcblxuY29uc3QgZGVmYXVsdENvbmZpZzogUGFydGlhbDxBY3Rpb25CdXR0b25Db25maWc+ID0ge1xuICAgIGxvYWRpbmdUZXh0OiAnTG9hZGluZy4uLicsXG4gICAgY29tcGxldGVkVGV4dDogJ0NvbXBsZXRlZCEnLFxuICAgIGNvbXBsZXRlZFRleHREdXJhdGlvbjogMjAwMCxcbiAgICBkaXNhYmxlZDogZmFsc2UsXG59O1xuXG5jb25zdCBzdHlsZXMgPSB7XG4gICAgYWN0aW9uQnV0dG9uOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNlZGYyZjcnLFxuICAgICAgICBib3JkZXI6ICcxcHggc29saWQgI2NiZDVlMCcsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgIHBhZGRpbmc6ICczcHggOHB4JyxcbiAgICAgICAgZm9udFNpemU6ICcxMnB4JyxcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgIGNvbG9yOiAnIzRhNTU2OCcsXG4gICAgICAgIG9wYWNpdHk6ICcxJyxcbiAgICB9LFxuICAgIGljb246IHtcbiAgICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICAgIHdpZHRoOiAnMTRweCcsXG4gICAgICAgIGhlaWdodDogJzE0cHgnLFxuICAgICAgICBtYXJnaW5SaWdodDogJzVweCcsXG4gICAgICAgIGJhY2tncm91bmRTaXplOiAnY29udGFpbicsXG4gICAgICAgIGJhY2tncm91bmRSZXBlYXQ6ICduby1yZXBlYXQnLFxuICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246ICdjZW50ZXInXG4gICAgfSxcbiAgICBkaXNhYmxlZEJ1dHRvbjoge1xuICAgICAgICBvcGFjaXR5OiAnMC41JyxcbiAgICAgICAgY3Vyc29yOiAnbm90LWFsbG93ZWQnXG4gICAgfSxcbn07XG5cbmNvbnN0IGljb25zID0ge1xuICAgIGNvcHk6IFwiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz1cXCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcJyB3aWR0aD1cXCcxNlxcJyBoZWlnaHQ9XFwnMTZcXCcgZmlsbD1cXCclMjM0YTU1NjhcXCcgdmlld0JveD1cXCcwIDAgMTYgMTZcXCclM0UlM0NwYXRoIGQ9XFwnTTQgMS41SDNhMiAyIDAgMCAwLTIgMlYxNGEyIDIgMCAwIDAgMiAyaDEwYTIgMiAwIDAgMCAyLTJWMy41YTIgMiAwIDAgMC0yLTJoLTF2MWgxYTEgMSAwIDAgMSAxIDFWMTRhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWMy41YTEgMSAwIDAgMSAxLTFoMXYtMXpcXCcvJTNFJTNDcGF0aCBkPVxcJ005LjUgMWEuNS41IDAgMCAxIC41LjV2MWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXYtMWEuNS41IDAgMCAxIC41LS41aDN6bS0zLTFBMS41IDEuNSAwIDAgMCA1IDEuNXYxQTEuNSAxLjUgMCAwIDAgNi41IDRoM0ExLjUgMS41IDAgMCAwIDExIDIuNXYtMUExLjUgMS41IDAgMCAwIDkuNSAwaC0zelxcJy8lM0UlM0Mvc3ZnJTNFXCIsXG4gICAgaW5zZXJ0OiBcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9XFwnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXCcgd2lkdGg9XFwnMTZcXCcgaGVpZ2h0PVxcJzE2XFwnIGZpbGw9XFwnJTIzNGE1NTY4XFwnIHZpZXdCb3g9XFwnMCAwIDE2IDE2XFwnJTNFJTNDcGF0aCBkPVxcJ004IDE1QTcgNyAwIDEgMSA4IDFhNyA3IDAgMCAxIDAgMTR6bTAgMUE4IDggMCAxIDAgOCAwYTggOCAwIDAgMCAwIDE2elxcJy8lM0UlM0NwYXRoIGQ9XFwnTTggNGEuNS41IDAgMCAxIC41LjV2M2gzYS41LjUgMCAwIDEgMCAxaC0zdjNhLjUuNSAwIDAgMS0xIDB2LTNoLTNhLjUuNSAwIDAgMSAwLTFoM3YtM0EuNS41IDAgMCAxIDggNHpcXCcvJTNFJTNDL3N2ZyUzRVwiLFxufVxuXG5leHBvcnQgY29uc3QgY3JlYXRlQWN0aW9uQnV0dG9uID0gKGNvbmZpZzogQWN0aW9uQnV0dG9uQ29uZmlnKSA9PiB7XG4gICAgY29uZmlnID0ge1xuICAgICAgICAuLi5kZWZhdWx0Q29uZmlnLFxuICAgICAgICAuLi5jb25maWcsXG4gICAgfTtcblxuICAgIGNvbnN0IGJ1dHRvbiA9IGNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHN0eWxlcy5hY3Rpb25CdXR0b24pIGFzIEFjdGlvbkJ1dHRvbjtcbiAgICBidXR0b24uY2xhc3NOYW1lID0gJ2FjdGlvbi1idXR0b24nO1xuICAgIGJ1dHRvbi5lbmFibGUgPSAoKSA9PiB7XG4gICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICBhcHBseVN0eWxlcyhidXR0b24sIHN0eWxlcy5hY3Rpb25CdXR0b24pO1xuICAgIH1cbiAgICBidXR0b24uZGlzYWJsZSA9ICgpID0+IHtcbiAgICAgICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgYXBwbHlTdHlsZXMoYnV0dG9uLCB7Li4uc3R5bGVzLmFjdGlvbkJ1dHRvbiwgLi4uc3R5bGVzLmRpc2FibGVkQnV0dG9ufSk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5kaXNhYmxlZCkge1xuICAgICAgICBidXR0b24uZGlzYWJsZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvcHlJY29uID0gY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgLi4uc3R5bGVzLmljb24sXG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogYHVybChcIiR7aWNvbnNbY29uZmlnLmljb25dfVwiKWBcbiAgICB9KTtcbiAgICBidXR0b24uYXBwZW5kKGNvcHlJY29uKTtcblxuICAgIGJ1dHRvbi5hcHBlbmQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY29uZmlnLmxhYmVsKSk7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBvcmlnaW5hbEhUTUwgPSBidXR0b24uaW5uZXJIVE1MO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBjb25maWcub25DbGljayhjb25maWcubWVzc2FnZSwgY29uZmlnLm1vZGFsKTtcblxuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogNXB4O1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTJweDtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMnB4O1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogc3BpbiAxcyBsaW5lYXIgaW5maW5pdGU7XG4gICAgICAgICAgICAgICAgXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogM3B4O1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAzcHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBjdXJyZW50Q29sb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiA1MCU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDNweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogM3B4O1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogY3VycmVudENvbG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiA1MCU7XG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsIC01MCUpO1xuICAgICAgICAgICAgICAgICAgICBcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogM3B4O1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAzcHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBjdXJyZW50Q29sb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3R0b206IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiA1MCU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDNweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogM3B4O1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogY3VycmVudENvbG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiA1MCU7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwgLTUwJSk7XG4gICAgICAgICAgICAgICAgICAgIFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgJHtjb25maWcubG9hZGluZ1RleHR9XG4gICAgICAgICAgICBgO1xuXG4gICAgICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgICAgICAgICBAa2V5ZnJhbWVzIHNwaW4ge1xuICAgICAgICAgICAgICAgICAgICBmcm9tIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH1cbiAgICAgICAgICAgICAgICAgICAgdG8geyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXG4gICAgICAgICAgICBhd2FpdCByZXN1bHQ7XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmhlYWQucmVtb3ZlQ2hpbGQoc3R5bGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT1cIm1hcmdpbi1yaWdodDogNXB4O1wiPuKckzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAke2NvbmZpZy5jb21wbGV0ZWRUZXh0fVxuICAgICAgICAgICAgYDtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDIwMDApKTtcbiAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IG9yaWdpbmFsSFRNTDtcbiAgICB9KTtcblxuICAgIHJldHVybiBidXR0b247XG59XG4iLCJleHBvcnQgY29uc3Qgc3R5bGVzID0ge1xuICAgIHJlc2V0U3R5bGVzOiB7XG4gICAgICAgIG1hcmdpbjogJzAnLFxuICAgICAgICBwYWRkaW5nOiAnMCcsXG4gICAgICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxuICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwsIHNhbnMtc2VyaWYnXG4gICAgfSxcbiAgICBtb2RhbE92ZXJsYXk6IHtcbiAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgICAgIHRvcDogJzAnLFxuICAgICAgICBsZWZ0OiAnMCcsXG4gICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDAsIDAsIDAsIDAuMyknLFxuICAgICAgICBkaXNwbGF5OiAnbm9uZScsXG4gICAgICAgIHpJbmRleDogJzEwMCdcbiAgICB9LFxuICAgIGNoYXRNb2RhbDoge1xuICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAgICAgd2lkdGg6ICcxMDAwcHgnLFxuICAgICAgICBtaW5IZWlnaHQ6ICcxNzBweCcsXG4gICAgICAgIG1heEhlaWdodDogJzYwMHB4JyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2ZmZicsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzEwcHgnLFxuICAgICAgICBib3hTaGFkb3c6ICcwIDVweCAxNXB4IHJnYmEoMCwgMCwgMCwgMC4zKScsXG4gICAgICAgIGRpc3BsYXk6ICdub25lJyxcbiAgICAgICAgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG4gICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgICAgekluZGV4OiAnMTAxJyxcbiAgICAgICAgdG9wOiAnNTAlJyxcbiAgICAgICAgbGVmdDogJzUwJScsXG4gICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgtNTAlLCAtNTAlKScsXG4gICAgICAgIHRyYW5zaXRpb246ICdoZWlnaHQgMC4zcyBlYXNlLWluLW91dCdcbiAgICB9LFxuICAgIGNoYXRIZWFkZXI6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzAwQjZERScsXG4gICAgICAgIGNvbG9yOiAnd2hpdGUnLFxuICAgICAgICBwYWRkaW5nOiAnMTVweCcsXG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyxcbiAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgIGN1cnNvcjogJ21vdmUnXG4gICAgfSxcbiAgICBjaGF0VGl0bGU6IHtcbiAgICAgICAgZm9udFdlaWdodDogJ2JvbGQnLFxuICAgICAgICBmb250U2l6ZTogJzE2cHgnXG4gICAgfSxcbiAgICBjaGF0Q29udHJvbHM6IHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBnYXA6ICcxMHB4J1xuICAgIH0sXG4gICAgY29udHJvbEJ1dHRvbjoge1xuICAgICAgICBiYWNrZ3JvdW5kOiAnbm9uZScsXG4gICAgICAgIGJvcmRlcjogJ25vbmUnLFxuICAgICAgICBjb2xvcjogJ3doaXRlJyxcbiAgICAgICAgZm9udFNpemU6ICcxNnB4JyxcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcidcbiAgICB9LFxuICAgIGNoYXRNZXNzYWdlczoge1xuICAgICAgICBmbGV4OiAnMScsXG4gICAgICAgIHBhZGRpbmc6ICcxNXB4JyxcbiAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmOWY5ZjknLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBib3hTaXppbmc6ICdib3JkZXItYm94JyxcbiAgICAgICAgZGlzcGxheTogJ25vbmUnXG4gICAgfSxcbiAgICBtZXNzYWdlOiB7XG4gICAgICAgIG1hcmdpbkJvdHRvbTogJzIwcHgnLFxuICAgICAgICBib3JkZXJSYWRpdXM6ICc4cHgnLFxuICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgd29yZFdyYXA6ICdicmVhay13b3JkJyxcbiAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgYm94U2l6aW5nOiAnYm9yZGVyLWJveCdcbiAgICB9LFxuICAgIGFpTWVzc2FnZToge1xuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZmZmZmZmJyxcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkICNlMmU4ZjAnLFxuICAgICAgICBib3hTaGFkb3c6ICcwIDJweCA1cHggcmdiYSgwLCAwLCAwLCAwLjA1KSdcbiAgICB9LFxuICAgIHVzZXJNZXNzYWdlOiB7XG4gICAgICAgIHdpZHRoOiAnZml0LWNvbnRlbnQnLFxuICAgICAgICBwYWRkaW5nOiAnMTBweCAxNXB4JyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzQyOTllMScsXG4gICAgICAgIGNvbG9yOiAnd2hpdGUnLFxuICAgICAgICBtYXJnaW5MZWZ0OiAnYXV0bycsXG4gICAgICAgIGJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzOiAnNXB4J1xuICAgIH0sXG4gICAgbWVzc2FnZUNvbnRlbnQ6IHtcbiAgICAgICAgcGFkZGluZzogJzEycHgnLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBtYXhXaWR0aDogJzEwMCUnLFxuICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnXG4gICAgfSxcbiAgICBtZXNzYWdlQWN0aW9uczoge1xuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIHBhZGRpbmc6ICc4cHggMTJweCcsXG4gICAgICAgIGdhcDogJzhweCcsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmN2ZhZmMnLFxuICAgICAgICBib3JkZXJUb3A6ICcxcHggc29saWQgI2UyZThmMCcsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzAgMCA4cHggOHB4J1xuICAgIH0sXG4gICAgYWN0aW9uQnV0dG9uOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNlZGYyZjcnLFxuICAgICAgICBib3JkZXI6ICcxcHggc29saWQgI2NiZDVlMCcsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgIHBhZGRpbmc6ICczcHggOHB4JyxcbiAgICAgICAgZm9udFNpemU6ICcxMnB4JyxcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgIGNvbG9yOiAnIzRhNTU2OCdcbiAgICB9LFxuICAgIGNoYXRJbnB1dDoge1xuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIHBhZGRpbmc6ICcxNXB4JyxcbiAgICAgICAgYm9yZGVyVG9wOiAnMXB4IHNvbGlkICNlMmU4ZjAnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZScsXG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnXG4gICAgfSxcbiAgICBpbnB1dFJvdzoge1xuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgIGdhcDogJzEwcHgnXG4gICAgfSxcbiAgICBpbnB1dFdyYXBwZXI6IHtcbiAgICAgICAgZmxleDogJzEnLFxuICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgbWluSGVpZ2h0OiAnNDhweCcsXG4gICAgICAgIG1heEhlaWdodDogJzE1MHB4JyxcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnXG4gICAgfSxcbiAgICBpbnB1dDoge1xuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBwYWRkaW5nOiAnMTJweCAxNXB4JyxcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkICNlMmU4ZjAnLFxuICAgICAgICBib3JkZXJSYWRpdXM6ICcxMHB4JyxcbiAgICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgICAgICBmb250U2l6ZTogJzE0cHgnLFxuICAgICAgICByZXNpemU6ICdub25lJyxcbiAgICAgICAgbWluSGVpZ2h0OiAnNDhweCcsXG4gICAgICAgIG1heEhlaWdodDogJzE1MHB4JyxcbiAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmZmYnLFxuICAgICAgICBjdXJzb3I6ICdpbmhlcml0J1xuICAgIH0sXG4gICAgYnV0dG9uc0NvbHVtbjoge1xuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuICAgICAgICBnYXA6ICc0cHgnLFxuICAgICAgICB3aWR0aDogJzEwMHB4J1xuICAgIH0sXG4gICAgc2VuZEJ1dHRvbjoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjNkNCMjRBJyxcbiAgICAgICAgY29sb3I6ICd3aGl0ZScsXG4gICAgICAgIGJvcmRlcjogJ25vbmUnLFxuICAgICAgICBib3JkZXJSYWRpdXM6ICcxMnB4JyxcbiAgICAgICAgcGFkZGluZzogJzhweCAxNnB4JyxcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgIGZvbnRXZWlnaHQ6ICdib2xkJyxcbiAgICAgICAgaGVpZ2h0OiAnNDBweCcsXG4gICAgICAgIG1pbldpZHRoOiAnMTAwcHgnLFxuICAgICAgICBmb250U2l6ZTogJzE0cHgnLFxuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgICAgIGdhcDogJzZweCcsXG4gICAgICAgIG9wYWNpdHk6ICcxJyxcbiAgICB9LFxuICAgIGFjdGlvbkJ1dHRvbnNSb3c6IHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBnYXA6ICc0cHgnLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nXG4gICAgfSxcbiAgICBpY29uQnV0dG9uOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkICNlMmU4ZjAnLFxuICAgICAgICBib3JkZXJSYWRpdXM6ICc4cHgnLFxuICAgICAgICB3aWR0aDogJzQ4cHgnLFxuICAgICAgICBoZWlnaHQ6ICczMnB4JyxcbiAgICAgICAgcGFkZGluZzogJzAnLFxuICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgICAgICB0cmFuc2l0aW9uOiAnYmFja2dyb3VuZC1jb2xvciAwLjJzJyxcbiAgICAgICAgb3BhY2l0eTogJzEnLFxuICAgIH0sXG4gICAgc2VuZEljb246IHtcbiAgICAgICAgd2lkdGg6ICcxNnB4JyxcbiAgICAgICAgaGVpZ2h0OiAnMTZweCcsXG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogJ3VybChcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9XFwnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXCcgdmlld0JveD1cXCcwIDAgMjQgMjRcXCcgZmlsbD1cXCd3aGl0ZVxcJyUzRSUzQ3BhdGggZD1cXCdNMi4wMSAyMUwyMyAxMiAyLjAxIDMgMiAxMGwxNSAyLTE1IDJ6XFwnLyUzRSUzQy9zdmclM0VcIiknLFxuICAgICAgICBiYWNrZ3JvdW5kU2l6ZTogJ2NvbnRhaW4nLFxuICAgICAgICBiYWNrZ3JvdW5kUmVwZWF0OiAnbm8tcmVwZWF0JyxcbiAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiAnY2VudGVyJ1xuICAgIH0sXG4gICAgc3RvcEljb246IHtcbiAgICAgICAgd2lkdGg6ICcxNnB4JyxcbiAgICAgICAgaGVpZ2h0OiAnMTZweCcsXG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogJ3VybChcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9XFwnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXCcgdmlld0JveD1cXCcwIDAgMjQgMjRcXCcgZmlsbD1cXCclMjNEQzI2MjZcXCclM0UlM0NwYXRoIGQ9XFwnTTAgMGgyNHYyNEgwelxcJyBmaWxsPVxcJ25vbmVcXCcvJTNFJTNDcGF0aCBkPVxcJ002IDZoMTJ2MTJINnpcXCcvJTNFJTNDL3N2ZyUzRVwiKScsXG4gICAgICAgIGJhY2tncm91bmRTaXplOiAnY29udGFpbicsXG4gICAgICAgIGJhY2tncm91bmRSZXBlYXQ6ICduby1yZXBlYXQnLFxuICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246ICdjZW50ZXInXG4gICAgfSxcbiAgICByZWZyZXNoSWNvbjoge1xuICAgICAgICB3aWR0aDogJzE2cHgnLFxuICAgICAgICBoZWlnaHQ6ICcxNnB4JyxcbiAgICAgICAgYmFja2dyb3VuZEltYWdlOiAndXJsKFwiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz1cXCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcJyB2aWV3Qm94PVxcJzAgMCAyNCAyNFxcJyBmaWxsPVxcJyUyMzRCNTU2M1xcJyUzRSUzQ3BhdGggZD1cXCdNMCAwaDI0djI0SDB6XFwnIGZpbGw9XFwnbm9uZVxcJy8lM0UlM0NwYXRoIGQ9XFwnTTE3LjY1IDYuMzVBNy45NTggNy45NTggMCAwIDAgMTIgNGMtNC40MiAwLTcuOTkgMy41OC03Ljk5IDhzMy41NyA4IDcuOTkgOGMzLjczIDAgNi44NC0yLjU1IDcuNzMtNmgtMi4wOEE1Ljk5IDUuOTkgMCAwIDEgMTIgMThjLTMuMzEgMC02LTIuNjktNi02czIuNjktNiA2LTZjMS42NiAwIDMuMTQuNjkgNC4yMiAxLjc4TDEzIDExaDdWNGwtMi4zNSAyLjM1elxcJy8lM0UlM0Mvc3ZnJTNFXCIpJyxcbiAgICAgICAgYmFja2dyb3VuZFNpemU6ICdjb250YWluJyxcbiAgICAgICAgYmFja2dyb3VuZFJlcGVhdDogJ25vLXJlcGVhdCcsXG4gICAgICAgIGJhY2tncm91bmRQb3NpdGlvbjogJ2NlbnRlcidcbiAgICB9LFxuICAgIGljb246IHtcbiAgICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICAgIHdpZHRoOiAnMTRweCcsXG4gICAgICAgIGhlaWdodDogJzE0cHgnLFxuICAgICAgICBtYXJnaW5SaWdodDogJzVweCcsXG4gICAgICAgIGJhY2tncm91bmRTaXplOiAnY29udGFpbicsXG4gICAgICAgIGJhY2tncm91bmRSZXBlYXQ6ICduby1yZXBlYXQnLFxuICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246ICdjZW50ZXInXG4gICAgfSxcbiAgICBkaXNhYmxlZEJ1dHRvbjoge1xuICAgICAgICBvcGFjaXR5OiAnMC41JyxcbiAgICAgICAgY3Vyc29yOiAnbm90LWFsbG93ZWQnXG4gICAgfSxcbiAgICBsb2FkaW5nSW5wdXQ6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2YzZjRmNicsXG4gICAgICAgIGN1cnNvcjogJ25vdC1hbGxvd2VkJ1xuICAgIH0sXG4gICAgbG9hZGluZ0luZGljYXRvcjoge1xuICAgICAgICBkaXNwbGF5OiAnbm9uZScsXG4gICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICB0b3A6ICcwJyxcbiAgICAgICAgbGVmdDogJzAnLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgyNDMsIDI0NCwgMjQ2LCAwLjkpJyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnMTBweCcsXG4gICAgICAgIGNvbG9yOiAnIzZCNzI4MCcsXG4gICAgICAgIGZvbnRTaXplOiAnMTRweCcsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgICAgIGdhcDogJzRweCcsXG4gICAgICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxuICAgICAgICB6SW5kZXg6ICcxMCcsXG4gICAgICAgIGJhY2tkcm9wRmlsdGVyOiAnYmx1cigycHgpJyxcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkICNlMmU4ZjAnLFxuICAgICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZSdcbiAgICB9LFxuICAgIGxvYWRpbmdEb3Q6IHtcbiAgICAgICAgd2lkdGg6ICc2cHgnLFxuICAgICAgICBoZWlnaHQ6ICc2cHgnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjOUNBM0FGJyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnNTAlJyxcbiAgICAgICAgYW5pbWF0aW9uOiAnbG9hZGluZ0RvdFB1bHNlIDEuNHMgaW5maW5pdGUnLFxuICAgICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJ1xuICAgIH0sXG4gICAgdHlwZVNlbGVjdG9yOiB7XG4gICAgICAgIHBhZGRpbmc6ICc1cHggMTVweCcsXG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgIGdhcDogJzEwcHgnLFxuICAgICAgICBib3JkZXJUb3A6ICcxcHggc29saWQgI2UyZThmMCcsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3doaXRlJ1xuICAgIH0sXG4gICAgdHlwZUxhYmVsOiB7XG4gICAgICAgIGZvbnRTaXplOiAnMTRweCcsXG4gICAgICAgIGNvbG9yOiAnIzRCNTU2MycsXG4gICAgICAgIGZvbnRXZWlnaHQ6ICc1MDAnXG4gICAgfSxcbiAgICB0eXBlVG9nZ2xlR3JvdXA6IHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBnYXA6ICc0cHgnXG4gICAgfSxcbiAgICB0eXBlVG9nZ2xlQnV0dG9uOiB7XG4gICAgICAgIHBhZGRpbmc6ICc2cHggMTJweCcsXG4gICAgICAgIGZvbnRTaXplOiAnMTNweCcsXG4gICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCAjZTJlOGYwJyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnNnB4JyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2ZmZicsXG4gICAgICAgIGNvbG9yOiAnIzRCNTU2MycsXG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICB0cmFuc2l0aW9uOiAnYWxsIDAuMnMnLFxuICAgICAgICBvcGFjaXR5OiAnMScsXG4gICAgfSxcbiAgICB0eXBlVG9nZ2xlQnV0dG9uQWN0aXZlOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyMwMEI2REUnLFxuICAgICAgICBjb2xvcjogJyNmZmYnLFxuICAgICAgICBib3JkZXJDb2xvcjogJyMwMEI2REUnXG4gICAgfSxcbiAgICBlcnJvck1lc3NhZ2U6IHtcbiAgICAgICAgd2lkdGg6ICdmaXQtY29udGVudCcsXG4gICAgICAgIHBhZGRpbmc6ICcxMHB4IDE1cHgnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjREMyNjI2JyxcbiAgICAgICAgY29sb3I6ICd3aGl0ZScsXG4gICAgICAgIG1hcmdpbkxlZnQ6ICdhdXRvJyxcbiAgICAgICAgYm9yZGVyQm90dG9tUmlnaHRSYWRpdXM6ICc1cHgnLFxuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICBnYXA6ICc4cHgnXG4gICAgfSxcbiAgICBlcnJvckljb246IHtcbiAgICAgICAgd2lkdGg6ICcxNnB4JyxcbiAgICAgICAgaGVpZ2h0OiAnMTZweCcsXG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogJ3VybChcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9XFwnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXCcgdmlld0JveD1cXCcwIDAgMjQgMjRcXCcgZmlsbD1cXCd3aGl0ZVxcJyUzRSUzQ3BhdGggZD1cXCdNMTIgMkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMSAxNWgtMnYtMmgydjJ6bTAtNGgtMlY3aDJ2NnpcXCcvJTNFJTNDL3N2ZyUzRVwiKScsXG4gICAgICAgIGJhY2tncm91bmRTaXplOiAnY29udGFpbicsXG4gICAgICAgIGJhY2tncm91bmRSZXBlYXQ6ICduby1yZXBlYXQnLFxuICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246ICdjZW50ZXInXG4gICAgfSxcbiAgICBpbWFnZVByZXZpZXc6IHtcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgIHRvcDogJzVweCcsXG4gICAgICAgIGxlZnQ6ICc1cHgnLFxuICAgICAgICB3aWR0aDogJzcxcHgnLFxuICAgICAgICBoZWlnaHQ6ICc3MXB4JyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnNnB4JyxcbiAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgICBib3JkZXI6ICcxcHggc29saWQgI2UyZThmMCcsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmOGZhZmMnLFxuICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAwLjJzIGVhc2UnLFxuICAgIH0sXG4gICAgaW1hZ2VQcmV2aWV3SW1nOiB7XG4gICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICBvYmplY3RGaXQ6ICdjb3ZlcicsXG4gICAgfSxcbiAgICBpbWFnZVByZXZpZXdSZW1vdmU6IHtcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgIHRvcDogJzAnLFxuICAgICAgICBsZWZ0OiAnMCcsXG4gICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDAsIDAsIDAsIDAuNSknLFxuICAgICAgICBjb2xvcjogJ3doaXRlJyxcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgICAgICBmb250U2l6ZTogJzI0cHgnLFxuICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgb3BhY2l0eTogJzAnLFxuICAgICAgICB0cmFuc2l0aW9uOiAnb3BhY2l0eSAwLjJzIGVhc2UnLFxuICAgIH0sXG59IHNhdGlzZmllcyBSZWNvcmQ8c3RyaW5nLCBQYXJ0aWFsPENTU1N0eWxlRGVjbGFyYXRpb24+PjtcbiIsImltcG9ydCB7YXBwbHlTdHlsZXMsIGNyZWF0ZUVsZW1lbnQsIG5sVG9Ccn0gZnJvbSBcIi4uL3V0aWxzXCI7XG5pbXBvcnQge2NyZWF0ZUNvbnRlbnRJZnJhbWV9IGZyb20gXCIuL2lmcmFtZVwiO1xuaW1wb3J0IHtleGVjdXRvciwgUHJvbXB0fSBmcm9tIFwiLi4vLi4vZXhlY3V0b3JcIjtcbmltcG9ydCB7Y2hhdEhpc3RvcnksIE1lc3NhZ2UsIFVwZGF0YWJsZUhUTUxFbGVtZW50fSBmcm9tIFwiLi4vLi4vY2hhdEhpc3RvcnlcIjtcbmltcG9ydCB7QWN0aW9uQnV0dG9uLCBjcmVhdGVBY3Rpb25CdXR0b259IGZyb20gXCIuL2FjdGlvbkJ1dHRvblwiO1xuaW1wb3J0IHtzdHlsZXN9IGZyb20gXCIuL3N0eWxlc1wiO1xuaW1wb3J0IHtNb2RhbCwgTW9kYWxDb25maWcsIE1vZGFsVHlwZX0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IGNvbnN0IG1vZGFsVHlwZXMgPSBbJ3RleHQnLCAnaW1hZ2UnXSBhcyBjb25zdDtcblxuXG5sZXQgbW9kYWxFeGlzdHMgPSBmYWxzZTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZU1vZGFsID0gKGNvbmZpZzogTW9kYWxDb25maWcpID0+IHtcbiAgICBpZiAobW9kYWxFeGlzdHMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghY29uZmlnLmtleSkge1xuICAgICAgICBhbGVydCgna2V5IGlzIHJlcXVpcmVkIGNvbmZpZyBwcm9wZXJ0eScpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5vdmVybGF5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uZmlnLm92ZXJsYXkgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmICghY29uZmlnLnR5cGUpIHtcbiAgICAgICAgY29uZmlnLnR5cGUgPSAndGV4dCc7XG4gICAgfVxuXG4gICAgaWYgKCFjb25maWcuYXZhaWxhYmxlVHlwZXMpIHtcbiAgICAgICAgY29uZmlnLmF2YWlsYWJsZVR5cGVzID0gW107XG4gICAgfVxuXG4gICAgY29uZmlnLmF2YWlsYWJsZVR5cGVzID0gY29uZmlnLmF2YWlsYWJsZVR5cGVzLmZpbHRlcigodHlwZTogTW9kYWxUeXBlKSA9PiBtb2RhbFR5cGVzLmluY2x1ZGVzKHR5cGUpKTtcblxuICAgIGlmIChjb25maWcuYXZhaWxhYmxlVHlwZXMubGVuZ3RoID4gMCAmJiAhY29uZmlnLmF2YWlsYWJsZVR5cGVzLmluY2x1ZGVzKGNvbmZpZy50eXBlKSkge1xuICAgICAgICBjb25maWcuYXZhaWxhYmxlVHlwZXMudW5zaGlmdChjb25maWcudHlwZSk7XG4gICAgfVxuXG4gICAgY29uc3QgYnVpbGRNb2RhbCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbW9kYWxPdmVybGF5ID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLm1vZGFsT3ZlcmxheSk7XG5cbiAgICAgICAgY29uc3QgY2hhdE1vZGFsID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLmNoYXRNb2RhbCkgYXMgTW9kYWw7XG5cbiAgICAgICAgY29uc3QgY2hhdEhlYWRlciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy5jaGF0SGVhZGVyKTtcbiAgICAgICAgY29uc3QgY2hhdFRpdGxlID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLmNoYXRUaXRsZSwgJ21vZEFJIEFzc2lzdGFudCcpO1xuICAgICAgICBjb25zdCBjaGF0Q29udHJvbHMgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBzdHlsZXMuY2hhdENvbnRyb2xzKTtcblxuICAgICAgICBjb25zdCBjbG9zZUJ0biA9IGNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHN0eWxlcy5jb250cm9sQnV0dG9uLCAn4pyVJyk7XG4gICAgICAgIGNoYXRDb250cm9scy5hcHBlbmQoY2xvc2VCdG4pO1xuICAgICAgICBjaGF0SGVhZGVyLmFwcGVuZChjaGF0VGl0bGUsIGNoYXRDb250cm9scyk7XG5cbiAgICAgICAgY29uc3QgY2hhdE1lc3NhZ2VzID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLmNoYXRNZXNzYWdlcyk7XG5cbiAgICAgICAgY29uc3QgY2hhdElucHV0QXJlYSA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy5jaGF0SW5wdXQpO1xuXG4gICAgICAgIGNvbnN0IGlucHV0Um93ID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLmlucHV0Um93KTtcbiAgICAgICAgY29uc3QgaW5wdXRXcmFwcGVyID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLmlucHV0V3JhcHBlcik7XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZUlucHV0ID0gY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnLCBzdHlsZXMuaW5wdXQpO1xuICAgICAgICBtZXNzYWdlSW5wdXQucGxhY2Vob2xkZXIgPSAnVHlwZSB5b3VyIG1lc3NhZ2UuLi4nO1xuXG4gICAgICAgIG1lc3NhZ2VJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgbWVzc2FnZUlucHV0LnN0eWxlLmJvcmRlckNvbG9yID0gJyMwMEI2REUnO1xuICAgICAgICB9KTtcblxuICAgICAgICBtZXNzYWdlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBtZXNzYWdlSW5wdXQuc3R5bGUuYm9yZGVyQ29sb3IgPSAnI2UyZThmMCc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1lc3NhZ2VJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBtZXNzYWdlSW5wdXQuc3R5bGUuYm9yZGVyQ29sb3IgPSAnI2UyZThmMCc7XG5cbiAgICAgICAgICAgIGxldCBpbWFnZUZpbGU6IEZpbGUgfCBudWxsID0gbnVsbDtcbiAgICAgICAgICAgIGxldCByZW1vdGVJbWFnZVVybDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgICAgICAgICAgIGNvbnN0IGRhdGFUcmFuc2ZlciA9IGUuZGF0YVRyYW5zZmVyO1xuICAgICAgICAgICAgaWYgKCFkYXRhVHJhbnNmZXIpIHJldHVybjtcblxuICAgICAgICAgICAgY29uc3QgZmlsZXMgPSBkYXRhVHJhbnNmZXIuZmlsZXM7XG4gICAgICAgICAgICBpZiAoZmlsZXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gZmlsZXNbMF07XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUudHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZUZpbGUgPSBmaWxlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFpbWFnZUZpbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbWdVcmwgPSBkYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC91cmktbGlzdCcpO1xuICAgICAgICAgICAgICAgIGlmIChpbWdVcmwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3RlSW1hZ2VVcmwgPSBpbWdVcmw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaW1hZ2VGaWxlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlSW1hZ2VVcGxvYWQoaW1hZ2VGaWxlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyZW1vdGVJbWFnZVVybCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzUmVtb3RlID0gIXJlbW90ZUltYWdlVXJsLnN0YXJ0c1dpdGgodXJsLm9yaWdpbik7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNSZW1vdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlSW1hZ2VVcGxvYWQocmVtb3RlSW1hZ2VVcmwsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChyZW1vdGVJbWFnZVVybCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChibG9iLnR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gbmV3IEZpbGUoW2Jsb2JdLCAnaW1hZ2UucG5nJywge3R5cGU6IGJsb2IudHlwZX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZUltYWdlVXBsb2FkKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZEVycm9yTWVzc2FnZSgnRmlsZWQgdG8gZmV0Y2ggYW4gaW1hZ2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhZGRFcnJvck1lc3NhZ2UoJ09ubHkgaW1hZ2UgZmlsZXMgYXJlIGFsbG93ZWQnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbWVzc2FnZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gZS5jbGlwYm9hcmREYXRhPy5pdGVtcztcbiAgICAgICAgICAgIGlmICghaXRlbXMpIHJldHVybjtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtc1tpXS50eXBlLmluZGV4T2YoJ2ltYWdlJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBpdGVtc1tpXS5nZXRBc0ZpbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZUltYWdlVXBsb2FkKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY2xvc2VNb2RhbCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBidXR0b25zQ29sdW1uID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLmJ1dHRvbnNDb2x1bW4pO1xuXG4gICAgICAgIGNvbnN0IHNlbmRCdG4gPSBjcmVhdGVFbGVtZW50KCdidXR0b24nLCBzdHlsZXMuc2VuZEJ1dHRvbik7XG4gICAgICAgIGNvbnN0IHNlbmRJY29uID0gY3JlYXRlRWxlbWVudCgnc3BhbicsIHN0eWxlcy5zZW5kSWNvbik7XG4gICAgICAgIGNvbnN0IHNlbmRUZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1NlbmQnKTtcbiAgICAgICAgc2VuZEJ0bi5hcHBlbmQoc2VuZEljb24sIHNlbmRUZXh0KTtcblxuICAgICAgICBjb25zdCBhY3Rpb25CdXR0b25zUm93ID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLmFjdGlvbkJ1dHRvbnNSb3cpO1xuXG4gICAgICAgIGNvbnN0IHN0b3BCdG4gPSBjcmVhdGVFbGVtZW50KCdidXR0b24nLCB7Li4uc3R5bGVzLmljb25CdXR0b24sIC4uLnN0eWxlcy5kaXNhYmxlZEJ1dHRvbn0pO1xuICAgICAgICBjb25zdCBzdG9wSWNvbiA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCBzdHlsZXMuc3RvcEljb24pO1xuICAgICAgICBzdG9wQnRuLmFwcGVuZENoaWxkKHN0b3BJY29uKTtcbiAgICAgICAgc3RvcEJ0bi50aXRsZSA9ICdTdG9wIEdlbmVyYXRpb24nO1xuXG4gICAgICAgIGNvbnN0IHRyeUFnYWluQnRuID0gY3JlYXRlRWxlbWVudCgnYnV0dG9uJywgc3R5bGVzLmljb25CdXR0b24pO1xuICAgICAgICBjb25zdCByZWZyZXNoSWNvbiA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCBzdHlsZXMucmVmcmVzaEljb24pO1xuICAgICAgICB0cnlBZ2FpbkJ0bi5hcHBlbmRDaGlsZChyZWZyZXNoSWNvbik7XG4gICAgICAgIHRyeUFnYWluQnRuLnRpdGxlID0gJ1RyeSBBZ2Fpbic7XG5cbiAgICAgICAgaWYgKGhpc3RvcnkuZ2V0TWVzc2FnZXMoKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRyeUFnYWluQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGFwcGx5U3R5bGVzKHRyeUFnYWluQnRuLCB7Li4uc3R5bGVzLmljb25CdXR0b24sIC4uLnN0eWxlcy5kaXNhYmxlZEJ1dHRvbn0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYWN0aW9uQnV0dG9uc1Jvdy5hcHBlbmQoc3RvcEJ0biwgdHJ5QWdhaW5CdG4pO1xuICAgICAgICBidXR0b25zQ29sdW1uLmFwcGVuZChzZW5kQnRuLCBhY3Rpb25CdXR0b25zUm93KTtcbiAgICAgICAgaW5wdXRXcmFwcGVyLmFwcGVuZChtZXNzYWdlSW5wdXQpO1xuICAgICAgICBpbnB1dFJvdy5hcHBlbmQoaW5wdXRXcmFwcGVyLCBidXR0b25zQ29sdW1uKTtcblxuICAgICAgICBjb25zdCBsb2FkaW5nSW5kaWNhdG9yID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLmxvYWRpbmdJbmRpY2F0b3IpO1xuICAgICAgICBsb2FkaW5nSW5kaWNhdG9yLmlubmVySFRNTCA9IGBcbiAgICAgICAgPHN0eWxlPlxuICAgICAgICAgICAgQGtleWZyYW1lcyBsb2FkaW5nRG90UHVsc2Uge1xuICAgICAgICAgICAgICAgIDAlLCA4MCUsIDEwMCUgeyB0cmFuc2Zvcm06IHNjYWxlKDAuNik7IG9wYWNpdHk6IDAuMzsgfVxuICAgICAgICAgICAgICAgIDQwJSB7IHRyYW5zZm9ybTogc2NhbGUoMSk7IG9wYWNpdHk6IDE7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5sb2FkaW5nLWRvdHMge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDE2cHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubG9hZGluZy1kb3Qge1xuICAgICAgICAgICAgICAgIHdpZHRoOiA4cHg7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA4cHg7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzZCNzI4MDtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogbG9hZGluZ0RvdFB1bHNlIDEuNHMgaW5maW5pdGUgZWFzZS1pbi1vdXQgYm90aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5sb2FkaW5nLWRvdDpudGgtY2hpbGQoMSkgeyBhbmltYXRpb24tZGVsYXk6IC0wLjMyczsgfVxuICAgICAgICAgICAgLmxvYWRpbmctZG90Om50aC1jaGlsZCgyKSB7IGFuaW1hdGlvbi1kZWxheTogLTAuMTZzOyB9XG4gICAgICAgICAgICAubG9hZGluZy1kb3Q6bnRoLWNoaWxkKDMpIHsgYW5pbWF0aW9uLWRlbGF5OiAwczsgfVxuICAgICAgICA8L3N0eWxlPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibG9hZGluZy1kb3RzXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibG9hZGluZy1kb3RcIj48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsb2FkaW5nLWRvdFwiPjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxvYWRpbmctZG90XCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIGA7XG5cbiAgICAgICAgaW5wdXRXcmFwcGVyLmFwcGVuZChsb2FkaW5nSW5kaWNhdG9yKTtcblxuICAgICAgICBjb25zdCB0eXBlU2VsZWN0b3IgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBzdHlsZXMudHlwZVNlbGVjdG9yKTtcbiAgICAgICAgY29uc3QgdHlwZUxhYmVsID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLnR5cGVMYWJlbCwgJ0dlbmVyYXRlOicpO1xuICAgICAgICBjb25zdCB0eXBlVG9nZ2xlR3JvdXAgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBzdHlsZXMudHlwZVRvZ2dsZUdyb3VwKTtcblxuICAgICAgICBjb25zdCB0eXBlQnV0dG9uczoge1trZXk6IHN0cmluZ106IEhUTUxCdXR0b25FbGVtZW50fSA9IHt9O1xuICAgICAgICBjb25zdCBhdmFpbGFibGVUeXBlcyA9IGNvbmZpZy5hdmFpbGFibGVUeXBlcyA/PyBbXTtcblxuICAgICAgICBhdmFpbGFibGVUeXBlcy5mb3JFYWNoKCh0eXBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBidXR0b24gPSBjcmVhdGVFbGVtZW50KCdidXR0b24nLCBzdHlsZXMudHlwZVRvZ2dsZUJ1dHRvbiwgdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR5cGUuc2xpY2UoMSkpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09IGNvbmZpZy50eXBlKSB7XG4gICAgICAgICAgICAgICAgYXBwbHlTdHlsZXMoYnV0dG9uLCB7Li4uc3R5bGVzLnR5cGVUb2dnbGVCdXR0b24sIC4uLnN0eWxlcy50eXBlVG9nZ2xlQnV0dG9uQWN0aXZlfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyh0eXBlQnV0dG9ucykuZm9yRWFjaChidG4gPT4ge1xuICAgICAgICAgICAgICAgICAgICBhcHBseVN0eWxlcyhidG4sIHN0eWxlcy50eXBlVG9nZ2xlQnV0dG9uKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhcHBseVN0eWxlcyhidXR0b24sIHsuLi5zdHlsZXMudHlwZVRvZ2dsZUJ1dHRvbiwgLi4uc3R5bGVzLnR5cGVUb2dnbGVCdXR0b25BY3RpdmV9KTtcblxuICAgICAgICAgICAgICAgIHN3aXRjaFR5cGUodHlwZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHR5cGVCdXR0b25zW3R5cGVdID0gYnV0dG9uO1xuICAgICAgICAgICAgdHlwZVRvZ2dsZUdyb3VwLmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHR5cGVTZWxlY3Rvci5hcHBlbmQodHlwZUxhYmVsLCB0eXBlVG9nZ2xlR3JvdXApO1xuICAgICAgICBjaGF0SW5wdXRBcmVhLmFwcGVuZChpbnB1dFJvdyk7XG4gICAgICAgIGNoYXRNb2RhbC5hcHBlbmQoY2hhdEhlYWRlciwgY2hhdE1lc3NhZ2VzLCBjaGF0SW5wdXRBcmVhKTtcblxuICAgICAgICBpZiAoYXZhaWxhYmxlVHlwZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY2hhdE1vZGFsLmFwcGVuZCh0eXBlU2VsZWN0b3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbmZpZy5vdmVybGF5KSB7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChtb2RhbE92ZXJsYXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQoY2hhdE1vZGFsKTtcblxuICAgICAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTW9kYWwpO1xuICAgICAgICBzZW5kQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2VuZE1lc3NhZ2UoKSk7XG4gICAgICAgIHN0b3BCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdG9wR2VuZXJhdGlvbik7XG4gICAgICAgIHRyeUFnYWluQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdHJ5QWdhaW4pO1xuICAgICAgICBtZXNzYWdlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHZvaWQgc2VuZE1lc3NhZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2hhdEhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBpbml0RHJhZyk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGRyYWcpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZW5kRHJhZyk7XG5cbiAgICAgICAgY2hhdE1vZGFsLm1vZGFsT3ZlcmxheSA9IG1vZGFsT3ZlcmxheTtcbiAgICAgICAgY2hhdE1vZGFsLmNoYXRIZWFkZXIgPSBjaGF0SGVhZGVyO1xuICAgICAgICBjaGF0TW9kYWwuY2xvc2VCdG4gPSBjbG9zZUJ0bjtcbiAgICAgICAgY2hhdE1vZGFsLmNoYXRNZXNzYWdlcyA9IGNoYXRNZXNzYWdlcztcbiAgICAgICAgY2hhdE1vZGFsLm1lc3NhZ2VJbnB1dCA9IG1lc3NhZ2VJbnB1dDtcbiAgICAgICAgY2hhdE1vZGFsLnNlbmRCdG4gPSBzZW5kQnRuO1xuICAgICAgICBjaGF0TW9kYWwudHJ5QWdhaW5CdG4gPSB0cnlBZ2FpbkJ0bjtcbiAgICAgICAgY2hhdE1vZGFsLnN0b3BCdG4gPSBzdG9wQnRuO1xuICAgICAgICBjaGF0TW9kYWwubG9hZGluZ0luZGljYXRvciA9IGxvYWRpbmdJbmRpY2F0b3I7XG4gICAgICAgIGNoYXRNb2RhbC50eXBlU2VsZWN0b3IgPSB0eXBlU2VsZWN0b3I7XG4gICAgICAgIGNoYXRNb2RhbC50eXBlQnV0dG9ucyA9IHR5cGVCdXR0b25zO1xuICAgICAgICBjaGF0TW9kYWwuaW5wdXRXcmFwcGVyID0gaW5wdXRXcmFwcGVyO1xuXG4gICAgICAgIGNoYXRNb2RhbC5pc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgIGNoYXRNb2RhbC5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgY2hhdE1vZGFsLmFib3J0Q29udHJvbGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgY2hhdE1vZGFsLm9mZnNldFggPSAwO1xuICAgICAgICBjaGF0TW9kYWwub2Zmc2V0WSA9IDA7XG5cbiAgICAgICAgcmV0dXJuIGNoYXRNb2RhbDtcbiAgICB9XG5cbiAgICBjb25zdCBoYW5kbGVJbWFnZVVwbG9hZCA9IGFzeW5jIChmaWxlT3JVcmw6IEZpbGUgfCBzdHJpbmcsIGlzUmVtb3RlVXJsOiBib29sZWFuID0gZmFsc2UpID0+IHtcbiAgICAgICAgaWYgKCFpc1JlbW90ZVVybCAmJiBmaWxlT3JVcmwgaW5zdGFuY2VvZiBGaWxlICYmICFmaWxlT3JVcmwudHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSkge1xuICAgICAgICAgICAgYWRkRXJyb3JNZXNzYWdlKCdPbmx5IGltYWdlIGZpbGVzIGFyZSBhbGxvd2VkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobW9kYWwudXBsb2FkZWRJbWFnZSkge1xuICAgICAgICAgICAgcmVtb3ZlVXBsb2FkZWRJbWFnZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaW1hZ2VQcmV2aWV3ID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLmltYWdlUHJldmlldyk7XG4gICAgICAgIGNvbnN0IGltZyA9IGNyZWF0ZUVsZW1lbnQoJ2ltZycsIHN0eWxlcy5pbWFnZVByZXZpZXdJbWcpIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHJlbW92ZUJ0biA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy5pbWFnZVByZXZpZXdSZW1vdmUsICfDlycpO1xuXG4gICAgICAgIGlmIChpc1JlbW90ZVVybCkge1xuICAgICAgICAgICAgaW1nLnNyYyA9IGZpbGVPclVybCBhcyBzdHJpbmc7XG4gICAgICAgICAgICBtb2RhbC51cGxvYWRlZEltYWdlID0gaW1nLnNyYztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFVUkwgPSBhd2FpdCBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXG4gICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZXZlbnQudGFyZ2V0Py5yZXN1bHQgYXMgc3RyaW5nKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlT3JVcmwgYXMgRmlsZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaW1nLnNyYyA9IGRhdGFVUkw7XG4gICAgICAgICAgICBtb2RhbC51cGxvYWRlZEltYWdlID0gZGF0YVVSTDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlbW92ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgcmVtb3ZlVXBsb2FkZWRJbWFnZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpbWFnZVByZXZpZXcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgIGltYWdlUHJldmlldy5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMS4wNSknO1xuICAgICAgICAgICAgcmVtb3ZlQnRuLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGltYWdlUHJldmlldy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgaW1hZ2VQcmV2aWV3LnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuICAgICAgICAgICAgcmVtb3ZlQnRuLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGltYWdlUHJldmlldy5hcHBlbmQoaW1nLCByZW1vdmVCdG4pO1xuICAgICAgICBtb2RhbC5pbWFnZVByZXZpZXcgPSBpbWFnZVByZXZpZXc7XG4gICAgICAgIG1vZGFsLm1lc3NhZ2VJbnB1dC5zdHlsZS5wYWRkaW5nTGVmdCA9ICc4NXB4JztcbiAgICAgICAgbW9kYWwuaW5wdXRXcmFwcGVyLmFwcGVuZChpbWFnZVByZXZpZXcpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlbW92ZVVwbG9hZGVkSW1hZ2UgPSAoKSA9PiB7XG4gICAgICAgIGlmIChtb2RhbC5pbWFnZVByZXZpZXcpIHtcbiAgICAgICAgICAgIG1vZGFsLmltYWdlUHJldmlldy5yZW1vdmUoKTtcbiAgICAgICAgICAgIG1vZGFsLmltYWdlUHJldmlldyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBtb2RhbC51cGxvYWRlZEltYWdlID0gdW5kZWZpbmVkO1xuICAgICAgICBtb2RhbC5tZXNzYWdlSW5wdXQuc3R5bGUucGFkZGluZ0xlZnQgPSAnMTVweCc7XG4gICAgfVxuXG4gICAgY29uc3Qgb3Blbk1vZGFsID0gKCkgPT4ge1xuICAgICAgICBtb2RhbC5jaGF0TWVzc2FnZXMuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIG1vZGFsLmNoYXRNZXNzYWdlcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgIG1vZGFsLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgbW9kYWwubW9kYWxPdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gaGlzdG9yeS5nZXRNZXNzYWdlcygpLmZpbHRlcigobSkgPT4gIW0uaGlkZGVuKTtcbiAgICAgICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG1vZGFsLmNoYXRNZXNzYWdlcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIG1lc3NhZ2VzLmZvckVhY2goKG1zZykgPT4ge1xuICAgICAgICAgICAgICAgIHJlbmRlck1lc3NhZ2UobXNnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBtb2RhbC5jaGF0TWVzc2FnZXMuc2Nyb2xsVG9wID0gbW9kYWwuY2hhdE1lc3NhZ2VzLnNjcm9sbEhlaWdodDtcbiAgICAgICAgICAgIG1vZGFsLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgIH0sIDEwMCk7XG5cbiAgICAgICAgcmV0dXJuIG1vZGFsO1xuICAgIH1cblxuICAgIGNvbnN0IGNsb3NlTW9kYWwgPSAoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGRyYWcpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZW5kRHJhZyk7XG5cbiAgICAgICAgaWYgKG1vZGFsLm1vZGFsT3ZlcmxheSkge1xuICAgICAgICAgICAgbW9kYWwubW9kYWxPdmVybGF5LnJlbW92ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1vZGFsKSB7XG4gICAgICAgICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vZGFsRXhpc3RzID0gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgaW5pdERyYWcgPSAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICBtb2RhbC5pc0RyYWdnaW5nID0gdHJ1ZTtcblxuICAgICAgICBjb25zdCByZWN0ID0gbW9kYWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgbW9kYWwub2Zmc2V0WCA9IGUuY2xpZW50WCAtIHJlY3QubGVmdDtcbiAgICAgICAgbW9kYWwub2Zmc2V0WSA9IGUuY2xpZW50WSAtIHJlY3QudG9wO1xuXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUudXNlclNlbGVjdCA9ICdub25lJztcbiAgICB9XG5cbiAgICBjb25zdCBkcmFnID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgaWYgKCFtb2RhbC5pc0RyYWdnaW5nKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgbmV3WCA9IGUuY2xpZW50WCAtIG1vZGFsLm9mZnNldFg7XG4gICAgICAgIGNvbnN0IG5ld1kgPSBlLmNsaWVudFkgLSBtb2RhbC5vZmZzZXRZO1xuXG4gICAgICAgIG1vZGFsLnN0eWxlLmxlZnQgPSBuZXdYICsgJ3B4JztcbiAgICAgICAgbW9kYWwuc3R5bGUudG9wID0gbmV3WSArICdweCc7XG5cbiAgICAgICAgbW9kYWwuc3R5bGUudHJhbnNmb3JtID0gJ25vbmUnO1xuICAgIH1cblxuICAgIGNvbnN0IGVuZERyYWcgPSAoKSA9PiB7XG4gICAgICAgIG1vZGFsLmlzRHJhZ2dpbmcgPSBmYWxzZTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS51c2VyU2VsZWN0ID0gJyc7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RvcEdlbmVyYXRpb24gPSAoKSA9PiB7XG4gICAgICAgIGlmICghbW9kYWwuaXNMb2FkaW5nIHx8ICFtb2RhbC5hYm9ydENvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vZGFsLmFib3J0Q29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICBtb2RhbC5hYm9ydENvbnRyb2xsZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHNldExvYWRpbmdTdGF0ZShmYWxzZSk7XG4gICAgfVxuXG4gICAgY29uc3QgdHJ5QWdhaW4gPSAoKSA9PiB7XG4gICAgICAgIGlmIChoaXN0b3J5LmdldE1lc3NhZ2VzKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29uZmlnLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgdm9pZCBzZW5kTWVzc2FnZSgnVHJ5IGFnYWluJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29uZmlnLnR5cGUgPT09ICdpbWFnZScpIHtcbiAgICAgICAgICAgIGNvbnN0IGxhdGVzdFVzZXJNc2cgPSBoaXN0b3J5LmdldE1lc3NhZ2VzKCkucmV2ZXJzZSgpLmZpbmQoKG1zZykgPT4gbXNnLnJvbGUgPT09ICd1c2VyJyk7XG4gICAgICAgICAgICBpZiAobGF0ZXN0VXNlck1zZykge1xuICAgICAgICAgICAgICAgIHZvaWQgc2VuZE1lc3NhZ2UobGF0ZXN0VXNlck1zZy5jb250ZW50IGFzIHN0cmluZyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGFkZFVzZXJNZXNzYWdlID0gKGNvbnRlbnQ6IFByb21wdCkgPT4ge1xuICAgICAgICBpZiAobW9kYWwuY2hhdE1lc3NhZ2VzLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykge1xuICAgICAgICAgICAgbW9kYWwuY2hhdE1lc3NhZ2VzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZURpdjogVXBkYXRhYmxlSFRNTEVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAuLi5zdHlsZXMubWVzc2FnZSxcbiAgICAgICAgICAgIC4uLnN0eWxlcy51c2VyTWVzc2FnZVxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgdGV4dENvbnRlbnQ7XG4gICAgICAgIGxldCBpbWFnZXNDb250ZW50ID0gbnVsbDtcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjb250ZW50KSkge1xuICAgICAgICAgICAgY29uc3QgW3RleHQsIC4uLmltYWdlc10gPSBjb250ZW50O1xuICAgICAgICAgICAgdGV4dENvbnRlbnQgPSB0ZXh0LnZhbHVlO1xuICAgICAgICAgICAgaW1hZ2VzQ29udGVudCA9IGltYWdlcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRleHRDb250ZW50ID0gY29udGVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvbnRlbnRXcmFwcGVyID0gY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICAgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG4gICAgICAgICAgICBnYXA6ICc4cHgnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHRleHREaXYgPSBjcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGV4dERpdi5pbm5lckhUTUwgPSBubFRvQnIodGV4dENvbnRlbnQpO1xuICAgICAgICBjb250ZW50V3JhcHBlci5hcHBlbmRDaGlsZCh0ZXh0RGl2KTtcblxuICAgICAgICBpZiAoaW1hZ2VzQ29udGVudCkge1xuICAgICAgICAgICAgY29uc3QgaW1hZ2VSb3cgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICAgICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxuICAgICAgICAgICAgICAgIGdhcDogJzhweCcsXG4gICAgICAgICAgICAgICAgZmxleFdyYXA6ICd3cmFwJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgaW1nQ29udGVudCBvZiBpbWFnZXNDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VXcmFwcGVyID0gY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzEwMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMTAwcHgnLFxuICAgICAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6ICc0cHgnLFxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpblRvcDogJzRweCdcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGltZyA9IGNyZWF0ZUVsZW1lbnQoJ2ltZycsIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdEZpdDogJ2NvdmVyJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGltZy5zcmMgPSBpbWdDb250ZW50LnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgaW1hZ2VXcmFwcGVyLmFwcGVuZENoaWxkKGltZyk7XG4gICAgICAgICAgICAgICAgaW1hZ2VSb3cuYXBwZW5kQ2hpbGQoaW1hZ2VXcmFwcGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRlbnRXcmFwcGVyLmFwcGVuZENoaWxkKGltYWdlUm93KTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1lc3NhZ2VEaXYuYXBwZW5kQ2hpbGQoY29udGVudFdyYXBwZXIpO1xuXG4gICAgICAgIG1lc3NhZ2VEaXYudXBkYXRlID0gKG1zZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGV4dENvbnRlbnQgPSBBcnJheS5pc0FycmF5KG1zZy5jb250ZW50KSA/IG1zZy5jb250ZW50WzBdLnZhbHVlIDogbXNnLmNvbnRlbnQ7XG4gICAgICAgICAgICB0ZXh0RGl2LmlubmVySFRNTCA9IG5sVG9Ccih0ZXh0Q29udGVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBtb2RhbC5jaGF0TWVzc2FnZXMuYXBwZW5kQ2hpbGQobWVzc2FnZURpdik7XG4gICAgICAgIG1vZGFsLmNoYXRNZXNzYWdlcy5zY3JvbGxUb3AgPSBtb2RhbC5jaGF0TWVzc2FnZXMuc2Nyb2xsSGVpZ2h0O1xuXG4gICAgICAgIHJldHVybiBtZXNzYWdlRGl2O1xuICAgIH1cblxuICAgIGNvbnN0IGFkZEVycm9yTWVzc2FnZSA9IChjb250ZW50OiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKG1vZGFsLmNoYXRNZXNzYWdlcy5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHtcbiAgICAgICAgICAgIG1vZGFsLmNoYXRNZXNzYWdlcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VEaXYgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAuLi5zdHlsZXMubWVzc2FnZSxcbiAgICAgICAgICAgIC4uLnN0eWxlcy5lcnJvck1lc3NhZ2VcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgZXJyb3JJY29uID0gY3JlYXRlRWxlbWVudCgnc3BhbicsIHN0eWxlcy5lcnJvckljb24pO1xuICAgICAgICBtZXNzYWdlRGl2LmFwcGVuZENoaWxkKGVycm9ySWNvbik7XG5cbiAgICAgICAgY29uc3QgdGV4dFNwYW4gPSBjcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIHRleHRTcGFuLnRleHRDb250ZW50ID0gY29udGVudDtcbiAgICAgICAgbWVzc2FnZURpdi5hcHBlbmRDaGlsZCh0ZXh0U3Bhbik7XG5cbiAgICAgICAgbW9kYWwuY2hhdE1lc3NhZ2VzLmFwcGVuZENoaWxkKG1lc3NhZ2VEaXYpO1xuICAgICAgICBtb2RhbC5jaGF0TWVzc2FnZXMuc2Nyb2xsVG9wID0gbW9kYWwuY2hhdE1lc3NhZ2VzLnNjcm9sbEhlaWdodDtcblxuICAgICAgICByZXR1cm4gbWVzc2FnZURpdjtcbiAgICB9XG5cbiAgICBjb25zdCBhZGRBc3Npc3RhbnRNZXNzYWdlID0gKGNvbnRlbnQ6IFByb21wdCwgcHJvdmlkZWRJZD86IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAobW9kYWwuY2hhdE1lc3NhZ2VzLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykge1xuICAgICAgICAgICAgbW9kYWwuY2hhdE1lc3NhZ2VzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZURpdjogVXBkYXRhYmxlSFRNTEVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAuLi5zdHlsZXMubWVzc2FnZSxcbiAgICAgICAgICAgIC4uLnN0eWxlcy5haU1lc3NhZ2VcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZUlkID0gcHJvdmlkZWRJZCB8fCAnbXNnLScgKyBEYXRlLm5vdygpO1xuXG4gICAgICAgIGNvbnN0IGNvbnRlbnREaXYgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBzdHlsZXMubWVzc2FnZUNvbnRlbnQpO1xuXG4gICAgICAgIGNvbnN0IHRleHRDb250ZW50ID0gQXJyYXkuaXNBcnJheShjb250ZW50KSA/IGNvbnRlbnRbMF0udmFsdWUgOiBjb250ZW50O1xuICAgICAgICBjb25zdCBpZnJhbWUgPSBjcmVhdGVDb250ZW50SWZyYW1lKHRleHRDb250ZW50LCBtb2RhbCwgY29uZmlnLmN1c3RvbUNTUyA/PyBbXSk7XG5cbiAgICAgICAgY29udGVudERpdi5hcHBlbmRDaGlsZChpZnJhbWUpO1xuXG4gICAgICAgIGNvbnN0IGFjdGlvbnNEaXYgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBzdHlsZXMubWVzc2FnZUFjdGlvbnMpO1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBoaXN0b3J5LmdldEFzc2lzdGFudE1lc3NhZ2UobWVzc2FnZUlkKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmIChjb25maWcudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy50ZXh0QWN0aW9ucz8uY29weSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uc0Rpdi5hcHBlbmQoY3JlYXRlQWN0aW9uQnV0dG9uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBtb2RhbC5pc0xvYWRpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnY29weScsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ0NvcHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkVGV4dDogJ0NvcGllZCEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdHlwZW9mIGNvbmZpZy50ZXh0QWN0aW9ucz8uY29weSA9PT0gJ2Z1bmN0aW9uJyA/IGNvbmZpZy50ZXh0QWN0aW9ucy5jb3B5IDogY29weVRvQ2xpcGJvYXJkXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy50ZXh0QWN0aW9ucz8uaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbnNEaXYuYXBwZW5kKGNyZWF0ZUFjdGlvbkJ1dHRvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogbW9kYWwuaXNMb2FkaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2luc2VydCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ0luc2VydCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWRUZXh0OiAnSW5zZXJ0ZWQhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGNvbmZpZy50ZXh0QWN0aW9ucy5pbnNlcnRcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNvbmZpZy50eXBlID09PSAnaW1hZ2UnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5pbWFnZUFjdGlvbnM/LmNvcHkgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbnNEaXYuYXBwZW5kKGNyZWF0ZUFjdGlvbkJ1dHRvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogbW9kYWwuaXNMb2FkaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2NvcHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDb3B5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdUZXh0OiAnRG93bmxvYWRpbmcuLi4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkVGV4dDogJ0NvcGllZCEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogYXN5bmMgKG1zZywgbW9kYWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gdHlwZW9mIGNvbmZpZy50ZXh0QWN0aW9ucz8uY29weSA9PT0gJ2Z1bmN0aW9uJyA/IGNvbmZpZy50ZXh0QWN0aW9ucy5jb3B5IDogY29weVRvQ2xpcGJvYXJkO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1zZy5jdHguZG93bmxvYWRlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyKG1zZywgbW9kYWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBleGVjdXRvci5tZ3IuZG93bmxvYWQuaW1hZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IG1zZy5jb250ZW50IGFzIHN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IGNvbmZpZy5maWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlOiBjb25maWcubmFtZXNwYWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZTogY29uZmlnLnJlc291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYVNvdXJjZTogY29uZmlnLmltYWdlPy5tZWRpYVNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZy5jb250ZW50ID0gZGF0YS5mdWxsVXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZy5jdHguZG93bmxvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnLmN0eC51cmwgPSBkYXRhLnVybDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2cuY3R4LmZ1bGxVcmwgPSBkYXRhLmZ1bGxVcmw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyKG1zZywgbW9kYWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgaW5zZXJ0Q2IgPSBjb25maWcuaW1hZ2VBY3Rpb25zPy5pbnNlcnQ7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbnNlcnRDYiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb25zRGl2LmFwcGVuZChjcmVhdGVBY3Rpb25CdXR0b24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IG1vZGFsLmlzTG9hZGluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdpbnNlcnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdJbnNlcnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkVGV4dDogJ0luc2VydGVkIScsXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nVGV4dDogJ0Rvd25sb2FkaW5nLi4uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jIChtc2csIG1vZGFsKSA9PiB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobXNnLmN0eC5kb3dubG9hZGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydENiKG1zZywgbW9kYWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBleGVjdXRvci5tZ3IuZG93bmxvYWQuaW1hZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IG1zZy5jb250ZW50IGFzIHN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IGNvbmZpZy5maWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlOiBjb25maWcubmFtZXNwYWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZTogY29uZmlnLnJlc291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYVNvdXJjZTogY29uZmlnLmltYWdlPy5tZWRpYVNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZy5jb250ZW50ID0gZGF0YS5mdWxsVXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZy5jdHguZG93bmxvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnLmN0eC51cmwgPSBkYXRhLnVybDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2cuY3R4LmZ1bGxVcmwgPSBkYXRhLmZ1bGxVcmw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRDYihtc2csIG1vZGFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG1lc3NhZ2VEaXYuYXBwZW5kKGNvbnRlbnREaXYsIGFjdGlvbnNEaXYpO1xuXG4gICAgICAgIG1vZGFsLmNoYXRNZXNzYWdlcy5hcHBlbmRDaGlsZChtZXNzYWdlRGl2KTtcbiAgICAgICAgbW9kYWwuY2hhdE1lc3NhZ2VzLnNjcm9sbFRvcCA9IG1vZGFsLmNoYXRNZXNzYWdlcy5zY3JvbGxIZWlnaHQ7XG5cbiAgICAgICAgbWVzc2FnZURpdi51cGRhdGUgPSAobXNnKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ZXh0Q29udGVudCA9IEFycmF5LmlzQXJyYXkobXNnLmNvbnRlbnQpID8gbXNnLmNvbnRlbnRbMF0udmFsdWUgOiBtc2cuY29udGVudDtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBtc2cudHlwZSA9PT0gJ2ltYWdlJyA/IGA8aW1nIHNyYz1cIiR7dGV4dENvbnRlbnR9XCIgLz5gIDogbmxUb0JyKHRleHRDb250ZW50KTtcbiAgICAgICAgICAgIGlmcmFtZS5zeW5jQ29udGVudChjb250ZW50KTtcbiAgICAgICAgICAgIGlmcmFtZS5zeW5jSGVpZ2h0KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWVzc2FnZURpdjtcbiAgICB9XG5cbiAgICBjb25zdCByZW5kZXJNZXNzYWdlID0gKG1zZzogTWVzc2FnZSkgPT4ge1xuICAgICAgICBpZiAobXNnLmhpZGRlbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1zZy5yb2xlID09PSAndXNlcicpIHtcbiAgICAgICAgICAgIHJldHVybiBhZGRVc2VyTWVzc2FnZShtc2cuY29udGVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobXNnLnR5cGUgPT09ICdpbWFnZScpIHtcbiAgICAgICAgICAgIHJldHVybiBhZGRBc3Npc3RhbnRNZXNzYWdlKGA8aW1nIHNyYz1cIiR7bXNnLmNvbnRlbnR9XCIgLz5gLCBtc2cuaWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFkZEFzc2lzdGFudE1lc3NhZ2UobXNnLmNvbnRlbnQsIG1zZy5pZCk7XG4gICAgfVxuXG4gICAgY29uc3QgY29weVRvQ2xpcGJvYXJkID0gYXN5bmMgKG1lc3NhZ2U6IE1lc3NhZ2UpID0+IHtcbiAgICAgICAgY29uc3QgdGV4dENvbnRlbnQgPSBBcnJheS5pc0FycmF5KG1lc3NhZ2UuY29udGVudCkgPyBtZXNzYWdlLmNvbnRlbnRbMF0udmFsdWUgOiBtZXNzYWdlLmNvbnRlbnQ7XG5cbiAgICAgICAgaWYgKG5hdmlnYXRvci5jbGlwYm9hcmQgJiYgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JNZXNzYWdlKF8oJ21vZGFpLmNtcC5mYWlsZWRfY29weScpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dGFyZWEgPSBjcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgICAgICAgICAgICAgIHRleHRhcmVhLnZhbHVlID0gdGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0YXJlYSk7XG4gICAgICAgICAgICAgICAgdGV4dGFyZWEuc2VsZWN0KCk7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZChcImNvcHlcIik7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0ZXh0YXJlYSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvck1lc3NhZ2UoXygnbW9kYWkuY21wLmZhaWxlZF9jb3B5JykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2V0TG9hZGluZ1N0YXRlID0gKGxvYWRpbmc6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgbW9kYWwuaXNMb2FkaW5nID0gbG9hZGluZztcblxuICAgICAgICBpZiAobG9hZGluZykge1xuICAgICAgICAgICAgbW9kYWwubG9hZGluZ0luZGljYXRvci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbW9kYWwubG9hZGluZ0luZGljYXRvci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG5cbiAgICAgICAgbW9kYWwubWVzc2FnZUlucHV0LmRpc2FibGVkID0gbG9hZGluZztcbiAgICAgICAgaWYgKGxvYWRpbmcpIHtcbiAgICAgICAgICAgIGFwcGx5U3R5bGVzKG1vZGFsLm1lc3NhZ2VJbnB1dCwgey4uLnN0eWxlcy5pbnB1dCwgLi4uc3R5bGVzLmxvYWRpbmdJbnB1dH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXBwbHlTdHlsZXMobW9kYWwubWVzc2FnZUlucHV0LCBzdHlsZXMuaW5wdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbW9kYWwuc2VuZEJ0bi5kaXNhYmxlZCA9IGxvYWRpbmc7XG4gICAgICAgIGlmIChsb2FkaW5nKSB7XG4gICAgICAgICAgICBhcHBseVN0eWxlcyhtb2RhbC5zZW5kQnRuLCB7Li4uc3R5bGVzLnNlbmRCdXR0b24sIC4uLnN0eWxlcy5kaXNhYmxlZEJ1dHRvbn0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXBwbHlTdHlsZXMobW9kYWwuc2VuZEJ0biwgc3R5bGVzLnNlbmRCdXR0b24pO1xuICAgICAgICB9XG5cbiAgICAgICAgbW9kYWwuc3RvcEJ0bi5kaXNhYmxlZCA9ICFsb2FkaW5nO1xuICAgICAgICBpZiAobG9hZGluZykge1xuICAgICAgICAgICAgYXBwbHlTdHlsZXMobW9kYWwuc3RvcEJ0biwgc3R5bGVzLmljb25CdXR0b24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXBwbHlTdHlsZXMobW9kYWwuc3RvcEJ0biwgey4uLnN0eWxlcy5pY29uQnV0dG9uLCAuLi5zdHlsZXMuZGlzYWJsZWRCdXR0b259KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGhhc01lc3NhZ2VzID0gaGlzdG9yeS5nZXRNZXNzYWdlcygpLmxlbmd0aCA+IDA7XG4gICAgICAgIG1vZGFsLnRyeUFnYWluQnRuLmRpc2FibGVkID0gbG9hZGluZyB8fCAhaGFzTWVzc2FnZXM7XG4gICAgICAgIGlmIChsb2FkaW5nIHx8ICFoYXNNZXNzYWdlcykge1xuICAgICAgICAgICAgYXBwbHlTdHlsZXMobW9kYWwudHJ5QWdhaW5CdG4sIHsuLi5zdHlsZXMuaWNvbkJ1dHRvbiwgLi4uc3R5bGVzLmRpc2FibGVkQnV0dG9ufSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcHBseVN0eWxlcyhtb2RhbC50cnlBZ2FpbkJ0biwgc3R5bGVzLmljb25CdXR0b24pO1xuICAgICAgICB9XG5cbiAgICAgICAgT2JqZWN0LnZhbHVlcyhtb2RhbC50eXBlQnV0dG9ucykuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgICAgICAgYnV0dG9uLmRpc2FibGVkID0gbG9hZGluZztcbiAgICAgICAgICAgIGNvbnN0IGlzQWN0aXZlID0gYnV0dG9uLnRleHRDb250ZW50Py50b0xvd2VyQ2FzZSgpID09PSBjb25maWcudHlwZTtcblxuICAgICAgICAgICAgaWYgKGxvYWRpbmcpIHtcbiAgICAgICAgICAgICAgICBhcHBseVN0eWxlcyhidXR0b24sIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uc3R5bGVzLnR5cGVUb2dnbGVCdXR0b24sXG4gICAgICAgICAgICAgICAgICAgIC4uLihpc0FjdGl2ZSA/IHN0eWxlcy50eXBlVG9nZ2xlQnV0dG9uQWN0aXZlIDoge30pLFxuICAgICAgICAgICAgICAgICAgICAuLi5zdHlsZXMuZGlzYWJsZWRCdXR0b25cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXBwbHlTdHlsZXMoYnV0dG9uLCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnN0eWxlcy50eXBlVG9nZ2xlQnV0dG9uLFxuICAgICAgICAgICAgICAgICAgICAuLi4oaXNBY3RpdmUgPyBzdHlsZXMudHlwZVRvZ2dsZUJ1dHRvbkFjdGl2ZSA6IHt9KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBhY3Rpb25CdXR0b25zID0gbW9kYWwuY2hhdE1lc3NhZ2VzLnF1ZXJ5U2VsZWN0b3JBbGwoJy5hY3Rpb24tYnV0dG9uJykgYXMgTm9kZUxpc3RPZjxBY3Rpb25CdXR0b24+O1xuICAgICAgICBhY3Rpb25CdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgICAgICAgIGlmIChsb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmRpc2FibGU/LigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBidXR0b24/LmVuYWJsZT8uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHNlbmRNZXNzYWdlID0gYXN5bmMgKHByb3ZpZGVkTWVzc2FnZT86IHN0cmluZywgaGlkZVByb21wdD86IGJvb2xlYW4pID0+IHtcbiAgICAgICAgbGV0IG1lc3NhZ2U6IFByb21wdCA9IHByb3ZpZGVkTWVzc2FnZSA/IHByb3ZpZGVkTWVzc2FnZS50cmltKCkgOiBtb2RhbC5tZXNzYWdlSW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgICBpZiAoIW1lc3NhZ2UgfHwgbW9kYWwuaXNMb2FkaW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzZXRMb2FkaW5nU3RhdGUodHJ1ZSk7XG5cbiAgICAgICAgbW9kYWwubWVzc2FnZUlucHV0LnZhbHVlID0gJyc7XG4gICAgICAgIG1vZGFsLmFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcblxuICAgICAgICBpZiAobW9kYWwudXBsb2FkZWRJbWFnZSAmJiBjb25maWcudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICBtZXNzYWdlID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG1vZGFsLnVwbG9hZGVkSW1hZ2UsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlbW92ZVVwbG9hZGVkSW1hZ2UoKTtcblxuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IGhpc3RvcnkuZ2V0TWVzc2FnZXNIaXN0b3J5KCk7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VJZCA9ICd1c2VyLW1zZy0nICsgRGF0ZS5ub3coKSArIChNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwKSk7XG4gICAgICAgIGhpc3RvcnkuYWRkVXNlck1lc3NhZ2UobWVzc2FnZSwgbWVzc2FnZUlkLCBoaWRlUHJvbXB0KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGNvbmZpZy50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgZXhlY3V0b3IubWdyLnByb21wdC5mcmVlVGV4dChcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlOiBjb25maWcubmFtZXNwYWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDogY29uZmlnLmNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHQ6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogY29uZmlnLmZpZWxkIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LnVwZGF0ZUFzc2lzdGFudE1lc3NhZ2UoZGF0YS5pZCwgZGF0YS5jb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwuYWJvcnRDb250cm9sbGVyXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGhpc3RvcnkudXBkYXRlQXNzaXN0YW50TWVzc2FnZShkYXRhLmlkLCBkYXRhLmNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY29uZmlnLnR5cGUgPT09ICdpbWFnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgZXhlY3V0b3IubWdyLnByb21wdC5pbWFnZSh7XG4gICAgICAgICAgICAgICAgICAgIHByb21wdDogbWVzc2FnZSBhcyBzdHJpbmdcbiAgICAgICAgICAgICAgICB9LCBtb2RhbC5hYm9ydENvbnRyb2xsZXIpO1xuXG4gICAgICAgICAgICAgICAgaGlzdG9yeS5hZGRBc3Npc3RhbnRNZXNzYWdlKGRhdGEudXJsLCBkYXRhLmlkLCAnaW1hZ2UnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbW9kYWwuYWJvcnRDb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnIubmFtZSA9PT0gXCJBYm9ydEVycm9yXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGFkZEVycm9yTWVzc2FnZShlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhZGRFcnJvck1lc3NhZ2UoJ1Vua25vd24gZXJyb3InKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldExvYWRpbmdTdGF0ZShmYWxzZSk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3dpdGNoVHlwZSA9ICh0eXBlOiBNb2RhbFR5cGUpID0+IHtcbiAgICAgICAgY29uZmlnLnR5cGUgPSB0eXBlO1xuXG4gICAgICAgIGhpc3RvcnkgPSBjaGF0SGlzdG9yeS5pbml0KFxuICAgICAgICAgICAgYCR7Y29uZmlnLmtleX0vJHtjb25maWcudHlwZX1gLFxuICAgICAgICAgICAgKG1zZykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXJNZXNzYWdlKG1zZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgd2hpbGUgKG1vZGFsLmNoYXRNZXNzYWdlcy5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICBtb2RhbC5jaGF0TWVzc2FnZXMucmVtb3ZlQ2hpbGQobW9kYWwuY2hhdE1lc3NhZ2VzLmZpcnN0Q2hpbGQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbW9kYWwuY2hhdE1lc3NhZ2VzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gaGlzdG9yeS5nZXRNZXNzYWdlcygpLmZpbHRlcigobSkgPT4gIW0uaGlkZGVuKTtcbiAgICAgICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG1vZGFsLmNoYXRNZXNzYWdlcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIG1lc3NhZ2VzLmZvckVhY2goKG1zZykgPT4ge1xuICAgICAgICAgICAgICAgIHJlbmRlck1lc3NhZ2UobXNnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGhpc3RvcnkgPSBjaGF0SGlzdG9yeS5pbml0KFxuICAgICAgICBgJHtjb25maWcua2V5fS8ke2NvbmZpZy50eXBlfWAsXG4gICAgICAgIChtc2cpID0+IHtcbiAgICAgICAgICAgIHJldHVybiByZW5kZXJNZXNzYWdlKG1zZyk7XG4gICAgICAgIH1cbiAgICApO1xuXG4gICAgY29uc3QgbW9kYWwgPSBidWlsZE1vZGFsKCk7XG5cbiAgICBtb2RhbC5hcGkgPSB7XG4gICAgICAgIHNlbmRNZXNzYWdlLFxuICAgICAgICBjbG9zZU1vZGFsLFxuICAgIH1cblxuICAgIG9wZW5Nb2RhbCgpO1xuICAgIG1vZGFsRXhpc3RzID0gdHJ1ZTtcblxuICAgIHJldHVybiBtb2RhbDtcbn1cbiIsImltcG9ydCB7Y3JlYXRlRWxlbWVudCwgbmxUb0JyfSBmcm9tIFwiLi4vdXRpbHNcIjtcbmltcG9ydCB0eXBlIHtNb2RhbH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IHR5cGUgSWZyYW1lID0gSFRNTElGcmFtZUVsZW1lbnQgJiB7XG4gICAgc3luY0hlaWdodDogKCkgPT4gdm9pZDtcbiAgICBzeW5jQ29udGVudDogKGNvbnRlbnQ6IHN0cmluZykgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNvbnRlbnRJZnJhbWUgPSAocHJvdmlkZWRDb250ZW50OiBzdHJpbmcsIG1vZGFsOiBNb2RhbCwgY3VzdG9tQ1NTOiBzdHJpbmdbXSA9IFtdKSA9PiB7XG4gICAgY29uc3QgY29udGVudCA9IG5sVG9Ccihwcm92aWRlZENvbnRlbnQpO1xuICAgIGxldCBpc0xvYWRlZCA9IGZhbHNlO1xuICAgIGxldCBwZW5kaW5nQ29udGVudDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdCBpZnJhbWUgPSBjcmVhdGVFbGVtZW50KCdpZnJhbWUnLCB7XG4gICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgIGJvcmRlcjogJ25vbmUnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZScsXG4gICAgICAgIG1heFdpZHRoOiAnMTAwJScsXG4gICAgICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnXG4gICAgfSkgYXMgSWZyYW1lO1xuXG4gICAgY29uc3QgZ2V0SWZyYW1lRG9jdW1lbnQgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBpZnJhbWUuY29udGVudERvY3VtZW50IHx8IGlmcmFtZS5jb250ZW50V2luZG93Py5kb2N1bWVudDtcbiAgICB9XG5cbiAgICBjb25zdCBjcmVhdGVTdHlsZVNoZWV0ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgaHRtbCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYm9keSB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93LXg6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICoge1xuICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJlIHtcbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gICAgICAgICAgICAgICAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93LXdyYXA6IGJyZWFrLXdvcmQ7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY3ZmE7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGltZyB7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIGhlaWdodDogYXV0bztcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvZGUge1xuICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbiAgICAgICAgICAgICAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93LXg6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YWJsZSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93LXg6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGl2IHtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDtcbiAgICAgICAgICAgICAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XG4gICAgICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHAge1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMCAwIDAuNWVtIDA7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaDEsIGgyLCBoMywgaDQsIGg1LCBoNiB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwIDAgMC4xZW0gMDtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG4gICAgICAgIGA7XG4gICAgfVxuXG4gICAgY29uc3QgY3JlYXRlSWZyYW1lQ29udGVudCA9IChjb250ZW50OiBzdHJpbmcpID0+IHtcbiAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgPGh0bWw+XG4gICAgICAgIDxoZWFkPlxuICAgICAgICAgICAgPHN0eWxlPiR7Y3JlYXRlU3R5bGVTaGVldCgpfTwvc3R5bGU+XG4gICAgICAgICAgICAke2N1c3RvbUNTUy5tYXAoY3NzID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiB0eXBlPVwidGV4dC9jc3NcIiBocmVmPVwiJHtjc3N9XCIgLz5gO1xuICAgICAgICAgICAgfSkuam9pbignJyl9XG4gICAgICAgIDwvaGVhZD5cbiAgICAgICAgPGJvZHkgc3R5bGU9XCJwYWRkaW5nOiAwOyBtYXgtd2lkdGg6IDEwMCU7IHdpZHRoOiAxMDAlOyBib3gtc2l6aW5nOiBib3JkZXItYm94O1wiPiR7Y29udGVudH08L2JvZHk+XG4gICAgICAgIDwvaHRtbD5cbiAgICBgO1xuICAgIH1cblxuICAgIGNvbnN0IHNldHVwSWZyYW1lQ29udGVudCA9IChkb2M6IERvY3VtZW50LCBjb250ZW50OiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2MuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSBjcmVhdGVTdHlsZVNoZWV0KCk7XG4gICAgICAgIGRvYy5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcblxuICAgICAgICBjdXN0b21DU1MuZm9yRWFjaChjc3MgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGluayA9IGRvYy5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XG4gICAgICAgICAgICBsaW5rLnJlbCA9ICdzdHlsZXNoZWV0JztcbiAgICAgICAgICAgIGxpbmsudHlwZSA9ICd0ZXh0L2Nzcyc7XG4gICAgICAgICAgICBsaW5rLmhyZWYgPSBjc3M7XG4gICAgICAgICAgICBkb2MuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZG9jLmJvZHkuaW5uZXJIVE1MID0gY29udGVudDtcbiAgICAgICAgZG9jLmJvZHkuc3R5bGUucGFkZGluZyA9ICcwJztcbiAgICAgICAgZG9jLmJvZHkuc3R5bGUubWF4V2lkdGggPSAnMTAwJSc7XG4gICAgICAgIGRvYy5ib2R5LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBkb2MuYm9keS5zdHlsZS5ib3hTaXppbmcgPSAnYm9yZGVyLWJveCc7XG4gICAgfTtcblxuICAgIGNvbnN0IHVwZGF0ZUNvbnRlbnQgPSAobmV3Q29udGVudDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmICghaXNMb2FkZWQpIHtcbiAgICAgICAgICAgIHBlbmRpbmdDb250ZW50ID0gbmV3Q29udGVudDtcbiAgICAgICAgICAgIGlmcmFtZS5zcmNkb2MgPSBjcmVhdGVJZnJhbWVDb250ZW50KG5ld0NvbnRlbnQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZG9jID0gZ2V0SWZyYW1lRG9jdW1lbnQoKTtcbiAgICAgICAgaWYgKCFkb2MpIHtcbiAgICAgICAgICAgIHBlbmRpbmdDb250ZW50ID0gbmV3Q29udGVudDtcbiAgICAgICAgICAgIGlmcmFtZS5zcmNkb2MgPSBjcmVhdGVJZnJhbWVDb250ZW50KG5ld0NvbnRlbnQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRvYy5oZWFkLnF1ZXJ5U2VsZWN0b3IoJ3N0eWxlJykpIHtcbiAgICAgICAgICAgIGRvYy5ib2R5LmlubmVySFRNTCA9IG5ld0NvbnRlbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXR1cElmcmFtZUNvbnRlbnQoZG9jLCBuZXdDb250ZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmcmFtZS5zeW5jSGVpZ2h0KCk7XG4gICAgfTtcblxuICAgIGlmcmFtZS5zeW5jQ29udGVudCA9IChuZXdDb250ZW50OiBzdHJpbmcpID0+IHtcbiAgICAgICAgdXBkYXRlQ29udGVudChuZXdDb250ZW50KTtcbiAgICB9O1xuXG4gICAgaWZyYW1lLnN5bmNIZWlnaHQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBpZnJhbWUuY29udGVudFdpbmRvdz8uZG9jdW1lbnQuYm9keTtcbiAgICAgICAgaWYgKCFib2R5KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbGVtZW50cyA9IGJvZHkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJyonKTtcbiAgICAgICAgbGV0IG1heEhlaWdodCA9IGJvZHkub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50c1tpXSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IGJvdHRvbSA9IGVsZW1lbnQub2Zmc2V0VG9wICsgZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICBtYXhIZWlnaHQgPSBNYXRoLm1heChtYXhIZWlnaHQsIGJvdHRvbSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZnJhbWUuc3R5bGUuaGVpZ2h0ID0gKG1heEhlaWdodCArIDUpICsgJ3B4JztcbiAgICAgICAgYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuXG4gICAgICAgIG1vZGFsLmNoYXRNZXNzYWdlcy5zY3JvbGxUb3AgPSBtb2RhbC5jaGF0TWVzc2FnZXMuc2Nyb2xsSGVpZ2h0O1xuICAgIH1cblxuICAgIGlmcmFtZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgIGlzTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHBlbmRpbmdDb250ZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gcGVuZGluZ0NvbnRlbnQ7XG4gICAgICAgICAgICBwZW5kaW5nQ29udGVudCA9IG51bGw7XG4gICAgICAgICAgICBjb25zdCBkb2MgPSBnZXRJZnJhbWVEb2N1bWVudCgpO1xuICAgICAgICAgICAgaWYgKGRvYykge1xuICAgICAgICAgICAgICAgIHNldHVwSWZyYW1lQ29udGVudChkb2MsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGlmcmFtZS5zeW5jSGVpZ2h0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWZyYW1lLnN5bmNIZWlnaHQoKTtcbiAgICB9O1xuXG4gICAgaWZyYW1lLnNyY2RvYyA9IGNyZWF0ZUlmcmFtZUNvbnRlbnQoY29udGVudCk7XG5cbiAgICByZXR1cm4gaWZyYW1lO1xufVxuIiwidHlwZSBUZXh0YXJlYU92ZXJsYXlPcHRpb25zID0ge1xuICAgIGluZGljYXRvclR5cGU/OiAnc3Bpbm5lcicgfCAnZG90cyc7XG4gICAgb3ZlcmxheUNvbG9yPzogc3RyaW5nO1xuICAgIGluZGljYXRvckNvbG9yPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgY3JlYXRlTG9hZGluZ092ZXJsYXkgPSAoZWxlbWVudDogSFRNTEVsZW1lbnQsIG9wdGlvbnM6IFRleHRhcmVhT3ZlcmxheU9wdGlvbnMgPSB7fSkgPT4ge1xuICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgaW5kaWNhdG9yVHlwZTogb3B0aW9ucy5pbmRpY2F0b3JUeXBlIHx8ICdzcGlubmVyJyxcbiAgICAgICAgb3ZlcmxheUNvbG9yOiBvcHRpb25zLm92ZXJsYXlDb2xvciB8fCAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjcpJyxcbiAgICAgICAgaW5kaWNhdG9yQ29sb3I6IG9wdGlvbnMuaW5kaWNhdG9yQ29sb3IgfHwgJyMzNDk4ZGInXG4gICAgfTtcblxuICAgIGNvbnN0IG92ZXJsYXk6IEhUTUxEaXZFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgaW5kaWNhdG9yOiBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgY29uc3QgdGV4dGFyZWFTdHlsZXM6IENTU1N0eWxlRGVjbGFyYXRpb24gPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICBjb25zdCB0ZXh0YXJlYVJlY3Q6IERPTVJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgaWYgKCFvcHRpb25zLmluZGljYXRvckNvbG9yKSB7XG4gICAgICAgIGNvbmZpZy5pbmRpY2F0b3JUeXBlID0gdGV4dGFyZWFSZWN0LmhlaWdodCA8PSA1MCA/ICdkb3RzJyA6ICdzcGlubmVyJztcbiAgICB9XG5cbiAgICBvdmVybGF5LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBvdmVybGF5LnN0eWxlLnRvcCA9ICcwJztcbiAgICBvdmVybGF5LnN0eWxlLmxlZnQgPSAnMCc7XG4gICAgb3ZlcmxheS5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICBvdmVybGF5LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICBvdmVybGF5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbmZpZy5vdmVybGF5Q29sb3I7XG4gICAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIG92ZXJsYXkuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJztcbiAgICBvdmVybGF5LnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcbiAgICBvdmVybGF5LnN0eWxlLnpJbmRleCA9ICcxMDAwMCc7XG4gICAgb3ZlcmxheS5zdHlsZS5ib3JkZXJSYWRpdXMgPSB0ZXh0YXJlYVN0eWxlcy5ib3JkZXJSYWRpdXM7XG5cbiAgICBsZXQgc3R5bGVUZXh0ID0gJyc7XG5cbiAgICBpZiAoY29uZmlnLmluZGljYXRvclR5cGUgPT09ICdzcGlubmVyJykge1xuICAgICAgICAvLyBBcHBseSBzdHlsZXMgdG8gdGhlIHNwaW5uZXJcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmJvcmRlciA9IGA0cHggc29saWQgI2YzZjNmM2A7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5ib3JkZXJUb3AgPSBgNHB4IHNvbGlkICR7Y29uZmlnLmluZGljYXRvckNvbG9yfWA7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNTAlJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLndpZHRoID0gJzMwcHgnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuaGVpZ2h0ID0gJzMwcHgnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYW5pbWF0aW9uID0gJ3RleHRhcmVhT3ZlcmxheVNwaW4gMXMgbGluZWFyIGluZmluaXRlJztcblxuICAgICAgICAvLyBBZGQgc3Bpbm5lciBhbmltYXRpb25cbiAgICAgICAgc3R5bGVUZXh0ID0gYFxuICAgICAgQGtleWZyYW1lcyB0ZXh0YXJlYU92ZXJsYXlTcGluIHtcbiAgICAgICAgMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfVxuICAgICAgICAxMDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsgfVxuICAgICAgfVxuICAgIGA7XG4gICAgfSBlbHNlIGlmIChjb25maWcuaW5kaWNhdG9yVHlwZSA9PT0gJ2RvdHMnKSB7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmhlaWdodCA9ICcyMHB4JztcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZG90ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBkb3Quc3R5bGUud2lkdGggPSAnOHB4JztcbiAgICAgICAgICAgIGRvdC5zdHlsZS5oZWlnaHQgPSAnOHB4JztcbiAgICAgICAgICAgIGRvdC5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNTAlJztcbiAgICAgICAgICAgIGRvdC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb25maWcuaW5kaWNhdG9yQ29sb3I7XG4gICAgICAgICAgICBkb3Quc3R5bGUubWFyZ2luID0gJzAgNHB4JztcbiAgICAgICAgICAgIGRvdC5zdHlsZS5hbmltYXRpb24gPSBgdGV4dGFyZWFPdmVybGF5RG90UHVsc2UgMS40cyBpbmZpbml0ZSBlYXNlLWluLW91dGA7XG4gICAgICAgICAgICBkb3Quc3R5bGUuYW5pbWF0aW9uRGVsYXkgPSBgJHtpICogMC4yfXNgO1xuICAgICAgICAgICAgaW5kaWNhdG9yLmFwcGVuZENoaWxkKGRvdCk7XG4gICAgICAgIH1cblxuICAgICAgICBzdHlsZVRleHQgPSBgXG4gICAgICBAa2V5ZnJhbWVzIHRleHRhcmVhT3ZlcmxheURvdFB1bHNlIHtcbiAgICAgICAgMCUsIDgwJSwgMTAwJSB7IHRyYW5zZm9ybTogc2NhbGUoMCk7IG9wYWNpdHk6IDAuNTsgfVxuICAgICAgICA0MCUgeyB0cmFuc2Zvcm06IHNjYWxlKDEpOyBvcGFjaXR5OiAxOyB9XG4gICAgICB9XG4gICAgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzdHlsZVNoZWV0OiBIVE1MU3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZVNoZWV0LnRleHRDb250ZW50ID0gc3R5bGVUZXh0O1xuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVTaGVldCk7XG5cbiAgICBvdmVybGF5LmFwcGVuZENoaWxkKGluZGljYXRvcik7XG5cbiAgICBjb25zdCBwYXJlbnRTdHlsZXM6IENTU1N0eWxlRGVjbGFyYXRpb24gPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LnBhcmVudEVsZW1lbnQgYXMgRWxlbWVudCk7XG4gICAgbGV0IHdyYXBwZXI6IEhUTUxFbGVtZW50O1xuXG4gICAgaWYgKFsncmVsYXRpdmUnLCAnYWJzb2x1dGUnLCAnZml4ZWQnXS5pbmRleE9mKHBhcmVudFN0eWxlcy5wb3NpdGlvbikgPT09IC0xKSB7XG4gICAgICAgIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgd3JhcHBlci5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgIHdyYXBwZXIuc3R5bGUud2lkdGggPSBgJHt0ZXh0YXJlYVJlY3Qud2lkdGh9cHhgO1xuICAgICAgICB3cmFwcGVyLnN0eWxlLmhlaWdodCA9IGAke3RleHRhcmVhUmVjdC5oZWlnaHR9cHhgO1xuICAgICAgICB3cmFwcGVyLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcblxuICAgICAgICBlbGVtZW50LnBhcmVudE5vZGU/Lmluc2VydEJlZm9yZSh3cmFwcGVyLCBlbGVtZW50KTtcbiAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB3cmFwcGVyID0gZWxlbWVudC5wYXJlbnRFbGVtZW50IGFzIEhUTUxFbGVtZW50O1xuICAgIH1cblxuICAgIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKG92ZXJsYXkpO1xuXG4gICAgY29uc3QgdXBkYXRlZFJlY3Q6IERPTVJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGlmICh3cmFwcGVyICE9PSBlbGVtZW50LnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgd3JhcHBlci5zdHlsZS53aWR0aCA9IGAke3VwZGF0ZWRSZWN0LndpZHRofXB4YDtcbiAgICAgICAgd3JhcHBlci5zdHlsZS5oZWlnaHQgPSBgJHt1cGRhdGVkUmVjdC5oZWlnaHR9cHhgO1xuICAgIH1cblxuICAgIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblxuICAgIHJldHVybiAoKTogdm9pZCA9PiB7XG4gICAgICAgIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG5cbiAgICAgICAgb3ZlcmxheS5yZW1vdmUoKTtcbiAgICAgICAgc3R5bGVTaGVldC5yZW1vdmUoKTtcbiAgICAgICAgaWYgKHdyYXBwZXIgIT09IGVsZW1lbnQucGFyZW50RWxlbWVudCkge1xuICAgICAgICAgICAgd3JhcHBlci5wYXJlbnROb2RlPy5pbnNlcnRCZWZvcmUoZWxlbWVudCwgd3JhcHBlcik7XG4gICAgICAgICAgICB3cmFwcGVyLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbn1cbiIsImltcG9ydCB7Y3JlYXRlTW9kYWx9IGZyb20gXCIuL2xvY2FsQ2hhdFwiO1xuaW1wb3J0IHsgY3JlYXRlTG9hZGluZ092ZXJsYXkgfSBmcm9tICcuL292ZXJsYXknXG5pbXBvcnQgdHlwZSB7TW9kYWxDb25maWd9IGZyb20gXCIuL2xvY2FsQ2hhdC90eXBlc1wiO1xuXG5cbmV4cG9ydCBjb25zdCB1aSA9IHtcbiAgICBjcmVhdGVMb2FkaW5nT3ZlcmxheSxcbiAgICBsb2NhbENoYXQ6IChjb25maWc6IE1vZGFsQ29uZmlnKSA9PiB7XG4gICAgICAgIHJldHVybiBjcmVhdGVNb2RhbChjb25maWcpO1xuICAgIH1cbn07XG4iLCJpbXBvcnQge2V4ZWN1dG9yfSBmcm9tIFwiLi9leGVjdXRvclwiO1xuaW1wb3J0IHsgaGlzdG9yeX0gZnJvbSAnLi9oaXN0b3J5JztcbmltcG9ydCB7dWl9IGZyb20gXCIuL3VpXCI7XG5pbXBvcnQge2NyZWF0ZUxvYWRpbmdPdmVybGF5fSBmcm9tIFwiLi91aS9vdmVybGF5XCI7XG5pbXBvcnQgdHlwZSB7RGF0YU91dHB1dH0gZnJvbSAnLi9oaXN0b3J5JztcbmltcG9ydCB0eXBlIHtNZXNzYWdlfSBmcm9tIFwiLi9jaGF0SGlzdG9yeVwiO1xuXG50eXBlIERhdGFDb250ZXh0ID0ge2VsczogeyBmaWVsZDogYW55LCB3cmFwcGVyOiBIaXN0b3J5RWxlbWVudCB9W119O1xudHlwZSBIaXN0b3J5QnV0dG9uID0gSFRNTEJ1dHRvbkVsZW1lbnQgJiB7XG4gICAgZW5hYmxlOiAoKSA9PiB2b2lkO1xuICAgIGRpc2FibGU6ICgpID0+IHZvaWQ7XG59O1xudHlwZSBIaXN0b3J5SW5mbyA9IEhUTUxFbGVtZW50ICYge1xuICAgIHVwZGF0ZTogKHNob3dpbmc6IG51bWJlciwgdG90YWw6IG51bWJlcikgPT4gdm9pZDtcbn07XG50eXBlIEhpc3RvcnlOYXYgPSBIVE1MRWxlbWVudCAmIHtcbiAgICBzaG93OiAoKSA9PiB2b2lkO1xuICAgIGhpZGU6ICgpID0+IHZvaWQ7XG4gICAgcHJldkJ1dHRvbjogSGlzdG9yeUJ1dHRvbjtcbiAgICBuZXh0QnV0dG9uOiBIaXN0b3J5QnV0dG9uO1xuICAgIGluZm86IEhpc3RvcnlJbmZvO1xufTtcbnR5cGUgSGlzdG9yeUVsZW1lbnQgPSBIVE1MRWxlbWVudCAmIHsgaGlzdG9yeU5hdjogSGlzdG9yeU5hdiB9XG5cbmNvbnN0IGhpc3RvcnlOYXZTeW5jID0gKGRhdGE6IERhdGFPdXRwdXQ8RGF0YUNvbnRleHQ+LCBub1N0b3JlPzogYm9vbGVhbikgPT4ge1xuICAgIGRhdGEuY29udGV4dC5lbHMuZm9yRWFjaCgoe3dyYXBwZXIsIGZpZWxkfSkgPT4ge1xuICAgICAgICBjb25zdCBwcmV2VmFsdWUgPSBmaWVsZC5nZXRWYWx1ZSgpO1xuICAgICAgICBmaWVsZC5zZXRWYWx1ZShkYXRhLnZhbHVlKTtcbiAgICAgICAgZmllbGQuZmlyZUV2ZW50KCdjaGFuZ2UnLCBmaWVsZCwgZGF0YS52YWx1ZSwgcHJldlZhbHVlKTtcblxuICAgICAgICBpZiAobm9TdG9yZSkge1xuICAgICAgICAgICAgZmllbGQuZWwuZG9tLnNjcm9sbFRvcCA9IGZpZWxkLmVsLmRvbS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YS50b3RhbCA+IDApIHtcbiAgICAgICAgICAgIHdyYXBwZXIuaGlzdG9yeU5hdi5zaG93KCk7XG4gICAgICAgIH1cblxuICAgICAgICB3cmFwcGVyLmhpc3RvcnlOYXYuaW5mby51cGRhdGUoZGF0YS5jdXJyZW50LCBkYXRhLnRvdGFsKTtcblxuICAgICAgICBpZiAoZGF0YS5wcmV2U3RhdHVzKSB7XG4gICAgICAgICAgICB3cmFwcGVyLmhpc3RvcnlOYXYucHJldkJ1dHRvbi5lbmFibGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdyYXBwZXIuaGlzdG9yeU5hdi5wcmV2QnV0dG9uLmRpc2FibGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRhLm5leHRTdGF0dXMpIHtcbiAgICAgICAgICAgIHdyYXBwZXIuaGlzdG9yeU5hdi5uZXh0QnV0dG9uLmVuYWJsZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd3JhcHBlci5oaXN0b3J5TmF2Lm5leHRCdXR0b24uZGlzYWJsZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5jb25zdCBjcmVhdGVXYW5kRWwgPSAoKSA9PiB7XG4gICAgY29uc3Qgd2FuZEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgd2FuZEVsLmNsYXNzTmFtZSA9ICdtb2RhaS1nZW5lcmF0ZSc7XG4gICAgd2FuZEVsLmlubmVyVGV4dCA9ICfinKYnXG4gICAgd2FuZEVsLnR5cGUgPSAnYnV0dG9uJ1xuICAgIHdhbmRFbC50aXRsZSA9ICdHZW5lcmF0ZSB1c2luZyBBSSdcblxuICAgIHJldHVybiB3YW5kRWw7XG59XG5cbmNvbnN0IGNyZWF0ZUhpc3RvcnlOYXYgPSAoY2FjaGU6IFJldHVyblR5cGU8dHlwZW9mIGhpc3RvcnkuaW5pdDxEYXRhQ29udGV4dD4+KSA9PiB7XG4gICAgY29uc3QgcHJldkJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpIGFzIEhpc3RvcnlCdXR0b247XG4gICAgcHJldkJ1dHRvbi50eXBlID0gJ2J1dHRvbic7XG4gICAgcHJldkJ1dHRvbi50aXRsZSA9ICdQcmV2aW91cyBWZXJzaW9uJztcbiAgICBwcmV2QnV0dG9uLmNsYXNzTmFtZSA9ICdtb2RhaS1oaXN0b3J5X3ByZXYnO1xuICAgIHByZXZCdXR0b24uZGlzYWJsZSA9ICgpID0+IHtcbiAgICAgICAgcHJldkJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuICAgIHByZXZCdXR0b24uZW5hYmxlID0gKCkgPT4ge1xuICAgICAgICBwcmV2QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICAgIHByZXZCdXR0b24uaW5uZXJIVE1MID0gJ3ByZXYnO1xuICAgIHByZXZCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNhY2hlLnByZXYoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IG5leHRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKSBhcyBIaXN0b3J5QnV0dG9uO1xuICAgIG5leHRCdXR0b24udHlwZSA9ICdidXR0b24nO1xuICAgIG5leHRCdXR0b24udGl0bGUgPSAnTmV4dCBWZXJzaW9uJztcbiAgICBuZXh0QnV0dG9uLmNsYXNzTmFtZSA9ICdtb2RhaS1oaXN0b3J5X25leHQnO1xuICAgIG5leHRCdXR0b24uZGlzYWJsZSA9ICgpID0+IHtcbiAgICAgICAgbmV4dEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuICAgIG5leHRCdXR0b24uZW5hYmxlID0gKCkgPT4ge1xuICAgICAgICBuZXh0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICAgIG5leHRCdXR0b24uaW5uZXJIVE1MID0gJ25leHQnO1xuICAgIG5leHRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNhY2hlLm5leHQoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGluZm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJykgYXMgSGlzdG9yeUluZm87XG4gICAgaW5mby51cGRhdGUgPSAoc2hvd2luZywgdG90YWwpID0+IHtcbiAgICAgICAgaW5mby5pbm5lclRleHQgPSBgJHtzaG93aW5nfS8ke3RvdGFsfWA7XG4gICAgfVxuICAgIGluZm8uaW5uZXJUZXh0ID0gJyc7XG5cbiAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpIGFzIEhpc3RvcnlOYXY7XG4gICAgd3JhcHBlci5zaG93ID0gKCkgPT4ge1xuICAgICAgICB3cmFwcGVyLnN0eWxlLmRpc3BsYXkgPSAnaW5pdGlhbCc7XG4gICAgfVxuXG4gICAgd3JhcHBlci5oaWRlID0gKCkgPT4ge1xuICAgICAgICB3cmFwcGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxuXG4gICAgd3JhcHBlci5wcmV2QnV0dG9uID0gcHJldkJ1dHRvbjtcbiAgICB3cmFwcGVyLm5leHRCdXR0b24gPSBuZXh0QnV0dG9uO1xuICAgIHdyYXBwZXIuaW5mbyA9IGluZm87XG5cbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHByZXZCdXR0b24pO1xuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQobmV4dEJ1dHRvbik7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChpbmZvKTtcblxuICAgIHdyYXBwZXIuaGlkZSgpO1xuICAgIHByZXZCdXR0b24uZGlzYWJsZSgpO1xuICAgIG5leHRCdXR0b24uZGlzYWJsZSgpO1xuXG4gICAgcmV0dXJuIHdyYXBwZXI7XG59XG5cbmNvbnN0IGNyZWF0ZUZyZWVUZXh0UHJvbXB0ID0gKGZpZWxkTmFtZTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3Qgd2FuZEVsID0gY3JlYXRlV2FuZEVsKCk7XG4gICAgd2FuZEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB1aS5sb2NhbENoYXQoe1xuICAgICAgICAgICAga2V5OiBmaWVsZE5hbWUsXG4gICAgICAgICAgICBmaWVsZDogZmllbGROYW1lLFxuICAgICAgICAgICAgb3ZlcmxheTogZmFsc2UsXG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICBhdmFpbGFibGVUeXBlczogWyd0ZXh0JywgJ2ltYWdlJ10sXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICByZXNvdXJjZTogTU9EeC5yZXF1ZXN0LmlkLFxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiB3YW5kRWw7XG59XG5cbmNvbnN0IGNyZWF0ZUZvcmNlZFRleHRQcm9tcHQgPSAoZmllbGQ6IGFueSwgZmllbGROYW1lOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBhaVdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJykgYXMgSGlzdG9yeUVsZW1lbnQ7XG5cbiAgICBjb25zdCB3YW5kRWwgPSBjcmVhdGVXYW5kRWwoKTtcbiAgICB3YW5kRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGRvbmUgPSBjcmVhdGVMb2FkaW5nT3ZlcmxheShmaWVsZC5lbC5kb20pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBleGVjdXRvci5tZ3IucHJvbXB0LnRleHQoe1xuICAgICAgICAgICAgICAgIC8vQHRzLWV4cGVjdC1lcnJvciBFeHRcbiAgICAgICAgICAgICAgICBpZDogTU9EeC5yZXF1ZXN0LmlkLFxuICAgICAgICAgICAgICAgIGZpZWxkOiBmaWVsZE5hbWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2FjaGUuaW5zZXJ0KHJlc3VsdC5jb250ZW50KTtcbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICAvL0B0cy1leHBlY3QtZXJyb3IgRXh0XG4gICAgICAgICAgICBFeHQuTXNnLmFsZXJ0KFwiRmFpbGVkXCIsIF8oJ21vZGFpLmNtcC5mYWlsZWRfdHJ5X2FnYWluJywge1wibXNnXCI6IGVyci5tZXNzYWdlfSkpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBhaVdyYXBwZXIuYXBwZW5kQ2hpbGQod2FuZEVsKTtcblxuICAgIGNvbnN0IGNhY2hlID0gaGlzdG9yeS5pbml0KFxuICAgICAgICBmaWVsZE5hbWUsXG4gICAgICAgIGhpc3RvcnlOYXZTeW5jLFxuICAgICAgICBmaWVsZC5nZXRWYWx1ZSgpLFxuICAgICAgICB7fSBhcyBEYXRhQ29udGV4dFxuICAgICk7XG5cbiAgICBpZiAoIWNhY2hlLmNhY2hlZEl0ZW0uY29udGV4dC5lbHMpIHtcbiAgICAgICAgY2FjaGUuY2FjaGVkSXRlbS5jb250ZXh0LmVscyA9IFtdO1xuICAgIH1cbiAgICBjYWNoZS5jYWNoZWRJdGVtLmNvbnRleHQuZWxzLnB1c2goe2ZpZWxkLCB3cmFwcGVyOiBhaVdyYXBwZXJ9KTtcblxuICAgIGNvbnN0IGhpc3RvcnlOYXYgPSBjcmVhdGVIaXN0b3J5TmF2KGNhY2hlKTtcblxuICAgIGFpV3JhcHBlci5hcHBlbmRDaGlsZChoaXN0b3J5TmF2KTtcbiAgICBhaVdyYXBwZXIuaGlzdG9yeU5hdiA9IGhpc3RvcnlOYXY7XG5cbiAgICByZXR1cm4gYWlXcmFwcGVyO1xufVxuXG5jb25zdCBjcmVhdGVJbWFnZVByb21wdCA9IChtZWRpYVNvdXJjZTogc3RyaW5nLCBmaWVsZE5hbWU6IHN0cmluZywgb25TdWNjZXNzOiAobXNnOiBNZXNzYWdlKSA9PiB2b2lkKSA9PiB7XG4gICAgY29uc3QgaW1hZ2VXYW5kID0gY3JlYXRlV2FuZEVsKCk7XG4gICAgaW1hZ2VXYW5kLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB1aS5sb2NhbENoYXQoe1xuICAgICAgICAgICAga2V5OiBmaWVsZE5hbWUsXG4gICAgICAgICAgICBmaWVsZDogZmllbGROYW1lLFxuICAgICAgICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHJlc291cmNlOiBNT0R4LnJlcXVlc3QuaWQsXG4gICAgICAgICAgICBpbWFnZToge1xuICAgICAgICAgICAgICAgIG1lZGlhU291cmNlOiBwYXJzZUludChtZWRpYVNvdXJjZSkgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGltYWdlQWN0aW9uczoge1xuICAgICAgICAgICAgICAgIGNvcHk6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGluc2VydDogKG1zZywgbW9kYWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgb25TdWNjZXNzKG1zZyk7XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLmFwaS5jbG9zZU1vZGFsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBpbWFnZVdhbmQ7XG59XG5cbmNvbnN0IGF0dGFjaEZpZWxkID0gKGNtcDogc3RyaW5nLCBmaWVsZE5hbWU6IHN0cmluZykgPT4ge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgRXh0XG4gICAgY29uc3QgZmllbGQgPSBFeHQuZ2V0Q21wKGNtcCk7XG4gICAgaWYgKCFmaWVsZCkgcmV0dXJuO1xuXG4gICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSBhcyBIaXN0b3J5RWxlbWVudDtcblxuICAgIGNvbnN0IHdhbmRFbCA9IGNyZWF0ZVdhbmRFbCgpO1xuICAgIHdhbmRFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgZG9uZSA9IGNyZWF0ZUxvYWRpbmdPdmVybGF5KGZpZWxkLmVsLmRvbSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWN1dG9yLm1nci5wcm9tcHQudGV4dCh7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBNT0R4XG4gICAgICAgICAgICAgICAgaWQ6IE1PRHgucmVxdWVzdC5pZCxcbiAgICAgICAgICAgICAgICBmaWVsZDogZmllbGROYW1lXG4gICAgICAgICAgICB9LCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGNhY2hlLmluc2VydChkYXRhLmNvbnRlbnQsIHRydWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjYWNoZS5pbnNlcnQocmVzdWx0LmNvbnRlbnQpO1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgRXh0XG4gICAgICAgICAgICBFeHQuTXNnLmFsZXJ0KFwiRmFpbGVkXCIsIF8oJ21vZGFpLmNtcC5mYWlsZWRfdHJ5X2FnYWluJywge1wibXNnXCI6IGVyci5tZXNzYWdlfSkpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHdhbmRFbCk7XG5cbiAgICBjb25zdCBjYWNoZSA9IGhpc3RvcnkuaW5pdDxEYXRhQ29udGV4dD4oXG4gICAgICAgIGZpZWxkTmFtZSxcbiAgICAgICAgaGlzdG9yeU5hdlN5bmMsXG4gICAgICAgIGZpZWxkLmdldFZhbHVlKCksXG4gICAgICAgIHt9IGFzIERhdGFDb250ZXh0LFxuICAgICk7XG5cbiAgICBpZiAoIWNhY2hlLmNhY2hlZEl0ZW0uY29udGV4dC5lbHMpIHtcbiAgICAgICAgY2FjaGUuY2FjaGVkSXRlbS5jb250ZXh0LmVscyA9IFtdO1xuICAgIH1cbiAgICBjYWNoZS5jYWNoZWRJdGVtLmNvbnRleHQuZWxzLnB1c2goe2ZpZWxkLCB3cmFwcGVyfSk7XG5cbiAgICBjb25zdCBoaXN0b3J5TmF2ID0gY3JlYXRlSGlzdG9yeU5hdihjYWNoZSk7XG5cbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGhpc3RvcnlOYXYpO1xuICAgIHdyYXBwZXIuaGlzdG9yeU5hdiA9IGhpc3RvcnlOYXY7XG5cbiAgICBmaWVsZC5sYWJlbC5hcHBlbmRDaGlsZCh3cmFwcGVyKTtcbn1cblxuY29uc3QgYXR0YWNoSW1hZ2VQbHVzID0gKGltZ1BsdXNQYW5lbDogRWxlbWVudCwgZmllbGROYW1lOiBzdHJpbmcpID0+IHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIEV4dFxuICAgIGNvbnN0IGltYWdlUGx1cyA9IEV4dC5nZXRDbXAoaW1nUGx1c1BhbmVsLmZpcnN0RWxlbWVudENoaWxkPy5pZCk7XG5cbiAgICBjb25zdCBpbWFnZVdhbmQgPSBjcmVhdGVJbWFnZVByb21wdChcbiAgICAgICAgaW1hZ2VQbHVzLmltYWdlQnJvd3Nlci5zb3VyY2UsXG4gICAgICAgIGZpZWxkTmFtZSxcbiAgICAgICAgZnVuY3Rpb24obXNnKSB7XG4gICAgICAgICAgICBpbWFnZVBsdXMuaW1hZ2VCcm93c2VyLnNldFZhbHVlKG1zZy5jdHgudXJsKTtcbiAgICAgICAgICAgIGltYWdlUGx1cy5vbkltYWdlQ2hhbmdlKG1zZy5jdHgudXJsKVxuICAgICAgICB9XG4gICAgKTtcblxuICAgIGNvbnN0IGFsdFRleHRXYW5kID0gY3JlYXRlV2FuZEVsKCk7XG4gICAgYWx0VGV4dFdhbmQuc3R5bGUubWFyZ2luVG9wID0gJzZweCc7XG4gICAgYWx0VGV4dFdhbmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGltZ0VsZW1lbnQgPSBpbWFnZVBsdXMuaW1hZ2VQcmV2aWV3LmVsLmRvbTtcblxuICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGlmICghY3R4KSByZXR1cm47XG5cbiAgICAgICAgY2FudmFzLndpZHRoID0gaW1nRWxlbWVudC53aWR0aDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGltZ0VsZW1lbnQuaGVpZ2h0O1xuXG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nRWxlbWVudCwgMCwgMCk7XG5cbiAgICAgICAgY29uc3QgYmFzZTY0RGF0YSA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpO1xuXG4gICAgICAgIGNvbnN0IGRvbmUgPSBjcmVhdGVMb2FkaW5nT3ZlcmxheShpbWFnZVBsdXMuYWx0VGV4dEZpZWxkLml0ZW1zLml0ZW1zWzBdLmVsLmRvbSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWN1dG9yLm1nci5wcm9tcHQudmlzaW9uKHtcbiAgICAgICAgICAgICAgICBpbWFnZTogYmFzZTY0RGF0YSxcbiAgICAgICAgICAgICAgICBmaWVsZDogZmllbGROYW1lXG4gICAgICAgICAgICB9LCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGltYWdlUGx1cy5hbHRUZXh0RmllbGQuaXRlbXMuaXRlbXNbMF0uc2V0VmFsdWUoZGF0YS5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBpbWFnZVBsdXMuYWx0VGV4dEZpZWxkLml0ZW1zLml0ZW1zWzBdLmVsLmRvbS5zY3JvbGxUb3AgPSBpbWFnZVBsdXMuYWx0VGV4dEZpZWxkLml0ZW1zLml0ZW1zWzBdLmVsLmRvbS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgICAgICAgICAgaW1hZ2VQbHVzLmltYWdlLmFsdFRhZyA9IGRhdGEuY29udGVudDtcbiAgICAgICAgICAgICAgICBpbWFnZVBsdXMudXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaW1hZ2VQbHVzLmFsdFRleHRGaWVsZC5pdGVtcy5pdGVtc1swXS5zZXRWYWx1ZShyZXN1bHQuY29udGVudCk7XG4gICAgICAgICAgICBpbWFnZVBsdXMuaW1hZ2UuYWx0VGFnID0gcmVzdWx0LmNvbnRlbnQ7XG4gICAgICAgICAgICBpbWFnZVBsdXMudXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIEV4dFxuICAgICAgICAgICAgRXh0Lk1zZy5hbGVydChcIkZhaWxlZFwiLCBfKCdtb2RhaS5jbXAuZmFpbGVkX3RyeV9hZ2FpbicsIHtcIm1zZ1wiOiBlcnIubWVzc2FnZX0pKTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICBpbWFnZVBsdXMuYWx0VGV4dEZpZWxkLmVsLmRvbS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIGltYWdlUGx1cy5hbHRUZXh0RmllbGQuZWwuZG9tLnN0eWxlLmp1c3RpZnlJdGVtcyA9ICdjZW50ZXInO1xuICAgIGltYWdlUGx1cy5hbHRUZXh0RmllbGQuZWwuZG9tLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcblxuICAgIGltYWdlUGx1cy5lbC5kb20ucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignbGFiZWwnKS5hcHBlbmRDaGlsZChpbWFnZVdhbmQpO1xuICAgIGltYWdlUGx1cy5hbHRUZXh0RmllbGQuZWwuZG9tLmFwcGVuZENoaWxkKGFsdFRleHRXYW5kKTtcbn07XG5cbmNvbnN0IGF0dGFjaENvbnRlbnQgPSAoKSA9PiB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBFeHRcbiAgICBjb25zdCBjbXAgPSBFeHQuZ2V0Q21wKCdtb2R4LXJlc291cmNlLWNvbnRlbnQnKTtcbiAgICBjb25zdCBsYWJlbCA9IGNtcC5lbC5kb20ucXVlcnlTZWxlY3RvcignbGFiZWwnKTtcbiAgICBsYWJlbC5hcHBlbmRDaGlsZChjcmVhdGVGcmVlVGV4dFByb21wdCgncmVzLmNvbnRlbnQnKSk7XG59O1xuXG5jb25zdCBhdHRhY2hUVnMgPSAoKSA9PiB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBFeHRcbiAgICBjb25zdCBmb3JtID0gRXh0LmdldENtcCgnbW9keC1wYW5lbC1yZXNvdXJjZScpLmdldEZvcm0oKTtcbiAgICBmb3IgKGNvbnN0IFt0dklkLCB0dk5hbWVdIG9mIChtb2RBST8udHZzIHx8IFtdKSkge1xuICAgICAgICAvL0B0cy1leHBlY3QtZXJyb3IgRXh0XG4gICAgICAgIGNvbnN0IHdyYXBwZXIgPSBFeHQuZ2V0KGB0diR7dHZJZH0tdHJgKTtcbiAgICAgICAgaWYgKCF3cmFwcGVyKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpZWxkID0gZm9ybS5maW5kRmllbGQoYHR2JHt0dklkfWApO1xuICAgICAgICBjb25zdCBmaWVsZE5hbWUgPSBgdHYuJHt0dk5hbWV9YDtcblxuICAgICAgICBpZiAoIWZpZWxkKSB7XG4gICAgICAgICAgICBjb25zdCBpbWdQbHVzUGFuZWwgPSB3cmFwcGVyLmRvbS5xdWVyeVNlbGVjdG9yKCcuaW1hZ2VwbHVzLXBhbmVsLWlucHV0Jyk7XG4gICAgICAgICAgICBpZiAoaW1nUGx1c1BhbmVsKSB7XG4gICAgICAgICAgICAgICAgYXR0YWNoSW1hZ2VQbHVzKGltZ1BsdXNQYW5lbCwgZmllbGROYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkLnh0eXBlID09PSAndGV4dGZpZWxkJyB8fCBmaWVsZC54dHlwZSA9PT0gJ3RleHRhcmVhJykge1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBNT0R4XG4gICAgICAgICAgICBjb25zdCBwcm9tcHQgPSBNT0R4LmNvbmZpZ1tgbW9kYWkudHYuJHt0dk5hbWV9LnRleHQucHJvbXB0YF07XG5cbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gd3JhcHBlci5kb20ucXVlcnlTZWxlY3RvcignbGFiZWwnKTtcbiAgICAgICAgICAgIGlmICghbGFiZWwpIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKHByb21wdCkge1xuICAgICAgICAgICAgICAgIGxhYmVsLmFwcGVuZENoaWxkKGNyZWF0ZUZvcmNlZFRleHRQcm9tcHQoZmllbGQsIGZpZWxkTmFtZSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsYWJlbC5hcHBlbmRDaGlsZChjcmVhdGVGcmVlVGV4dFByb21wdChmaWVsZE5hbWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWVsZC54dHlwZSA9PT0gJ21vZHgtcGFuZWwtdHYtaW1hZ2UnKSB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZVdhbmQgPSBjcmVhdGVJbWFnZVByb21wdChcbiAgICAgICAgICAgICAgICBmaWVsZC5zb3VyY2UsXG4gICAgICAgICAgICAgICAgZmllbGROYW1lLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKG1zZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXZlbnREYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlVXJsOiBtc2cuY3R4LnVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IG1zZy5jdHgudXJsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5pdGVtcy5pdGVtc1sxXS5maXJlRXZlbnQoJ3NlbGVjdCcsIGV2ZW50RGF0YSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLmZpcmVFdmVudCgnc2VsZWN0JywgZXZlbnREYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IHdyYXBwZXIuZG9tLnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsJyk7XG4gICAgICAgICAgICBpZiAoIWxhYmVsKSByZXR1cm47XG5cbiAgICAgICAgICAgIGxhYmVsLmFwcGVuZENoaWxkKGltYWdlV2FuZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuY29uc3QgYXR0YWNoUmVzb3VyY2VGaWVsZHMgPSAoKSA9PiB7XG4gICAgY29uc3QgZmllbGRzTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7XG4gICAgICAgIHBhZ2V0aXRsZTogWydtb2R4LXJlc291cmNlLXBhZ2V0aXRsZSddLFxuICAgICAgICBsb25ndGl0bGU6IFsnbW9keC1yZXNvdXJjZS1sb25ndGl0bGUnLCAnc2Vvc3VpdGUtbG9uZ3RpdGxlJ10sXG4gICAgICAgIGludHJvdGV4dDogWydtb2R4LXJlc291cmNlLWludHJvdGV4dCddLFxuICAgICAgICBkZXNjcmlwdGlvbjogWydtb2R4LXJlc291cmNlLWRlc2NyaXB0aW9uJywgJ3Nlb3N1aXRlLWRlc2NyaXB0aW9uJ10sXG4gICAgICAgIGNvbnRlbnQ6IFsnbW9keC1yZXNvdXJjZS1jb250ZW50J10sXG4gICAgfTtcblxuICAgIGZvciAoY29uc3QgZmllbGQgb2YgbW9kQUk/LnJlc291cmNlRmllbGRzIHx8IFtdKSB7XG4gICAgICAgIGlmICghZmllbGRzTWFwW2ZpZWxkXSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGQgPT09ICdjb250ZW50Jykge1xuICAgICAgICAgICAgYXR0YWNoQ29udGVudCgpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBmaWVsZHNNYXBbZmllbGRdLmZvckVhY2goKGNtcElkKSA9PiB7XG4gICAgICAgICAgICBhdHRhY2hGaWVsZChjbXBJZCwgYHJlcy4ke2ZpZWxkfWApO1xuICAgICAgICB9KVxuXG4gICAgfVxufVxuXG5cbigoKSA9PiB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIEV4dC5vblJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIEV4dC5kZWZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGF0dGFjaFJlc291cmNlRmllbGRzKCk7XG4gICAgICAgICAgICBhdHRhY2hUVnMoKTtcbiAgICAgICAgfSwgNTAwKTtcbiAgICB9KTtcbn0pKCk7XG4iLCJpbXBvcnQgJy4vcmVzb3VyY2UnO1xuXG5leHBvcnQgY29uc3Qgd2luZG93ID0ge307XG5cbmV4cG9ydCB7IGNoYXRIaXN0b3J5IH0gZnJvbSAnLi9jaGF0SGlzdG9yeSdcbmV4cG9ydCB7IGhpc3RvcnkgfSBmcm9tICcuL2hpc3RvcnknXG5leHBvcnQgeyBleGVjdXRvciB9IGZyb20gJy4vZXhlY3V0b3InXG5leHBvcnQgeyB1aSB9IGZyb20gJy4vdWknXG5cbiJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJzZXJ2aWNlcyIsImJ1ZmZlcmVkIiwiY2hhdGdwdCIsImNvbnRlbnQiLCJkYXRhIiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJFcnJvciIsIl8iLCJpZCIsImltYWdlIiwidXJsIiwiYjY0X2pzb24iLCJEYXRlIiwibm93IiwiTWF0aCIsInJvdW5kIiwicmFuZG9tIiwiY2xhdWRlIiwidGV4dCIsImdlbWluaSIsImNhbmRpZGF0ZXMiLCJwYXJ0cyIsImJhc2U2NCIsInByZWRpY3Rpb25zIiwiYnl0ZXNCYXNlNjRFbmNvZGVkIiwic3RyZWFtIiwibmV3RGF0YSIsImN1cnJlbnREYXRhIiwiY3VycmVudENvbnRlbnQiLCJkZWx0YSIsImVycm9ySGFuZGxlciIsImFzeW5jIiwicmVzIiwib2siLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiaGFuZGxlU3RyZWFtIiwic2VydmljZSIsInBhcnNlciIsIm9uQ2h1bmtTdHJlYW0iLCJzaWduYWwiLCJib2R5IiwicmVhZGVyIiwiZ2V0UmVhZGVyIiwiZGVjb2RlciIsIlRleHREZWNvZGVyIiwiYnVmZmVyIiwiYWJvcnRlZCIsImRvbmUiLCJyZWFkIiwiY2h1bmsiLCJkZWNvZGUiLCJqc29uTGluZXMiLCJ0cmltIiwic3BsaXQiLCJtYXAiLCJsaW5lIiwicmVwbGFjZSIsImZpbHRlciIsInBhcnNlZERhdGEiLCJKU09OIiwicGFyc2UiLCJjb25zb2xlIiwibG9nIiwibmV3bGluZUluZGV4IiwibGFzdE5ld2xpbmVJbmRleCIsImluZGV4T2YiLCJzbGljZSIsInN0YXJ0c1dpdGgiLCJ0eXBlIiwiYWlGZXRjaCIsImFjdGlvbiIsInBhcmFtcyIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJmZXRjaCIsIm1vZEFJIiwiYXBpVVJMIiwibWV0aG9kIiwic3RyaW5naWZ5IiwiaGVhZGVycyIsImRldGFpbCIsInBhcnNlSW50IiwiZGV0YWlscyIsImZvckV4ZWN1dG9yIiwiZXhlY3V0b3JEZXRhaWxzIiwiY2FsbFN0cmVhbVNlcnZpY2UiLCJjYWxsU2VydmljZSIsInNlcnZpY2VFeGVjdXRvciIsImFib3J0IiwiZXhlY3V0b3IiLCJtZ3IiLCJkb3dubG9hZCIsIm1vZHhGZXRjaCIsInByb21wdCIsImZyZWVUZXh0IiwidmlzaW9uIiwidW5kZWZpbmVkIiwiX2NhY2hlIiwiX2Zvcm1hdE91dHB1dCIsImNhY2hlZEl0ZW0iLCJwcmV2U3RhdHVzIiwidmlzaWJsZSIsIm5leHRTdGF0dXMiLCJ2YWx1ZXMiLCJsZW5ndGgiLCJjdXJyZW50IiwidG90YWwiLCJjb250ZXh0IiwiaW5zZXJ0Iiwibm9TdG9yZSIsInB1c2giLCJvdXRwdXQiLCJ0aGlzIiwic3luY1VJIiwibmV4dCIsInByZXYiLCJpbml0IiwiaW5pdFZhbHVlIiwiZ2V0RGF0YSIsImdldEFsbCIsImFwcGx5U3R5bGVzIiwiZWxlbWVudCIsInN0eWxlT2JqIiwiYXNzaWduIiwic3R5bGUiLCJjcmVhdGVFbGVtZW50IiwidGV4dENvbnRlbnQiLCJkb2N1bWVudCIsIm5sVG9CciIsInRlc3QiLCJfbmFtZXNwYWNlIiwiUk9MRVMiLCJhZGRNZXNzYWdlIiwicm9sZSIsImhpZGRlbiIsIm5hbWVzcGFjZSIsIm1zZ09iamVjdCIsImN0eCIsImluZGV4IiwiaGlzdG9yeSIsImlkUmVmIiwiZWwiLCJvbkFkZE1lc3NhZ2UiLCJjaGF0SGlzdG9yeSIsImFkZFVzZXJNZXNzYWdlIiwiYWRkQXNzaXN0YW50TWVzc2FnZSIsInVwZGF0ZUFzc2lzdGFudE1lc3NhZ2UiLCJtc2ciLCJ1cGRhdGUiLCJ1cGRhdGVNZXNzYWdlIiwiZ2V0QXNzaXN0YW50TWVzc2FnZSIsImdldE1lc3NhZ2UiLCJnZXRNZXNzYWdlcyIsImdldE1lc3NhZ2VzSGlzdG9yeSIsIm0iLCJkZWZhdWx0Q29uZmlnIiwibG9hZGluZ1RleHQiLCJjb21wbGV0ZWRUZXh0IiwiY29tcGxldGVkVGV4dER1cmF0aW9uIiwiZGlzYWJsZWQiLCJzdHlsZXMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXIiLCJib3JkZXJSYWRpdXMiLCJwYWRkaW5nIiwiZm9udFNpemUiLCJjdXJzb3IiLCJkaXNwbGF5IiwiYWxpZ25JdGVtcyIsImNvbG9yIiwib3BhY2l0eSIsIndpZHRoIiwiaGVpZ2h0IiwibWFyZ2luUmlnaHQiLCJiYWNrZ3JvdW5kU2l6ZSIsImJhY2tncm91bmRSZXBlYXQiLCJiYWNrZ3JvdW5kUG9zaXRpb24iLCJpY29ucyIsImNvcHkiLCJjcmVhdGVBY3Rpb25CdXR0b24iLCJjb25maWciLCJidXR0b24iLCJjbGFzc05hbWUiLCJlbmFibGUiLCJkaXNhYmxlIiwiY29weUljb24iLCJiYWNrZ3JvdW5kSW1hZ2UiLCJpY29uIiwiYXBwZW5kIiwiY3JlYXRlVGV4dE5vZGUiLCJsYWJlbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvcmlnaW5hbEhUTUwiLCJpbm5lckhUTUwiLCJyZXN1bHQiLCJvbkNsaWNrIiwibW9kYWwiLCJQcm9taXNlIiwiaGVhZCIsImFwcGVuZENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInBvc2l0aW9uIiwidG9wIiwibGVmdCIsInpJbmRleCIsIm1pbkhlaWdodCIsIm1heEhlaWdodCIsImJveFNoYWRvdyIsImZsZXhEaXJlY3Rpb24iLCJvdmVyZmxvdyIsInRyYW5zZm9ybSIsInRyYW5zaXRpb24iLCJqdXN0aWZ5Q29udGVudCIsImZvbnRXZWlnaHQiLCJnYXAiLCJiYWNrZ3JvdW5kIiwiZmxleCIsIm92ZXJmbG93WSIsImJveFNpemluZyIsIm1hcmdpbkJvdHRvbSIsIndvcmRXcmFwIiwibWFyZ2luTGVmdCIsImJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzIiwibWF4V2lkdGgiLCJib3JkZXJUb3AiLCJvdXRsaW5lIiwicmVzaXplIiwibWluV2lkdGgiLCJiYWNrZHJvcEZpbHRlciIsInBvaW50ZXJFdmVudHMiLCJib3JkZXJDb2xvciIsIm9iamVjdEZpdCIsIm1vZGFsVHlwZXMiLCJtb2RhbEV4aXN0cyIsImNyZWF0ZU1vZGFsIiwiYWxlcnQiLCJvdmVybGF5IiwiYXZhaWxhYmxlVHlwZXMiLCJpbmNsdWRlcyIsInVuc2hpZnQiLCJoYW5kbGVJbWFnZVVwbG9hZCIsImZpbGVPclVybCIsImlzUmVtb3RlVXJsIiwiRmlsZSIsImFkZEVycm9yTWVzc2FnZSIsInVwbG9hZGVkSW1hZ2UiLCJyZW1vdmVVcGxvYWRlZEltYWdlIiwiaW1hZ2VQcmV2aWV3IiwiaW1nIiwicmVtb3ZlQnRuIiwic3JjIiwiZGF0YVVSTCIsInJlamVjdCIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJldmVudCIsInRhcmdldCIsIm9uZXJyb3IiLCJyZWFkQXNEYXRhVVJMIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsIm1lc3NhZ2VJbnB1dCIsInBhZGRpbmdMZWZ0IiwiaW5wdXRXcmFwcGVyIiwicmVtb3ZlIiwiY2xvc2VNb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkcmFnIiwiZW5kRHJhZyIsIm1vZGFsT3ZlcmxheSIsImluaXREcmFnIiwiaXNEcmFnZ2luZyIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJvZmZzZXRYIiwiY2xpZW50WCIsIm9mZnNldFkiLCJjbGllbnRZIiwidXNlclNlbGVjdCIsIm5ld1giLCJuZXdZIiwic3RvcEdlbmVyYXRpb24iLCJpc0xvYWRpbmciLCJhYm9ydENvbnRyb2xsZXIiLCJzZXRMb2FkaW5nU3RhdGUiLCJ0cnlBZ2FpbiIsImxhdGVzdFVzZXJNc2ciLCJyZXZlcnNlIiwiZmluZCIsInNlbmRNZXNzYWdlIiwiY2hhdE1lc3NhZ2VzIiwibWVzc2FnZURpdiIsImVycm9ySWNvbiIsInRleHRTcGFuIiwic2Nyb2xsVG9wIiwic2Nyb2xsSGVpZ2h0IiwicHJvdmlkZWRJZCIsIm1lc3NhZ2VJZCIsImNvbnRlbnREaXYiLCJpZnJhbWUiLCJwcm92aWRlZENvbnRlbnQiLCJjdXN0b21DU1MiLCJpc0xvYWRlZCIsInBlbmRpbmdDb250ZW50IiwiZ2V0SWZyYW1lRG9jdW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJjb250ZW50V2luZG93IiwiY3JlYXRlSWZyYW1lQ29udGVudCIsImNzcyIsImpvaW4iLCJzZXR1cElmcmFtZUNvbnRlbnQiLCJkb2MiLCJmb3JFYWNoIiwibGluayIsInJlbCIsImhyZWYiLCJzeW5jQ29udGVudCIsIm5ld0NvbnRlbnQiLCJzcmNkb2MiLCJxdWVyeVNlbGVjdG9yIiwic3luY0hlaWdodCIsInVwZGF0ZUNvbnRlbnQiLCJlbGVtZW50cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwib2Zmc2V0SGVpZ2h0IiwiaSIsImJvdHRvbSIsIm9mZnNldFRvcCIsIm1heCIsImNyZWF0ZUNvbnRlbnRJZnJhbWUiLCJBcnJheSIsImlzQXJyYXkiLCJhY3Rpb25zRGl2IiwidGV4dEFjdGlvbnMiLCJjb3B5VG9DbGlwYm9hcmQiLCJpbWFnZUFjdGlvbnMiLCJoYW5kbGVyIiwiZG93bmxvYWRlZCIsImZpZWxkIiwicmVzb3VyY2UiLCJtZWRpYVNvdXJjZSIsImZ1bGxVcmwiLCJpbnNlcnRDYiIsInJlbmRlck1lc3NhZ2UiLCJpbWFnZXNDb250ZW50IiwiaW1hZ2VzIiwiY29udGVudFdyYXBwZXIiLCJ0ZXh0RGl2IiwiaW1hZ2VSb3ciLCJmbGV4V3JhcCIsImltZ0NvbnRlbnQiLCJpbWFnZVdyYXBwZXIiLCJtYXJnaW5Ub3AiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJ3cml0ZVRleHQiLCJ0ZXh0YXJlYSIsInNlbGVjdCIsImV4ZWNDb21tYW5kIiwiZXJyIiwibG9hZGluZyIsImxvYWRpbmdJbmRpY2F0b3IiLCJzZW5kQnRuIiwic3RvcEJ0biIsImhhc01lc3NhZ2VzIiwidHJ5QWdhaW5CdG4iLCJ0eXBlQnV0dG9ucyIsImlzQWN0aXZlIiwidG9Mb3dlckNhc2UiLCJxdWVyeVNlbGVjdG9yQWxsIiwicHJvdmlkZWRNZXNzYWdlIiwiaGlkZVByb21wdCIsIm1lc3NhZ2VzIiwibmFtZSIsImNoYXRNb2RhbCIsImNoYXRIZWFkZXIiLCJjaGF0VGl0bGUiLCJjaGF0Q29udHJvbHMiLCJjbG9zZUJ0biIsImNoYXRJbnB1dEFyZWEiLCJpbnB1dFJvdyIsInBsYWNlaG9sZGVyIiwicHJldmVudERlZmF1bHQiLCJpbWFnZUZpbGUiLCJyZW1vdGVJbWFnZVVybCIsImRhdGFUcmFuc2ZlciIsImZpbGVzIiwiZmlsZSIsImltZ1VybCIsIlVSTCIsIndpbmRvdyIsImxvY2F0aW9uIiwib3JpZ2luIiwicmVzcG9uc2UiLCJibG9iIiwiaXRlbXMiLCJjbGlwYm9hcmREYXRhIiwiZ2V0QXNGaWxlIiwiYnV0dG9uc0NvbHVtbiIsInNlbmRJY29uIiwic2VuZFRleHQiLCJhY3Rpb25CdXR0b25zUm93Iiwic3RvcEljb24iLCJ0aXRsZSIsInJlZnJlc2hJY29uIiwidHlwZVNlbGVjdG9yIiwidHlwZUxhYmVsIiwidHlwZVRvZ2dsZUdyb3VwIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJidG4iLCJmaXJzdENoaWxkIiwic3dpdGNoVHlwZSIsInNoaWZ0S2V5IiwiYnVpbGRNb2RhbCIsImFwaSIsInZpc2liaWxpdHkiLCJvcGVuTW9kYWwiLCJjcmVhdGVMb2FkaW5nT3ZlcmxheSIsIm9wdGlvbnMiLCJpbmRpY2F0b3JUeXBlIiwib3ZlcmxheUNvbG9yIiwiaW5kaWNhdG9yQ29sb3IiLCJpbmRpY2F0b3IiLCJ0ZXh0YXJlYVN0eWxlcyIsImdldENvbXB1dGVkU3R5bGUiLCJ0ZXh0YXJlYVJlY3QiLCJzdHlsZVRleHQiLCJhbmltYXRpb24iLCJkb3QiLCJtYXJnaW4iLCJhbmltYXRpb25EZWxheSIsInN0eWxlU2hlZXQiLCJwYXJlbnRTdHlsZXMiLCJwYXJlbnRFbGVtZW50Iiwid3JhcHBlciIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiLCJ1cGRhdGVkUmVjdCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInVpIiwibG9jYWxDaGF0IiwiaGlzdG9yeU5hdlN5bmMiLCJlbHMiLCJwcmV2VmFsdWUiLCJnZXRWYWx1ZSIsInNldFZhbHVlIiwiZmlyZUV2ZW50IiwiZG9tIiwiaGlzdG9yeU5hdiIsInNob3ciLCJpbmZvIiwicHJldkJ1dHRvbiIsIm5leHRCdXR0b24iLCJjcmVhdGVXYW5kRWwiLCJ3YW5kRWwiLCJpbm5lclRleHQiLCJjcmVhdGVIaXN0b3J5TmF2IiwiY2FjaGUiLCJzaG93aW5nIiwiaGlkZSIsImNyZWF0ZUZyZWVUZXh0UHJvbXB0IiwiZmllbGROYW1lIiwiTU9EeCIsInJlcXVlc3QiLCJjcmVhdGVGb3JjZWRUZXh0UHJvbXB0IiwiYWlXcmFwcGVyIiwiRXh0IiwiTXNnIiwiY3JlYXRlSW1hZ2VQcm9tcHQiLCJvblN1Y2Nlc3MiLCJpbWFnZVdhbmQiLCJhdHRhY2hGaWVsZCIsImNtcCIsImdldENtcCIsImF0dGFjaEltYWdlUGx1cyIsImltZ1BsdXNQYW5lbCIsImltYWdlUGx1cyIsImZpcnN0RWxlbWVudENoaWxkIiwiaW1hZ2VCcm93c2VyIiwic291cmNlIiwib25JbWFnZUNoYW5nZSIsImFsdFRleHRXYW5kIiwiaW1nRWxlbWVudCIsImNhbnZhcyIsImdldENvbnRleHQiLCJkcmF3SW1hZ2UiLCJiYXNlNjREYXRhIiwidG9EYXRhVVJMIiwiYWx0VGV4dEZpZWxkIiwiYWx0VGFnIiwidXBkYXRlVmFsdWUiLCJqdXN0aWZ5SXRlbXMiLCJvblJlYWR5IiwiZGVmZXIiLCJmaWVsZHNNYXAiLCJwYWdldGl0bGUiLCJsb25ndGl0bGUiLCJpbnRyb3RleHQiLCJkZXNjcmlwdGlvbiIsInJlc291cmNlRmllbGRzIiwiY21wSWQiLCJhdHRhY2hSZXNvdXJjZUZpZWxkcyIsImZvcm0iLCJnZXRGb3JtIiwidHZJZCIsInR2TmFtZSIsInR2cyIsImZpbmRGaWVsZCIsInh0eXBlIiwiZXZlbnREYXRhIiwicmVsYXRpdmVVcmwiLCJhdHRhY2hUVnMiXSwic291cmNlUm9vdCI6IiJ9
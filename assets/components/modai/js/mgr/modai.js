!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.modAI=t():e.modAI=t()}(self,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{chatHistory:()=>h,executor:()=>r,history:()=>d,ui:()=>le,window:()=>xe});const n={buffered:{chatgpt:{content:e=>{const t=e?.choices?.[0]?.message?.content;if(!t)throw new Error(_("modai.cmp.failed_request"));return{id:e.id,content:t}},image:e=>{let t=e?.data?.[0]?.url;if(!t){if(t=e?.data?.[0]?.b64_json,!t)throw new Error(_("modai.cmp.failed_request"));t=`data:image/png;base64,${t}`}return{id:`chatgpt-${Date.now()}-${Math.round(1e3*Math.random())}`,url:t}}},claude:{content:e=>{const t=e?.content?.[0]?.text;if(!t)throw new Error(_("modai.cmp.failed_request"));return{id:e.id,content:t}}},gemini:{content:e=>{const t=e?.candidates?.[0]?.content?.parts?.[0]?.text;if(!t)throw new Error(_("modai.cmp.failed_request"));return{id:`gemini-${Date.now()}-${Math.round(1e3*Math.random())}`,content:t}},image:e=>{const t=e?.predictions?.[0]?.bytesBase64Encoded;if(!t)throw new Error(_("modai.cmp.failed_request"));return{id:`gemini-${Date.now()}-${Math.round(1e3*Math.random())}`,url:`data:image/png;base64,${t}`}}}},stream:{chatgpt:{content:(e,t)=>{const n=t?.content??"",o=e.choices[0]?.delta?.content||"";return{...t,id:e.id,content:`${n}${o}`}}},claude:{content:(e,t)=>{const n=t?.content??"",o=e.delta?.text||"";return{...t,content:`${n}${o}`}}},gemini:{content:(e,t)=>{const n=t?.content??"",o=e.candidates[0]?.content?.parts[0]?.text||"";return{...t,content:`${n}${o}`}}}}},o=async e=>{if(!e.ok){const t=await e.json();if(t?.error)throw new Error(t.error.message);throw new Error(`${e.status} ${e.statusText}`)}},a=async(e,t,o,a,i)=>{if(!e.body)throw new Error("failed");const r=e.body.getReader(),s=new TextDecoder("utf-8");let d="",l={id:`${t}-${Date.now()}-${Math.round(1e3*Math.random())}`,content:""};for(;!i||!i.aborted;){const{done:e,value:i}=await r.read();if(e)break;const c=s.decode(i,{stream:!0});if("gemini"===t){const e=c.trim().split(",\r\n").map((e=>e.replace(/^\[|]$/g,""))).filter((e=>""!==e.trim()));for(const i of e)try{const e=JSON.parse(i);l=n.stream[t][o](e,l),a&&(console.log("currentData",l),a(l))}catch{}}if("chatgpt"===t){d+=c;let e,i=0;for(;-1!==(e=d.indexOf("\n",i));){const r=d.slice(i,e).trim();if(i=e+1,r.startsWith("data: ")){const e=r.slice(6);if("[DONE]"===e)continue;try{const i=JSON.parse(e);l=n.stream[t][o](i,l),a&&a(l)}catch{}}}d=d.slice(i)}if("claude"===t){d+=c;let e,i=0;for(;-1!==(e=d.indexOf("\n",i));){const r=d.slice(i,e).trim();if(i=e+1,r.startsWith("data: ")){const e=r.slice(6);try{const i=JSON.parse(e);if("message_start"===i.type){l.id=i.message.id;continue}if("content_block_delta"!==i.type)continue;l=n.stream[t][o](i,l),a&&a(l)}catch{}}}d=d.slice(i)}}return l},i=async(e,t,i,r)=>{const s=(r=r||new AbortController).signal,d=await fetch(`${modAI.apiURL}?action=${e}`,{signal:s,method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});if(!d.ok){const e=await d.json();if(e.error)throw new Error(e.error.message);throw new Error(e.detail)}const l=d.headers.get("x-modai-service")??"chatgpt",c=d.headers.get("x-modai-parser")??"content",p=1===parseInt(d.headers.get("x-modai-stream")??"0");if(1!==parseInt(d.headers.get("x-modai-proxy")??"0")){return(async(e,t,i)=>{if("object"!=typeof e||!e.forExecutor)return e;const r=e.forExecutor,s=(i=i||new AbortController).signal;if(!r.service||!r.parser)throw new Error(_("modai.cmp.service_required"));if(!n[r.stream?"stream":"buffered"]?.[r.service]?.[r.parser])throw new Error(_("modai.cmp.service_unsupported"));if(r.stream)return(async e=>{if(console.log("calling service as stream"),"content"!==r.parser)throw new Error(_("modai.cmp.service_unsupported"));const n=await fetch(e.url,{signal:s,method:"POST",body:e.body,headers:e.headers});return await o(n),a(n,r.service,r.parser,t)})(r);const d=await(async e=>{const t=await fetch(e.url,{signal:s,method:"POST",body:e.body,headers:e.headers});await o(t);const n=await t.json();if(n.error)throw new Error(n.error.message);return n})(r);return n.buffered[r.service][r.parser](d)})(await d.json(),i,r)}if(!l||!c)throw r.abort(),new Error(_("modai.cmp.service_required"));if(!n[p?"stream":"buffered"]?.[l]?.[c])throw r.abort(),new Error(_("modai.cmp.service_unsupported"));if(!p){const e=await d.json();return n.buffered[l][c](e)}if("content"!==c)throw new Error(_("modai.cmp.service_unsupported"));return await a(d,l,c,i,s)},r={mgr:{download:{image:async e=>await(async(e,t)=>{const n=await fetch(`${modAI.apiURL}?action=Download\\Image`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});if(!n.ok){const e=await n.json();if(e.error)throw new Error(e.error.message);throw new Error(e.detail)}return await n.json()})(0,e)},prompt:{freeText:async(e,t,n)=>i("Prompt\\FreeText",e,t,n),text:async(e,t,n)=>i("Prompt\\Text",e,t,n),vision:async(e,t,n)=>i("Prompt\\Vision",e,t,n),image:async(e,t)=>i("Prompt\\Image",e,void 0,t)}}},s={},d={_formatOutput(e,t){const n=s[e],o=n.visible>0,a=n.visible!==n.values.length-1;return{value:void 0!==t?t:n.values[n.visible]??null,nextStatus:a,prevStatus:o,current:n.visible+1,total:n.values.length,context:n.context}},insert(e,t,n=!1){const o=s[e];n||(o.visible=o.values.push(t)-1);const a=this._formatOutput(e,t);return"function"==typeof o.syncUI&&o.syncUI(a,n),a},next(e){const t=s[e];if(t.visible===t.values.length-1)return this._formatOutput(e);t.visible++;const n=this._formatOutput(e);return"function"==typeof t.syncUI&&t.syncUI(n),n},prev(e){const t=s[e];if(t.visible<=0)return this._formatOutput(e);t.visible--;const n=this._formatOutput(e);return"function"==typeof t.syncUI&&t.syncUI(n),n},init(e,t,n,o){return s[e]||(s[e]={visible:-1,values:[],context:o}),s[e].syncUI=t,n&&(s[e].values=[n],s[e].visible=0),{cachedItem:s[e],getData:()=>this._formatOutput(e),getAll:()=>s[e].values,syncUI:()=>{"function"==typeof s[e].syncUI&&s[e].syncUI(this._formatOutput(e),!1)},insert:(t,n=!1)=>this.insert(e,t,n),next:()=>this.next(e),prev:()=>this.prev(e)}}},l=(e,t)=>{Object.assign(e.style,t)},c=(e,t,n="")=>{const o=document.createElement(e);return t&&l(o,t),n&&(o.textContent=n),o},p=e=>/<[^>]*>/g.test(e)?e:e.replace(/\r\n|\n|\r/g,"<br>"),g={},m="assistant",u=(e,t,n,o,a=!1,i="text")=>{const r=g[e];if(!r)return;const s={content:t,role:n,id:o,hidden:a,type:i,ctx:{}},d=r.history.push(s)-1;o&&(r.idRef[o]=r.history[d]),s.el=r.onAddMessage(s)},h={init:(e,t)=>(g[e]||(g[e]={history:[],idRef:{},onAddMessage:t}),g[e].onAddMessage=t,{addUserMessage:(t,n,o,a="text")=>{u(e,t,"user",n,o,a)},addAssistantMessage:(t,n,o="text")=>{u(e,t,m,n,!1,o)},updateAssistantMessage:(t,n,o="text")=>{((e,t,n,o="text")=>{const a=g[e];if(!a)return;if(!a.idRef[t])return void u(e,n,m,t,!1,o);const i=a.idRef[t];i.content=n,i.el&&i.el.update&&i.el.update(i)})(e,t,n,o)},getAssistantMessage:t=>((e,t)=>{const n=g[e];if(n)return n.idRef[t]})(e,t),getMessages:()=>g[e].history,getMessagesHistory:()=>g[e].history.map((e=>({role:e.role,content:e.content})))})},f={loadingText:"Loading...",completedText:"Completed!",completedTextDuration:2e3,disabled:!1},y={backgroundColor:"#edf2f7",border:"1px solid #cbd5e0",borderRadius:"4px",padding:"3px 8px",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",color:"#4a5568",opacity:"1"},x={display:"inline-block",width:"14px",height:"14px",marginRight:"5px",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},b={opacity:"0.5",cursor:"not-allowed"},w={copy:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%234a5568' viewBox='0 0 16 16'%3E%3Cpath d='M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z'/%3E%3Cpath d='M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z'/%3E%3C/svg%3E",insert:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%234a5568' viewBox='0 0 16 16'%3E%3Cpath d='M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z'/%3E%3Cpath d='M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z'/%3E%3C/svg%3E"},v=e=>{e={...f,...e};const t=c("button",y);t.className="action-button",t.enable=()=>{t.disabled=!1,l(t,y)},t.disable=()=>{t.disabled=!0,l(t,{...y,...b})},e.disabled&&t.disable();const n=c("span",{...x,backgroundImage:`url("${w[e.icon]}")`});return t.append(n),t.append(document.createTextNode(e.label)),t.addEventListener("click",(async()=>{const n=t.innerHTML,o=e.onClick(e.message,e.modal);if(o instanceof Promise){t.innerHTML=`\n                <span style="\n                    display: inline-block;\n                    margin-right: 5px;\n                    width: 12px;\n                    height: 12px;\n                    position: relative;\n                    animation: spin 1s linear infinite;\n                ">\n                    <span style="\n                        position: absolute;\n                        width: 3px;\n                        height: 3px;\n                        background-color: currentColor;\n                        border-radius: 50%;\n                        top: 0;\n                        left: 50%;\n                        transform: translate(-50%, 0);\n                    "></span>\n                    <span style="\n                        position: absolute;\n                        width: 3px;\n                        height: 3px;\n                        background-color: currentColor;\n                        border-radius: 50%;\n                        top: 50%;\n                        right: 0;\n                        transform: translate(0, -50%);\n                    "></span>\n                    <span style="\n                        position: absolute;\n                        width: 3px;\n                        height: 3px;\n                        background-color: currentColor;\n                        border-radius: 50%;\n                        bottom: 0;\n                        left: 50%;\n                        transform: translate(-50%, 0);\n                    "></span>\n                    <span style="\n                        position: absolute;\n                        width: 3px;\n                        height: 3px;\n                        background-color: currentColor;\n                        border-radius: 50%;\n                        top: 50%;\n                        left: 0;\n                        transform: translate(0, -50%);\n                    "></span>\n                </span>\n                ${e.loadingText}\n            `;const n=document.createElement("style");n.textContent="\n                @keyframes spin {\n                    from { transform: rotate(0deg); }\n                    to { transform: rotate(360deg); }\n                }\n            ",document.head.appendChild(n),await o,document.head.removeChild(n)}t.innerHTML=`\n                <span style="margin-right: 5px;">✓</span>\n                ${e.completedText}\n            `,await new Promise((e=>setTimeout(e,2e3))),t.innerHTML=n})),t},C={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.3)",display:"none",zIndex:"100"},E={position:"fixed",width:"1000px",minHeight:"170px",maxHeight:"600px",backgroundColor:"#fff",borderRadius:"10px",boxShadow:"0 5px 15px rgba(0, 0, 0, 0.3)",display:"none",flexDirection:"column",overflow:"hidden",zIndex:"101",top:"50%",left:"50%",transform:"translate(-50%, -50%)",transition:"height 0.3s ease-in-out"},k={backgroundColor:"#00B6DE",color:"white",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move"},M={fontWeight:"bold",fontSize:"16px"},T={display:"flex",gap:"10px"},I={background:"none",border:"none",color:"white",fontSize:"16px",cursor:"pointer"},A={flex:"1",padding:"15px",overflowY:"auto",backgroundColor:"#f9f9f9",width:"100%",boxSizing:"border-box",display:"none"},S={marginBottom:"20px",borderRadius:"8px",position:"relative",wordWrap:"break-word",width:"100%",boxSizing:"border-box"},L={width:"100%",backgroundColor:"#ffffff",border:"1px solid #e2e8f0",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.05)"},z={width:"fit-content",padding:"10px 15px",backgroundColor:"#4299e1",color:"white",marginLeft:"auto",borderBottomRightRadius:"5px"},D={padding:"12px",width:"100%",maxWidth:"100%",overflow:"hidden",boxSizing:"border-box"},$={display:"flex",padding:"8px 12px",gap:"8px",backgroundColor:"#f7fafc",borderTop:"1px solid #e2e8f0",borderRadius:"0 0 8px 8px"},B={display:"flex",padding:"15px",borderTop:"1px solid #e2e8f0",backgroundColor:"white",position:"relative"},O={display:"flex",width:"100%",gap:"10px"},H={flex:"1",position:"relative",minHeight:"48px",maxHeight:"150px",display:"flex"},R={width:"100%",padding:"12px 15px",border:"1px solid #e2e8f0",borderRadius:"10px",outline:"none",fontSize:"14px",resize:"none",minHeight:"48px",maxHeight:"150px",overflowY:"auto",backgroundColor:"#fff",cursor:"inherit"},P={display:"flex",flexDirection:"column",gap:"4px",width:"100px"},j={backgroundColor:"#6CB24A",color:"white",border:"none",borderRadius:"12px",padding:"8px 16px",cursor:"pointer",fontWeight:"bold",height:"40px",minWidth:"100px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",opacity:"1"},U={display:"flex",gap:"4px",justifyContent:"space-between"},F={backgroundColor:"transparent",border:"1px solid #e2e8f0",borderRadius:"8px",width:"48px",height:"32px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s",opacity:"1"},N={width:"16px",height:"16px",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M2.01 21L23 12 2.01 3 2 10l15 2-15 2z'/%3E%3C/svg%3E\")",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},q={width:"16px",height:"16px",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23DC2626'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M6 6h12v12H6z'/%3E%3C/svg%3E\")",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},W={width:"16px",height:"16px",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%234B5563'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z'/%3E%3C/svg%3E\")",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},V={opacity:"0.5",cursor:"not-allowed"},Y={backgroundColor:"#f3f4f6",cursor:"not-allowed"},J={display:"none",position:"absolute",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(243, 244, 246, 0.9)",borderRadius:"10px",color:"#6B7280",fontSize:"14px",alignItems:"center",justifyContent:"center",gap:"4px",flexDirection:"row",zIndex:"10",backdropFilter:"blur(2px)",border:"1px solid #e2e8f0",pointerEvents:"none"},X={padding:"5px 15px",display:"flex",alignItems:"center",gap:"10px",borderTop:"1px solid #e2e8f0",backgroundColor:"white"},G={fontSize:"14px",color:"#4B5563",fontWeight:"500"},K={display:"flex",gap:"4px"},Q={padding:"6px 12px",fontSize:"13px",border:"1px solid #e2e8f0",borderRadius:"6px",backgroundColor:"#fff",color:"#4B5563",cursor:"pointer",transition:"all 0.2s",opacity:"1"},Z={backgroundColor:"#00B6DE",color:"#fff",borderColor:"#00B6DE"},ee={width:"fit-content",padding:"10px 15px",backgroundColor:"#DC2626",color:"white",marginLeft:"auto",borderBottomRightRadius:"5px",display:"flex",alignItems:"center",gap:"8px"},te={width:"16px",height:"16px",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z'/%3E%3C/svg%3E\")",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},ne={position:"absolute",top:"5px",left:"5px",width:"71px",height:"71px",borderRadius:"6px",overflow:"hidden",border:"1px solid #e2e8f0",backgroundColor:"#f8fafc",cursor:"pointer",transition:"transform 0.2s ease"},oe={width:"100%",height:"100%",objectFit:"cover"},ae={position:"absolute",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",cursor:"pointer",opacity:"0",transition:"opacity 0.2s ease"},ie=["text","image"];let re=!1;const se=e=>{if(re)return;if(!e.key)return void alert("key is required config property");void 0===e.overlay&&(e.overlay=!0),e.type||(e.type="text"),e.availableTypes||(e.availableTypes=[]),e.availableTypes=e.availableTypes.filter((e=>ie.includes(e))),e.availableTypes.length>0&&!e.availableTypes.includes(e.type)&&e.availableTypes.unshift(e.type);const t=async(e,t=!1)=>{if(!t&&e instanceof File&&!e.type.startsWith("image/"))return void m("Only image files are allowed");se.uploadedImage&&n();const o=c("div",ne),a=c("img",oe),i=c("div",ae,"×");if(t)a.src=e,se.uploadedImage=a.src;else{const t=await new Promise(((t,n)=>{const o=new FileReader;o.onload=function(e){t(e.target?.result)},o.onerror=function(e){n(e)},o.readAsDataURL(e)}));a.src=t,se.uploadedImage=t}i.addEventListener("click",(e=>{e.stopPropagation(),n()})),o.addEventListener("mouseenter",(()=>{o.style.transform="scale(1.05)",i.style.opacity="1"})),o.addEventListener("mouseleave",(()=>{o.style.transform="",i.style.opacity="0"})),o.append(a,i),se.imagePreview=o,se.messageInput.style.paddingLeft="85px",se.inputWrapper.append(o)},n=()=>{se.imagePreview&&(se.imagePreview.remove(),se.imagePreview=void 0),se.uploadedImage=void 0,se.messageInput.style.paddingLeft="15px"},o=()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",s),se.modalOverlay&&se.modalOverlay.remove(),se&&se.remove(),re=!1},a=e=>{se.isDragging=!0;const t=se.getBoundingClientRect();se.offsetX=e.clientX-t.left,se.offsetY=e.clientY-t.top,document.body.style.userSelect="none"},i=e=>{if(!se.isDragging)return;const t=e.clientX-se.offsetX,n=e.clientY-se.offsetY;se.style.left=t+"px",se.style.top=n+"px",se.style.transform="none"},s=()=>{se.isDragging=!1,document.body.style.userSelect=""},d=()=>{se.isLoading&&se.abortController&&(se.abortController.abort(),se.abortController=void 0,x(!1))},g=()=>{if(0!==w.getMessages().length)if("text"!==e.type)if("image"!==e.type);else{const e=w.getMessages().reverse().find((e=>"user"===e.role));e&&b(e.content)}else b("Try again")},m=e=>{"none"===se.chatMessages.style.display&&(se.chatMessages.style.display="block");const t=c("div",{...S,...ee}),n=c("span",te);t.appendChild(n);const o=c("span");return o.textContent=e,t.appendChild(o),se.chatMessages.appendChild(t),se.chatMessages.scrollTop=se.chatMessages.scrollHeight,t},u=(t,n)=>{"none"===se.chatMessages.style.display&&(se.chatMessages.style.display="block");const o=c("div",{...S,...L}),a=n||"msg-"+Date.now(),i=c("div",D),s=((e,t,n=[])=>{const o=p(e);let a=!1,i=null;const r=c("iframe",{width:"100%",border:"none",backgroundColor:"white",maxWidth:"100%",boxSizing:"border-box"}),s=()=>r.contentDocument||r.contentWindow?.document,d=e=>`\n        <html>\n        <head>\n            <style>\n            html {\n                width: 100%;\n                max-width: 100%;\n                padding: 0;\n                margin: 0;\n            }\n            body {\n                margin: 0;\n                padding: 0;\n                font-family: Arial, sans-serif;\n                overflow-x: hidden;\n                width: 100%;\n                max-width: 100%;\n                box-sizing: border-box;\n            }\n            * {\n                box-sizing: border-box;\n                max-width: 100%;\n            }\n            pre {\n                white-space: pre-wrap;\n                word-wrap: break-word;\n                overflow-wrap: break-word;\n                max-width: 100%;\n                padding: 12px;\n                margin: 0;\n                background-color: #f5f7fa;\n                border-radius: 5px;\n                font-size: 14px;\n            }\n            img {\n                max-width: 100%;\n                height: auto;\n                display: block;\n            }\n            code {\n                white-space: pre-wrap;\n                word-wrap: break-word;\n                max-width: 100%;\n                display: block;\n                overflow-x: hidden;\n                font-size: 14px;\n            }\n            table {\n                width: 100%;\n                max-width: 100%;\n                overflow-x: hidden;\n                display: block;\n                border-collapse: collapse;\n            }\n            div {\n                max-width: 100%;\n                overflow-wrap: break-word;\n                word-wrap: break-word;\n                box-sizing: border-box;\n            }\n            p {\n                margin: 0 0 0.5em 0;\n                max-width: 100%;\n            }\n            h1, h2, h3, h4, h5, h6 {\n                margin: 0 0 0.1em 0;\n                max-width: 100%;\n            }\n        </style>\n            ${n.map((e=>`<link rel="stylesheet" type="text/css" href="${e}" />`)).join("")}\n        </head>\n        <body style="padding: 0; max-width: 100%; width: 100%; box-sizing: border-box;">${e}</body>\n        </html>\n    `,l=(e,t)=>{const o=e.createElement("style");o.textContent="\n            html {\n                width: 100%;\n                max-width: 100%;\n                padding: 0;\n                margin: 0;\n            }\n            body {\n                margin: 0;\n                padding: 0;\n                font-family: Arial, sans-serif;\n                overflow-x: hidden;\n                width: 100%;\n                max-width: 100%;\n                box-sizing: border-box;\n            }\n            * {\n                box-sizing: border-box;\n                max-width: 100%;\n            }\n            pre {\n                white-space: pre-wrap;\n                word-wrap: break-word;\n                overflow-wrap: break-word;\n                max-width: 100%;\n                padding: 12px;\n                margin: 0;\n                background-color: #f5f7fa;\n                border-radius: 5px;\n                font-size: 14px;\n            }\n            img {\n                max-width: 100%;\n                height: auto;\n                display: block;\n            }\n            code {\n                white-space: pre-wrap;\n                word-wrap: break-word;\n                max-width: 100%;\n                display: block;\n                overflow-x: hidden;\n                font-size: 14px;\n            }\n            table {\n                width: 100%;\n                max-width: 100%;\n                overflow-x: hidden;\n                display: block;\n                border-collapse: collapse;\n            }\n            div {\n                max-width: 100%;\n                overflow-wrap: break-word;\n                word-wrap: break-word;\n                box-sizing: border-box;\n            }\n            p {\n                margin: 0 0 0.5em 0;\n                max-width: 100%;\n            }\n            h1, h2, h3, h4, h5, h6 {\n                margin: 0 0 0.1em 0;\n                max-width: 100%;\n            }\n        ",e.head.appendChild(o),n.forEach((t=>{const n=e.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=t,e.head.appendChild(n)})),e.body.innerHTML=t,e.body.style.padding="0",e.body.style.maxWidth="100%",e.body.style.width="100%",e.body.style.boxSizing="border-box"};return r.syncContent=e=>{(e=>{if(!a)return i=e,void(r.srcdoc=d(e));const t=s();if(!t)return i=e,void(r.srcdoc=d(e));t.head.querySelector("style")?t.body.innerHTML=e:l(t,e),r.syncHeight()})(e)},r.syncHeight=()=>{const e=r.contentWindow?.document.body;if(!e)return;const n=e.getElementsByTagName("*");let o=e.offsetHeight;for(let e=0;e<n.length;e++){const t=n[e],a=t.offsetTop+t.offsetHeight;o=Math.max(o,a)}r.style.height=o+5+"px",e.style.overflow="hidden",t.chatMessages.scrollTop=t.chatMessages.scrollHeight},r.onload=()=>{if(a=!0,null!==i){const e=i;i=null;const t=s();t&&(l(t,e),r.syncHeight())}r.syncHeight()},r.srcdoc=d(o),r})(Array.isArray(t)?t[0].value:t,se,e.customCSS??[]);i.appendChild(s);const d=c("div",$),l=w.getAssistantMessage(a);if(l&&("text"===e.type&&(!1!==e.textActions?.copy&&d.append(v({message:l,modal:se,disabled:se.isLoading,icon:"copy",label:"Copy",completedText:"Copied!",onClick:"function"==typeof e.textActions?.copy?e.textActions.copy:y})),"function"==typeof e.textActions?.insert&&d.append(v({message:l,modal:se,disabled:se.isLoading,icon:"insert",label:"Insert",completedText:"Inserted!",onClick:e.textActions.insert}))),"image"===e.type)){!1!==e.imageActions?.copy&&d.append(v({message:l,modal:se,disabled:se.isLoading,icon:"copy",label:"Copy",loadingText:"Downloading...",completedText:"Copied!",onClick:async(t,n)=>{const o="function"==typeof e.textActions?.copy?e.textActions.copy:y;if(!0===t.ctx.downloaded)return void o(t,n);const a=await r.mgr.download.image({url:t.content,field:e.field,namespace:e.namespace,resource:e.resource,mediaSource:e.image?.mediaSource});t.content=a.fullUrl,t.ctx.downloaded=!0,t.ctx.url=a.url,t.ctx.fullUrl=a.fullUrl,o(t,n)}}));const t=e.imageActions?.insert;"function"==typeof t&&d.append(v({message:l,modal:se,disabled:se.isLoading,icon:"insert",label:"Insert",completedText:"Inserted!",loadingText:"Downloading...",onClick:async(n,o)=>{if(!0===n.ctx.downloaded)return void t(n,o);const a=await r.mgr.download.image({url:n.content,field:e.field,namespace:e.namespace,resource:e.resource,mediaSource:e.image?.mediaSource});n.content=a.fullUrl,n.ctx.downloaded=!0,n.ctx.url=a.url,n.ctx.fullUrl=a.fullUrl,t(n,o)}}))}return o.append(i,d),se.chatMessages.appendChild(o),se.chatMessages.scrollTop=se.chatMessages.scrollHeight,o.update=e=>{const t=Array.isArray(e.content)?e.content[0].value:e.content,n="image"===e.type?`<img src="${t}" />`:p(t);s.syncContent(n),s.syncHeight()},o},f=e=>{if(!e.hidden)return"user"===e.role?(e=>{"none"===se.chatMessages.style.display&&(se.chatMessages.style.display="block");const t=c("div",{...S,...z});let n,o=null;if(Array.isArray(e)){const[t,...a]=e;n=t.value,o=a}else n=e;const a=c("div",{display:"flex",flexDirection:"column",gap:"8px"}),i=c("div");if(i.innerHTML=p(n),a.appendChild(i),o){const e=c("div",{display:"flex",flexDirection:"row",gap:"8px",flexWrap:"wrap"});for(const t of o){const n=c("div",{width:"100px",height:"100px",borderRadius:"4px",overflow:"hidden",marginTop:"4px"}),o=c("img",{width:"100%",height:"100%",objectFit:"cover"});o.src=t.value,n.appendChild(o),e.appendChild(n)}a.appendChild(e)}return t.appendChild(a),t.update=e=>{const t=Array.isArray(e.content)?e.content[0].value:e.content;i.innerHTML=p(t)},se.chatMessages.appendChild(t),se.chatMessages.scrollTop=se.chatMessages.scrollHeight,t})(e.content):"image"===e.type?u(`<img src="${e.content}" />`,e.id):u(e.content,e.id)},y=async e=>{const t=Array.isArray(e.content)?e.content[0].value:e.content;if(navigator.clipboard&&navigator.clipboard.writeText)try{await navigator.clipboard.writeText(t)}catch{m(_("modai.cmp.failed_copy"))}else try{const e=c("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}catch(e){m(_("modai.cmp.failed_copy"))}},x=t=>{se.isLoading=t,se.loadingIndicator.style.display=t?"flex":"none",se.messageInput.disabled=t,l(se.messageInput,t?{...R,...Y}:R),se.sendBtn.disabled=t,l(se.sendBtn,t?{...j,...V}:j),se.stopBtn.disabled=!t,l(se.stopBtn,t?F:{...F,...V});const n=w.getMessages().length>0;se.tryAgainBtn.disabled=t||!n,l(se.tryAgainBtn,t||!n?{...F,...V}:F),Object.values(se.typeButtons).forEach((n=>{n.disabled=t;const o=n.textContent?.toLowerCase()===e.type;l(n,t?{...Q,...o?Z:{},...V}:{...Q,...o?Z:{}})})),se.chatMessages.querySelectorAll(".action-button").forEach((e=>{t?e.disable?.():e?.enable?.()}))},b=async(t,o)=>{let a=t?t.trim():se.messageInput.value.trim();if(!a||se.isLoading)return;x(!0),se.messageInput.value="",se.abortController=new AbortController,se.uploadedImage&&"text"===e.type&&(a=[{type:"text",value:a},{type:"image",value:se.uploadedImage}]),n();const i=w.getMessagesHistory(),s="user-msg-"+Date.now()+Math.round(1e3*Math.random());w.addUserMessage(a,s,o);try{if("text"===e.type){const t=await r.mgr.prompt.freeText({namespace:e.namespace,context:e.context,prompt:a,field:e.field||"",messages:i},(e=>{w.updateAssistantMessage(e.id,e.content)}),se.abortController);w.updateAssistantMessage(t.id,t.content)}if("image"===e.type){const e=await r.mgr.prompt.image({prompt:a},se.abortController);w.addAssistantMessage(e.url,e.id,"image")}se.abortController=void 0}catch(e){if(e instanceof Error){if("AbortError"===e.name)return;return void m(e.message)}m("Unknown error")}x(!1)};let w=h.init(`${e.key}/${e.type}`,(e=>f(e)));const se=(()=>{const n=c("div",C),r=c("div",E),p=c("div",k),u=c("div",M,"modAI Assistant"),y=c("div",T),x=c("button",I,"✕");y.append(x),p.append(u,y);const v=c("div",A),S=c("div",B),L=c("div",O),_=c("div",H),z=c("textarea",R);z.placeholder="Type your message...",z.addEventListener("dragover",(e=>{e.preventDefault(),e.stopPropagation(),z.style.borderColor="#00B6DE"})),z.addEventListener("dragleave",(e=>{e.preventDefault(),e.stopPropagation(),z.style.borderColor="#e2e8f0"})),z.addEventListener("drop",(async e=>{e.preventDefault(),e.stopPropagation(),z.style.borderColor="#e2e8f0";let n=null,o=null;const a=e.dataTransfer;if(!a)return;const i=a.files;if(i?.length>0){const e=i[0];e.type.startsWith("image/")&&(n=e)}if(!n){const e=a.getData("text/uri-list");e&&(o=e)}if(n)await t(n);else if(o){const e=new URL(window.location.href);if(!o.startsWith(e.origin))return void await t(o,!0);try{const e=await fetch(o);if(e.ok){const n=await e.blob();if(n.type.startsWith("image/")){const e=new File([n],"image.png",{type:n.type});await t(e)}}}catch(e){m("Filed to fetch an image")}}else m("Only image files are allowed")})),z.addEventListener("paste",(async e=>{const n=e.clipboardData?.items;if(n)for(let o=0;o<n.length;o++)if(-1!==n[o].type.indexOf("image")){const a=n[o].getAsFile();if(a){e.preventDefault(),await t(a);break}}})),x.addEventListener("click",(()=>{o()}));const D=c("div",P),$=c("button",j),Y=c("span",N),ee=document.createTextNode("Send");$.append(Y,ee);const te=c("div",U),ne=c("button",{...F,...V}),oe=c("span",q);ne.appendChild(oe),ne.title="Stop Generation";const ae=c("button",F),ie=c("span",W);ae.appendChild(ie),ae.title="Try Again",0===w.getMessages().length&&(ae.disabled=!0,l(ae,{...F,...V})),te.append(ne,ae),D.append($,te),_.append(z),L.append(_,D);const re=c("div",J);re.innerHTML='\n        <style>\n            @keyframes loadingDotPulse {\n                0%, 80%, 100% { transform: scale(0.6); opacity: 0.3; }\n                40% { transform: scale(1); opacity: 1; }\n            }\n            .loading-dots {\n                display: flex;\n                gap: 4px;\n                padding: 8px 16px;\n                background-color: rgba(255, 255, 255, 0.8);\n                border-radius: 16px;\n            }\n            .loading-dot {\n                width: 8px;\n                height: 8px;\n                background-color: #6B7280;\n                border-radius: 50%;\n                display: inline-block;\n                animation: loadingDotPulse 1.4s infinite ease-in-out both;\n            }\n            .loading-dot:nth-child(1) { animation-delay: -0.32s; }\n            .loading-dot:nth-child(2) { animation-delay: -0.16s; }\n            .loading-dot:nth-child(3) { animation-delay: 0s; }\n        </style>\n        <div class="loading-dots">\n            <div class="loading-dot"></div>\n            <div class="loading-dot"></div>\n            <div class="loading-dot"></div>\n        </div>\n    ',_.append(re);const de=c("div",X),le=c("div",G,"Generate:"),ce=c("div",K),pe={},ge=e.availableTypes??[];return ge.forEach((t=>{const n=c("button",Q,t.charAt(0).toUpperCase()+t.slice(1));t===e.type&&l(n,{...Q,...Z}),n.addEventListener("click",(()=>{Object.values(pe).forEach((e=>{l(e,Q)})),l(n,{...Q,...Z}),(t=>{for(e.type=t,w=h.init(`${e.key}/${e.type}`,(e=>f(e)));se.chatMessages.firstChild;)se.chatMessages.removeChild(se.chatMessages.firstChild);se.chatMessages.style.display="none";const n=w.getMessages().filter((e=>!e.hidden));n.length>0&&(se.chatMessages.style.display="block",n.forEach((e=>{f(e)})))})(t)})),pe[t]=n,ce.appendChild(n)})),de.append(le,ce),S.append(L),r.append(p,v,S),ge.length>0&&r.append(de),e.overlay&&document.body.append(n),document.body.append(r),x.addEventListener("click",o),$.addEventListener("click",(()=>b())),ne.addEventListener("click",d),ae.addEventListener("click",g),z.addEventListener("keydown",(e=>{if("Enter"===e.key){if(e.shiftKey)return;e.preventDefault(),b()}})),p.addEventListener("mousedown",a),document.addEventListener("mousemove",i),document.addEventListener("mouseup",s),r.modalOverlay=n,r.chatHeader=p,r.closeBtn=x,r.chatMessages=v,r.messageInput=z,r.sendBtn=$,r.tryAgainBtn=ae,r.stopBtn=ne,r.loadingIndicator=re,r.typeSelector=de,r.typeButtons=pe,r.inputWrapper=_,r.isDragging=!1,r.isLoading=!1,r.abortController=void 0,r.offsetX=0,r.offsetY=0,r})();return se.api={sendMessage:b,closeModal:o},(()=>{se.chatMessages.innerHTML="",se.chatMessages.style.display="none",se.style.visibility="hidden",se.style.display="flex",se.modalOverlay.style.display="block";const e=w.getMessages().filter((e=>!e.hidden));e.length>0&&(se.chatMessages.style.display="block",e.forEach((e=>{f(e)}))),setTimeout((()=>{se.chatMessages.scrollTop=se.chatMessages.scrollHeight,se.style.visibility="visible"}),100)})(),re=!0,se},de=(e,t={})=>{const n={indicatorType:t.indicatorType||"spinner",overlayColor:t.overlayColor||"rgba(255, 255, 255, 0.7)",indicatorColor:t.indicatorColor||"#3498db"},o=document.createElement("div"),a=document.createElement("div"),i=window.getComputedStyle(e),r=e.getBoundingClientRect();t.indicatorColor||(n.indicatorType=r.height<=50?"dots":"spinner"),o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.backgroundColor=n.overlayColor,o.style.display="flex",o.style.justifyContent="center",o.style.alignItems="center",o.style.zIndex="10000",o.style.borderRadius=i.borderRadius;let s="";if("spinner"===n.indicatorType)a.style.border="4px solid #f3f3f3",a.style.borderTop=`4px solid ${n.indicatorColor}`,a.style.borderRadius="50%",a.style.width="30px",a.style.height="30px",a.style.animation="textareaOverlaySpin 1s linear infinite",s="\n      @keyframes textareaOverlaySpin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n    ";else if("dots"===n.indicatorType){a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.height="20px";for(let e=0;e<3;e++){const t=document.createElement("div");t.style.width="8px",t.style.height="8px",t.style.borderRadius="50%",t.style.backgroundColor=n.indicatorColor,t.style.margin="0 4px",t.style.animation="textareaOverlayDotPulse 1.4s infinite ease-in-out",t.style.animationDelay=.2*e+"s",a.appendChild(t)}s="\n      @keyframes textareaOverlayDotPulse {\n        0%, 80%, 100% { transform: scale(0); opacity: 0.5; }\n        40% { transform: scale(1); opacity: 1; }\n      }\n    "}const d=document.createElement("style");d.textContent=s,document.head.appendChild(d),o.appendChild(a);const l=window.getComputedStyle(e.parentElement);let c;-1===["relative","absolute","fixed"].indexOf(l.position)?(c=document.createElement("div"),c.style.position="relative",c.style.width=`${r.width}px`,c.style.height=`${r.height}px`,c.style.display="inline-block",e.parentNode?.insertBefore(c,e),c.appendChild(e)):c=e.parentElement,o.style.display="none",c.appendChild(o);const p=e.getBoundingClientRect();return c!==e.parentElement&&(c.style.width=`${p.width}px`,c.style.height=`${p.height}px`),o.style.display="flex",e.setAttribute("disabled","disabled"),()=>{o.style.display="none",e.removeAttribute("disabled"),o.remove(),d.remove(),c!==e.parentElement&&(c.parentNode?.insertBefore(e,c),c.remove())}},le={createLoadingOverlay:de,localChat:e=>se(e)},ce=(e,t)=>{e.context.els.forEach((({wrapper:n,field:o})=>{const a=o.getValue();o.setValue(e.value),o.fireEvent("change",o,e.value,a),t&&(o.el.dom.scrollTop=o.el.dom.scrollHeight),e.total>0&&n.historyNav.show(),n.historyNav.info.update(e.current,e.total),e.prevStatus?n.historyNav.prevButton.enable():n.historyNav.prevButton.disable(),e.nextStatus?n.historyNav.nextButton.enable():n.historyNav.nextButton.disable()}))},pe=()=>{const e=document.createElement("button");return e.className="modai-generate",e.innerText="✦",e.type="button",e.title="Generate using AI",e},ge=e=>{const t=document.createElement("button");t.type="button",t.title="Previous Version",t.className="modai-history_prev",t.disable=()=>{t.disabled=!0},t.enable=()=>{t.disabled=!1},t.innerHTML="prev",t.addEventListener("click",(()=>{e.prev()}));const n=document.createElement("button");n.type="button",n.title="Next Version",n.className="modai-history_next",n.disable=()=>{n.disabled=!0},n.enable=()=>{n.disabled=!1},n.innerHTML="next",n.addEventListener("click",(()=>{e.next()}));const o=document.createElement("span");o.update=(e,t)=>{o.innerText=`${e}/${t}`},o.innerText="";const a=document.createElement("span");return a.show=()=>{a.style.display="initial"},a.hide=()=>{a.style.display="none"},a.prevButton=t,a.nextButton=n,a.info=o,a.appendChild(t),a.appendChild(n),a.appendChild(o),a.hide(),t.disable(),n.disable(),a},me=e=>{const t=pe();return t.addEventListener("click",(()=>{le.localChat({key:e,field:e,overlay:!1,type:"text",availableTypes:["text","image"],resource:MODx.request.id})})),t},ue=(e,t)=>{const n=document.createElement("span"),o=pe();o.addEventListener("click",(async()=>{const n=de(e.el.dom);try{const e=await r.mgr.prompt.text({id:MODx.request.id,field:t});a.insert(e.content),n()}catch(e){n(),Ext.Msg.alert("Failed",_("modai.cmp.failed_try_again",{msg:e.message}))}})),n.appendChild(o);const a=d.init(t,ce,e.getValue(),{});a.cachedItem.context.els||(a.cachedItem.context.els=[]),a.cachedItem.context.els.push({field:e,wrapper:n});const i=ge(a);return n.appendChild(i),n.historyNav=i,n},he=(e,t,n)=>{const o=pe();return o.addEventListener("click",(()=>{le.localChat({key:t,field:t,type:"image",resource:MODx.request.id,image:{mediaSource:parseInt(e)||void 0},imageActions:{copy:!1,insert:(e,t)=>{n(e),t.api.closeModal()}}})})),o},fe=(e,t)=>{const n=Ext.getCmp(e);if(!n)return;const o=document.createElement("span"),a=pe();a.addEventListener("click",(async()=>{const e=de(n.el.dom);try{const n=await r.mgr.prompt.text({id:MODx.request.id,field:t},(e=>{i.insert(e.content,!0)}));i.insert(n.content),e()}catch(t){e(),Ext.Msg.alert("Failed",_("modai.cmp.failed_try_again",{msg:t.message}))}})),o.appendChild(a);const i=d.init(t,ce,n.getValue(),{});i.cachedItem.context.els||(i.cachedItem.context.els=[]),i.cachedItem.context.els.push({field:n,wrapper:o});const s=ge(i);o.appendChild(s),o.historyNav=s,n.label.appendChild(o)},ye=(e,t)=>{const n=Ext.getCmp(e.firstElementChild?.id),o=he(n.imageBrowser.source,t,(function(e){n.imageBrowser.setValue(e.ctx.url),n.onImageChange(e.ctx.url)})),a=pe();a.style.marginTop="6px",a.addEventListener("click",(async()=>{const e=n.imagePreview.el.dom,o=document.createElement("canvas"),a=o.getContext("2d");if(!a)return;o.width=e.width,o.height=e.height,a.drawImage(e,0,0);const i=o.toDataURL("image/png"),s=de(n.altTextField.items.items[0].el.dom);try{const e=await r.mgr.prompt.vision({image:i,field:t},(e=>{n.altTextField.items.items[0].setValue(e.content),n.altTextField.items.items[0].el.dom.scrollTop=n.altTextField.items.items[0].el.dom.scrollHeight,n.image.altTag=e.content,n.updateValue()}));n.altTextField.items.items[0].setValue(e.content),n.image.altTag=e.content,n.updateValue(),s()}catch(e){s(),Ext.Msg.alert("Failed",_("modai.cmp.failed_try_again",{msg:e.message}))}})),n.altTextField.el.dom.style.display="flex",n.altTextField.el.dom.style.justifyItems="center",n.altTextField.el.dom.style.alignItems="center",n.el.dom.parentElement.parentElement.parentElement.querySelector("label").appendChild(o),n.altTextField.el.dom.appendChild(a)};Ext.onReady((function(){Ext.defer((function(){(()=>{const e={pagetitle:["modx-resource-pagetitle"],longtitle:["modx-resource-longtitle","seosuite-longtitle"],introtext:["modx-resource-introtext"],description:["modx-resource-description","seosuite-description"],content:["modx-resource-content"]};for(const t of modAI?.resourceFields||[])e[t]&&("content"!==t?e[t].forEach((e=>{fe(e,`res.${t}`)})):Ext.getCmp("modx-resource-content").el.dom.querySelector("label").appendChild(me("res.content")))})(),(()=>{const e=Ext.getCmp("modx-panel-resource").getForm();for(const[t,n]of modAI?.tvs||[]){const o=Ext.get(`tv${t}-tr`);if(!o)continue;const a=e.findField(`tv${t}`),i=`tv.${n}`;if(a){if("textfield"===a.xtype||"textarea"===a.xtype){const e=MODx.config[`modai.tv.${n}.text.prompt`],t=o.dom.querySelector("label");if(!t)return;e?t.appendChild(ue(a,i)):t.appendChild(me(i))}if("modx-panel-tv-image"===a.xtype){const e=he(a.source,i,(function(e){const t={relativeUrl:e.ctx.url,url:e.ctx.url};a.items.items[1].fireEvent("select",t),a.fireEvent("select",t)})),t=o.dom.querySelector("label");if(!t)return;t.appendChild(e)}}else{const e=o.dom.querySelector(".imageplus-panel-input");e&&ye(e,i)}}})()}),500)}));const xe={};return t})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBTVMsWUFBWTZRLEdBQXVCaEksRUFBTzZILElBRWhEblIsRUFBTVMsWUFBWXlRLEdBQXFCQyxHQUUvQyxDQUVBLEdBQW9CLHdCQUFoQjdILEVBQU00SyxNQUFpQyxDQUN2QyxNQUFNdEMsRUFBWUYsR0FDZHBJLEVBQU0rSSxPQUNObEIsR0FDQSxTQUFTOVQsR0FDRCxNQUFNOFcsRUFBWSxDQUNkQyxZQUFhL1csRUFBSVYsSUFBSWxJLElBQ3JCQSxJQUFLNEksRUFBSVYsSUFBSWxJLEtBR2pCNlUsRUFBTXlELE1BQU1BLE1BQU0sR0FBR3FELFVBQVUsU0FBVStELEdBQ3pDN0ssRUFBTThHLFVBQVUsU0FBVStELEVBQ2xDLElBR0VuVSxFQUFRdVAsRUFBUWMsSUFBSWxJLGNBQWMsU0FDeEMsSUFBS25JLEVBQU8sT0FFWkEsRUFBTVMsWUFBWW1SLEVBQ3RCLENBbkNBLEtBTkEsQ0FDSSxNQUFNSyxFQUFlMUMsRUFBUWMsSUFBSWxJLGNBQWMsMEJBQzNDOEosR0FDQUQsR0FBZ0JDLEVBQWNkLEVBR3RDLENBb0NKLEdBcUNRa0QsRUFDSixHQUFHLElBQ1AsSUNyYUcsTUFBTSxHQUFTLENBQUMsRSIsInNvdXJjZXMiOlsid2VicGFjazovL21vZEFJL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9tb2RBSS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9tb2RBSS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vbW9kQUkvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9tb2RBSS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL21vZEFJLy4vX2J1aWxkL2pzL3NyYy9leGVjdXRvci50cyIsIndlYnBhY2s6Ly9tb2RBSS8uL19idWlsZC9qcy9zcmMvaGlzdG9yeS50cyIsIndlYnBhY2s6Ly9tb2RBSS8uL19idWlsZC9qcy9zcmMvdWkvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vbW9kQUkvLi9fYnVpbGQvanMvc3JjL2NoYXRIaXN0b3J5LnRzIiwid2VicGFjazovL21vZEFJLy4vX2J1aWxkL2pzL3NyYy91aS9sb2NhbENoYXQvYWN0aW9uQnV0dG9uLnRzIiwid2VicGFjazovL21vZEFJLy4vX2J1aWxkL2pzL3NyYy91aS9sb2NhbENoYXQvc3R5bGVzLnRzIiwid2VicGFjazovL21vZEFJLy4vX2J1aWxkL2pzL3NyYy91aS9sb2NhbENoYXQvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vbW9kQUkvLi9fYnVpbGQvanMvc3JjL3VpL2xvY2FsQ2hhdC9pZnJhbWUudHMiLCJ3ZWJwYWNrOi8vbW9kQUkvLi9fYnVpbGQvanMvc3JjL3VpL292ZXJsYXkudHMiLCJ3ZWJwYWNrOi8vbW9kQUkvLi9fYnVpbGQvanMvc3JjL3VpL2luZGV4LnRzIiwid2VicGFjazovL21vZEFJLy4vX2J1aWxkL2pzL3NyYy9yZXNvdXJjZS50cyIsIndlYnBhY2s6Ly9tb2RBSS8uL19idWlsZC9qcy9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wibW9kQUlcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wibW9kQUlcIl0gPSBmYWN0b3J5KCk7XG59KShzZWxmLCAoKSA9PiB7XG5yZXR1cm4gIiwiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJ0eXBlIFNlcnZpY2VUeXBlID0gJ2NoYXRncHQnIHwgJ2NsYXVkZScgfCAnZ2VtaW5pJztcbnR5cGUgQnVmZmVyTW9kZSA9ICdidWZmZXJlZCcgfCAnc3RyZWFtJztcblxuZXhwb3J0IHR5cGUgU2VydmljZVJlc3BvbnNlID0gVGV4dERhdGEgfCBJbWFnZURhdGE7XG5cbnR5cGUgU2VydmljZUhhbmRsZXJzID0ge1xuICAgIGJ1ZmZlcmVkOiB7XG4gICAgICAgIGNoYXRncHQ6IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IChkYXRhOiBhbnkpID0+IFRleHREYXRhO1xuICAgICAgICAgICAgaW1hZ2U6IChkYXRhOiBhbnkpID0+IEltYWdlRGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgY2xhdWRlOiB7XG4gICAgICAgICAgICBjb250ZW50OiAoZGF0YTogYW55KSA9PiBUZXh0RGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgZ2VtaW5pOiB7XG4gICAgICAgICAgICBjb250ZW50OiAoZGF0YTogYW55KSA9PiBUZXh0RGF0YTtcbiAgICAgICAgICAgIGltYWdlOiAoZGF0YTogYW55KSA9PiBJbWFnZURhdGE7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBzdHJlYW06IHtcbiAgICAgICAgY2hhdGdwdDoge1xuICAgICAgICAgICAgY29udGVudDogKG5ld0RhdGE6IGFueSwgY3VycmVudERhdGE6IFRleHREYXRhKSA9PiBUZXh0RGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgY2xhdWRlOiB7XG4gICAgICAgICAgICBjb250ZW50OiAobmV3RGF0YTogYW55LCBjdXJyZW50RGF0YTogVGV4dERhdGEpID0+IFRleHREYXRhO1xuICAgICAgICB9O1xuICAgICAgICBnZW1pbmk6IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IChuZXdEYXRhOiBhbnksIGN1cnJlbnREYXRhOiBUZXh0RGF0YSkgPT4gVGV4dERhdGE7XG4gICAgICAgIH07XG4gICAgfTtcbn1cblxudHlwZSBGb3JFeGVjdXRvciA9IHtcbiAgICB1cmw6IHN0cmluZztcbiAgICBib2R5OiBzdHJpbmc7XG4gICAgc2VydmljZTogc3RyaW5nO1xuICAgIGhlYWRlcnM6IEhlYWRlcnNJbml0O1xuICAgIHBhcnNlcjogc3RyaW5nO1xuICAgIHN0cmVhbTogYm9vbGVhbjtcbn07XG5cbnR5cGUgRXhlY3V0b3JEYXRhID0ge1xuICAgIGZvckV4ZWN1dG9yOiBGb3JFeGVjdXRvcjtcbn0gfCBzdHJpbmc7XG5cbmV4cG9ydCB0eXBlIFRleHRQcm9tcHQgPSB7dHlwZTogJ3RleHQnLCB2YWx1ZTogc3RyaW5nfVxuZXhwb3J0IHR5cGUgSW1hZ2VQcm9tcHQgPSB7dHlwZTogJ2ltYWdlJywgdmFsdWU6IHN0cmluZ31cblxuZXhwb3J0IHR5cGUgUHJvbXB0ID0gc3RyaW5nIHwgW1RleHRQcm9tcHQsIC4uLkltYWdlUHJvbXB0W11dO1xuXG50eXBlIEZyZWVUZXh0UGFyYW1zID0ge1xuICAgIHByb21wdDogUHJvbXB0O1xuICAgIGZpZWxkPzogc3RyaW5nO1xuICAgIGNvbnRleHQ/OiBzdHJpbmc7XG4gICAgbmFtZXNwYWNlPzogc3RyaW5nO1xuICAgIG1lc3NhZ2VzOiB7cm9sZTogc3RyaW5nLCBjb250ZW50OiBQcm9tcHR9W107XG59XG5cbnR5cGUgVGV4dFBhcmFtcyA9IHtcbiAgICBmaWVsZD86IHN0cmluZztcbiAgICBuYW1lc3BhY2U/OiBzdHJpbmc7XG4gICAgaWQ6IHN0cmluZyB8IG51bWJlcjtcbn1cblxudHlwZSBWaXNpb25QYXJhbXMgPSB7XG4gICAgZmllbGQ/OiBzdHJpbmc7XG4gICAgbmFtZXNwYWNlPzogc3RyaW5nO1xuICAgIGltYWdlOiBzdHJpbmc7XG59XG5cbnR5cGUgSW1hZ2VQYXJhbXMgPSB7XG4gICAgcHJvbXB0OiBzdHJpbmc7XG4gICAgZmllbGQ/OiBzdHJpbmc7XG4gICAgbmFtZXNwYWNlPzogc3RyaW5nO1xufVxuXG50eXBlIERvd25sb2FkSW1hZ2VQYXJhbXMgPSB7XG4gICAgdXJsOiBzdHJpbmdcbiAgICBmaWVsZD86IHN0cmluZztcbiAgICBuYW1lc3BhY2U/OiBzdHJpbmc7XG4gICAgcmVzb3VyY2U/OiBzdHJpbmcgfCBudW1iZXI7XG4gICAgbWVkaWFTb3VyY2U/OiBzdHJpbmcgfCBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBUZXh0RGF0YSA9IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGNvbnRlbnQ6IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgSW1hZ2VEYXRhID0ge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgdXJsOiBzdHJpbmc7XG59XG5cbnR5cGUgQ2h1bmtTdHJlYW08RCA9IHVua25vd24+ID0gKGRhdGE6IEQpID0+IHZvaWQ7XG5cbmNvbnN0IHNlcnZpY2VzOiBTZXJ2aWNlSGFuZGxlcnMgPSB7XG4gICAgYnVmZmVyZWQ6IHtcbiAgICAgICAgY2hhdGdwdDoge1xuICAgICAgICAgICAgY29udGVudDogKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZGF0YT8uY2hvaWNlcz8uWzBdPy5tZXNzYWdlPy5jb250ZW50O1xuXG4gICAgICAgICAgICAgICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihfKCdtb2RhaS5jbXAuZmFpbGVkX3JlcXVlc3QnKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBkYXRhLmlkO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGltYWdlOiAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB1cmwgPSBkYXRhPy5kYXRhPy5bMF0/LnVybDtcblxuICAgICAgICAgICAgICAgIGlmICghdXJsKSB7XG4gICAgICAgICAgICAgICAgICAgdXJsID0gZGF0YT8uZGF0YT8uWzBdPy5iNjRfanNvbjtcblxuICAgICAgICAgICAgICAgICAgIGlmICghdXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihfKCdtb2RhaS5jbXAuZmFpbGVkX3JlcXVlc3QnKSk7XG4gICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHVybCA9IGBkYXRhOmltYWdlL3BuZztiYXNlNjQsJHt1cmx9YFxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBgY2hhdGdwdC0ke0RhdGUubm93KCl9LSR7TWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKjEwMDApfWAsXG4gICAgICAgICAgICAgICAgICAgIHVybFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2xhdWRlOiB7XG4gICAgICAgICAgICBjb250ZW50OiAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkYXRhPy5jb250ZW50Py5bMF0/LnRleHQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKF8oJ21vZGFpLmNtcC5mYWlsZWRfcmVxdWVzdCcpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IGRhdGEuaWQ7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGdlbWluaToge1xuICAgICAgICAgICAgY29udGVudDogKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZGF0YT8uY2FuZGlkYXRlcz8uWzBdPy5jb250ZW50Py5wYXJ0cz8uWzBdPy50ZXh0O1xuXG4gICAgICAgICAgICAgICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihfKCdtb2RhaS5jbXAuZmFpbGVkX3JlcXVlc3QnKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGBnZW1pbmktJHtEYXRlLm5vdygpfS0ke01hdGgucm91bmQoTWF0aC5yYW5kb20oKSoxMDAwKX1gLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpbWFnZTogKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlNjQgPSBkYXRhPy5wcmVkaWN0aW9ucz8uWzBdPy5ieXRlc0Jhc2U2NEVuY29kZWQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXygnbW9kYWkuY21wLmZhaWxlZF9yZXF1ZXN0JykpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBgZ2VtaW5pLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkqMTAwMCl9YCxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBgZGF0YTppbWFnZS9wbmc7YmFzZTY0LCR7YmFzZTY0fWBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHN0cmVhbToge1xuICAgICAgICBjaGF0Z3B0OiB7XG4gICAgICAgICAgICBjb250ZW50OiAobmV3RGF0YSwgY3VycmVudERhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50Q29udGVudCA9IGN1cnJlbnREYXRhPy5jb250ZW50ID8/ICcnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBuZXdEYXRhLmNob2ljZXNbMF0/LmRlbHRhPy5jb250ZW50IHx8ICcnO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudERhdGEsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBuZXdEYXRhLmlkLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBgJHtjdXJyZW50Q29udGVudH0ke2NvbnRlbnR9YFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNsYXVkZToge1xuICAgICAgICAgICAgY29udGVudDogKG5ld0RhdGEsIGN1cnJlbnREYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudENvbnRlbnQgPSBjdXJyZW50RGF0YT8uY29udGVudCA/PyAnJztcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBuZXdEYXRhLmRlbHRhPy50ZXh0IHx8ICcnO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudERhdGEsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGAke2N1cnJlbnRDb250ZW50fSR7Y29udGVudH1gXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZ2VtaW5pOiB7XG4gICAgICAgICAgICBjb250ZW50OiAobmV3RGF0YSwgY3VycmVudERhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50Q29udGVudCA9IGN1cnJlbnREYXRhPy5jb250ZW50ID8/ICcnO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IG5ld0RhdGEuY2FuZGlkYXRlc1swXT8uY29udGVudD8ucGFydHNbMF0/LnRleHQgfHwgJyc7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogYCR7Y3VycmVudENvbnRlbnR9JHtjb250ZW50fWBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbn07XG5cbmNvbnN0IGVycm9ySGFuZGxlciA9IGFzeW5jIChyZXM6IFJlc3BvbnNlKSA9PiB7XG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGlmIChkYXRhPy5lcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEuZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH1gKTtcbiAgICB9XG59XG5cbmNvbnN0IGhhbmRsZVN0cmVhbSA9IGFzeW5jIChyZXM6IFJlc3BvbnNlLCBzZXJ2aWNlOiBzdHJpbmcsIHBhcnNlcjogJ2NvbnRlbnQnLCBvbkNodW5rU3RyZWFtPzogQ2h1bmtTdHJlYW08VGV4dERhdGE+LCBzaWduYWw/OiBBYm9ydFNpZ25hbCk6IFByb21pc2U8VGV4dERhdGE+ID0+IHtcbiAgICBpZiAoIXJlcy5ib2R5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignZmFpbGVkJyk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVhZGVyID0gcmVzLmJvZHkuZ2V0UmVhZGVyKCk7XG4gICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKTtcbiAgICBsZXQgYnVmZmVyID0gJyc7XG4gICAgbGV0IGN1cnJlbnREYXRhOiBUZXh0RGF0YSA9IHtcbiAgICAgICAgaWQ6IGAke3NlcnZpY2V9LSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkqMTAwMCl9YCxcbiAgICAgICAgY29udGVudDogJycsXG4gICAgfTtcblxuXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgaWYgKHNpZ25hbCAmJiBzaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7ZG9uZSwgdmFsdWV9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgaWYgKGRvbmUpIGJyZWFrO1xuXG4gICAgICAgIGNvbnN0IGNodW5rID0gZGVjb2Rlci5kZWNvZGUodmFsdWUsIHtzdHJlYW06IHRydWV9KTtcblxuICAgICAgICBpZiAoc2VydmljZSA9PT0gJ2dlbWluaScpIHtcbiAgICAgICAgICAgIGNvbnN0IGpzb25MaW5lcyA9IGNodW5rLnRyaW0oKS5zcGxpdChcIixcXHJcXG5cIikubWFwKChsaW5lKSA9PiBsaW5lLnJlcGxhY2UoL15cXFt8XSQvZywgJycpKS5maWx0ZXIobGluZSA9PiBsaW5lLnRyaW0oKSAhPT0gJycpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGpzb25MaW5lcykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSBKU09OLnBhcnNlKGxpbmUpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGF0YSA9IHNlcnZpY2VzLnN0cmVhbVtzZXJ2aWNlXVtwYXJzZXJdKHBhcnNlZERhdGEsIGN1cnJlbnREYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9uQ2h1bmtTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2N1cnJlbnREYXRhJywgY3VycmVudERhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb25DaHVua1N0cmVhbShjdXJyZW50RGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VydmljZSA9PT0gJ2NoYXRncHQnKSB7XG4gICAgICAgICAgICBidWZmZXIgKz0gY2h1bms7XG5cbiAgICAgICAgICAgIGxldCBsYXN0TmV3bGluZUluZGV4ID0gMDtcbiAgICAgICAgICAgIGxldCBuZXdsaW5lSW5kZXg7XG5cbiAgICAgICAgICAgIHdoaWxlICgobmV3bGluZUluZGV4ID0gYnVmZmVyLmluZGV4T2YoJ1xcbicsIGxhc3ROZXdsaW5lSW5kZXgpKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lID0gYnVmZmVyLnNsaWNlKGxhc3ROZXdsaW5lSW5kZXgsIG5ld2xpbmVJbmRleCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIGxhc3ROZXdsaW5lSW5kZXggPSBuZXdsaW5lSW5kZXggKyAxO1xuXG4gICAgICAgICAgICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aCgnZGF0YTogJykpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGxpbmUuc2xpY2UoNik7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEgPT09ICdbRE9ORV0nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWREYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREYXRhID0gc2VydmljZXMuc3RyZWFtW3NlcnZpY2VdW3BhcnNlcl0ocGFyc2VkRGF0YSwgY3VycmVudERhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uQ2h1bmtTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNodW5rU3RyZWFtKGN1cnJlbnREYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1ZmZlciA9IGJ1ZmZlci5zbGljZShsYXN0TmV3bGluZUluZGV4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZXJ2aWNlID09PSAnY2xhdWRlJykge1xuICAgICAgICAgICAgYnVmZmVyICs9IGNodW5rO1xuXG4gICAgICAgICAgICBsZXQgbGFzdE5ld2xpbmVJbmRleCA9IDA7XG4gICAgICAgICAgICBsZXQgbmV3bGluZUluZGV4O1xuXG4gICAgICAgICAgICB3aGlsZSAoKG5ld2xpbmVJbmRleCA9IGJ1ZmZlci5pbmRleE9mKCdcXG4nLCBsYXN0TmV3bGluZUluZGV4KSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IGJ1ZmZlci5zbGljZShsYXN0TmV3bGluZUluZGV4LCBuZXdsaW5lSW5kZXgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBsYXN0TmV3bGluZUluZGV4ID0gbmV3bGluZUluZGV4ICsgMTtcblxuICAgICAgICAgICAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJ2RhdGE6ICcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBsaW5lLnNsaWNlKDYpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWREYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWREYXRhLnR5cGUgPT09ICdtZXNzYWdlX3N0YXJ0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREYXRhLmlkID0gcGFyc2VkRGF0YS5tZXNzYWdlLmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkRGF0YS50eXBlICE9PSAnY29udGVudF9ibG9ja19kZWx0YScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudERhdGEgPSBzZXJ2aWNlcy5zdHJlYW1bc2VydmljZV1bcGFyc2VyXShwYXJzZWREYXRhLCBjdXJyZW50RGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob25DaHVua1N0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2h1bmtTdHJlYW0oY3VycmVudERhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBidWZmZXIgPSBidWZmZXIuc2xpY2UobGFzdE5ld2xpbmVJbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY3VycmVudERhdGE7XG5cbn1cblxuY29uc3Qgc2VydmljZUV4ZWN1dG9yID0gYXN5bmMgPEQgZXh0ZW5kcyBTZXJ2aWNlUmVzcG9uc2U+KGRldGFpbHM6IEV4ZWN1dG9yRGF0YSwgb25DaHVua1N0cmVhbT86IENodW5rU3RyZWFtPEQ+LCBjb250cm9sbGVyPzogQWJvcnRDb250cm9sbGVyKTogUHJvbWlzZTxEPiA9PiB7XG4gICAgaWYgKHR5cGVvZiBkZXRhaWxzICE9PSAnb2JqZWN0JyB8fCAhZGV0YWlscy5mb3JFeGVjdXRvcikge1xuICAgICAgICByZXR1cm4gZGV0YWlscyBhcyB1bmtub3duIGFzIEQ7XG4gICAgfVxuXG4gICAgY29uc3QgZXhlY3V0b3JEZXRhaWxzID0gZGV0YWlscy5mb3JFeGVjdXRvcjtcblxuICAgIGNvbnRyb2xsZXIgPSAhY29udHJvbGxlciA/IG5ldyBBYm9ydENvbnRyb2xsZXIoKSA6IGNvbnRyb2xsZXI7XG4gICAgY29uc3Qgc2lnbmFsID0gY29udHJvbGxlci5zaWduYWw7XG5cbiAgICBjb25zdCBjYWxsU2VydmljZSA9IGFzeW5jIChkZXRhaWxzOiBGb3JFeGVjdXRvcikgPT4ge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChkZXRhaWxzLnVybCwge1xuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBkZXRhaWxzLmJvZHksXG4gICAgICAgICAgICBoZWFkZXJzOiBkZXRhaWxzLmhlYWRlcnNcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXdhaXQgZXJyb3JIYW5kbGVyKHJlcyk7XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICAgICAgaWYgKGRhdGEuZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLmVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuXG4gICAgY29uc3QgY2FsbFN0cmVhbVNlcnZpY2UgPSBhc3luYyAoZGV0YWlsczogRm9yRXhlY3V0b3IpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ2NhbGxpbmcgc2VydmljZSBhcyBzdHJlYW0nKTtcbiAgICAgICAgaWYgKGV4ZWN1dG9yRGV0YWlscy5wYXJzZXIgIT09ICdjb250ZW50Jykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKF8oJ21vZGFpLmNtcC5zZXJ2aWNlX3Vuc3VwcG9ydGVkJykpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goZGV0YWlscy51cmwsIHtcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgYm9keTogZGV0YWlscy5ib2R5LFxuICAgICAgICAgICAgaGVhZGVyczogZGV0YWlscy5oZWFkZXJzXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF3YWl0IGVycm9ySGFuZGxlcihyZXMpO1xuXG4gICAgICAgIHJldHVybiBoYW5kbGVTdHJlYW0ocmVzLCBleGVjdXRvckRldGFpbHMuc2VydmljZSwgZXhlY3V0b3JEZXRhaWxzLnBhcnNlciwgb25DaHVua1N0cmVhbSBhcyBDaHVua1N0cmVhbTxUZXh0RGF0YT4pO1xuICAgIH1cblxuICAgIGlmICghZXhlY3V0b3JEZXRhaWxzLnNlcnZpY2UgfHwgIWV4ZWN1dG9yRGV0YWlscy5wYXJzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKF8oJ21vZGFpLmNtcC5zZXJ2aWNlX3JlcXVpcmVkJykpO1xuICAgIH1cblxuICAgIGlmICghc2VydmljZXNbZXhlY3V0b3JEZXRhaWxzLnN0cmVhbSA/ICdzdHJlYW0nIDogJ2J1ZmZlcmVkJyBhcyBCdWZmZXJNb2RlXT8uW2V4ZWN1dG9yRGV0YWlscy5zZXJ2aWNlIGFzIFNlcnZpY2VUeXBlXT8uW2V4ZWN1dG9yRGV0YWlscy5wYXJzZXIgYXMga2V5b2YgU2VydmljZUhhbmRsZXJzW0J1ZmZlck1vZGVdW1NlcnZpY2VUeXBlXV0pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKF8oJ21vZGFpLmNtcC5zZXJ2aWNlX3Vuc3VwcG9ydGVkJykpO1xuICAgIH1cblxuICAgIGlmIChleGVjdXRvckRldGFpbHMuc3RyZWFtKSB7XG4gICAgICAgIHJldHVybiBjYWxsU3RyZWFtU2VydmljZShleGVjdXRvckRldGFpbHMpIGFzIFByb21pc2U8RD47XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGNhbGxTZXJ2aWNlKGV4ZWN1dG9yRGV0YWlscyk7XG4gICAgcmV0dXJuIHNlcnZpY2VzWydidWZmZXJlZCddW2V4ZWN1dG9yRGV0YWlscy5zZXJ2aWNlIGFzIFNlcnZpY2VUeXBlXVtleGVjdXRvckRldGFpbHMucGFyc2VyIGFzIGtleW9mIFNlcnZpY2VIYW5kbGVyc1snYnVmZmVyZWQnXVtTZXJ2aWNlVHlwZV1dKGRhdGEpIGFzIEQ7XG59XG5cbmNvbnN0IG1vZHhGZXRjaCA9IGFzeW5jIDxSPihhY3Rpb246IHN0cmluZywgcGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke21vZEFJLmFwaVVSTH0/YWN0aW9uPSR7YWN0aW9ufWAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBhcmFtcyksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGlmIChkYXRhLmVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5lcnJvci5tZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLmRldGFpbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGF3YWl0IHJlcy5qc29uKCkgYXMgUjtcbn1cblxuY29uc3QgYWlGZXRjaCA9IGFzeW5jIDxEIGV4dGVuZHMgU2VydmljZVJlc3BvbnNlPihhY3Rpb246IHN0cmluZywgcGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiwgb25DaHVua1N0cmVhbT86IENodW5rU3RyZWFtPEQ+LCBjb250cm9sbGVyPzogQWJvcnRDb250cm9sbGVyKTogUHJvbWlzZTxEPiA9PiB7XG4gICAgY29udHJvbGxlciA9ICFjb250cm9sbGVyID8gbmV3IEFib3J0Q29udHJvbGxlcigpIDogY29udHJvbGxlcjtcbiAgICBjb25zdCBzaWduYWwgPSBjb250cm9sbGVyLnNpZ25hbDtcblxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke21vZEFJLmFwaVVSTH0/YWN0aW9uPSR7YWN0aW9ufWAsIHtcbiAgICAgICAgc2lnbmFsLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGFyYW1zKSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgaWYgKGRhdGEuZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLmVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEuZGV0YWlsKTtcbiAgICB9XG5cbiAgICBjb25zdCBzZXJ2aWNlID0gcmVzLmhlYWRlcnMuZ2V0KCd4LW1vZGFpLXNlcnZpY2UnKSA/PyAnY2hhdGdwdCc7XG4gICAgY29uc3QgcGFyc2VyID0gcmVzLmhlYWRlcnMuZ2V0KCd4LW1vZGFpLXBhcnNlcicpID8/ICdjb250ZW50JztcbiAgICBjb25zdCBzdHJlYW0gPSBwYXJzZUludChyZXMuaGVhZGVycy5nZXQoJ3gtbW9kYWktc3RyZWFtJykgPz8gJzAnKSA9PT0gMTtcbiAgICBjb25zdCBwcm94eSA9IHBhcnNlSW50KHJlcy5oZWFkZXJzLmdldCgneC1tb2RhaS1wcm94eScpID8/ICcwJykgPT09IDE7XG5cbiAgICBpZiAoIXByb3h5KSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICByZXR1cm4gc2VydmljZUV4ZWN1dG9yPEQ+KGRhdGEsIG9uQ2h1bmtTdHJlYW0sIGNvbnRyb2xsZXIpO1xuICAgIH1cblxuICAgIGlmICghc2VydmljZSB8fCAhcGFyc2VyKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKF8oJ21vZGFpLmNtcC5zZXJ2aWNlX3JlcXVpcmVkJykpO1xuICAgIH1cblxuICAgIGlmICghc2VydmljZXNbc3RyZWFtID8gJ3N0cmVhbScgOiAnYnVmZmVyZWQnIGFzIEJ1ZmZlck1vZGVdPy5bc2VydmljZSBhcyBTZXJ2aWNlVHlwZV0/LltwYXJzZXIgYXMga2V5b2YgU2VydmljZUhhbmRsZXJzW0J1ZmZlck1vZGVdW1NlcnZpY2VUeXBlXV0pIHtcbiAgICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXygnbW9kYWkuY21wLnNlcnZpY2VfdW5zdXBwb3J0ZWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKCFzdHJlYW0pIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIHJldHVybiBzZXJ2aWNlc1snYnVmZmVyZWQnXVtzZXJ2aWNlIGFzIFNlcnZpY2VUeXBlXVtwYXJzZXIgYXMga2V5b2YgU2VydmljZUhhbmRsZXJzWydidWZmZXJlZCddW1NlcnZpY2VUeXBlXV0oZGF0YSkgYXMgRDtcbiAgICB9XG5cbiAgICBpZiAocGFyc2VyICE9PSAnY29udGVudCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKF8oJ21vZGFpLmNtcC5zZXJ2aWNlX3Vuc3VwcG9ydGVkJykpO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCBoYW5kbGVTdHJlYW0ocmVzLCBzZXJ2aWNlLCBwYXJzZXIsIG9uQ2h1bmtTdHJlYW0gYXMgQ2h1bmtTdHJlYW08VGV4dERhdGE+LCBzaWduYWwpIGFzIEQ7XG59XG5cbmV4cG9ydCBjb25zdCBleGVjdXRvciA9IHtcbiAgICBtZ3I6IHtcbiAgICAgICAgZG93bmxvYWQ6IHtcbiAgICAgICAgICAgIGltYWdlOiBhc3luYyAocGFyYW1zOiBEb3dubG9hZEltYWdlUGFyYW1zKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IG1vZHhGZXRjaDx7dXJsOiBzdHJpbmc7IGZ1bGxVcmw6IHN0cmluZ30+KCdEb3dubG9hZFxcXFxJbWFnZScsIHBhcmFtcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHByb21wdDoge1xuICAgICAgICAgICAgZnJlZVRleHQ6IGFzeW5jIChwYXJhbXM6IEZyZWVUZXh0UGFyYW1zLCBvbkNodW5rU3RyZWFtPzogQ2h1bmtTdHJlYW08VGV4dERhdGE+LCBjb250cm9sbGVyPzogQWJvcnRDb250cm9sbGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFpRmV0Y2goJ1Byb21wdFxcXFxGcmVlVGV4dCcsIHBhcmFtcywgb25DaHVua1N0cmVhbSwgY29udHJvbGxlcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGV4dDogYXN5bmMgKHBhcmFtczogVGV4dFBhcmFtcywgb25DaHVua1N0cmVhbT86IENodW5rU3RyZWFtPFRleHREYXRhPiwgY29udHJvbGxlcj86IEFib3J0Q29udHJvbGxlcikgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBhaUZldGNoKCdQcm9tcHRcXFxcVGV4dCcsIHBhcmFtcywgb25DaHVua1N0cmVhbSwgY29udHJvbGxlcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmlzaW9uOiBhc3luYyAocGFyYW1zOiBWaXNpb25QYXJhbXMsIG9uQ2h1bmtTdHJlYW0/OiBDaHVua1N0cmVhbTxUZXh0RGF0YT4sIGNvbnRyb2xsZXI/OiBBYm9ydENvbnRyb2xsZXIpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWlGZXRjaCgnUHJvbXB0XFxcXFZpc2lvbicsIHBhcmFtcywgb25DaHVua1N0cmVhbSwgY29udHJvbGxlcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW1hZ2U6IGFzeW5jIChwYXJhbXM6IEltYWdlUGFyYW1zLCBjb250cm9sbGVyPzogQWJvcnRDb250cm9sbGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFpRmV0Y2g8SW1hZ2VEYXRhPignUHJvbXB0XFxcXEltYWdlJywgcGFyYW1zLCB1bmRlZmluZWQsIGNvbnRyb2xsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4iLCJ0eXBlIENhY2hlPEMgPSB1bmtub3duPiA9IHtcbiAgICB2aXNpYmxlOiBudW1iZXI7XG4gICAgdmFsdWVzOiBzdHJpbmdbXTtcbiAgICBjb250ZXh0OiBDO1xuICAgIHN5bmNVST86IChkYXRhOiBEYXRhT3V0cHV0PEM+LCBub1N0b3JlPzogYm9vbGVhbikgPT4gdm9pZDtcbn1cblxuZXhwb3J0IHR5cGUgRGF0YU91dHB1dDxDID0gdW5rbm93bj4gPSB7XG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBuZXh0U3RhdHVzOiBib29sZWFuLFxuICAgIHByZXZTdGF0dXM6IGJvb2xlYW4sXG4gICAgY3VycmVudDogbnVtYmVyLFxuICAgIHRvdGFsOiBudW1iZXIsXG4gICAgY29udGV4dDogQyxcbn1cblxuY29uc3QgX2NhY2hlOiBSZWNvcmQ8c3RyaW5nLCBDYWNoZT4gPSB7fTtcblxuZXhwb3J0IGNvbnN0IGhpc3RvcnkgPSB7XG4gICAgX2Zvcm1hdE91dHB1dChrZXk6IHN0cmluZywgdmFsdWU/OiBzdHJpbmcpOiBEYXRhT3V0cHV0IHtcbiAgICAgICAgY29uc3QgY2FjaGVkSXRlbSA9IF9jYWNoZVtrZXldO1xuXG4gICAgICAgIGNvbnN0IHByZXZTdGF0dXMgPSAoY2FjaGVkSXRlbS52aXNpYmxlID4gMCk7XG4gICAgICAgIGNvbnN0IG5leHRTdGF0dXMgPSAoY2FjaGVkSXRlbS52aXNpYmxlICE9PSBjYWNoZWRJdGVtLnZhbHVlcy5sZW5ndGggLSAxKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IChjYWNoZWRJdGVtLnZhbHVlc1tjYWNoZWRJdGVtLnZpc2libGVdID8/IG51bGwpLFxuICAgICAgICAgICAgbmV4dFN0YXR1cyxcbiAgICAgICAgICAgIHByZXZTdGF0dXMsXG4gICAgICAgICAgICBjdXJyZW50OiBjYWNoZWRJdGVtLnZpc2libGUgKyAxLFxuICAgICAgICAgICAgdG90YWw6IGNhY2hlZEl0ZW0udmFsdWVzLmxlbmd0aCxcbiAgICAgICAgICAgIGNvbnRleHQ6IGNhY2hlZEl0ZW0uY29udGV4dCxcbiAgICAgICAgfVxuICAgIH0sXG4gICAgaW5zZXJ0KGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBub1N0b3JlOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgY2FjaGVkSXRlbSA9IF9jYWNoZVtrZXldO1xuXG4gICAgICAgIGlmICghbm9TdG9yZSkge1xuICAgICAgICAgICAgY2FjaGVkSXRlbS52aXNpYmxlID0gY2FjaGVkSXRlbS52YWx1ZXMucHVzaCh2YWx1ZSkgLSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gdGhpcy5fZm9ybWF0T3V0cHV0KGtleSwgdmFsdWUpO1xuICAgICAgICBpZiAodHlwZW9mIGNhY2hlZEl0ZW0uc3luY1VJID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRJdGVtLnN5bmNVSShvdXRwdXQsIG5vU3RvcmUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9LFxuICAgIG5leHQoa2V5OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgY2FjaGVkSXRlbSA9IF9jYWNoZVtrZXldO1xuXG4gICAgICAgIGlmIChjYWNoZWRJdGVtLnZpc2libGUgPT09IGNhY2hlZEl0ZW0udmFsdWVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9mb3JtYXRPdXRwdXQoa2V5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhY2hlZEl0ZW0udmlzaWJsZSsrO1xuXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHRoaXMuX2Zvcm1hdE91dHB1dChrZXkpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY2FjaGVkSXRlbS5zeW5jVUkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZEl0ZW0uc3luY1VJKG91dHB1dCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH0sXG4gICAgcHJldihrZXk6IHN0cmluZykge1xuICAgICAgICBjb25zdCBjYWNoZWRJdGVtID0gX2NhY2hlW2tleV07XG5cbiAgICAgICAgaWYgKGNhY2hlZEl0ZW0udmlzaWJsZSA8PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZm9ybWF0T3V0cHV0KGtleSk7XG4gICAgICAgIH1cblxuICAgICAgICBjYWNoZWRJdGVtLnZpc2libGUtLTtcblxuICAgICAgICBjb25zdCBvdXRwdXQgPSB0aGlzLl9mb3JtYXRPdXRwdXQoa2V5KTtcblxuICAgICAgICBpZiAodHlwZW9mIGNhY2hlZEl0ZW0uc3luY1VJID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRJdGVtLnN5bmNVSShvdXRwdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9LFxuICAgIGluaXQ8Qz4oa2V5OiBzdHJpbmcsIHN5bmNVST86IChkYXRhOiBEYXRhT3V0cHV0PEM+LCBub1N0b3JlPzogYm9vbGVhbikgPT4gdm9pZCwgaW5pdFZhbHVlPzogc3RyaW5nLCBjb250ZXh0PzogQykge1xuICAgICAgICBpZiAoIV9jYWNoZVtrZXldKSB7XG4gICAgICAgICAgICBfY2FjaGVba2V5XSA9IHtcbiAgICAgICAgICAgICAgICB2aXNpYmxlOiAtMSxcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIF9jYWNoZVtrZXldLnN5bmNVSSA9IHN5bmNVSTtcblxuICAgICAgICBpZiAoaW5pdFZhbHVlKSB7XG4gICAgICAgICAgICBfY2FjaGVba2V5XS52YWx1ZXMgPSBbaW5pdFZhbHVlXTtcbiAgICAgICAgICAgIF9jYWNoZVtrZXldLnZpc2libGUgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNhY2hlZEl0ZW06IF9jYWNoZVtrZXldIGFzIENhY2hlPEM+LFxuICAgICAgICAgICAgZ2V0RGF0YTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9mb3JtYXRPdXRwdXQoa2V5KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRBbGw6ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NhY2hlW2tleV0udmFsdWVzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN5bmNVSTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgX2NhY2hlW2tleV0uc3luY1VJID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIF9jYWNoZVtrZXldLnN5bmNVSSh0aGlzLl9mb3JtYXRPdXRwdXQoa2V5KSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpbnNlcnQ6ICh2YWx1ZTogc3RyaW5nLCBub1N0b3JlOiBib29sZWFuID0gZmFsc2UpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbnNlcnQoa2V5LCB2YWx1ZSwgbm9TdG9yZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbmV4dDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5leHQoa2V5KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcmV2OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJldihrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn07XG4iLCJleHBvcnQgY29uc3QgYXBwbHlTdHlsZXMgPSAoZWxlbWVudDogSFRNTEVsZW1lbnQsIHN0eWxlT2JqOiBQYXJ0aWFsPENTU1N0eWxlRGVjbGFyYXRpb24+KSA9PiB7XG4gICAgT2JqZWN0LmFzc2lnbihlbGVtZW50LnN0eWxlLCBzdHlsZU9iaik7XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVFbGVtZW50ID0gPEsgZXh0ZW5kcyBrZXlvZiBIVE1MRWxlbWVudFRhZ05hbWVNYXA+KHR5cGU6IEssIHN0eWxlT2JqPzogUGFydGlhbDxDU1NTdHlsZURlY2xhcmF0aW9uPiwgdGV4dENvbnRlbnQ6IHN0cmluZyA9ICcnKTogSFRNTEVsZW1lbnRUYWdOYW1lTWFwW0tdID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcblxuICAgIGlmIChzdHlsZU9iaikge1xuICAgICAgICBhcHBseVN0eWxlcyhlbGVtZW50LCBzdHlsZU9iaik7XG4gICAgfVxuXG4gICAgaWYgKHRleHRDb250ZW50KSB7XG4gICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0Q29udGVudDtcbiAgICB9XG5cbiAgICByZXR1cm4gZWxlbWVudDtcbn1cblxuZXhwb3J0IGNvbnN0IG5sVG9CciA9IChjb250ZW50OiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gLzxbXj5dKj4vZy50ZXN0KGNvbnRlbnQpID8gY29udGVudCA6IGNvbnRlbnQucmVwbGFjZSgvXFxyXFxufFxcbnxcXHIvZywgJzxicj4nKTtcbn1cbiIsImltcG9ydCB7UHJvbXB0fSBmcm9tIFwiLi9leGVjdXRvclwiO1xuXG5leHBvcnQgdHlwZSBNZXNzYWdlVHlwZSA9ICd0ZXh0JyB8ICdpbWFnZSc7XG5cbmV4cG9ydCB0eXBlIFVwZGF0YWJsZUhUTUxFbGVtZW50ID0gSFRNTEVsZW1lbnQgJiB7XG4gICAgdXBkYXRlPzogKG1zZzogTWVzc2FnZSkgPT4gdm9pZFxufTtcblxuZXhwb3J0IHR5cGUgTWVzc2FnZSA9IHtcbiAgICBjb250ZW50OiBQcm9tcHQ7XG4gICAgaWQ6IHN0cmluZztcbiAgICBoaWRkZW46IGJvb2xlYW47XG4gICAgcm9sZTogc3RyaW5nO1xuICAgIHR5cGU6IE1lc3NhZ2VUeXBlO1xuICAgIGVsPzogVXBkYXRhYmxlSFRNTEVsZW1lbnQ7XG4gICAgY3R4OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbn07XG5cbnR5cGUgTmFtZXNwYWNlID0ge1xuICAgIGhpc3Rvcnk6IE1lc3NhZ2VbXTtcbiAgICBpZFJlZjogUmVjb3JkPHN0cmluZywgTWVzc2FnZT47XG4gICAgb25BZGRNZXNzYWdlOiAobXNnOiBNZXNzYWdlKSA9PiBVcGRhdGFibGVIVE1MRWxlbWVudCB8IHVuZGVmaW5lZDtcbn07XG5cbmNvbnN0IF9uYW1lc3BhY2U6IFJlY29yZDxzdHJpbmcsIE5hbWVzcGFjZT4gPSB7fTtcblxuY29uc3QgUk9MRVMgPSB7XG4gICAgJ3VzZXInOiAndXNlcicsXG4gICAgJ2Fzc2lzdGFudCc6ICdhc3Npc3RhbnQnLFxufTtcblxuY29uc3QgYWRkTWVzc2FnZSA9IChrZXk6IHN0cmluZywgY29udGVudDogUHJvbXB0LCByb2xlOiBzdHJpbmcsIGlkOiBzdHJpbmcsIGhpZGRlbjogYm9vbGVhbiA9IGZhbHNlLCB0eXBlOiBNZXNzYWdlVHlwZSA9ICd0ZXh0JykgPT4ge1xuICAgIGNvbnN0IG5hbWVzcGFjZSA9IF9uYW1lc3BhY2Vba2V5XTtcbiAgICBpZiAoIW5hbWVzcGFjZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbXNnT2JqZWN0OiBNZXNzYWdlID0ge2NvbnRlbnQsIHJvbGUsIGlkLCBoaWRkZW4sIHR5cGUsIGN0eDoge319O1xuXG4gICAgY29uc3QgaW5kZXggPSBuYW1lc3BhY2UuaGlzdG9yeS5wdXNoKG1zZ09iamVjdCkgLSAxO1xuICAgIGlmIChpZCkge1xuICAgICAgICBuYW1lc3BhY2UuaWRSZWZbaWRdID0gbmFtZXNwYWNlLmhpc3RvcnlbaW5kZXhdO1xuICAgIH1cblxuICAgIG1zZ09iamVjdC5lbCA9IG5hbWVzcGFjZS5vbkFkZE1lc3NhZ2UobXNnT2JqZWN0KTtcbn1cblxuY29uc3QgdXBkYXRlTWVzc2FnZSA9IChrZXk6IHN0cmluZywgaWQ6IHN0cmluZywgY29udGVudDogc3RyaW5nLCB0eXBlOiBNZXNzYWdlVHlwZSA9ICd0ZXh0JykgPT4ge1xuICAgIGNvbnN0IG5hbWVzcGFjZSA9IF9uYW1lc3BhY2Vba2V5XTtcbiAgICBpZiAoIW5hbWVzcGFjZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFuYW1lc3BhY2UuaWRSZWZbaWRdKSB7XG4gICAgICAgIGFkZE1lc3NhZ2Uoa2V5LCBjb250ZW50LCBST0xFUy5hc3Npc3RhbnQsIGlkLCBmYWxzZSwgdHlwZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtc2cgPSBuYW1lc3BhY2UuaWRSZWZbaWRdO1xuICAgIG1zZy5jb250ZW50ID0gY29udGVudDtcblxuICAgIGlmIChtc2cuZWwgJiYgbXNnLmVsLnVwZGF0ZSkge1xuICAgICAgICBtc2cuZWwudXBkYXRlKG1zZyk7XG4gICAgfVxufVxuXG5jb25zdCBnZXRNZXNzYWdlID0gKGtleTogc3RyaW5nLCBpZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgbmFtZXNwYWNlID0gX25hbWVzcGFjZVtrZXldO1xuICAgIGlmICghbmFtZXNwYWNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gbmFtZXNwYWNlLmlkUmVmW2lkXTtcbn1cblxuZXhwb3J0IGNvbnN0IGNoYXRIaXN0b3J5ID0ge1xuICAgIGluaXQ6IChrZXk6IHN0cmluZywgb25BZGRNZXNzYWdlOiBOYW1lc3BhY2VbJ29uQWRkTWVzc2FnZSddKSA9PiB7XG4gICAgICAgIGlmICghX25hbWVzcGFjZVtrZXldKSB7XG4gICAgICAgICAgICBfbmFtZXNwYWNlW2tleV0gPSB7XG4gICAgICAgICAgICAgICAgaGlzdG9yeTogW10sXG4gICAgICAgICAgICAgICAgaWRSZWY6IHt9LFxuICAgICAgICAgICAgICAgIG9uQWRkTWVzc2FnZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBfbmFtZXNwYWNlW2tleV0ub25BZGRNZXNzYWdlID0gb25BZGRNZXNzYWdlO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhZGRVc2VyTWVzc2FnZTogKGNvbnRlbnQ6IFByb21wdCwgaWQ6IHN0cmluZywgaGlkZGVuPzogYm9vbGVhbiwgdHlwZTogTWVzc2FnZVR5cGUgPSAndGV4dCcpID0+IHtcbiAgICAgICAgICAgICAgICBhZGRNZXNzYWdlKGtleSwgY29udGVudCwgUk9MRVMudXNlciwgaWQsIGhpZGRlbiwgdHlwZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWRkQXNzaXN0YW50TWVzc2FnZTogKGNvbnRlbnQ6IHN0cmluZywgaWQ6IHN0cmluZywgdHlwZTogTWVzc2FnZVR5cGUgPSAndGV4dCcpID0+IHtcbiAgICAgICAgICAgICAgICBhZGRNZXNzYWdlKGtleSwgY29udGVudCwgUk9MRVMuYXNzaXN0YW50LCBpZCwgZmFsc2UsIHR5cGUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVwZGF0ZUFzc2lzdGFudE1lc3NhZ2U6IChpZDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcsIHR5cGU6IE1lc3NhZ2VUeXBlID0gJ3RleHQnKSA9PiB7XG4gICAgICAgICAgICAgICAgdXBkYXRlTWVzc2FnZShrZXksIGlkLCBjb250ZW50LCB0eXBlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRBc3Npc3RhbnRNZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRNZXNzYWdlKGtleSwgaWQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldE1lc3NhZ2VzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9uYW1lc3BhY2Vba2V5XS5oaXN0b3J5O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldE1lc3NhZ2VzSGlzdG9yeTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBfbmFtZXNwYWNlW2tleV0uaGlzdG9yeS5tYXAoKG0pID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IG0ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogbS5jb250ZW50LFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59O1xuIiwiaW1wb3J0IHthcHBseVN0eWxlcywgY3JlYXRlRWxlbWVudH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5pbXBvcnQgdHlwZSB7TWVzc2FnZX0gZnJvbSBcIi4uLy4uL2NoYXRIaXN0b3J5XCI7XG5pbXBvcnQgdHlwZSB7TW9kYWx9IGZyb20gXCIuL3R5cGVzXCI7XG5cbnR5cGUgQWN0aW9uQnV0dG9uQ29uZmlnID0ge1xuICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgaWNvbjoga2V5b2YgdHlwZW9mIGljb25zO1xuICAgIG1lc3NhZ2U6IE1lc3NhZ2U7XG4gICAgbG9hZGluZ1RleHQ/OiBzdHJpbmc7XG4gICAgY29tcGxldGVkVGV4dD86IHN0cmluZztcbiAgICBtb2RhbDogTW9kYWw7XG4gICAgY29tcGxldGVkVGV4dER1cmF0aW9uPzogbnVtYmVyO1xuICAgIG9uQ2xpY2s6IChtc2c6IE1lc3NhZ2UsIG1vZGFsOiBNb2RhbCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD47XG4gICAgZGlzYWJsZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgdHlwZSBBY3Rpb25CdXR0b24gPSBIVE1MQnV0dG9uRWxlbWVudCAmIHtcbiAgICBkaXNhYmxlPzogKCkgPT4gdm9pZDtcbiAgICBlbmFibGU/OiAoKSA9PiB2b2lkO1xufTtcblxuY29uc3QgZGVmYXVsdENvbmZpZzogUGFydGlhbDxBY3Rpb25CdXR0b25Db25maWc+ID0ge1xuICAgIGxvYWRpbmdUZXh0OiAnTG9hZGluZy4uLicsXG4gICAgY29tcGxldGVkVGV4dDogJ0NvbXBsZXRlZCEnLFxuICAgIGNvbXBsZXRlZFRleHREdXJhdGlvbjogMjAwMCxcbiAgICBkaXNhYmxlZDogZmFsc2UsXG59O1xuXG5jb25zdCBzdHlsZXMgPSB7XG4gICAgYWN0aW9uQnV0dG9uOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNlZGYyZjcnLFxuICAgICAgICBib3JkZXI6ICcxcHggc29saWQgI2NiZDVlMCcsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgIHBhZGRpbmc6ICczcHggOHB4JyxcbiAgICAgICAgZm9udFNpemU6ICcxMnB4JyxcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgIGNvbG9yOiAnIzRhNTU2OCcsXG4gICAgICAgIG9wYWNpdHk6ICcxJyxcbiAgICB9LFxuICAgIGljb246IHtcbiAgICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICAgIHdpZHRoOiAnMTRweCcsXG4gICAgICAgIGhlaWdodDogJzE0cHgnLFxuICAgICAgICBtYXJnaW5SaWdodDogJzVweCcsXG4gICAgICAgIGJhY2tncm91bmRTaXplOiAnY29udGFpbicsXG4gICAgICAgIGJhY2tncm91bmRSZXBlYXQ6ICduby1yZXBlYXQnLFxuICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246ICdjZW50ZXInXG4gICAgfSxcbiAgICBkaXNhYmxlZEJ1dHRvbjoge1xuICAgICAgICBvcGFjaXR5OiAnMC41JyxcbiAgICAgICAgY3Vyc29yOiAnbm90LWFsbG93ZWQnXG4gICAgfSxcbn07XG5cbmNvbnN0IGljb25zID0ge1xuICAgIGNvcHk6IFwiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz1cXCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcJyB3aWR0aD1cXCcxNlxcJyBoZWlnaHQ9XFwnMTZcXCcgZmlsbD1cXCclMjM0YTU1NjhcXCcgdmlld0JveD1cXCcwIDAgMTYgMTZcXCclM0UlM0NwYXRoIGQ9XFwnTTQgMS41SDNhMiAyIDAgMCAwLTIgMlYxNGEyIDIgMCAwIDAgMiAyaDEwYTIgMiAwIDAgMCAyLTJWMy41YTIgMiAwIDAgMC0yLTJoLTF2MWgxYTEgMSAwIDAgMSAxIDFWMTRhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWMy41YTEgMSAwIDAgMSAxLTFoMXYtMXpcXCcvJTNFJTNDcGF0aCBkPVxcJ005LjUgMWEuNS41IDAgMCAxIC41LjV2MWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXYtMWEuNS41IDAgMCAxIC41LS41aDN6bS0zLTFBMS41IDEuNSAwIDAgMCA1IDEuNXYxQTEuNSAxLjUgMCAwIDAgNi41IDRoM0ExLjUgMS41IDAgMCAwIDExIDIuNXYtMUExLjUgMS41IDAgMCAwIDkuNSAwaC0zelxcJy8lM0UlM0Mvc3ZnJTNFXCIsXG4gICAgaW5zZXJ0OiBcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9XFwnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXCcgd2lkdGg9XFwnMTZcXCcgaGVpZ2h0PVxcJzE2XFwnIGZpbGw9XFwnJTIzNGE1NTY4XFwnIHZpZXdCb3g9XFwnMCAwIDE2IDE2XFwnJTNFJTNDcGF0aCBkPVxcJ004IDE1QTcgNyAwIDEgMSA4IDFhNyA3IDAgMCAxIDAgMTR6bTAgMUE4IDggMCAxIDAgOCAwYTggOCAwIDAgMCAwIDE2elxcJy8lM0UlM0NwYXRoIGQ9XFwnTTggNGEuNS41IDAgMCAxIC41LjV2M2gzYS41LjUgMCAwIDEgMCAxaC0zdjNhLjUuNSAwIDAgMS0xIDB2LTNoLTNhLjUuNSAwIDAgMSAwLTFoM3YtM0EuNS41IDAgMCAxIDggNHpcXCcvJTNFJTNDL3N2ZyUzRVwiLFxufVxuXG5leHBvcnQgY29uc3QgY3JlYXRlQWN0aW9uQnV0dG9uID0gKGNvbmZpZzogQWN0aW9uQnV0dG9uQ29uZmlnKSA9PiB7XG4gICAgY29uZmlnID0ge1xuICAgICAgICAuLi5kZWZhdWx0Q29uZmlnLFxuICAgICAgICAuLi5jb25maWcsXG4gICAgfTtcblxuICAgIGNvbnN0IGJ1dHRvbiA9IGNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHN0eWxlcy5hY3Rpb25CdXR0b24pIGFzIEFjdGlvbkJ1dHRvbjtcbiAgICBidXR0b24uY2xhc3NOYW1lID0gJ2FjdGlvbi1idXR0b24nO1xuICAgIGJ1dHRvbi5lbmFibGUgPSAoKSA9PiB7XG4gICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICBhcHBseVN0eWxlcyhidXR0b24sIHN0eWxlcy5hY3Rpb25CdXR0b24pO1xuICAgIH1cbiAgICBidXR0b24uZGlzYWJsZSA9ICgpID0+IHtcbiAgICAgICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgYXBwbHlTdHlsZXMoYnV0dG9uLCB7Li4uc3R5bGVzLmFjdGlvbkJ1dHRvbiwgLi4uc3R5bGVzLmRpc2FibGVkQnV0dG9ufSk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5kaXNhYmxlZCkge1xuICAgICAgICBidXR0b24uZGlzYWJsZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvcHlJY29uID0gY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgLi4uc3R5bGVzLmljb24sXG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogYHVybChcIiR7aWNvbnNbY29uZmlnLmljb25dfVwiKWBcbiAgICB9KTtcbiAgICBidXR0b24uYXBwZW5kKGNvcHlJY29uKTtcblxuICAgIGJ1dHRvbi5hcHBlbmQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY29uZmlnLmxhYmVsKSk7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBvcmlnaW5hbEhUTUwgPSBidXR0b24uaW5uZXJIVE1MO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBjb25maWcub25DbGljayhjb25maWcubWVzc2FnZSwgY29uZmlnLm1vZGFsKTtcblxuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogNXB4O1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTJweDtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMnB4O1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogc3BpbiAxcyBsaW5lYXIgaW5maW5pdGU7XG4gICAgICAgICAgICAgICAgXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogM3B4O1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAzcHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBjdXJyZW50Q29sb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiA1MCU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDNweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogM3B4O1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogY3VycmVudENvbG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiA1MCU7XG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsIC01MCUpO1xuICAgICAgICAgICAgICAgICAgICBcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogM3B4O1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAzcHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBjdXJyZW50Q29sb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3R0b206IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiA1MCU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDNweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogM3B4O1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogY3VycmVudENvbG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiA1MCU7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwgLTUwJSk7XG4gICAgICAgICAgICAgICAgICAgIFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgJHtjb25maWcubG9hZGluZ1RleHR9XG4gICAgICAgICAgICBgO1xuXG4gICAgICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgICAgICAgICBAa2V5ZnJhbWVzIHNwaW4ge1xuICAgICAgICAgICAgICAgICAgICBmcm9tIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH1cbiAgICAgICAgICAgICAgICAgICAgdG8geyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXG4gICAgICAgICAgICBhd2FpdCByZXN1bHQ7XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmhlYWQucmVtb3ZlQ2hpbGQoc3R5bGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT1cIm1hcmdpbi1yaWdodDogNXB4O1wiPuKckzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAke2NvbmZpZy5jb21wbGV0ZWRUZXh0fVxuICAgICAgICAgICAgYDtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDIwMDApKTtcbiAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IG9yaWdpbmFsSFRNTDtcbiAgICB9KTtcblxuICAgIHJldHVybiBidXR0b247XG59XG4iLCJleHBvcnQgY29uc3Qgc3R5bGVzID0ge1xuICAgIHJlc2V0U3R5bGVzOiB7XG4gICAgICAgIG1hcmdpbjogJzAnLFxuICAgICAgICBwYWRkaW5nOiAnMCcsXG4gICAgICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxuICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwsIHNhbnMtc2VyaWYnXG4gICAgfSxcbiAgICBtb2RhbE92ZXJsYXk6IHtcbiAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgICAgIHRvcDogJzAnLFxuICAgICAgICBsZWZ0OiAnMCcsXG4gICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDAsIDAsIDAsIDAuMyknLFxuICAgICAgICBkaXNwbGF5OiAnbm9uZScsXG4gICAgICAgIHpJbmRleDogJzEwMCdcbiAgICB9LFxuICAgIGNoYXRNb2RhbDoge1xuICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAgICAgd2lkdGg6ICcxMDAwcHgnLFxuICAgICAgICBtaW5IZWlnaHQ6ICcxNzBweCcsXG4gICAgICAgIG1heEhlaWdodDogJzYwMHB4JyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2ZmZicsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzEwcHgnLFxuICAgICAgICBib3hTaGFkb3c6ICcwIDVweCAxNXB4IHJnYmEoMCwgMCwgMCwgMC4zKScsXG4gICAgICAgIGRpc3BsYXk6ICdub25lJyxcbiAgICAgICAgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG4gICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgICAgekluZGV4OiAnMTAxJyxcbiAgICAgICAgdG9wOiAnNTAlJyxcbiAgICAgICAgbGVmdDogJzUwJScsXG4gICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgtNTAlLCAtNTAlKScsXG4gICAgICAgIHRyYW5zaXRpb246ICdoZWlnaHQgMC4zcyBlYXNlLWluLW91dCdcbiAgICB9LFxuICAgIGNoYXRIZWFkZXI6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzAwQjZERScsXG4gICAgICAgIGNvbG9yOiAnd2hpdGUnLFxuICAgICAgICBwYWRkaW5nOiAnMTVweCcsXG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyxcbiAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgIGN1cnNvcjogJ21vdmUnXG4gICAgfSxcbiAgICBjaGF0VGl0bGU6IHtcbiAgICAgICAgZm9udFdlaWdodDogJ2JvbGQnLFxuICAgICAgICBmb250U2l6ZTogJzE2cHgnXG4gICAgfSxcbiAgICBjaGF0Q29udHJvbHM6IHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBnYXA6ICcxMHB4J1xuICAgIH0sXG4gICAgY29udHJvbEJ1dHRvbjoge1xuICAgICAgICBiYWNrZ3JvdW5kOiAnbm9uZScsXG4gICAgICAgIGJvcmRlcjogJ25vbmUnLFxuICAgICAgICBjb2xvcjogJ3doaXRlJyxcbiAgICAgICAgZm9udFNpemU6ICcxNnB4JyxcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcidcbiAgICB9LFxuICAgIGNoYXRNZXNzYWdlczoge1xuICAgICAgICBmbGV4OiAnMScsXG4gICAgICAgIHBhZGRpbmc6ICcxNXB4JyxcbiAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmOWY5ZjknLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBib3hTaXppbmc6ICdib3JkZXItYm94JyxcbiAgICAgICAgZGlzcGxheTogJ25vbmUnXG4gICAgfSxcbiAgICBtZXNzYWdlOiB7XG4gICAgICAgIG1hcmdpbkJvdHRvbTogJzIwcHgnLFxuICAgICAgICBib3JkZXJSYWRpdXM6ICc4cHgnLFxuICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgd29yZFdyYXA6ICdicmVhay13b3JkJyxcbiAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgYm94U2l6aW5nOiAnYm9yZGVyLWJveCdcbiAgICB9LFxuICAgIGFpTWVzc2FnZToge1xuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZmZmZmZmJyxcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkICNlMmU4ZjAnLFxuICAgICAgICBib3hTaGFkb3c6ICcwIDJweCA1cHggcmdiYSgwLCAwLCAwLCAwLjA1KSdcbiAgICB9LFxuICAgIHVzZXJNZXNzYWdlOiB7XG4gICAgICAgIHdpZHRoOiAnZml0LWNvbnRlbnQnLFxuICAgICAgICBwYWRkaW5nOiAnMTBweCAxNXB4JyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzQyOTllMScsXG4gICAgICAgIGNvbG9yOiAnd2hpdGUnLFxuICAgICAgICBtYXJnaW5MZWZ0OiAnYXV0bycsXG4gICAgICAgIGJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzOiAnNXB4J1xuICAgIH0sXG4gICAgbWVzc2FnZUNvbnRlbnQ6IHtcbiAgICAgICAgcGFkZGluZzogJzEycHgnLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBtYXhXaWR0aDogJzEwMCUnLFxuICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnXG4gICAgfSxcbiAgICBtZXNzYWdlQWN0aW9uczoge1xuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIHBhZGRpbmc6ICc4cHggMTJweCcsXG4gICAgICAgIGdhcDogJzhweCcsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmN2ZhZmMnLFxuICAgICAgICBib3JkZXJUb3A6ICcxcHggc29saWQgI2UyZThmMCcsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzAgMCA4cHggOHB4J1xuICAgIH0sXG4gICAgYWN0aW9uQnV0dG9uOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNlZGYyZjcnLFxuICAgICAgICBib3JkZXI6ICcxcHggc29saWQgI2NiZDVlMCcsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgIHBhZGRpbmc6ICczcHggOHB4JyxcbiAgICAgICAgZm9udFNpemU6ICcxMnB4JyxcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgIGNvbG9yOiAnIzRhNTU2OCdcbiAgICB9LFxuICAgIGNoYXRJbnB1dDoge1xuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIHBhZGRpbmc6ICcxNXB4JyxcbiAgICAgICAgYm9yZGVyVG9wOiAnMXB4IHNvbGlkICNlMmU4ZjAnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZScsXG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnXG4gICAgfSxcbiAgICBpbnB1dFJvdzoge1xuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgIGdhcDogJzEwcHgnXG4gICAgfSxcbiAgICBpbnB1dFdyYXBwZXI6IHtcbiAgICAgICAgZmxleDogJzEnLFxuICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgbWluSGVpZ2h0OiAnNDhweCcsXG4gICAgICAgIG1heEhlaWdodDogJzE1MHB4JyxcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnXG4gICAgfSxcbiAgICBpbnB1dDoge1xuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBwYWRkaW5nOiAnMTJweCAxNXB4JyxcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkICNlMmU4ZjAnLFxuICAgICAgICBib3JkZXJSYWRpdXM6ICcxMHB4JyxcbiAgICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgICAgICBmb250U2l6ZTogJzE0cHgnLFxuICAgICAgICByZXNpemU6ICdub25lJyxcbiAgICAgICAgbWluSGVpZ2h0OiAnNDhweCcsXG4gICAgICAgIG1heEhlaWdodDogJzE1MHB4JyxcbiAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmZmYnLFxuICAgICAgICBjdXJzb3I6ICdpbmhlcml0J1xuICAgIH0sXG4gICAgYnV0dG9uc0NvbHVtbjoge1xuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuICAgICAgICBnYXA6ICc0cHgnLFxuICAgICAgICB3aWR0aDogJzEwMHB4J1xuICAgIH0sXG4gICAgc2VuZEJ1dHRvbjoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjNkNCMjRBJyxcbiAgICAgICAgY29sb3I6ICd3aGl0ZScsXG4gICAgICAgIGJvcmRlcjogJ25vbmUnLFxuICAgICAgICBib3JkZXJSYWRpdXM6ICcxMnB4JyxcbiAgICAgICAgcGFkZGluZzogJzhweCAxNnB4JyxcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgIGZvbnRXZWlnaHQ6ICdib2xkJyxcbiAgICAgICAgaGVpZ2h0OiAnNDBweCcsXG4gICAgICAgIG1pbldpZHRoOiAnMTAwcHgnLFxuICAgICAgICBmb250U2l6ZTogJzE0cHgnLFxuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgICAgIGdhcDogJzZweCcsXG4gICAgICAgIG9wYWNpdHk6ICcxJyxcbiAgICB9LFxuICAgIGFjdGlvbkJ1dHRvbnNSb3c6IHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBnYXA6ICc0cHgnLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nXG4gICAgfSxcbiAgICBpY29uQnV0dG9uOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkICNlMmU4ZjAnLFxuICAgICAgICBib3JkZXJSYWRpdXM6ICc4cHgnLFxuICAgICAgICB3aWR0aDogJzQ4cHgnLFxuICAgICAgICBoZWlnaHQ6ICczMnB4JyxcbiAgICAgICAgcGFkZGluZzogJzAnLFxuICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgICAgICB0cmFuc2l0aW9uOiAnYmFja2dyb3VuZC1jb2xvciAwLjJzJyxcbiAgICAgICAgb3BhY2l0eTogJzEnLFxuICAgIH0sXG4gICAgc2VuZEljb246IHtcbiAgICAgICAgd2lkdGg6ICcxNnB4JyxcbiAgICAgICAgaGVpZ2h0OiAnMTZweCcsXG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogJ3VybChcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9XFwnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXCcgdmlld0JveD1cXCcwIDAgMjQgMjRcXCcgZmlsbD1cXCd3aGl0ZVxcJyUzRSUzQ3BhdGggZD1cXCdNMi4wMSAyMUwyMyAxMiAyLjAxIDMgMiAxMGwxNSAyLTE1IDJ6XFwnLyUzRSUzQy9zdmclM0VcIiknLFxuICAgICAgICBiYWNrZ3JvdW5kU2l6ZTogJ2NvbnRhaW4nLFxuICAgICAgICBiYWNrZ3JvdW5kUmVwZWF0OiAnbm8tcmVwZWF0JyxcbiAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiAnY2VudGVyJ1xuICAgIH0sXG4gICAgc3RvcEljb246IHtcbiAgICAgICAgd2lkdGg6ICcxNnB4JyxcbiAgICAgICAgaGVpZ2h0OiAnMTZweCcsXG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogJ3VybChcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9XFwnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXCcgdmlld0JveD1cXCcwIDAgMjQgMjRcXCcgZmlsbD1cXCclMjNEQzI2MjZcXCclM0UlM0NwYXRoIGQ9XFwnTTAgMGgyNHYyNEgwelxcJyBmaWxsPVxcJ25vbmVcXCcvJTNFJTNDcGF0aCBkPVxcJ002IDZoMTJ2MTJINnpcXCcvJTNFJTNDL3N2ZyUzRVwiKScsXG4gICAgICAgIGJhY2tncm91bmRTaXplOiAnY29udGFpbicsXG4gICAgICAgIGJhY2tncm91bmRSZXBlYXQ6ICduby1yZXBlYXQnLFxuICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246ICdjZW50ZXInXG4gICAgfSxcbiAgICByZWZyZXNoSWNvbjoge1xuICAgICAgICB3aWR0aDogJzE2cHgnLFxuICAgICAgICBoZWlnaHQ6ICcxNnB4JyxcbiAgICAgICAgYmFja2dyb3VuZEltYWdlOiAndXJsKFwiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz1cXCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcJyB2aWV3Qm94PVxcJzAgMCAyNCAyNFxcJyBmaWxsPVxcJyUyMzRCNTU2M1xcJyUzRSUzQ3BhdGggZD1cXCdNMCAwaDI0djI0SDB6XFwnIGZpbGw9XFwnbm9uZVxcJy8lM0UlM0NwYXRoIGQ9XFwnTTE3LjY1IDYuMzVBNy45NTggNy45NTggMCAwIDAgMTIgNGMtNC40MiAwLTcuOTkgMy41OC03Ljk5IDhzMy41NyA4IDcuOTkgOGMzLjczIDAgNi44NC0yLjU1IDcuNzMtNmgtMi4wOEE1Ljk5IDUuOTkgMCAwIDEgMTIgMThjLTMuMzEgMC02LTIuNjktNi02czIuNjktNiA2LTZjMS42NiAwIDMuMTQuNjkgNC4yMiAxLjc4TDEzIDExaDdWNGwtMi4zNSAyLjM1elxcJy8lM0UlM0Mvc3ZnJTNFXCIpJyxcbiAgICAgICAgYmFja2dyb3VuZFNpemU6ICdjb250YWluJyxcbiAgICAgICAgYmFja2dyb3VuZFJlcGVhdDogJ25vLXJlcGVhdCcsXG4gICAgICAgIGJhY2tncm91bmRQb3NpdGlvbjogJ2NlbnRlcidcbiAgICB9LFxuICAgIGljb246IHtcbiAgICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICAgIHdpZHRoOiAnMTRweCcsXG4gICAgICAgIGhlaWdodDogJzE0cHgnLFxuICAgICAgICBtYXJnaW5SaWdodDogJzVweCcsXG4gICAgICAgIGJhY2tncm91bmRTaXplOiAnY29udGFpbicsXG4gICAgICAgIGJhY2tncm91bmRSZXBlYXQ6ICduby1yZXBlYXQnLFxuICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246ICdjZW50ZXInXG4gICAgfSxcbiAgICBkaXNhYmxlZEJ1dHRvbjoge1xuICAgICAgICBvcGFjaXR5OiAnMC41JyxcbiAgICAgICAgY3Vyc29yOiAnbm90LWFsbG93ZWQnXG4gICAgfSxcbiAgICBsb2FkaW5nSW5wdXQ6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2YzZjRmNicsXG4gICAgICAgIGN1cnNvcjogJ25vdC1hbGxvd2VkJ1xuICAgIH0sXG4gICAgbG9hZGluZ0luZGljYXRvcjoge1xuICAgICAgICBkaXNwbGF5OiAnbm9uZScsXG4gICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICB0b3A6ICcwJyxcbiAgICAgICAgbGVmdDogJzAnLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgyNDMsIDI0NCwgMjQ2LCAwLjkpJyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnMTBweCcsXG4gICAgICAgIGNvbG9yOiAnIzZCNzI4MCcsXG4gICAgICAgIGZvbnRTaXplOiAnMTRweCcsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgICAgIGdhcDogJzRweCcsXG4gICAgICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxuICAgICAgICB6SW5kZXg6ICcxMCcsXG4gICAgICAgIGJhY2tkcm9wRmlsdGVyOiAnYmx1cigycHgpJyxcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkICNlMmU4ZjAnLFxuICAgICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZSdcbiAgICB9LFxuICAgIGxvYWRpbmdEb3Q6IHtcbiAgICAgICAgd2lkdGg6ICc2cHgnLFxuICAgICAgICBoZWlnaHQ6ICc2cHgnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjOUNBM0FGJyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnNTAlJyxcbiAgICAgICAgYW5pbWF0aW9uOiAnbG9hZGluZ0RvdFB1bHNlIDEuNHMgaW5maW5pdGUnLFxuICAgICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJ1xuICAgIH0sXG4gICAgdHlwZVNlbGVjdG9yOiB7XG4gICAgICAgIHBhZGRpbmc6ICc1cHggMTVweCcsXG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgIGdhcDogJzEwcHgnLFxuICAgICAgICBib3JkZXJUb3A6ICcxcHggc29saWQgI2UyZThmMCcsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3doaXRlJ1xuICAgIH0sXG4gICAgdHlwZUxhYmVsOiB7XG4gICAgICAgIGZvbnRTaXplOiAnMTRweCcsXG4gICAgICAgIGNvbG9yOiAnIzRCNTU2MycsXG4gICAgICAgIGZvbnRXZWlnaHQ6ICc1MDAnXG4gICAgfSxcbiAgICB0eXBlVG9nZ2xlR3JvdXA6IHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBnYXA6ICc0cHgnXG4gICAgfSxcbiAgICB0eXBlVG9nZ2xlQnV0dG9uOiB7XG4gICAgICAgIHBhZGRpbmc6ICc2cHggMTJweCcsXG4gICAgICAgIGZvbnRTaXplOiAnMTNweCcsXG4gICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCAjZTJlOGYwJyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnNnB4JyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2ZmZicsXG4gICAgICAgIGNvbG9yOiAnIzRCNTU2MycsXG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICB0cmFuc2l0aW9uOiAnYWxsIDAuMnMnLFxuICAgICAgICBvcGFjaXR5OiAnMScsXG4gICAgfSxcbiAgICB0eXBlVG9nZ2xlQnV0dG9uQWN0aXZlOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyMwMEI2REUnLFxuICAgICAgICBjb2xvcjogJyNmZmYnLFxuICAgICAgICBib3JkZXJDb2xvcjogJyMwMEI2REUnXG4gICAgfSxcbiAgICBlcnJvck1lc3NhZ2U6IHtcbiAgICAgICAgd2lkdGg6ICdmaXQtY29udGVudCcsXG4gICAgICAgIHBhZGRpbmc6ICcxMHB4IDE1cHgnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjREMyNjI2JyxcbiAgICAgICAgY29sb3I6ICd3aGl0ZScsXG4gICAgICAgIG1hcmdpbkxlZnQ6ICdhdXRvJyxcbiAgICAgICAgYm9yZGVyQm90dG9tUmlnaHRSYWRpdXM6ICc1cHgnLFxuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICBnYXA6ICc4cHgnXG4gICAgfSxcbiAgICBlcnJvckljb246IHtcbiAgICAgICAgd2lkdGg6ICcxNnB4JyxcbiAgICAgICAgaGVpZ2h0OiAnMTZweCcsXG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogJ3VybChcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9XFwnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXCcgdmlld0JveD1cXCcwIDAgMjQgMjRcXCcgZmlsbD1cXCd3aGl0ZVxcJyUzRSUzQ3BhdGggZD1cXCdNMTIgMkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMSAxNWgtMnYtMmgydjJ6bTAtNGgtMlY3aDJ2NnpcXCcvJTNFJTNDL3N2ZyUzRVwiKScsXG4gICAgICAgIGJhY2tncm91bmRTaXplOiAnY29udGFpbicsXG4gICAgICAgIGJhY2tncm91bmRSZXBlYXQ6ICduby1yZXBlYXQnLFxuICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246ICdjZW50ZXInXG4gICAgfSxcbiAgICBpbWFnZVByZXZpZXc6IHtcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgIHRvcDogJzVweCcsXG4gICAgICAgIGxlZnQ6ICc1cHgnLFxuICAgICAgICB3aWR0aDogJzcxcHgnLFxuICAgICAgICBoZWlnaHQ6ICc3MXB4JyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnNnB4JyxcbiAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgICBib3JkZXI6ICcxcHggc29saWQgI2UyZThmMCcsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmOGZhZmMnLFxuICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAwLjJzIGVhc2UnLFxuICAgIH0sXG4gICAgaW1hZ2VQcmV2aWV3SW1nOiB7XG4gICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICBvYmplY3RGaXQ6ICdjb3ZlcicsXG4gICAgfSxcbiAgICBpbWFnZVByZXZpZXdSZW1vdmU6IHtcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgIHRvcDogJzAnLFxuICAgICAgICBsZWZ0OiAnMCcsXG4gICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDAsIDAsIDAsIDAuNSknLFxuICAgICAgICBjb2xvcjogJ3doaXRlJyxcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgICAgICBmb250U2l6ZTogJzI0cHgnLFxuICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgb3BhY2l0eTogJzAnLFxuICAgICAgICB0cmFuc2l0aW9uOiAnb3BhY2l0eSAwLjJzIGVhc2UnLFxuICAgIH0sXG4gICAgaW1hZ2VQcmV2aWV3SG92ZXI6IHtcbiAgICAgICAgJyY6aG92ZXInOiB7XG4gICAgICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZSgxLjA1KScsXG4gICAgICAgIH0sXG4gICAgICAgICcmOmhvdmVyIC5pbWFnZS1wcmV2aWV3LXJlbW92ZSc6IHtcbiAgICAgICAgICAgIG9wYWNpdHk6ICcxJyxcbiAgICAgICAgfVxuICAgIH0sXG59O1xuXG4iLCJpbXBvcnQge2FwcGx5U3R5bGVzLCBjcmVhdGVFbGVtZW50LCBubFRvQnJ9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHtjcmVhdGVDb250ZW50SWZyYW1lfSBmcm9tIFwiLi9pZnJhbWVcIjtcbmltcG9ydCB7ZXhlY3V0b3IsIFByb21wdH0gZnJvbSBcIi4uLy4uL2V4ZWN1dG9yXCI7XG5pbXBvcnQge2NoYXRIaXN0b3J5LCBNZXNzYWdlLCBVcGRhdGFibGVIVE1MRWxlbWVudH0gZnJvbSBcIi4uLy4uL2NoYXRIaXN0b3J5XCI7XG5pbXBvcnQge0FjdGlvbkJ1dHRvbiwgY3JlYXRlQWN0aW9uQnV0dG9ufSBmcm9tIFwiLi9hY3Rpb25CdXR0b25cIjtcbmltcG9ydCB7c3R5bGVzfSBmcm9tIFwiLi9zdHlsZXNcIjtcbmltcG9ydCB7TW9kYWwsIE1vZGFsQ29uZmlnLCBNb2RhbFR5cGV9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCBjb25zdCBtb2RhbFR5cGVzID0gWyd0ZXh0JywgJ2ltYWdlJ10gYXMgY29uc3Q7XG5cblxubGV0IG1vZGFsRXhpc3RzID0gZmFsc2U7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVNb2RhbCA9IChjb25maWc6IE1vZGFsQ29uZmlnKSA9PiB7XG4gICAgaWYgKG1vZGFsRXhpc3RzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWNvbmZpZy5rZXkpIHtcbiAgICAgICAgYWxlcnQoJ2tleSBpcyByZXF1aXJlZCBjb25maWcgcHJvcGVydHknKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChjb25maWcub3ZlcmxheSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbmZpZy5vdmVybGF5ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoIWNvbmZpZy50eXBlKSB7XG4gICAgICAgIGNvbmZpZy50eXBlID0gJ3RleHQnO1xuICAgIH1cblxuICAgIGlmICghY29uZmlnLmF2YWlsYWJsZVR5cGVzKSB7XG4gICAgICAgIGNvbmZpZy5hdmFpbGFibGVUeXBlcyA9IFtdO1xuICAgIH1cblxuICAgIGNvbmZpZy5hdmFpbGFibGVUeXBlcyA9IGNvbmZpZy5hdmFpbGFibGVUeXBlcy5maWx0ZXIoKHR5cGU6IE1vZGFsVHlwZSkgPT4gbW9kYWxUeXBlcy5pbmNsdWRlcyh0eXBlKSk7XG5cbiAgICBpZiAoY29uZmlnLmF2YWlsYWJsZVR5cGVzLmxlbmd0aCA+IDAgJiYgIWNvbmZpZy5hdmFpbGFibGVUeXBlcy5pbmNsdWRlcyhjb25maWcudHlwZSkpIHtcbiAgICAgICAgY29uZmlnLmF2YWlsYWJsZVR5cGVzLnVuc2hpZnQoY29uZmlnLnR5cGUpO1xuICAgIH1cblxuICAgIGNvbnN0IGJ1aWxkTW9kYWwgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1vZGFsT3ZlcmxheSA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy5tb2RhbE92ZXJsYXkpO1xuXG4gICAgICAgIGNvbnN0IGNoYXRNb2RhbCA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy5jaGF0TW9kYWwpIGFzIE1vZGFsO1xuXG4gICAgICAgIGNvbnN0IGNoYXRIZWFkZXIgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBzdHlsZXMuY2hhdEhlYWRlcik7XG4gICAgICAgIGNvbnN0IGNoYXRUaXRsZSA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy5jaGF0VGl0bGUsICdtb2RBSSBBc3Npc3RhbnQnKTtcbiAgICAgICAgY29uc3QgY2hhdENvbnRyb2xzID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLmNoYXRDb250cm9scyk7XG5cbiAgICAgICAgY29uc3QgY2xvc2VCdG4gPSBjcmVhdGVFbGVtZW50KCdidXR0b24nLCBzdHlsZXMuY29udHJvbEJ1dHRvbiwgJ+KclScpO1xuICAgICAgICBjaGF0Q29udHJvbHMuYXBwZW5kKGNsb3NlQnRuKTtcbiAgICAgICAgY2hhdEhlYWRlci5hcHBlbmQoY2hhdFRpdGxlLCBjaGF0Q29udHJvbHMpO1xuXG4gICAgICAgIGNvbnN0IGNoYXRNZXNzYWdlcyA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy5jaGF0TWVzc2FnZXMpO1xuXG4gICAgICAgIGNvbnN0IGNoYXRJbnB1dEFyZWEgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBzdHlsZXMuY2hhdElucHV0KTtcblxuICAgICAgICBjb25zdCBpbnB1dFJvdyA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy5pbnB1dFJvdyk7XG4gICAgICAgIGNvbnN0IGlucHV0V3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy5pbnB1dFdyYXBwZXIpO1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VJbnB1dCA9IGNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJywgc3R5bGVzLmlucHV0KTtcbiAgICAgICAgbWVzc2FnZUlucHV0LnBsYWNlaG9sZGVyID0gJ1R5cGUgeW91ciBtZXNzYWdlLi4uJztcblxuICAgICAgICBtZXNzYWdlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIG1lc3NhZ2VJbnB1dC5zdHlsZS5ib3JkZXJDb2xvciA9ICcjMDBCNkRFJztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbWVzc2FnZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgbWVzc2FnZUlucHV0LnN0eWxlLmJvcmRlckNvbG9yID0gJyNlMmU4ZjAnO1xuICAgICAgICB9KTtcblxuICAgICAgICBtZXNzYWdlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgbWVzc2FnZUlucHV0LnN0eWxlLmJvcmRlckNvbG9yID0gJyNlMmU4ZjAnO1xuXG4gICAgICAgICAgICBsZXQgaW1hZ2VGaWxlOiBGaWxlIHwgbnVsbCA9IG51bGw7XG4gICAgICAgICAgICBsZXQgcmVtb3RlSW1hZ2VVcmw6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gICAgICAgICAgICBjb25zdCBkYXRhVHJhbnNmZXIgPSBlLmRhdGFUcmFuc2ZlcjtcbiAgICAgICAgICAgIGlmICghZGF0YVRyYW5zZmVyKSByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gZGF0YVRyYW5zZmVyLmZpbGVzO1xuICAgICAgICAgICAgaWYgKGZpbGVzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IGZpbGVzWzBdO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlLnR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VGaWxlID0gZmlsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghaW1hZ2VGaWxlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW1nVXJsID0gZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvdXJpLWxpc3QnKTtcbiAgICAgICAgICAgICAgICBpZiAoaW1nVXJsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZUltYWdlVXJsID0gaW1nVXJsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGltYWdlRmlsZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZUltYWdlVXBsb2FkKGltYWdlRmlsZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocmVtb3RlSW1hZ2VVcmwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1JlbW90ZSA9ICFyZW1vdGVJbWFnZVVybC5zdGFydHNXaXRoKHVybC5vcmlnaW4pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzUmVtb3RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZUltYWdlVXBsb2FkKHJlbW90ZUltYWdlVXJsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocmVtb3RlSW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmxvYi50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IG5ldyBGaWxlKFtibG9iXSwgJ2ltYWdlLnBuZycsIHt0eXBlOiBibG9iLnR5cGV9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVJbWFnZVVwbG9hZChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBhZGRFcnJvck1lc3NhZ2UoJ0ZpbGVkIHRvIGZldGNoIGFuIGltYWdlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYWRkRXJyb3JNZXNzYWdlKCdPbmx5IGltYWdlIGZpbGVzIGFyZSBhbGxvd2VkJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1lc3NhZ2VJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdwYXN0ZScsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpdGVtcyA9IGUuY2xpcGJvYXJkRGF0YT8uaXRlbXM7XG4gICAgICAgICAgICBpZiAoIWl0ZW1zKSByZXR1cm47XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbXNbaV0udHlwZS5pbmRleE9mKCdpbWFnZScpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gaXRlbXNbaV0uZ2V0QXNGaWxlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVJbWFnZVVwbG9hZChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGNsb3NlTW9kYWwoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uc0NvbHVtbiA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy5idXR0b25zQ29sdW1uKTtcblxuICAgICAgICBjb25zdCBzZW5kQnRuID0gY3JlYXRlRWxlbWVudCgnYnV0dG9uJywgc3R5bGVzLnNlbmRCdXR0b24pO1xuICAgICAgICBjb25zdCBzZW5kSWNvbiA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCBzdHlsZXMuc2VuZEljb24pO1xuICAgICAgICBjb25zdCBzZW5kVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdTZW5kJyk7XG4gICAgICAgIHNlbmRCdG4uYXBwZW5kKHNlbmRJY29uLCBzZW5kVGV4dCk7XG5cbiAgICAgICAgY29uc3QgYWN0aW9uQnV0dG9uc1JvdyA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy5hY3Rpb25CdXR0b25zUm93KTtcblxuICAgICAgICBjb25zdCBzdG9wQnRuID0gY3JlYXRlRWxlbWVudCgnYnV0dG9uJywgey4uLnN0eWxlcy5pY29uQnV0dG9uLCAuLi5zdHlsZXMuZGlzYWJsZWRCdXR0b259KTtcbiAgICAgICAgY29uc3Qgc3RvcEljb24gPSBjcmVhdGVFbGVtZW50KCdzcGFuJywgc3R5bGVzLnN0b3BJY29uKTtcbiAgICAgICAgc3RvcEJ0bi5hcHBlbmRDaGlsZChzdG9wSWNvbik7XG4gICAgICAgIHN0b3BCdG4udGl0bGUgPSAnU3RvcCBHZW5lcmF0aW9uJztcblxuICAgICAgICBjb25zdCB0cnlBZ2FpbkJ0biA9IGNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHN0eWxlcy5pY29uQnV0dG9uKTtcbiAgICAgICAgY29uc3QgcmVmcmVzaEljb24gPSBjcmVhdGVFbGVtZW50KCdzcGFuJywgc3R5bGVzLnJlZnJlc2hJY29uKTtcbiAgICAgICAgdHJ5QWdhaW5CdG4uYXBwZW5kQ2hpbGQocmVmcmVzaEljb24pO1xuICAgICAgICB0cnlBZ2FpbkJ0bi50aXRsZSA9ICdUcnkgQWdhaW4nO1xuXG4gICAgICAgIGlmIChoaXN0b3J5LmdldE1lc3NhZ2VzKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0cnlBZ2FpbkJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICBhcHBseVN0eWxlcyh0cnlBZ2FpbkJ0biwgey4uLnN0eWxlcy5pY29uQnV0dG9uLCAuLi5zdHlsZXMuZGlzYWJsZWRCdXR0b259KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFjdGlvbkJ1dHRvbnNSb3cuYXBwZW5kKHN0b3BCdG4sIHRyeUFnYWluQnRuKTtcbiAgICAgICAgYnV0dG9uc0NvbHVtbi5hcHBlbmQoc2VuZEJ0biwgYWN0aW9uQnV0dG9uc1Jvdyk7XG4gICAgICAgIGlucHV0V3JhcHBlci5hcHBlbmQobWVzc2FnZUlucHV0KTtcbiAgICAgICAgaW5wdXRSb3cuYXBwZW5kKGlucHV0V3JhcHBlciwgYnV0dG9uc0NvbHVtbik7XG5cbiAgICAgICAgY29uc3QgbG9hZGluZ0luZGljYXRvciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy5sb2FkaW5nSW5kaWNhdG9yKTtcbiAgICAgICAgbG9hZGluZ0luZGljYXRvci5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxzdHlsZT5cbiAgICAgICAgICAgIEBrZXlmcmFtZXMgbG9hZGluZ0RvdFB1bHNlIHtcbiAgICAgICAgICAgICAgICAwJSwgODAlLCAxMDAlIHsgdHJhbnNmb3JtOiBzY2FsZSgwLjYpOyBvcGFjaXR5OiAwLjM7IH1cbiAgICAgICAgICAgICAgICA0MCUgeyB0cmFuc2Zvcm06IHNjYWxlKDEpOyBvcGFjaXR5OiAxOyB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubG9hZGluZy1kb3RzIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGdhcDogNHB4O1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxNnB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmxvYWRpbmctZG90IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogOHB4O1xuICAgICAgICAgICAgICAgIGhlaWdodDogOHB4O1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM2QjcyODA7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgICAgICAgICBhbmltYXRpb246IGxvYWRpbmdEb3RQdWxzZSAxLjRzIGluZmluaXRlIGVhc2UtaW4tb3V0IGJvdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubG9hZGluZy1kb3Q6bnRoLWNoaWxkKDEpIHsgYW5pbWF0aW9uLWRlbGF5OiAtMC4zMnM7IH1cbiAgICAgICAgICAgIC5sb2FkaW5nLWRvdDpudGgtY2hpbGQoMikgeyBhbmltYXRpb24tZGVsYXk6IC0wLjE2czsgfVxuICAgICAgICAgICAgLmxvYWRpbmctZG90Om50aC1jaGlsZCgzKSB7IGFuaW1hdGlvbi1kZWxheTogMHM7IH1cbiAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgPGRpdiBjbGFzcz1cImxvYWRpbmctZG90c1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxvYWRpbmctZG90XCI+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibG9hZGluZy1kb3RcIj48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsb2FkaW5nLWRvdFwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgICAgIGlucHV0V3JhcHBlci5hcHBlbmQobG9hZGluZ0luZGljYXRvcik7XG5cbiAgICAgICAgY29uc3QgdHlwZVNlbGVjdG9yID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLnR5cGVTZWxlY3Rvcik7XG4gICAgICAgIGNvbnN0IHR5cGVMYWJlbCA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy50eXBlTGFiZWwsICdHZW5lcmF0ZTonKTtcbiAgICAgICAgY29uc3QgdHlwZVRvZ2dsZUdyb3VwID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLnR5cGVUb2dnbGVHcm91cCk7XG5cbiAgICAgICAgY29uc3QgdHlwZUJ1dHRvbnM6IHtba2V5OiBzdHJpbmddOiBIVE1MQnV0dG9uRWxlbWVudH0gPSB7fTtcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlVHlwZXMgPSBjb25maWcuYXZhaWxhYmxlVHlwZXMgPz8gW107XG5cbiAgICAgICAgYXZhaWxhYmxlVHlwZXMuZm9yRWFjaCgodHlwZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gY3JlYXRlRWxlbWVudCgnYnV0dG9uJywgc3R5bGVzLnR5cGVUb2dnbGVCdXR0b24sIHR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0eXBlLnNsaWNlKDEpKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSBjb25maWcudHlwZSkge1xuICAgICAgICAgICAgICAgIGFwcGx5U3R5bGVzKGJ1dHRvbiwgey4uLnN0eWxlcy50eXBlVG9nZ2xlQnV0dG9uLCAuLi5zdHlsZXMudHlwZVRvZ2dsZUJ1dHRvbkFjdGl2ZX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXModHlwZUJ1dHRvbnMpLmZvckVhY2goYnRuID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXBwbHlTdHlsZXMoYnRuLCBzdHlsZXMudHlwZVRvZ2dsZUJ1dHRvbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYXBwbHlTdHlsZXMoYnV0dG9uLCB7Li4uc3R5bGVzLnR5cGVUb2dnbGVCdXR0b24sIC4uLnN0eWxlcy50eXBlVG9nZ2xlQnV0dG9uQWN0aXZlfSk7XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2hUeXBlKHR5cGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0eXBlQnV0dG9uc1t0eXBlXSA9IGJ1dHRvbjtcbiAgICAgICAgICAgIHR5cGVUb2dnbGVHcm91cC5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0eXBlU2VsZWN0b3IuYXBwZW5kKHR5cGVMYWJlbCwgdHlwZVRvZ2dsZUdyb3VwKTtcbiAgICAgICAgY2hhdElucHV0QXJlYS5hcHBlbmQoaW5wdXRSb3cpO1xuICAgICAgICBjaGF0TW9kYWwuYXBwZW5kKGNoYXRIZWFkZXIsIGNoYXRNZXNzYWdlcywgY2hhdElucHV0QXJlYSk7XG5cbiAgICAgICAgaWYgKGF2YWlsYWJsZVR5cGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNoYXRNb2RhbC5hcHBlbmQodHlwZVNlbGVjdG9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb25maWcub3ZlcmxheSkge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQobW9kYWxPdmVybGF5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKGNoYXRNb2RhbCk7XG5cbiAgICAgICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZU1vZGFsKTtcbiAgICAgICAgc2VuZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHNlbmRNZXNzYWdlKCkpO1xuICAgICAgICBzdG9wQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3RvcEdlbmVyYXRpb24pO1xuICAgICAgICB0cnlBZ2FpbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRyeUFnYWluKTtcbiAgICAgICAgbWVzc2FnZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB2b2lkIHNlbmRNZXNzYWdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNoYXRIZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaW5pdERyYWcpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBkcmFnKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGVuZERyYWcpO1xuXG4gICAgICAgIGNoYXRNb2RhbC5tb2RhbE92ZXJsYXkgPSBtb2RhbE92ZXJsYXk7XG4gICAgICAgIGNoYXRNb2RhbC5jaGF0SGVhZGVyID0gY2hhdEhlYWRlcjtcbiAgICAgICAgY2hhdE1vZGFsLmNsb3NlQnRuID0gY2xvc2VCdG47XG4gICAgICAgIGNoYXRNb2RhbC5jaGF0TWVzc2FnZXMgPSBjaGF0TWVzc2FnZXM7XG4gICAgICAgIGNoYXRNb2RhbC5tZXNzYWdlSW5wdXQgPSBtZXNzYWdlSW5wdXQ7XG4gICAgICAgIGNoYXRNb2RhbC5zZW5kQnRuID0gc2VuZEJ0bjtcbiAgICAgICAgY2hhdE1vZGFsLnRyeUFnYWluQnRuID0gdHJ5QWdhaW5CdG47XG4gICAgICAgIGNoYXRNb2RhbC5zdG9wQnRuID0gc3RvcEJ0bjtcbiAgICAgICAgY2hhdE1vZGFsLmxvYWRpbmdJbmRpY2F0b3IgPSBsb2FkaW5nSW5kaWNhdG9yO1xuICAgICAgICBjaGF0TW9kYWwudHlwZVNlbGVjdG9yID0gdHlwZVNlbGVjdG9yO1xuICAgICAgICBjaGF0TW9kYWwudHlwZUJ1dHRvbnMgPSB0eXBlQnV0dG9ucztcbiAgICAgICAgY2hhdE1vZGFsLmlucHV0V3JhcHBlciA9IGlucHV0V3JhcHBlcjtcblxuICAgICAgICBjaGF0TW9kYWwuaXNEcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgICBjaGF0TW9kYWwuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIGNoYXRNb2RhbC5hYm9ydENvbnRyb2xsZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIGNoYXRNb2RhbC5vZmZzZXRYID0gMDtcbiAgICAgICAgY2hhdE1vZGFsLm9mZnNldFkgPSAwO1xuXG4gICAgICAgIHJldHVybiBjaGF0TW9kYWw7XG4gICAgfVxuXG4gICAgY29uc3QgaGFuZGxlSW1hZ2VVcGxvYWQgPSBhc3luYyAoZmlsZU9yVXJsOiBGaWxlIHwgc3RyaW5nLCBpc1JlbW90ZVVybDogYm9vbGVhbiA9IGZhbHNlKSA9PiB7XG4gICAgICAgIGlmICghaXNSZW1vdGVVcmwgJiYgZmlsZU9yVXJsIGluc3RhbmNlb2YgRmlsZSAmJiAhZmlsZU9yVXJsLnR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJykpIHtcbiAgICAgICAgICAgIGFkZEVycm9yTWVzc2FnZSgnT25seSBpbWFnZSBmaWxlcyBhcmUgYWxsb3dlZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1vZGFsLnVwbG9hZGVkSW1hZ2UpIHtcbiAgICAgICAgICAgIHJlbW92ZVVwbG9hZGVkSW1hZ2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGltYWdlUHJldmlldyA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN0eWxlcy5pbWFnZVByZXZpZXcpO1xuICAgICAgICBjb25zdCBpbWcgPSBjcmVhdGVFbGVtZW50KCdpbWcnLCBzdHlsZXMuaW1hZ2VQcmV2aWV3SW1nKSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xuICAgICAgICBjb25zdCByZW1vdmVCdG4gPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBzdHlsZXMuaW1hZ2VQcmV2aWV3UmVtb3ZlLCAnw5cnKTtcblxuICAgICAgICBpZiAoaXNSZW1vdGVVcmwpIHtcbiAgICAgICAgICAgIGltZy5zcmMgPSBmaWxlT3JVcmwgYXMgc3RyaW5nO1xuICAgICAgICAgICAgbW9kYWwudXBsb2FkZWRJbWFnZSA9IGltZy5zcmM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhVVJMID0gYXdhaXQgbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblxuICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGV2ZW50LnRhcmdldD8ucmVzdWx0IGFzIHN0cmluZyk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZU9yVXJsIGFzIEZpbGUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGltZy5zcmMgPSBkYXRhVVJMO1xuICAgICAgICAgICAgbW9kYWwudXBsb2FkZWRJbWFnZSA9IGRhdGFVUkw7XG4gICAgICAgIH1cblxuICAgICAgICByZW1vdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIHJlbW92ZVVwbG9hZGVkSW1hZ2UoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaW1hZ2VQcmV2aWV3LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICBpbWFnZVByZXZpZXcuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDEuMDUpJztcbiAgICAgICAgICAgIHJlbW92ZUJ0bi5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgICB9KTtcblxuICAgICAgICBpbWFnZVByZXZpZXcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgIGltYWdlUHJldmlldy5zdHlsZS50cmFuc2Zvcm0gPSAnJztcbiAgICAgICAgICAgIHJlbW92ZUJ0bi5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgICAgICB9KTtcblxuICAgICAgICBpbWFnZVByZXZpZXcuYXBwZW5kKGltZywgcmVtb3ZlQnRuKTtcbiAgICAgICAgbW9kYWwuaW1hZ2VQcmV2aWV3ID0gaW1hZ2VQcmV2aWV3O1xuICAgICAgICBtb2RhbC5tZXNzYWdlSW5wdXQuc3R5bGUucGFkZGluZ0xlZnQgPSAnODVweCc7XG4gICAgICAgIG1vZGFsLmlucHV0V3JhcHBlci5hcHBlbmQoaW1hZ2VQcmV2aWV3KTtcbiAgICB9XG5cbiAgICBjb25zdCByZW1vdmVVcGxvYWRlZEltYWdlID0gKCkgPT4ge1xuICAgICAgICBpZiAobW9kYWwuaW1hZ2VQcmV2aWV3KSB7XG4gICAgICAgICAgICBtb2RhbC5pbWFnZVByZXZpZXcucmVtb3ZlKCk7XG4gICAgICAgICAgICBtb2RhbC5pbWFnZVByZXZpZXcgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgbW9kYWwudXBsb2FkZWRJbWFnZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgbW9kYWwubWVzc2FnZUlucHV0LnN0eWxlLnBhZGRpbmdMZWZ0ID0gJzE1cHgnO1xuICAgIH1cblxuICAgIGNvbnN0IG9wZW5Nb2RhbCA9ICgpID0+IHtcbiAgICAgICAgbW9kYWwuY2hhdE1lc3NhZ2VzLmlubmVySFRNTCA9ICcnO1xuICAgICAgICBtb2RhbC5jaGF0TWVzc2FnZXMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICBtb2RhbC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgIG1vZGFsLm1vZGFsT3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IGhpc3RvcnkuZ2V0TWVzc2FnZXMoKS5maWx0ZXIoKG0pID0+ICFtLmhpZGRlbik7XG4gICAgICAgIGlmIChtZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBtb2RhbC5jaGF0TWVzc2FnZXMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBtZXNzYWdlcy5mb3JFYWNoKChtc2cpID0+IHtcbiAgICAgICAgICAgICAgICByZW5kZXJNZXNzYWdlKG1zZyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgbW9kYWwuY2hhdE1lc3NhZ2VzLnNjcm9sbFRvcCA9IG1vZGFsLmNoYXRNZXNzYWdlcy5zY3JvbGxIZWlnaHQ7XG4gICAgICAgICAgICBtb2RhbC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICB9LCAxMDApO1xuXG4gICAgICAgIHJldHVybiBtb2RhbDtcbiAgICB9XG5cbiAgICBjb25zdCBjbG9zZU1vZGFsID0gKCkgPT4ge1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBkcmFnKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGVuZERyYWcpO1xuXG4gICAgICAgIGlmIChtb2RhbC5tb2RhbE92ZXJsYXkpIHtcbiAgICAgICAgICAgIG1vZGFsLm1vZGFsT3ZlcmxheS5yZW1vdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtb2RhbCkge1xuICAgICAgICAgICAgbW9kYWwucmVtb3ZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBtb2RhbEV4aXN0cyA9IGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGluaXREcmFnID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgbW9kYWwuaXNEcmFnZ2luZyA9IHRydWU7XG5cbiAgICAgICAgY29uc3QgcmVjdCA9IG1vZGFsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIG1vZGFsLm9mZnNldFggPSBlLmNsaWVudFggLSByZWN0LmxlZnQ7XG4gICAgICAgIG1vZGFsLm9mZnNldFkgPSBlLmNsaWVudFkgLSByZWN0LnRvcDtcblxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnVzZXJTZWxlY3QgPSAnbm9uZSc7XG4gICAgfVxuXG4gICAgY29uc3QgZHJhZyA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmICghbW9kYWwuaXNEcmFnZ2luZykgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IG5ld1ggPSBlLmNsaWVudFggLSBtb2RhbC5vZmZzZXRYO1xuICAgICAgICBjb25zdCBuZXdZID0gZS5jbGllbnRZIC0gbW9kYWwub2Zmc2V0WTtcblxuICAgICAgICBtb2RhbC5zdHlsZS5sZWZ0ID0gbmV3WCArICdweCc7XG4gICAgICAgIG1vZGFsLnN0eWxlLnRvcCA9IG5ld1kgKyAncHgnO1xuXG4gICAgICAgIG1vZGFsLnN0eWxlLnRyYW5zZm9ybSA9ICdub25lJztcbiAgICB9XG5cbiAgICBjb25zdCBlbmREcmFnID0gKCkgPT4ge1xuICAgICAgICBtb2RhbC5pc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUudXNlclNlbGVjdCA9ICcnO1xuICAgIH1cblxuICAgIGNvbnN0IHN0b3BHZW5lcmF0aW9uID0gKCkgPT4ge1xuICAgICAgICBpZiAoIW1vZGFsLmlzTG9hZGluZyB8fCAhbW9kYWwuYWJvcnRDb250cm9sbGVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBtb2RhbC5hYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgbW9kYWwuYWJvcnRDb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICBzZXRMb2FkaW5nU3RhdGUoZmFsc2UpO1xuICAgIH1cblxuICAgIGNvbnN0IHRyeUFnYWluID0gKCkgPT4ge1xuICAgICAgICBpZiAoaGlzdG9yeS5nZXRNZXNzYWdlcygpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbmZpZy50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgIHZvaWQgc2VuZE1lc3NhZ2UoJ1RyeSBhZ2FpbicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbmZpZy50eXBlID09PSAnaW1hZ2UnKSB7XG4gICAgICAgICAgICBjb25zdCBsYXRlc3RVc2VyTXNnID0gaGlzdG9yeS5nZXRNZXNzYWdlcygpLnJldmVyc2UoKS5maW5kKChtc2cpID0+IG1zZy5yb2xlID09PSAndXNlcicpO1xuICAgICAgICAgICAgaWYgKGxhdGVzdFVzZXJNc2cpIHtcbiAgICAgICAgICAgICAgICB2b2lkIHNlbmRNZXNzYWdlKGxhdGVzdFVzZXJNc2cuY29udGVudCBhcyBzdHJpbmcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhZGRVc2VyTWVzc2FnZSA9IChjb250ZW50OiBQcm9tcHQpID0+IHtcbiAgICAgICAgaWYgKG1vZGFsLmNoYXRNZXNzYWdlcy5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHtcbiAgICAgICAgICAgIG1vZGFsLmNoYXRNZXNzYWdlcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VEaXY6IFVwZGF0YWJsZUhUTUxFbGVtZW50ID0gY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgLi4uc3R5bGVzLm1lc3NhZ2UsXG4gICAgICAgICAgICAuLi5zdHlsZXMudXNlck1lc3NhZ2VcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IHRleHRDb250ZW50O1xuICAgICAgICBsZXQgaW1hZ2VzQ29udGVudCA9IG51bGw7XG5cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29udGVudCkpIHtcbiAgICAgICAgICAgIGNvbnN0IFt0ZXh0LCAuLi5pbWFnZXNdID0gY29udGVudDtcbiAgICAgICAgICAgIHRleHRDb250ZW50ID0gdGV4dC52YWx1ZTtcbiAgICAgICAgICAgIGltYWdlc0NvbnRlbnQgPSBpbWFnZXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb250ZW50V3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuICAgICAgICAgICAgZ2FwOiAnOHB4J1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB0ZXh0RGl2ID0gY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRleHREaXYuaW5uZXJIVE1MID0gbmxUb0JyKHRleHRDb250ZW50KTtcbiAgICAgICAgY29udGVudFdyYXBwZXIuYXBwZW5kQ2hpbGQodGV4dERpdik7XG5cbiAgICAgICAgaWYgKGltYWdlc0NvbnRlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlUm93ID0gY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgICAgICBmbGV4RGlyZWN0aW9uOiAncm93JyxcbiAgICAgICAgICAgICAgICBnYXA6ICc4cHgnLFxuICAgICAgICAgICAgICAgIGZsZXhXcmFwOiAnd3JhcCdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGltZ0NvbnRlbnQgb2YgaW1hZ2VzQ29udGVudCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlV3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDBweCcsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzEwMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JyxcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6ICc0cHgnXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBpbWcgPSBjcmVhdGVFbGVtZW50KCdpbWcnLCB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICAgICAgICAgICAgICBvYmplY3RGaXQ6ICdjb3ZlcidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpbWcuc3JjID0gaW1nQ29udGVudC52YWx1ZTtcblxuICAgICAgICAgICAgICAgIGltYWdlV3JhcHBlci5hcHBlbmRDaGlsZChpbWcpO1xuICAgICAgICAgICAgICAgIGltYWdlUm93LmFwcGVuZENoaWxkKGltYWdlV3JhcHBlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZW50V3JhcHBlci5hcHBlbmRDaGlsZChpbWFnZVJvdyk7XG4gICAgICAgIH1cblxuICAgICAgICBtZXNzYWdlRGl2LmFwcGVuZENoaWxkKGNvbnRlbnRXcmFwcGVyKTtcblxuICAgICAgICBtZXNzYWdlRGl2LnVwZGF0ZSA9IChtc2cpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRleHRDb250ZW50ID0gQXJyYXkuaXNBcnJheShtc2cuY29udGVudCkgPyBtc2cuY29udGVudFswXS52YWx1ZSA6IG1zZy5jb250ZW50O1xuICAgICAgICAgICAgdGV4dERpdi5pbm5lckhUTUwgPSBubFRvQnIodGV4dENvbnRlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbW9kYWwuY2hhdE1lc3NhZ2VzLmFwcGVuZENoaWxkKG1lc3NhZ2VEaXYpO1xuICAgICAgICBtb2RhbC5jaGF0TWVzc2FnZXMuc2Nyb2xsVG9wID0gbW9kYWwuY2hhdE1lc3NhZ2VzLnNjcm9sbEhlaWdodDtcblxuICAgICAgICByZXR1cm4gbWVzc2FnZURpdjtcbiAgICB9XG5cbiAgICBjb25zdCBhZGRFcnJvck1lc3NhZ2UgPSAoY29udGVudDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmIChtb2RhbC5jaGF0TWVzc2FnZXMuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgICBtb2RhbC5jaGF0TWVzc2FnZXMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtZXNzYWdlRGl2ID0gY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgLi4uc3R5bGVzLm1lc3NhZ2UsXG4gICAgICAgICAgICAuLi5zdHlsZXMuZXJyb3JNZXNzYWdlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGVycm9ySWNvbiA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCBzdHlsZXMuZXJyb3JJY29uKTtcbiAgICAgICAgbWVzc2FnZURpdi5hcHBlbmRDaGlsZChlcnJvckljb24pO1xuXG4gICAgICAgIGNvbnN0IHRleHRTcGFuID0gY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICB0ZXh0U3Bhbi50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIG1lc3NhZ2VEaXYuYXBwZW5kQ2hpbGQodGV4dFNwYW4pO1xuXG4gICAgICAgIG1vZGFsLmNoYXRNZXNzYWdlcy5hcHBlbmRDaGlsZChtZXNzYWdlRGl2KTtcbiAgICAgICAgbW9kYWwuY2hhdE1lc3NhZ2VzLnNjcm9sbFRvcCA9IG1vZGFsLmNoYXRNZXNzYWdlcy5zY3JvbGxIZWlnaHQ7XG5cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VEaXY7XG4gICAgfVxuXG4gICAgY29uc3QgYWRkQXNzaXN0YW50TWVzc2FnZSA9IChjb250ZW50OiBQcm9tcHQsIHByb3ZpZGVkSWQ/OiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKG1vZGFsLmNoYXRNZXNzYWdlcy5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHtcbiAgICAgICAgICAgIG1vZGFsLmNoYXRNZXNzYWdlcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VEaXY6IFVwZGF0YWJsZUhUTUxFbGVtZW50ID0gY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgLi4uc3R5bGVzLm1lc3NhZ2UsXG4gICAgICAgICAgICAuLi5zdHlsZXMuYWlNZXNzYWdlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VJZCA9IHByb3ZpZGVkSWQgfHwgJ21zZy0nICsgRGF0ZS5ub3coKTtcblxuICAgICAgICBjb25zdCBjb250ZW50RGl2ID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLm1lc3NhZ2VDb250ZW50KTtcblxuICAgICAgICBjb25zdCB0ZXh0Q29udGVudCA9IEFycmF5LmlzQXJyYXkoY29udGVudCkgPyBjb250ZW50WzBdLnZhbHVlIDogY29udGVudDtcbiAgICAgICAgY29uc3QgaWZyYW1lID0gY3JlYXRlQ29udGVudElmcmFtZSh0ZXh0Q29udGVudCwgbW9kYWwsIGNvbmZpZy5jdXN0b21DU1MgPz8gW10pO1xuXG4gICAgICAgIGNvbnRlbnREaXYuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcblxuICAgICAgICBjb25zdCBhY3Rpb25zRGl2ID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3R5bGVzLm1lc3NhZ2VBY3Rpb25zKTtcblxuICAgICAgICBjb25zdCBtZXNzYWdlID0gaGlzdG9yeS5nZXRBc3Npc3RhbnRNZXNzYWdlKG1lc3NhZ2VJZCk7XG4gICAgICAgIGlmIChtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlnLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICAgIGlmIChjb25maWcudGV4dEFjdGlvbnM/LmNvcHkgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbnNEaXYuYXBwZW5kKGNyZWF0ZUFjdGlvbkJ1dHRvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogbW9kYWwuaXNMb2FkaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2NvcHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDb3B5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZFRleHQ6ICdDb3BpZWQhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHR5cGVvZiBjb25maWcudGV4dEFjdGlvbnM/LmNvcHkgPT09ICdmdW5jdGlvbicgPyBjb25maWcudGV4dEFjdGlvbnMuY29weSA6IGNvcHlUb0NsaXBib2FyZFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcudGV4dEFjdGlvbnM/Lmluc2VydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb25zRGl2LmFwcGVuZChjcmVhdGVBY3Rpb25CdXR0b24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IG1vZGFsLmlzTG9hZGluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdpbnNlcnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdJbnNlcnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkVGV4dDogJ0luc2VydGVkIScsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBjb25maWcudGV4dEFjdGlvbnMuaW5zZXJ0XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjb25maWcudHlwZSA9PT0gJ2ltYWdlJykge1xuICAgICAgICAgICAgICAgIGlmIChjb25maWcuaW1hZ2VBY3Rpb25zPy5jb3B5ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb25zRGl2LmFwcGVuZChjcmVhdGVBY3Rpb25CdXR0b24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IG1vZGFsLmlzTG9hZGluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdjb3B5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQ29weScsXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nVGV4dDogJ0Rvd25sb2FkaW5nLi4uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZFRleHQ6ICdDb3BpZWQhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jIChtc2csIG1vZGFsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IHR5cGVvZiBjb25maWcudGV4dEFjdGlvbnM/LmNvcHkgPT09ICdmdW5jdGlvbicgPyBjb25maWcudGV4dEFjdGlvbnMuY29weSA6IGNvcHlUb0NsaXBib2FyZDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtc2cuY3R4LmRvd25sb2FkZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcihtc2csIG1vZGFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgZXhlY3V0b3IubWdyLmRvd25sb2FkLmltYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBtc2cuY29udGVudCBhcyBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiBjb25maWcuZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogY29uZmlnLm5hbWVzcGFjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2U6IGNvbmZpZy5yZXNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWFTb3VyY2U6IGNvbmZpZy5pbWFnZT8ubWVkaWFTb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2cuY29udGVudCA9IGRhdGEuZnVsbFVybDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2cuY3R4LmRvd25sb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZy5jdHgudXJsID0gZGF0YS51cmw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnLmN0eC5mdWxsVXJsID0gZGF0YS5mdWxsVXJsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcihtc2csIG1vZGFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGluc2VydENiID0gY29uZmlnLmltYWdlQWN0aW9ucz8uaW5zZXJ0O1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaW5zZXJ0Q2IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uc0Rpdi5hcHBlbmQoY3JlYXRlQWN0aW9uQnV0dG9uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBtb2RhbC5pc0xvYWRpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnaW5zZXJ0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnSW5zZXJ0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZFRleHQ6ICdJbnNlcnRlZCEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ1RleHQ6ICdEb3dubG9hZGluZy4uLicsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBhc3luYyAobXNnLCBtb2RhbCkgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1zZy5jdHguZG93bmxvYWRlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRDYihtc2csIG1vZGFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgZXhlY3V0b3IubWdyLmRvd25sb2FkLmltYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBtc2cuY29udGVudCBhcyBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiBjb25maWcuZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogY29uZmlnLm5hbWVzcGFjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2U6IGNvbmZpZy5yZXNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWFTb3VyY2U6IGNvbmZpZy5pbWFnZT8ubWVkaWFTb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2cuY29udGVudCA9IGRhdGEuZnVsbFVybDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2cuY3R4LmRvd25sb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZy5jdHgudXJsID0gZGF0YS51cmw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnLmN0eC5mdWxsVXJsID0gZGF0YS5mdWxsVXJsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0Q2IobXNnLCBtb2RhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBtZXNzYWdlRGl2LmFwcGVuZChjb250ZW50RGl2LCBhY3Rpb25zRGl2KTtcblxuICAgICAgICBtb2RhbC5jaGF0TWVzc2FnZXMuYXBwZW5kQ2hpbGQobWVzc2FnZURpdik7XG4gICAgICAgIG1vZGFsLmNoYXRNZXNzYWdlcy5zY3JvbGxUb3AgPSBtb2RhbC5jaGF0TWVzc2FnZXMuc2Nyb2xsSGVpZ2h0O1xuXG4gICAgICAgIG1lc3NhZ2VEaXYudXBkYXRlID0gKG1zZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGV4dENvbnRlbnQgPSBBcnJheS5pc0FycmF5KG1zZy5jb250ZW50KSA/IG1zZy5jb250ZW50WzBdLnZhbHVlIDogbXNnLmNvbnRlbnQ7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gbXNnLnR5cGUgPT09ICdpbWFnZScgPyBgPGltZyBzcmM9XCIke3RleHRDb250ZW50fVwiIC8+YCA6IG5sVG9Ccih0ZXh0Q29udGVudCk7XG4gICAgICAgICAgICBpZnJhbWUuc3luY0NvbnRlbnQoY29udGVudCk7XG4gICAgICAgICAgICBpZnJhbWUuc3luY0hlaWdodCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VEaXY7XG4gICAgfVxuXG4gICAgY29uc3QgcmVuZGVyTWVzc2FnZSA9IChtc2c6IE1lc3NhZ2UpID0+IHtcbiAgICAgICAgaWYgKG1zZy5oaWRkZW4pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtc2cucm9sZSA9PT0gJ3VzZXInKSB7XG4gICAgICAgICAgICByZXR1cm4gYWRkVXNlck1lc3NhZ2UobXNnLmNvbnRlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1zZy50eXBlID09PSAnaW1hZ2UnKSB7XG4gICAgICAgICAgICByZXR1cm4gYWRkQXNzaXN0YW50TWVzc2FnZShgPGltZyBzcmM9XCIke21zZy5jb250ZW50fVwiIC8+YCwgbXNnLmlkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhZGRBc3Npc3RhbnRNZXNzYWdlKG1zZy5jb250ZW50LCBtc2cuaWQpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvcHlUb0NsaXBib2FyZCA9IGFzeW5jIChtZXNzYWdlOiBNZXNzYWdlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRleHRDb250ZW50ID0gQXJyYXkuaXNBcnJheShtZXNzYWdlLmNvbnRlbnQpID8gbWVzc2FnZS5jb250ZW50WzBdLnZhbHVlIDogbWVzc2FnZS5jb250ZW50O1xuXG4gICAgICAgIGlmIChuYXZpZ2F0b3IuY2xpcGJvYXJkICYmIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRleHRDb250ZW50KTtcbiAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgICAgIGFkZEVycm9yTWVzc2FnZShfKCdtb2RhaS5jbXAuZmFpbGVkX2NvcHknKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRleHRhcmVhID0gY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgICAgICAgICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9IHRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dGFyZWEpO1xuICAgICAgICAgICAgICAgIHRleHRhcmVhLnNlbGVjdCgpO1xuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJjb3B5XCIpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGV4dGFyZWEpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JNZXNzYWdlKF8oJ21vZGFpLmNtcC5mYWlsZWRfY29weScpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHNldExvYWRpbmdTdGF0ZSA9IChsb2FkaW5nOiBib29sZWFuKSA9PiB7XG4gICAgICAgIG1vZGFsLmlzTG9hZGluZyA9IGxvYWRpbmc7XG5cbiAgICAgICAgaWYgKGxvYWRpbmcpIHtcbiAgICAgICAgICAgIG1vZGFsLmxvYWRpbmdJbmRpY2F0b3Iuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1vZGFsLmxvYWRpbmdJbmRpY2F0b3Iuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuXG4gICAgICAgIG1vZGFsLm1lc3NhZ2VJbnB1dC5kaXNhYmxlZCA9IGxvYWRpbmc7XG4gICAgICAgIGlmIChsb2FkaW5nKSB7XG4gICAgICAgICAgICBhcHBseVN0eWxlcyhtb2RhbC5tZXNzYWdlSW5wdXQsIHsuLi5zdHlsZXMuaW5wdXQsIC4uLnN0eWxlcy5sb2FkaW5nSW5wdXR9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFwcGx5U3R5bGVzKG1vZGFsLm1lc3NhZ2VJbnB1dCwgc3R5bGVzLmlucHV0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vZGFsLnNlbmRCdG4uZGlzYWJsZWQgPSBsb2FkaW5nO1xuICAgICAgICBpZiAobG9hZGluZykge1xuICAgICAgICAgICAgYXBwbHlTdHlsZXMobW9kYWwuc2VuZEJ0biwgey4uLnN0eWxlcy5zZW5kQnV0dG9uLCAuLi5zdHlsZXMuZGlzYWJsZWRCdXR0b259KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFwcGx5U3R5bGVzKG1vZGFsLnNlbmRCdG4sIHN0eWxlcy5zZW5kQnV0dG9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vZGFsLnN0b3BCdG4uZGlzYWJsZWQgPSAhbG9hZGluZztcbiAgICAgICAgaWYgKGxvYWRpbmcpIHtcbiAgICAgICAgICAgIGFwcGx5U3R5bGVzKG1vZGFsLnN0b3BCdG4sIHN0eWxlcy5pY29uQnV0dG9uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFwcGx5U3R5bGVzKG1vZGFsLnN0b3BCdG4sIHsuLi5zdHlsZXMuaWNvbkJ1dHRvbiwgLi4uc3R5bGVzLmRpc2FibGVkQnV0dG9ufSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBoYXNNZXNzYWdlcyA9IGhpc3RvcnkuZ2V0TWVzc2FnZXMoKS5sZW5ndGggPiAwO1xuICAgICAgICBtb2RhbC50cnlBZ2FpbkJ0bi5kaXNhYmxlZCA9IGxvYWRpbmcgfHwgIWhhc01lc3NhZ2VzO1xuICAgICAgICBpZiAobG9hZGluZyB8fCAhaGFzTWVzc2FnZXMpIHtcbiAgICAgICAgICAgIGFwcGx5U3R5bGVzKG1vZGFsLnRyeUFnYWluQnRuLCB7Li4uc3R5bGVzLmljb25CdXR0b24sIC4uLnN0eWxlcy5kaXNhYmxlZEJ1dHRvbn0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXBwbHlTdHlsZXMobW9kYWwudHJ5QWdhaW5CdG4sIHN0eWxlcy5pY29uQnV0dG9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIE9iamVjdC52YWx1ZXMobW9kYWwudHlwZUJ1dHRvbnMpLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGxvYWRpbmc7XG4gICAgICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IGJ1dHRvbi50ZXh0Q29udGVudD8udG9Mb3dlckNhc2UoKSA9PT0gY29uZmlnLnR5cGU7XG5cbiAgICAgICAgICAgIGlmIChsb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgYXBwbHlTdHlsZXMoYnV0dG9uLCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnN0eWxlcy50eXBlVG9nZ2xlQnV0dG9uLFxuICAgICAgICAgICAgICAgICAgICAuLi4oaXNBY3RpdmUgPyBzdHlsZXMudHlwZVRvZ2dsZUJ1dHRvbkFjdGl2ZSA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgLi4uc3R5bGVzLmRpc2FibGVkQnV0dG9uXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFwcGx5U3R5bGVzKGJ1dHRvbiwge1xuICAgICAgICAgICAgICAgICAgICAuLi5zdHlsZXMudHlwZVRvZ2dsZUJ1dHRvbixcbiAgICAgICAgICAgICAgICAgICAgLi4uKGlzQWN0aXZlID8gc3R5bGVzLnR5cGVUb2dnbGVCdXR0b25BY3RpdmUgOiB7fSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYWN0aW9uQnV0dG9ucyA9IG1vZGFsLmNoYXRNZXNzYWdlcy5xdWVyeVNlbGVjdG9yQWxsKCcuYWN0aW9uLWJ1dHRvbicpIGFzIE5vZGVMaXN0T2Y8QWN0aW9uQnV0dG9uPjtcbiAgICAgICAgYWN0aW9uQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICBpZiAobG9hZGluZykge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5kaXNhYmxlPy4oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uPy5lbmFibGU/LigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBzZW5kTWVzc2FnZSA9IGFzeW5jIChwcm92aWRlZE1lc3NhZ2U/OiBzdHJpbmcsIGhpZGVQcm9tcHQ/OiBib29sZWFuKSA9PiB7XG4gICAgICAgIGxldCBtZXNzYWdlOiBQcm9tcHQgPSBwcm92aWRlZE1lc3NhZ2UgPyBwcm92aWRlZE1lc3NhZ2UudHJpbSgpIDogbW9kYWwubWVzc2FnZUlucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgICAgaWYgKCFtZXNzYWdlIHx8IG1vZGFsLmlzTG9hZGluZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0TG9hZGluZ1N0YXRlKHRydWUpO1xuXG4gICAgICAgIG1vZGFsLm1lc3NhZ2VJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICBtb2RhbC5hYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cbiAgICAgICAgaWYgKG1vZGFsLnVwbG9hZGVkSW1hZ2UgJiYgY29uZmlnLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgbWVzc2FnZSA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBtb2RhbC51cGxvYWRlZEltYWdlLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cblxuICAgICAgICByZW1vdmVVcGxvYWRlZEltYWdlKCk7XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBoaXN0b3J5LmdldE1lc3NhZ2VzSGlzdG9yeSgpO1xuICAgICAgICBjb25zdCBtZXNzYWdlSWQgPSAndXNlci1tc2ctJyArIERhdGUubm93KCkgKyAoTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTAwMCkpO1xuICAgICAgICBoaXN0b3J5LmFkZFVzZXJNZXNzYWdlKG1lc3NhZ2UsIG1lc3NhZ2VJZCwgaGlkZVByb21wdCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChjb25maWcudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGV4ZWN1dG9yLm1nci5wcm9tcHQuZnJlZVRleHQoXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogY29uZmlnLm5hbWVzcGFjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IGNvbmZpZy5jb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0OiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IGNvbmZpZy5maWVsZCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS51cGRhdGVBc3Npc3RhbnRNZXNzYWdlKGRhdGEuaWQsIGRhdGEuY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLmFib3J0Q29udHJvbGxlclxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBoaXN0b3J5LnVwZGF0ZUFzc2lzdGFudE1lc3NhZ2UoZGF0YS5pZCwgZGF0YS5jb250ZW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNvbmZpZy50eXBlID09PSAnaW1hZ2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGV4ZWN1dG9yLm1nci5wcm9tcHQuaW1hZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBwcm9tcHQ6IG1lc3NhZ2UgYXMgc3RyaW5nXG4gICAgICAgICAgICAgICAgfSwgbW9kYWwuYWJvcnRDb250cm9sbGVyKTtcblxuICAgICAgICAgICAgICAgIGhpc3RvcnkuYWRkQXNzaXN0YW50TWVzc2FnZShkYXRhLnVybCwgZGF0YS5pZCwgJ2ltYWdlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG1vZGFsLmFib3J0Q29udHJvbGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBhZGRFcnJvck1lc3NhZ2UoZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYWRkRXJyb3JNZXNzYWdlKCdVbmtub3duIGVycm9yJyk7XG4gICAgICAgIH1cblxuICAgICAgICBzZXRMb2FkaW5nU3RhdGUoZmFsc2UpO1xuICAgIH1cblxuICAgIGNvbnN0IHN3aXRjaFR5cGUgPSAodHlwZTogTW9kYWxUeXBlKSA9PiB7XG4gICAgICAgIGNvbmZpZy50eXBlID0gdHlwZTtcblxuICAgICAgICBoaXN0b3J5ID0gY2hhdEhpc3RvcnkuaW5pdChcbiAgICAgICAgICAgIGAke2NvbmZpZy5rZXl9LyR7Y29uZmlnLnR5cGV9YCxcbiAgICAgICAgICAgIChtc2cpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVuZGVyTWVzc2FnZShtc2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIHdoaWxlIChtb2RhbC5jaGF0TWVzc2FnZXMuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgbW9kYWwuY2hhdE1lc3NhZ2VzLnJlbW92ZUNoaWxkKG1vZGFsLmNoYXRNZXNzYWdlcy5maXJzdENoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vZGFsLmNoYXRNZXNzYWdlcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IGhpc3RvcnkuZ2V0TWVzc2FnZXMoKS5maWx0ZXIoKG0pID0+ICFtLmhpZGRlbik7XG4gICAgICAgIGlmIChtZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBtb2RhbC5jaGF0TWVzc2FnZXMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBtZXNzYWdlcy5mb3JFYWNoKChtc2cpID0+IHtcbiAgICAgICAgICAgICAgICByZW5kZXJNZXNzYWdlKG1zZyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxldCBoaXN0b3J5ID0gY2hhdEhpc3RvcnkuaW5pdChcbiAgICAgICAgYCR7Y29uZmlnLmtleX0vJHtjb25maWcudHlwZX1gLFxuICAgICAgICAobXNnKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcmVuZGVyTWVzc2FnZShtc2cpO1xuICAgICAgICB9XG4gICAgKTtcblxuICAgIGNvbnN0IG1vZGFsID0gYnVpbGRNb2RhbCgpO1xuXG4gICAgbW9kYWwuYXBpID0ge1xuICAgICAgICBzZW5kTWVzc2FnZSxcbiAgICAgICAgY2xvc2VNb2RhbCxcbiAgICB9XG5cbiAgICBvcGVuTW9kYWwoKTtcbiAgICBtb2RhbEV4aXN0cyA9IHRydWU7XG5cbiAgICByZXR1cm4gbW9kYWw7XG59XG4iLCJpbXBvcnQge2NyZWF0ZUVsZW1lbnQsIG5sVG9Ccn0gZnJvbSBcIi4uL3V0aWxzXCI7XG5pbXBvcnQgdHlwZSB7TW9kYWx9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCB0eXBlIElmcmFtZSA9IEhUTUxJRnJhbWVFbGVtZW50ICYge1xuICAgIHN5bmNIZWlnaHQ6ICgpID0+IHZvaWQ7XG4gICAgc3luY0NvbnRlbnQ6IChjb250ZW50OiBzdHJpbmcpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVDb250ZW50SWZyYW1lID0gKHByb3ZpZGVkQ29udGVudDogc3RyaW5nLCBtb2RhbDogTW9kYWwsIGN1c3RvbUNTUzogc3RyaW5nW10gPSBbXSkgPT4ge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBubFRvQnIocHJvdmlkZWRDb250ZW50KTtcbiAgICBsZXQgaXNMb2FkZWQgPSBmYWxzZTtcbiAgICBsZXQgcGVuZGluZ0NvbnRlbnQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3QgaWZyYW1lID0gY3JlYXRlRWxlbWVudCgnaWZyYW1lJywge1xuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBib3JkZXI6ICdub25lJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnd2hpdGUnLFxuICAgICAgICBtYXhXaWR0aDogJzEwMCUnLFxuICAgICAgICBib3hTaXppbmc6ICdib3JkZXItYm94J1xuICAgIH0pIGFzIElmcmFtZTtcblxuICAgIGNvbnN0IGdldElmcmFtZURvY3VtZW50ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gaWZyYW1lLmNvbnRlbnREb2N1bWVudCB8fCBpZnJhbWUuY29udGVudFdpbmRvdz8uZG9jdW1lbnQ7XG4gICAgfVxuXG4gICAgY29uc3QgY3JlYXRlU3R5bGVTaGVldCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICAgIGh0bWwge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJvZHkge1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdy14OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAqIHtcbiAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZSB7XG4gICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xuICAgICAgICAgICAgICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdy13cmFwOiBicmVhay13b3JkO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmN2ZhO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbWcge1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGF1dG87XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2RlIHtcbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gICAgICAgICAgICAgICAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICBvdmVyZmxvdy14OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFibGUge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdy14OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdiB7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93LXdyYXA6IGJyZWFrLXdvcmQ7XG4gICAgICAgICAgICAgICAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDAgMCAwLjVlbSAwO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGgxLCBoMiwgaDMsIGg0LCBoNSwgaDYge1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMCAwIDAuMWVtIDA7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICBgO1xuICAgIH1cblxuICAgIGNvbnN0IGNyZWF0ZUlmcmFtZUNvbnRlbnQgPSAoY29udGVudDogc3RyaW5nKSA9PiB7XG4gICAgICAgIHJldHVybiBgXG4gICAgICAgIDxodG1sPlxuICAgICAgICA8aGVhZD5cbiAgICAgICAgICAgIDxzdHlsZT4ke2NyZWF0ZVN0eWxlU2hlZXQoKX08L3N0eWxlPlxuICAgICAgICAgICAgJHtjdXN0b21DU1MubWFwKGNzcyA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgdHlwZT1cInRleHQvY3NzXCIgaHJlZj1cIiR7Y3NzfVwiIC8+YDtcbiAgICAgICAgICAgIH0pLmpvaW4oJycpfVxuICAgICAgICA8L2hlYWQ+XG4gICAgICAgIDxib2R5IHN0eWxlPVwicGFkZGluZzogMDsgbWF4LXdpZHRoOiAxMDAlOyB3aWR0aDogMTAwJTsgYm94LXNpemluZzogYm9yZGVyLWJveDtcIj4ke2NvbnRlbnR9PC9ib2R5PlxuICAgICAgICA8L2h0bWw+XG4gICAgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzZXR1cElmcmFtZUNvbnRlbnQgPSAoZG9jOiBEb2N1bWVudCwgY29udGVudDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gY3JlYXRlU3R5bGVTaGVldCgpO1xuICAgICAgICBkb2MuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cbiAgICAgICAgY3VzdG9tQ1NTLmZvckVhY2goY3NzID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2MuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuICAgICAgICAgICAgbGluay5yZWwgPSAnc3R5bGVzaGVldCc7XG4gICAgICAgICAgICBsaW5rLnR5cGUgPSAndGV4dC9jc3MnO1xuICAgICAgICAgICAgbGluay5ocmVmID0gY3NzO1xuICAgICAgICAgICAgZG9jLmhlYWQuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRvYy5ib2R5LmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgICAgIGRvYy5ib2R5LnN0eWxlLnBhZGRpbmcgPSAnMCc7XG4gICAgICAgIGRvYy5ib2R5LnN0eWxlLm1heFdpZHRoID0gJzEwMCUnO1xuICAgICAgICBkb2MuYm9keS5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgZG9jLmJvZHkuc3R5bGUuYm94U2l6aW5nID0gJ2JvcmRlci1ib3gnO1xuICAgIH07XG5cbiAgICBjb25zdCB1cGRhdGVDb250ZW50ID0gKG5ld0NvbnRlbnQ6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAoIWlzTG9hZGVkKSB7XG4gICAgICAgICAgICBwZW5kaW5nQ29udGVudCA9IG5ld0NvbnRlbnQ7XG4gICAgICAgICAgICBpZnJhbWUuc3JjZG9jID0gY3JlYXRlSWZyYW1lQ29udGVudChuZXdDb250ZW50KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRvYyA9IGdldElmcmFtZURvY3VtZW50KCk7XG4gICAgICAgIGlmICghZG9jKSB7XG4gICAgICAgICAgICBwZW5kaW5nQ29udGVudCA9IG5ld0NvbnRlbnQ7XG4gICAgICAgICAgICBpZnJhbWUuc3JjZG9jID0gY3JlYXRlSWZyYW1lQ29udGVudChuZXdDb250ZW50KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkb2MuaGVhZC5xdWVyeVNlbGVjdG9yKCdzdHlsZScpKSB7XG4gICAgICAgICAgICBkb2MuYm9keS5pbm5lckhUTUwgPSBuZXdDb250ZW50O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0dXBJZnJhbWVDb250ZW50KGRvYywgbmV3Q29udGVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZnJhbWUuc3luY0hlaWdodCgpO1xuICAgIH07XG5cbiAgICBpZnJhbWUuc3luY0NvbnRlbnQgPSAobmV3Q29udGVudDogc3RyaW5nKSA9PiB7XG4gICAgICAgIHVwZGF0ZUNvbnRlbnQobmV3Q29udGVudCk7XG4gICAgfTtcblxuICAgIGlmcmFtZS5zeW5jSGVpZ2h0ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBib2R5ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3c/LmRvY3VtZW50LmJvZHk7XG4gICAgICAgIGlmICghYm9keSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBib2R5LmdldEVsZW1lbnRzQnlUYWdOYW1lKCcqJyk7XG4gICAgICAgIGxldCBtYXhIZWlnaHQgPSBib2R5Lm9mZnNldEhlaWdodDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudHNbaV0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBjb25zdCBib3R0b20gPSBlbGVtZW50Lm9mZnNldFRvcCArIGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgbWF4SGVpZ2h0ID0gTWF0aC5tYXgobWF4SGVpZ2h0LCBib3R0b20pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWZyYW1lLnN0eWxlLmhlaWdodCA9IChtYXhIZWlnaHQgKyA1KSArICdweCc7XG4gICAgICAgIGJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcblxuICAgICAgICBtb2RhbC5jaGF0TWVzc2FnZXMuc2Nyb2xsVG9wID0gbW9kYWwuY2hhdE1lc3NhZ2VzLnNjcm9sbEhlaWdodDtcbiAgICB9XG5cbiAgICBpZnJhbWUub25sb2FkID0gKCkgPT4ge1xuICAgICAgICBpc0xvYWRlZCA9IHRydWU7XG4gICAgICAgIGlmIChwZW5kaW5nQ29udGVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IHBlbmRpbmdDb250ZW50O1xuICAgICAgICAgICAgcGVuZGluZ0NvbnRlbnQgPSBudWxsO1xuICAgICAgICAgICAgY29uc3QgZG9jID0gZ2V0SWZyYW1lRG9jdW1lbnQoKTtcbiAgICAgICAgICAgIGlmIChkb2MpIHtcbiAgICAgICAgICAgICAgICBzZXR1cElmcmFtZUNvbnRlbnQoZG9jLCBjb250ZW50KTtcbiAgICAgICAgICAgICAgICBpZnJhbWUuc3luY0hlaWdodCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmcmFtZS5zeW5jSGVpZ2h0KCk7XG4gICAgfTtcblxuICAgIGlmcmFtZS5zcmNkb2MgPSBjcmVhdGVJZnJhbWVDb250ZW50KGNvbnRlbnQpO1xuXG4gICAgcmV0dXJuIGlmcmFtZTtcbn1cbiIsInR5cGUgVGV4dGFyZWFPdmVybGF5T3B0aW9ucyA9IHtcbiAgICBpbmRpY2F0b3JUeXBlPzogJ3NwaW5uZXInIHwgJ2RvdHMnO1xuICAgIG92ZXJsYXlDb2xvcj86IHN0cmluZztcbiAgICBpbmRpY2F0b3JDb2xvcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUxvYWRpbmdPdmVybGF5ID0gKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBvcHRpb25zOiBUZXh0YXJlYU92ZXJsYXlPcHRpb25zID0ge30pID0+IHtcbiAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgIGluZGljYXRvclR5cGU6IG9wdGlvbnMuaW5kaWNhdG9yVHlwZSB8fCAnc3Bpbm5lcicsXG4gICAgICAgIG92ZXJsYXlDb2xvcjogb3B0aW9ucy5vdmVybGF5Q29sb3IgfHwgJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC43KScsXG4gICAgICAgIGluZGljYXRvckNvbG9yOiBvcHRpb25zLmluZGljYXRvckNvbG9yIHx8ICcjMzQ5OGRiJ1xuICAgIH07XG5cbiAgICBjb25zdCBvdmVybGF5OiBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IGluZGljYXRvcjogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIGNvbnN0IHRleHRhcmVhU3R5bGVzOiBDU1NTdHlsZURlY2xhcmF0aW9uID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgY29uc3QgdGV4dGFyZWFSZWN0OiBET01SZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgIGlmICghb3B0aW9ucy5pbmRpY2F0b3JDb2xvcikge1xuICAgICAgICBjb25maWcuaW5kaWNhdG9yVHlwZSA9IHRleHRhcmVhUmVjdC5oZWlnaHQgPD0gNTAgPyAnZG90cycgOiAnc3Bpbm5lcic7XG4gICAgfVxuXG4gICAgb3ZlcmxheS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgb3ZlcmxheS5zdHlsZS50b3AgPSAnMCc7XG4gICAgb3ZlcmxheS5zdHlsZS5sZWZ0ID0gJzAnO1xuICAgIG92ZXJsYXkuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgb3ZlcmxheS5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgb3ZlcmxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb25maWcub3ZlcmxheUNvbG9yO1xuICAgIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICBvdmVybGF5LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7XG4gICAgb3ZlcmxheS5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG4gICAgb3ZlcmxheS5zdHlsZS56SW5kZXggPSAnMTAwMDAnO1xuICAgIG92ZXJsYXkuc3R5bGUuYm9yZGVyUmFkaXVzID0gdGV4dGFyZWFTdHlsZXMuYm9yZGVyUmFkaXVzO1xuXG4gICAgbGV0IHN0eWxlVGV4dCA9ICcnO1xuXG4gICAgaWYgKGNvbmZpZy5pbmRpY2F0b3JUeXBlID09PSAnc3Bpbm5lcicpIHtcbiAgICAgICAgLy8gQXBwbHkgc3R5bGVzIHRvIHRoZSBzcGlubmVyXG4gICAgICAgIGluZGljYXRvci5zdHlsZS5ib3JkZXIgPSBgNHB4IHNvbGlkICNmM2YzZjNgO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYm9yZGVyVG9wID0gYDRweCBzb2xpZCAke2NvbmZpZy5pbmRpY2F0b3JDb2xvcn1gO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzUwJSc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS53aWR0aCA9ICczMHB4JztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmhlaWdodCA9ICczMHB4JztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmFuaW1hdGlvbiA9ICd0ZXh0YXJlYU92ZXJsYXlTcGluIDFzIGxpbmVhciBpbmZpbml0ZSc7XG5cbiAgICAgICAgLy8gQWRkIHNwaW5uZXIgYW5pbWF0aW9uXG4gICAgICAgIHN0eWxlVGV4dCA9IGBcbiAgICAgIEBrZXlmcmFtZXMgdGV4dGFyZWFPdmVybGF5U3BpbiB7XG4gICAgICAgIDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH1cbiAgICAgICAgMTAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH1cbiAgICAgIH1cbiAgICBgO1xuICAgIH0gZWxzZSBpZiAoY29uZmlnLmluZGljYXRvclR5cGUgPT09ICdkb3RzJykge1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5oZWlnaHQgPSAnMjBweCc7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGRvdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgZG90LnN0eWxlLndpZHRoID0gJzhweCc7XG4gICAgICAgICAgICBkb3Quc3R5bGUuaGVpZ2h0ID0gJzhweCc7XG4gICAgICAgICAgICBkb3Quc3R5bGUuYm9yZGVyUmFkaXVzID0gJzUwJSc7XG4gICAgICAgICAgICBkb3Quc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29uZmlnLmluZGljYXRvckNvbG9yO1xuICAgICAgICAgICAgZG90LnN0eWxlLm1hcmdpbiA9ICcwIDRweCc7XG4gICAgICAgICAgICBkb3Quc3R5bGUuYW5pbWF0aW9uID0gYHRleHRhcmVhT3ZlcmxheURvdFB1bHNlIDEuNHMgaW5maW5pdGUgZWFzZS1pbi1vdXRgO1xuICAgICAgICAgICAgZG90LnN0eWxlLmFuaW1hdGlvbkRlbGF5ID0gYCR7aSAqIDAuMn1zYDtcbiAgICAgICAgICAgIGluZGljYXRvci5hcHBlbmRDaGlsZChkb3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3R5bGVUZXh0ID0gYFxuICAgICAgQGtleWZyYW1lcyB0ZXh0YXJlYU92ZXJsYXlEb3RQdWxzZSB7XG4gICAgICAgIDAlLCA4MCUsIDEwMCUgeyB0cmFuc2Zvcm06IHNjYWxlKDApOyBvcGFjaXR5OiAwLjU7IH1cbiAgICAgICAgNDAlIHsgdHJhbnNmb3JtOiBzY2FsZSgxKTsgb3BhY2l0eTogMTsgfVxuICAgICAgfVxuICAgIGA7XG4gICAgfVxuXG4gICAgY29uc3Qgc3R5bGVTaGVldDogSFRNTFN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgc3R5bGVTaGVldC50ZXh0Q29udGVudCA9IHN0eWxlVGV4dDtcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlU2hlZXQpO1xuXG4gICAgb3ZlcmxheS5hcHBlbmRDaGlsZChpbmRpY2F0b3IpO1xuXG4gICAgY29uc3QgcGFyZW50U3R5bGVzOiBDU1NTdHlsZURlY2xhcmF0aW9uID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudC5wYXJlbnRFbGVtZW50IGFzIEVsZW1lbnQpO1xuICAgIGxldCB3cmFwcGVyOiBIVE1MRWxlbWVudDtcblxuICAgIGlmIChbJ3JlbGF0aXZlJywgJ2Fic29sdXRlJywgJ2ZpeGVkJ10uaW5kZXhPZihwYXJlbnRTdHlsZXMucG9zaXRpb24pID09PSAtMSkge1xuICAgICAgICB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHdyYXBwZXIuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgICB3cmFwcGVyLnN0eWxlLndpZHRoID0gYCR7dGV4dGFyZWFSZWN0LndpZHRofXB4YDtcbiAgICAgICAgd3JhcHBlci5zdHlsZS5oZWlnaHQgPSBgJHt0ZXh0YXJlYVJlY3QuaGVpZ2h0fXB4YDtcbiAgICAgICAgd3JhcHBlci5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG5cbiAgICAgICAgZWxlbWVudC5wYXJlbnROb2RlPy5pbnNlcnRCZWZvcmUod3JhcHBlciwgZWxlbWVudCk7XG4gICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgd3JhcHBlciA9IGVsZW1lbnQucGFyZW50RWxlbWVudCBhcyBIVE1MRWxlbWVudDtcbiAgICB9XG5cbiAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChvdmVybGF5KTtcblxuICAgIGNvbnN0IHVwZGF0ZWRSZWN0OiBET01SZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBpZiAod3JhcHBlciAhPT0gZWxlbWVudC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIHdyYXBwZXIuc3R5bGUud2lkdGggPSBgJHt1cGRhdGVkUmVjdC53aWR0aH1weGA7XG4gICAgICAgIHdyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gYCR7dXBkYXRlZFJlY3QuaGVpZ2h0fXB4YDtcbiAgICB9XG5cbiAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cbiAgICByZXR1cm4gKCk6IHZvaWQgPT4ge1xuICAgICAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuXG4gICAgICAgIG92ZXJsYXkucmVtb3ZlKCk7XG4gICAgICAgIHN0eWxlU2hlZXQucmVtb3ZlKCk7XG4gICAgICAgIGlmICh3cmFwcGVyICE9PSBlbGVtZW50LnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHdyYXBwZXIucGFyZW50Tm9kZT8uaW5zZXJ0QmVmb3JlKGVsZW1lbnQsIHdyYXBwZXIpO1xuICAgICAgICAgICAgd3JhcHBlci5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH07XG59XG4iLCJpbXBvcnQge2NyZWF0ZU1vZGFsfSBmcm9tIFwiLi9sb2NhbENoYXRcIjtcbmltcG9ydCB7IGNyZWF0ZUxvYWRpbmdPdmVybGF5IH0gZnJvbSAnLi9vdmVybGF5J1xuaW1wb3J0IHR5cGUge01vZGFsQ29uZmlnfSBmcm9tIFwiLi9sb2NhbENoYXQvdHlwZXNcIjtcblxuXG5leHBvcnQgY29uc3QgdWkgPSB7XG4gICAgY3JlYXRlTG9hZGluZ092ZXJsYXksXG4gICAgbG9jYWxDaGF0OiAoY29uZmlnOiBNb2RhbENvbmZpZykgPT4ge1xuICAgICAgICByZXR1cm4gY3JlYXRlTW9kYWwoY29uZmlnKTtcbiAgICB9XG59O1xuIiwiaW1wb3J0IHtleGVjdXRvcn0gZnJvbSBcIi4vZXhlY3V0b3JcIjtcbmltcG9ydCB7IGhpc3Rvcnl9IGZyb20gJy4vaGlzdG9yeSc7XG5pbXBvcnQge3VpfSBmcm9tIFwiLi91aVwiO1xuaW1wb3J0IHtjcmVhdGVMb2FkaW5nT3ZlcmxheX0gZnJvbSBcIi4vdWkvb3ZlcmxheVwiO1xuaW1wb3J0IHR5cGUge0RhdGFPdXRwdXR9IGZyb20gJy4vaGlzdG9yeSc7XG5pbXBvcnQgdHlwZSB7TWVzc2FnZX0gZnJvbSBcIi4vY2hhdEhpc3RvcnlcIjtcblxudHlwZSBEYXRhQ29udGV4dCA9IHtlbHM6IHsgZmllbGQ6IGFueSwgd3JhcHBlcjogSGlzdG9yeUVsZW1lbnQgfVtdfTtcbnR5cGUgSGlzdG9yeUJ1dHRvbiA9IEhUTUxCdXR0b25FbGVtZW50ICYge1xuICAgIGVuYWJsZTogKCkgPT4gdm9pZDtcbiAgICBkaXNhYmxlOiAoKSA9PiB2b2lkO1xufTtcbnR5cGUgSGlzdG9yeUluZm8gPSBIVE1MRWxlbWVudCAmIHtcbiAgICB1cGRhdGU6IChzaG93aW5nOiBudW1iZXIsIHRvdGFsOiBudW1iZXIpID0+IHZvaWQ7XG59O1xudHlwZSBIaXN0b3J5TmF2ID0gSFRNTEVsZW1lbnQgJiB7XG4gICAgc2hvdzogKCkgPT4gdm9pZDtcbiAgICBoaWRlOiAoKSA9PiB2b2lkO1xuICAgIHByZXZCdXR0b246IEhpc3RvcnlCdXR0b247XG4gICAgbmV4dEJ1dHRvbjogSGlzdG9yeUJ1dHRvbjtcbiAgICBpbmZvOiBIaXN0b3J5SW5mbztcbn07XG50eXBlIEhpc3RvcnlFbGVtZW50ID0gSFRNTEVsZW1lbnQgJiB7IGhpc3RvcnlOYXY6IEhpc3RvcnlOYXYgfVxuXG5jb25zdCBoaXN0b3J5TmF2U3luYyA9IChkYXRhOiBEYXRhT3V0cHV0PERhdGFDb250ZXh0Piwgbm9TdG9yZT86IGJvb2xlYW4pID0+IHtcbiAgICBkYXRhLmNvbnRleHQuZWxzLmZvckVhY2goKHt3cmFwcGVyLCBmaWVsZH0pID0+IHtcbiAgICAgICAgY29uc3QgcHJldlZhbHVlID0gZmllbGQuZ2V0VmFsdWUoKTtcbiAgICAgICAgZmllbGQuc2V0VmFsdWUoZGF0YS52YWx1ZSk7XG4gICAgICAgIGZpZWxkLmZpcmVFdmVudCgnY2hhbmdlJywgZmllbGQsIGRhdGEudmFsdWUsIHByZXZWYWx1ZSk7XG5cbiAgICAgICAgaWYgKG5vU3RvcmUpIHtcbiAgICAgICAgICAgIGZpZWxkLmVsLmRvbS5zY3JvbGxUb3AgPSBmaWVsZC5lbC5kb20uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGEudG90YWwgPiAwKSB7XG4gICAgICAgICAgICB3cmFwcGVyLmhpc3RvcnlOYXYuc2hvdygpO1xuICAgICAgICB9XG5cbiAgICAgICAgd3JhcHBlci5oaXN0b3J5TmF2LmluZm8udXBkYXRlKGRhdGEuY3VycmVudCwgZGF0YS50b3RhbCk7XG5cbiAgICAgICAgaWYgKGRhdGEucHJldlN0YXR1cykge1xuICAgICAgICAgICAgd3JhcHBlci5oaXN0b3J5TmF2LnByZXZCdXR0b24uZW5hYmxlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3cmFwcGVyLmhpc3RvcnlOYXYucHJldkJ1dHRvbi5kaXNhYmxlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YS5uZXh0U3RhdHVzKSB7XG4gICAgICAgICAgICB3cmFwcGVyLmhpc3RvcnlOYXYubmV4dEJ1dHRvbi5lbmFibGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdyYXBwZXIuaGlzdG9yeU5hdi5uZXh0QnV0dG9uLmRpc2FibGUoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuY29uc3QgY3JlYXRlV2FuZEVsID0gKCkgPT4ge1xuICAgIGNvbnN0IHdhbmRFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHdhbmRFbC5jbGFzc05hbWUgPSAnbW9kYWktZ2VuZXJhdGUnO1xuICAgIHdhbmRFbC5pbm5lclRleHQgPSAn4pymJ1xuICAgIHdhbmRFbC50eXBlID0gJ2J1dHRvbidcbiAgICB3YW5kRWwudGl0bGUgPSAnR2VuZXJhdGUgdXNpbmcgQUknXG5cbiAgICByZXR1cm4gd2FuZEVsO1xufVxuXG5jb25zdCBjcmVhdGVIaXN0b3J5TmF2ID0gKGNhY2hlOiBSZXR1cm5UeXBlPHR5cGVvZiBoaXN0b3J5LmluaXQ8RGF0YUNvbnRleHQ+PikgPT4ge1xuICAgIGNvbnN0IHByZXZCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKSBhcyBIaXN0b3J5QnV0dG9uO1xuICAgIHByZXZCdXR0b24udHlwZSA9ICdidXR0b24nO1xuICAgIHByZXZCdXR0b24udGl0bGUgPSAnUHJldmlvdXMgVmVyc2lvbic7XG4gICAgcHJldkJ1dHRvbi5jbGFzc05hbWUgPSAnbW9kYWktaGlzdG9yeV9wcmV2JztcbiAgICBwcmV2QnV0dG9uLmRpc2FibGUgPSAoKSA9PiB7XG4gICAgICAgIHByZXZCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgICBwcmV2QnV0dG9uLmVuYWJsZSA9ICgpID0+IHtcbiAgICAgICAgcHJldkJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBwcmV2QnV0dG9uLmlubmVySFRNTCA9ICdwcmV2JztcbiAgICBwcmV2QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjYWNoZS5wcmV2KCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBuZXh0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJykgYXMgSGlzdG9yeUJ1dHRvbjtcbiAgICBuZXh0QnV0dG9uLnR5cGUgPSAnYnV0dG9uJztcbiAgICBuZXh0QnV0dG9uLnRpdGxlID0gJ05leHQgVmVyc2lvbic7XG4gICAgbmV4dEJ1dHRvbi5jbGFzc05hbWUgPSAnbW9kYWktaGlzdG9yeV9uZXh0JztcbiAgICBuZXh0QnV0dG9uLmRpc2FibGUgPSAoKSA9PiB7XG4gICAgICAgIG5leHRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgICBuZXh0QnV0dG9uLmVuYWJsZSA9ICgpID0+IHtcbiAgICAgICAgbmV4dEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBuZXh0QnV0dG9uLmlubmVySFRNTCA9ICduZXh0JztcbiAgICBuZXh0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjYWNoZS5uZXh0KCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBpbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpIGFzIEhpc3RvcnlJbmZvO1xuICAgIGluZm8udXBkYXRlID0gKHNob3dpbmcsIHRvdGFsKSA9PiB7XG4gICAgICAgIGluZm8uaW5uZXJUZXh0ID0gYCR7c2hvd2luZ30vJHt0b3RhbH1gO1xuICAgIH1cbiAgICBpbmZvLmlubmVyVGV4dCA9ICcnO1xuXG4gICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSBhcyBIaXN0b3J5TmF2O1xuICAgIHdyYXBwZXIuc2hvdyA9ICgpID0+IHtcbiAgICAgICAgd3JhcHBlci5zdHlsZS5kaXNwbGF5ID0gJ2luaXRpYWwnO1xuICAgIH1cblxuICAgIHdyYXBwZXIuaGlkZSA9ICgpID0+IHtcbiAgICAgICAgd3JhcHBlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cblxuICAgIHdyYXBwZXIucHJldkJ1dHRvbiA9IHByZXZCdXR0b247XG4gICAgd3JhcHBlci5uZXh0QnV0dG9uID0gbmV4dEJ1dHRvbjtcbiAgICB3cmFwcGVyLmluZm8gPSBpbmZvO1xuXG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChwcmV2QnV0dG9uKTtcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKG5leHRCdXR0b24pO1xuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoaW5mbyk7XG5cbiAgICB3cmFwcGVyLmhpZGUoKTtcbiAgICBwcmV2QnV0dG9uLmRpc2FibGUoKTtcbiAgICBuZXh0QnV0dG9uLmRpc2FibGUoKTtcblxuICAgIHJldHVybiB3cmFwcGVyO1xufVxuXG5jb25zdCBjcmVhdGVGcmVlVGV4dFByb21wdCA9IChmaWVsZE5hbWU6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHdhbmRFbCA9IGNyZWF0ZVdhbmRFbCgpO1xuICAgIHdhbmRFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdWkubG9jYWxDaGF0KHtcbiAgICAgICAgICAgIGtleTogZmllbGROYW1lLFxuICAgICAgICAgICAgZmllbGQ6IGZpZWxkTmFtZSxcbiAgICAgICAgICAgIG92ZXJsYXk6IGZhbHNlLFxuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgYXZhaWxhYmxlVHlwZXM6IFsndGV4dCcsICdpbWFnZSddLFxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgcmVzb3VyY2U6IE1PRHgucmVxdWVzdC5pZCxcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gd2FuZEVsO1xufVxuXG5jb25zdCBjcmVhdGVGb3JjZWRUZXh0UHJvbXB0ID0gKGZpZWxkOiBhbnksIGZpZWxkTmFtZTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgYWlXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpIGFzIEhpc3RvcnlFbGVtZW50O1xuXG4gICAgY29uc3Qgd2FuZEVsID0gY3JlYXRlV2FuZEVsKCk7XG4gICAgd2FuZEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBkb25lID0gY3JlYXRlTG9hZGluZ092ZXJsYXkoZmllbGQuZWwuZG9tKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY3V0b3IubWdyLnByb21wdC50ZXh0KHtcbiAgICAgICAgICAgICAgICAvL0B0cy1leHBlY3QtZXJyb3IgRXh0XG4gICAgICAgICAgICAgICAgaWQ6IE1PRHgucmVxdWVzdC5pZCxcbiAgICAgICAgICAgICAgICBmaWVsZDogZmllbGROYW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhY2hlLmluc2VydChyZXN1bHQuY29udGVudCk7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgLy9AdHMtZXhwZWN0LWVycm9yIEV4dFxuICAgICAgICAgICAgRXh0Lk1zZy5hbGVydChcIkZhaWxlZFwiLCBfKCdtb2RhaS5jbXAuZmFpbGVkX3RyeV9hZ2FpbicsIHtcIm1zZ1wiOiBlcnIubWVzc2FnZX0pKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgYWlXcmFwcGVyLmFwcGVuZENoaWxkKHdhbmRFbCk7XG5cbiAgICBjb25zdCBjYWNoZSA9IGhpc3RvcnkuaW5pdChcbiAgICAgICAgZmllbGROYW1lLFxuICAgICAgICBoaXN0b3J5TmF2U3luYyxcbiAgICAgICAgZmllbGQuZ2V0VmFsdWUoKSxcbiAgICAgICAge30gYXMgRGF0YUNvbnRleHRcbiAgICApO1xuXG4gICAgaWYgKCFjYWNoZS5jYWNoZWRJdGVtLmNvbnRleHQuZWxzKSB7XG4gICAgICAgIGNhY2hlLmNhY2hlZEl0ZW0uY29udGV4dC5lbHMgPSBbXTtcbiAgICB9XG4gICAgY2FjaGUuY2FjaGVkSXRlbS5jb250ZXh0LmVscy5wdXNoKHtmaWVsZCwgd3JhcHBlcjogYWlXcmFwcGVyfSk7XG5cbiAgICBjb25zdCBoaXN0b3J5TmF2ID0gY3JlYXRlSGlzdG9yeU5hdihjYWNoZSk7XG5cbiAgICBhaVdyYXBwZXIuYXBwZW5kQ2hpbGQoaGlzdG9yeU5hdik7XG4gICAgYWlXcmFwcGVyLmhpc3RvcnlOYXYgPSBoaXN0b3J5TmF2O1xuXG4gICAgcmV0dXJuIGFpV3JhcHBlcjtcbn1cblxuY29uc3QgY3JlYXRlSW1hZ2VQcm9tcHQgPSAobWVkaWFTb3VyY2U6IHN0cmluZywgZmllbGROYW1lOiBzdHJpbmcsIG9uU3VjY2VzczogKG1zZzogTWVzc2FnZSkgPT4gdm9pZCkgPT4ge1xuICAgIGNvbnN0IGltYWdlV2FuZCA9IGNyZWF0ZVdhbmRFbCgpO1xuICAgIGltYWdlV2FuZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdWkubG9jYWxDaGF0KHtcbiAgICAgICAgICAgIGtleTogZmllbGROYW1lLFxuICAgICAgICAgICAgZmllbGQ6IGZpZWxkTmFtZSxcbiAgICAgICAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICByZXNvdXJjZTogTU9EeC5yZXF1ZXN0LmlkLFxuICAgICAgICAgICAgaW1hZ2U6IHtcbiAgICAgICAgICAgICAgICBtZWRpYVNvdXJjZTogcGFyc2VJbnQobWVkaWFTb3VyY2UpIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpbWFnZUFjdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBjb3B5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpbnNlcnQ6IChtc2csIG1vZGFsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG9uU3VjY2Vzcyhtc2cpO1xuICAgICAgICAgICAgICAgICAgICBtb2RhbC5hcGkuY2xvc2VNb2RhbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gaW1hZ2VXYW5kO1xufVxuXG5jb25zdCBhdHRhY2hGaWVsZCA9IChjbXA6IHN0cmluZywgZmllbGROYW1lOiBzdHJpbmcpID0+IHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIEV4dFxuICAgIGNvbnN0IGZpZWxkID0gRXh0LmdldENtcChjbXApO1xuICAgIGlmICghZmllbGQpIHJldHVybjtcblxuICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJykgYXMgSGlzdG9yeUVsZW1lbnQ7XG5cbiAgICBjb25zdCB3YW5kRWwgPSBjcmVhdGVXYW5kRWwoKTtcbiAgICB3YW5kRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGRvbmUgPSBjcmVhdGVMb2FkaW5nT3ZlcmxheShmaWVsZC5lbC5kb20pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBleGVjdXRvci5tZ3IucHJvbXB0LnRleHQoe1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgTU9EeFxuICAgICAgICAgICAgICAgIGlkOiBNT0R4LnJlcXVlc3QuaWQsXG4gICAgICAgICAgICAgICAgZmllbGQ6IGZpZWxkTmFtZVxuICAgICAgICAgICAgfSwgKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjYWNoZS5pbnNlcnQoZGF0YS5jb250ZW50LCB0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2FjaGUuaW5zZXJ0KHJlc3VsdC5jb250ZW50KTtcbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIEV4dFxuICAgICAgICAgICAgRXh0Lk1zZy5hbGVydChcIkZhaWxlZFwiLCBfKCdtb2RhaS5jbXAuZmFpbGVkX3RyeV9hZ2FpbicsIHtcIm1zZ1wiOiBlcnIubWVzc2FnZX0pKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZCh3YW5kRWwpO1xuXG4gICAgY29uc3QgY2FjaGUgPSBoaXN0b3J5LmluaXQ8RGF0YUNvbnRleHQ+KFxuICAgICAgICBmaWVsZE5hbWUsXG4gICAgICAgIGhpc3RvcnlOYXZTeW5jLFxuICAgICAgICBmaWVsZC5nZXRWYWx1ZSgpLFxuICAgICAgICB7fSBhcyBEYXRhQ29udGV4dCxcbiAgICApO1xuXG4gICAgaWYgKCFjYWNoZS5jYWNoZWRJdGVtLmNvbnRleHQuZWxzKSB7XG4gICAgICAgIGNhY2hlLmNhY2hlZEl0ZW0uY29udGV4dC5lbHMgPSBbXTtcbiAgICB9XG4gICAgY2FjaGUuY2FjaGVkSXRlbS5jb250ZXh0LmVscy5wdXNoKHtmaWVsZCwgd3JhcHBlcn0pO1xuXG4gICAgY29uc3QgaGlzdG9yeU5hdiA9IGNyZWF0ZUhpc3RvcnlOYXYoY2FjaGUpO1xuXG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChoaXN0b3J5TmF2KTtcbiAgICB3cmFwcGVyLmhpc3RvcnlOYXYgPSBoaXN0b3J5TmF2O1xuXG4gICAgZmllbGQubGFiZWwuYXBwZW5kQ2hpbGQod3JhcHBlcik7XG59XG5cbmNvbnN0IGF0dGFjaEltYWdlUGx1cyA9IChpbWdQbHVzUGFuZWw6IEVsZW1lbnQsIGZpZWxkTmFtZTogc3RyaW5nKSA9PiB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBFeHRcbiAgICBjb25zdCBpbWFnZVBsdXMgPSBFeHQuZ2V0Q21wKGltZ1BsdXNQYW5lbC5maXJzdEVsZW1lbnRDaGlsZD8uaWQpO1xuXG4gICAgY29uc3QgaW1hZ2VXYW5kID0gY3JlYXRlSW1hZ2VQcm9tcHQoXG4gICAgICAgIGltYWdlUGx1cy5pbWFnZUJyb3dzZXIuc291cmNlLFxuICAgICAgICBmaWVsZE5hbWUsXG4gICAgICAgIGZ1bmN0aW9uKG1zZykge1xuICAgICAgICAgICAgaW1hZ2VQbHVzLmltYWdlQnJvd3Nlci5zZXRWYWx1ZShtc2cuY3R4LnVybCk7XG4gICAgICAgICAgICBpbWFnZVBsdXMub25JbWFnZUNoYW5nZShtc2cuY3R4LnVybClcbiAgICAgICAgfVxuICAgICk7XG5cbiAgICBjb25zdCBhbHRUZXh0V2FuZCA9IGNyZWF0ZVdhbmRFbCgpO1xuICAgIGFsdFRleHRXYW5kLnN0eWxlLm1hcmdpblRvcCA9ICc2cHgnO1xuICAgIGFsdFRleHRXYW5kLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBpbWdFbGVtZW50ID0gaW1hZ2VQbHVzLmltYWdlUHJldmlldy5lbC5kb207XG5cbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBpZiAoIWN0eCkgcmV0dXJuO1xuXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IGltZ0VsZW1lbnQud2lkdGg7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWdFbGVtZW50LmhlaWdodDtcblxuICAgICAgICBjdHguZHJhd0ltYWdlKGltZ0VsZW1lbnQsIDAsIDApO1xuXG4gICAgICAgIGNvbnN0IGJhc2U2NERhdGEgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTtcblxuICAgICAgICBjb25zdCBkb25lID0gY3JlYXRlTG9hZGluZ092ZXJsYXkoaW1hZ2VQbHVzLmFsdFRleHRGaWVsZC5pdGVtcy5pdGVtc1swXS5lbC5kb20pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBleGVjdXRvci5tZ3IucHJvbXB0LnZpc2lvbih7XG4gICAgICAgICAgICAgICAgaW1hZ2U6IGJhc2U2NERhdGEsXG4gICAgICAgICAgICAgICAgZmllbGQ6IGZpZWxkTmFtZVxuICAgICAgICAgICAgfSwgKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBpbWFnZVBsdXMuYWx0VGV4dEZpZWxkLml0ZW1zLml0ZW1zWzBdLnNldFZhbHVlKGRhdGEuY29udGVudCk7XG4gICAgICAgICAgICAgICAgaW1hZ2VQbHVzLmFsdFRleHRGaWVsZC5pdGVtcy5pdGVtc1swXS5lbC5kb20uc2Nyb2xsVG9wID0gaW1hZ2VQbHVzLmFsdFRleHRGaWVsZC5pdGVtcy5pdGVtc1swXS5lbC5kb20uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgICAgICAgIGltYWdlUGx1cy5pbWFnZS5hbHRUYWcgPSBkYXRhLmNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgaW1hZ2VQbHVzLnVwZGF0ZVZhbHVlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGltYWdlUGx1cy5hbHRUZXh0RmllbGQuaXRlbXMuaXRlbXNbMF0uc2V0VmFsdWUocmVzdWx0LmNvbnRlbnQpO1xuICAgICAgICAgICAgaW1hZ2VQbHVzLmltYWdlLmFsdFRhZyA9IHJlc3VsdC5jb250ZW50O1xuICAgICAgICAgICAgaW1hZ2VQbHVzLnVwZGF0ZVZhbHVlKCk7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBFeHRcbiAgICAgICAgICAgIEV4dC5Nc2cuYWxlcnQoXCJGYWlsZWRcIiwgXygnbW9kYWkuY21wLmZhaWxlZF90cnlfYWdhaW4nLCB7XCJtc2dcIjogZXJyLm1lc3NhZ2V9KSk7XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgaW1hZ2VQbHVzLmFsdFRleHRGaWVsZC5lbC5kb20uc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICBpbWFnZVBsdXMuYWx0VGV4dEZpZWxkLmVsLmRvbS5zdHlsZS5qdXN0aWZ5SXRlbXMgPSAnY2VudGVyJztcbiAgICBpbWFnZVBsdXMuYWx0VGV4dEZpZWxkLmVsLmRvbS5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG5cbiAgICBpbWFnZVBsdXMuZWwuZG9tLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsJykuYXBwZW5kQ2hpbGQoaW1hZ2VXYW5kKTtcbiAgICBpbWFnZVBsdXMuYWx0VGV4dEZpZWxkLmVsLmRvbS5hcHBlbmRDaGlsZChhbHRUZXh0V2FuZCk7XG59O1xuXG5jb25zdCBhdHRhY2hDb250ZW50ID0gKCkgPT4ge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgRXh0XG4gICAgY29uc3QgY21wID0gRXh0LmdldENtcCgnbW9keC1yZXNvdXJjZS1jb250ZW50Jyk7XG4gICAgY29uc3QgbGFiZWwgPSBjbXAuZWwuZG9tLnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsJyk7XG4gICAgbGFiZWwuYXBwZW5kQ2hpbGQoY3JlYXRlRnJlZVRleHRQcm9tcHQoJ3Jlcy5jb250ZW50JykpO1xufTtcblxuY29uc3QgYXR0YWNoVFZzID0gKCkgPT4ge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgRXh0XG4gICAgY29uc3QgZm9ybSA9IEV4dC5nZXRDbXAoJ21vZHgtcGFuZWwtcmVzb3VyY2UnKS5nZXRGb3JtKCk7XG4gICAgZm9yIChjb25zdCBbdHZJZCwgdHZOYW1lXSBvZiAobW9kQUk/LnR2cyB8fCBbXSkpIHtcbiAgICAgICAgLy9AdHMtZXhwZWN0LWVycm9yIEV4dFxuICAgICAgICBjb25zdCB3cmFwcGVyID0gRXh0LmdldChgdHYke3R2SWR9LXRyYCk7XG4gICAgICAgIGlmICghd3JhcHBlcikge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWVsZCA9IGZvcm0uZmluZEZpZWxkKGB0diR7dHZJZH1gKTtcbiAgICAgICAgY29uc3QgZmllbGROYW1lID0gYHR2LiR7dHZOYW1lfWA7XG5cbiAgICAgICAgaWYgKCFmaWVsZCkge1xuICAgICAgICAgICAgY29uc3QgaW1nUGx1c1BhbmVsID0gd3JhcHBlci5kb20ucXVlcnlTZWxlY3RvcignLmltYWdlcGx1cy1wYW5lbC1pbnB1dCcpO1xuICAgICAgICAgICAgaWYgKGltZ1BsdXNQYW5lbCkge1xuICAgICAgICAgICAgICAgIGF0dGFjaEltYWdlUGx1cyhpbWdQbHVzUGFuZWwsIGZpZWxkTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWVsZC54dHlwZSA9PT0gJ3RleHRmaWVsZCcgfHwgZmllbGQueHR5cGUgPT09ICd0ZXh0YXJlYScpIHtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgTU9EeFxuICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gTU9EeC5jb25maWdbYG1vZGFpLnR2LiR7dHZOYW1lfS50ZXh0LnByb21wdGBdO1xuXG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IHdyYXBwZXIuZG9tLnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsJyk7XG4gICAgICAgICAgICBpZiAoIWxhYmVsKSByZXR1cm47XG5cbiAgICAgICAgICAgIGlmIChwcm9tcHQpIHtcbiAgICAgICAgICAgICAgICBsYWJlbC5hcHBlbmRDaGlsZChjcmVhdGVGb3JjZWRUZXh0UHJvbXB0KGZpZWxkLCBmaWVsZE5hbWUpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGFiZWwuYXBwZW5kQ2hpbGQoY3JlYXRlRnJlZVRleHRQcm9tcHQoZmllbGROYW1lKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGQueHR5cGUgPT09ICdtb2R4LXBhbmVsLXR2LWltYWdlJykge1xuICAgICAgICAgICAgY29uc3QgaW1hZ2VXYW5kID0gY3JlYXRlSW1hZ2VQcm9tcHQoXG4gICAgICAgICAgICAgICAgZmllbGQuc291cmNlLFxuICAgICAgICAgICAgICAgIGZpZWxkTmFtZSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihtc2cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50RGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVVybDogbXNnLmN0eC51cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBtc2cuY3R4LnVybFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQuaXRlbXMuaXRlbXNbMV0uZmlyZUV2ZW50KCdzZWxlY3QnLCBldmVudERhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5maXJlRXZlbnQoJ3NlbGVjdCcsIGV2ZW50RGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSB3cmFwcGVyLmRvbS5xdWVyeVNlbGVjdG9yKCdsYWJlbCcpO1xuICAgICAgICAgICAgaWYgKCFsYWJlbCkgcmV0dXJuO1xuXG4gICAgICAgICAgICBsYWJlbC5hcHBlbmRDaGlsZChpbWFnZVdhbmQpO1xuICAgICAgICB9XG4gICAgfVxuXG59XG5cbmNvbnN0IGF0dGFjaFJlc291cmNlRmllbGRzID0gKCkgPT4ge1xuICAgIGNvbnN0IGZpZWxkc01hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge1xuICAgICAgICBwYWdldGl0bGU6IFsnbW9keC1yZXNvdXJjZS1wYWdldGl0bGUnXSxcbiAgICAgICAgbG9uZ3RpdGxlOiBbJ21vZHgtcmVzb3VyY2UtbG9uZ3RpdGxlJywgJ3Nlb3N1aXRlLWxvbmd0aXRsZSddLFxuICAgICAgICBpbnRyb3RleHQ6IFsnbW9keC1yZXNvdXJjZS1pbnRyb3RleHQnXSxcbiAgICAgICAgZGVzY3JpcHRpb246IFsnbW9keC1yZXNvdXJjZS1kZXNjcmlwdGlvbicsICdzZW9zdWl0ZS1kZXNjcmlwdGlvbiddLFxuICAgICAgICBjb250ZW50OiBbJ21vZHgtcmVzb3VyY2UtY29udGVudCddLFxuICAgIH07XG5cbiAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIG1vZEFJPy5yZXNvdXJjZUZpZWxkcyB8fCBbXSkge1xuICAgICAgICBpZiAoIWZpZWxkc01hcFtmaWVsZF0pIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkID09PSAnY29udGVudCcpIHtcbiAgICAgICAgICAgIGF0dGFjaENvbnRlbnQoKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZmllbGRzTWFwW2ZpZWxkXS5mb3JFYWNoKChjbXBJZCkgPT4ge1xuICAgICAgICAgICAgYXR0YWNoRmllbGQoY21wSWQsIGByZXMuJHtmaWVsZH1gKTtcbiAgICAgICAgfSlcblxuICAgIH1cbn1cblxuXG4oKCkgPT4ge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBFeHQub25SZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBFeHQuZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBhdHRhY2hSZXNvdXJjZUZpZWxkcygpO1xuICAgICAgICAgICAgYXR0YWNoVFZzKCk7XG4gICAgICAgIH0sIDUwMCk7XG4gICAgfSk7XG59KSgpO1xuIiwiaW1wb3J0ICcuL3Jlc291cmNlJztcblxuZXhwb3J0IGNvbnN0IHdpbmRvdyA9IHt9O1xuXG5leHBvcnQgeyBjaGF0SGlzdG9yeSB9IGZyb20gJy4vY2hhdEhpc3RvcnknXG5leHBvcnQgeyBoaXN0b3J5IH0gZnJvbSAnLi9oaXN0b3J5J1xuZXhwb3J0IHsgZXhlY3V0b3IgfSBmcm9tICcuL2V4ZWN1dG9yJ1xuZXhwb3J0IHsgdWkgfSBmcm9tICcuL3VpJ1xuXG4iXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsIl9fd2VicGFja19yZXF1aXJlX18iLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwic2VydmljZXMiLCJidWZmZXJlZCIsImNoYXRncHQiLCJjb250ZW50IiwiZGF0YSIsImNob2ljZXMiLCJtZXNzYWdlIiwiRXJyb3IiLCJfIiwiaWQiLCJpbWFnZSIsInVybCIsImI2NF9qc29uIiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsImNsYXVkZSIsInRleHQiLCJnZW1pbmkiLCJjYW5kaWRhdGVzIiwicGFydHMiLCJiYXNlNjQiLCJwcmVkaWN0aW9ucyIsImJ5dGVzQmFzZTY0RW5jb2RlZCIsInN0cmVhbSIsIm5ld0RhdGEiLCJjdXJyZW50RGF0YSIsImN1cnJlbnRDb250ZW50IiwiZGVsdGEiLCJlcnJvckhhbmRsZXIiLCJhc3luYyIsInJlcyIsIm9rIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImhhbmRsZVN0cmVhbSIsInNlcnZpY2UiLCJwYXJzZXIiLCJvbkNodW5rU3RyZWFtIiwic2lnbmFsIiwiYm9keSIsInJlYWRlciIsImdldFJlYWRlciIsImRlY29kZXIiLCJUZXh0RGVjb2RlciIsImJ1ZmZlciIsImFib3J0ZWQiLCJkb25lIiwicmVhZCIsImNodW5rIiwiZGVjb2RlIiwianNvbkxpbmVzIiwidHJpbSIsInNwbGl0IiwibWFwIiwibGluZSIsInJlcGxhY2UiLCJmaWx0ZXIiLCJwYXJzZWREYXRhIiwiSlNPTiIsInBhcnNlIiwiY29uc29sZSIsImxvZyIsIm5ld2xpbmVJbmRleCIsImxhc3ROZXdsaW5lSW5kZXgiLCJpbmRleE9mIiwic2xpY2UiLCJzdGFydHNXaXRoIiwidHlwZSIsImFpRmV0Y2giLCJhY3Rpb24iLCJwYXJhbXMiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwiZmV0Y2giLCJtb2RBSSIsImFwaVVSTCIsIm1ldGhvZCIsInN0cmluZ2lmeSIsImhlYWRlcnMiLCJkZXRhaWwiLCJwYXJzZUludCIsImRldGFpbHMiLCJmb3JFeGVjdXRvciIsImV4ZWN1dG9yRGV0YWlscyIsImNhbGxTdHJlYW1TZXJ2aWNlIiwiY2FsbFNlcnZpY2UiLCJzZXJ2aWNlRXhlY3V0b3IiLCJhYm9ydCIsImV4ZWN1dG9yIiwibWdyIiwiZG93bmxvYWQiLCJtb2R4RmV0Y2giLCJwcm9tcHQiLCJmcmVlVGV4dCIsInZpc2lvbiIsInVuZGVmaW5lZCIsIl9jYWNoZSIsIl9mb3JtYXRPdXRwdXQiLCJjYWNoZWRJdGVtIiwicHJldlN0YXR1cyIsInZpc2libGUiLCJuZXh0U3RhdHVzIiwidmFsdWVzIiwibGVuZ3RoIiwiY3VycmVudCIsInRvdGFsIiwiY29udGV4dCIsImluc2VydCIsIm5vU3RvcmUiLCJwdXNoIiwib3V0cHV0IiwidGhpcyIsInN5bmNVSSIsIm5leHQiLCJwcmV2IiwiaW5pdCIsImluaXRWYWx1ZSIsImdldERhdGEiLCJnZXRBbGwiLCJhcHBseVN0eWxlcyIsImVsZW1lbnQiLCJzdHlsZU9iaiIsImFzc2lnbiIsInN0eWxlIiwiY3JlYXRlRWxlbWVudCIsInRleHRDb250ZW50IiwiZG9jdW1lbnQiLCJubFRvQnIiLCJ0ZXN0IiwiX25hbWVzcGFjZSIsIlJPTEVTIiwiYWRkTWVzc2FnZSIsInJvbGUiLCJoaWRkZW4iLCJuYW1lc3BhY2UiLCJtc2dPYmplY3QiLCJjdHgiLCJpbmRleCIsImhpc3RvcnkiLCJpZFJlZiIsImVsIiwib25BZGRNZXNzYWdlIiwiY2hhdEhpc3RvcnkiLCJhZGRVc2VyTWVzc2FnZSIsImFkZEFzc2lzdGFudE1lc3NhZ2UiLCJ1cGRhdGVBc3Npc3RhbnRNZXNzYWdlIiwibXNnIiwidXBkYXRlIiwidXBkYXRlTWVzc2FnZSIsImdldEFzc2lzdGFudE1lc3NhZ2UiLCJnZXRNZXNzYWdlIiwiZ2V0TWVzc2FnZXMiLCJnZXRNZXNzYWdlc0hpc3RvcnkiLCJtIiwiZGVmYXVsdENvbmZpZyIsImxvYWRpbmdUZXh0IiwiY29tcGxldGVkVGV4dCIsImNvbXBsZXRlZFRleHREdXJhdGlvbiIsImRpc2FibGVkIiwic3R5bGVzIiwiYmFja2dyb3VuZENvbG9yIiwiYm9yZGVyIiwiYm9yZGVyUmFkaXVzIiwicGFkZGluZyIsImZvbnRTaXplIiwiY3Vyc29yIiwiZGlzcGxheSIsImFsaWduSXRlbXMiLCJjb2xvciIsIm9wYWNpdHkiLCJ3aWR0aCIsImhlaWdodCIsIm1hcmdpblJpZ2h0IiwiYmFja2dyb3VuZFNpemUiLCJiYWNrZ3JvdW5kUmVwZWF0IiwiYmFja2dyb3VuZFBvc2l0aW9uIiwiaWNvbnMiLCJjb3B5IiwiY3JlYXRlQWN0aW9uQnV0dG9uIiwiY29uZmlnIiwiYnV0dG9uIiwiY2xhc3NOYW1lIiwiZW5hYmxlIiwiZGlzYWJsZSIsImNvcHlJY29uIiwiYmFja2dyb3VuZEltYWdlIiwiaWNvbiIsImFwcGVuZCIsImNyZWF0ZVRleHROb2RlIiwibGFiZWwiLCJhZGRFdmVudExpc3RlbmVyIiwib3JpZ2luYWxIVE1MIiwiaW5uZXJIVE1MIiwicmVzdWx0Iiwib25DbGljayIsIm1vZGFsIiwiUHJvbWlzZSIsImhlYWQiLCJhcHBlbmRDaGlsZCIsInJlbW92ZUNoaWxkIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJwb3NpdGlvbiIsInRvcCIsImxlZnQiLCJ6SW5kZXgiLCJtaW5IZWlnaHQiLCJtYXhIZWlnaHQiLCJib3hTaGFkb3ciLCJmbGV4RGlyZWN0aW9uIiwib3ZlcmZsb3ciLCJ0cmFuc2Zvcm0iLCJ0cmFuc2l0aW9uIiwianVzdGlmeUNvbnRlbnQiLCJmb250V2VpZ2h0IiwiZ2FwIiwiYmFja2dyb3VuZCIsImZsZXgiLCJvdmVyZmxvd1kiLCJib3hTaXppbmciLCJtYXJnaW5Cb3R0b20iLCJ3b3JkV3JhcCIsIm1hcmdpbkxlZnQiLCJib3JkZXJCb3R0b21SaWdodFJhZGl1cyIsIm1heFdpZHRoIiwiYm9yZGVyVG9wIiwib3V0bGluZSIsInJlc2l6ZSIsIm1pbldpZHRoIiwiYmFja2Ryb3BGaWx0ZXIiLCJwb2ludGVyRXZlbnRzIiwiYm9yZGVyQ29sb3IiLCJvYmplY3RGaXQiLCJtb2RhbFR5cGVzIiwibW9kYWxFeGlzdHMiLCJjcmVhdGVNb2RhbCIsImFsZXJ0Iiwib3ZlcmxheSIsImF2YWlsYWJsZVR5cGVzIiwiaW5jbHVkZXMiLCJ1bnNoaWZ0IiwiaGFuZGxlSW1hZ2VVcGxvYWQiLCJmaWxlT3JVcmwiLCJpc1JlbW90ZVVybCIsIkZpbGUiLCJhZGRFcnJvck1lc3NhZ2UiLCJ1cGxvYWRlZEltYWdlIiwicmVtb3ZlVXBsb2FkZWRJbWFnZSIsImltYWdlUHJldmlldyIsImltZyIsInJlbW92ZUJ0biIsInNyYyIsImRhdGFVUkwiLCJyZWplY3QiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiZXZlbnQiLCJ0YXJnZXQiLCJvbmVycm9yIiwicmVhZEFzRGF0YVVSTCIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJtZXNzYWdlSW5wdXQiLCJwYWRkaW5nTGVmdCIsImlucHV0V3JhcHBlciIsInJlbW92ZSIsImNsb3NlTW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZHJhZyIsImVuZERyYWciLCJtb2RhbE92ZXJsYXkiLCJpbml0RHJhZyIsImlzRHJhZ2dpbmciLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwib2Zmc2V0WCIsImNsaWVudFgiLCJvZmZzZXRZIiwiY2xpZW50WSIsInVzZXJTZWxlY3QiLCJuZXdYIiwibmV3WSIsInN0b3BHZW5lcmF0aW9uIiwiaXNMb2FkaW5nIiwiYWJvcnRDb250cm9sbGVyIiwic2V0TG9hZGluZ1N0YXRlIiwidHJ5QWdhaW4iLCJsYXRlc3RVc2VyTXNnIiwicmV2ZXJzZSIsImZpbmQiLCJzZW5kTWVzc2FnZSIsImNoYXRNZXNzYWdlcyIsIm1lc3NhZ2VEaXYiLCJlcnJvckljb24iLCJ0ZXh0U3BhbiIsInNjcm9sbFRvcCIsInNjcm9sbEhlaWdodCIsInByb3ZpZGVkSWQiLCJtZXNzYWdlSWQiLCJjb250ZW50RGl2IiwiaWZyYW1lIiwicHJvdmlkZWRDb250ZW50IiwiY3VzdG9tQ1NTIiwiaXNMb2FkZWQiLCJwZW5kaW5nQ29udGVudCIsImdldElmcmFtZURvY3VtZW50IiwiY29udGVudERvY3VtZW50IiwiY29udGVudFdpbmRvdyIsImNyZWF0ZUlmcmFtZUNvbnRlbnQiLCJjc3MiLCJqb2luIiwic2V0dXBJZnJhbWVDb250ZW50IiwiZG9jIiwiZm9yRWFjaCIsImxpbmsiLCJyZWwiLCJocmVmIiwic3luY0NvbnRlbnQiLCJuZXdDb250ZW50Iiwic3JjZG9jIiwicXVlcnlTZWxlY3RvciIsInN5bmNIZWlnaHQiLCJ1cGRhdGVDb250ZW50IiwiZWxlbWVudHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIm9mZnNldEhlaWdodCIsImkiLCJib3R0b20iLCJvZmZzZXRUb3AiLCJtYXgiLCJjcmVhdGVDb250ZW50SWZyYW1lIiwiQXJyYXkiLCJpc0FycmF5IiwiYWN0aW9uc0RpdiIsInRleHRBY3Rpb25zIiwiY29weVRvQ2xpcGJvYXJkIiwiaW1hZ2VBY3Rpb25zIiwiaGFuZGxlciIsImRvd25sb2FkZWQiLCJmaWVsZCIsInJlc291cmNlIiwibWVkaWFTb3VyY2UiLCJmdWxsVXJsIiwiaW5zZXJ0Q2IiLCJyZW5kZXJNZXNzYWdlIiwiaW1hZ2VzQ29udGVudCIsImltYWdlcyIsImNvbnRlbnRXcmFwcGVyIiwidGV4dERpdiIsImltYWdlUm93IiwiZmxleFdyYXAiLCJpbWdDb250ZW50IiwiaW1hZ2VXcmFwcGVyIiwibWFyZ2luVG9wIiwibmF2aWdhdG9yIiwiY2xpcGJvYXJkIiwid3JpdGVUZXh0IiwidGV4dGFyZWEiLCJzZWxlY3QiLCJleGVjQ29tbWFuZCIsImVyciIsImxvYWRpbmciLCJsb2FkaW5nSW5kaWNhdG9yIiwic2VuZEJ0biIsInN0b3BCdG4iLCJoYXNNZXNzYWdlcyIsInRyeUFnYWluQnRuIiwidHlwZUJ1dHRvbnMiLCJpc0FjdGl2ZSIsInRvTG93ZXJDYXNlIiwicXVlcnlTZWxlY3RvckFsbCIsInByb3ZpZGVkTWVzc2FnZSIsImhpZGVQcm9tcHQiLCJtZXNzYWdlcyIsIm5hbWUiLCJjaGF0TW9kYWwiLCJjaGF0SGVhZGVyIiwiY2hhdFRpdGxlIiwiY2hhdENvbnRyb2xzIiwiY2xvc2VCdG4iLCJjaGF0SW5wdXRBcmVhIiwiaW5wdXRSb3ciLCJwbGFjZWhvbGRlciIsInByZXZlbnREZWZhdWx0IiwiaW1hZ2VGaWxlIiwicmVtb3RlSW1hZ2VVcmwiLCJkYXRhVHJhbnNmZXIiLCJmaWxlcyIsImZpbGUiLCJpbWdVcmwiLCJVUkwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsIm9yaWdpbiIsInJlc3BvbnNlIiwiYmxvYiIsIml0ZW1zIiwiY2xpcGJvYXJkRGF0YSIsImdldEFzRmlsZSIsImJ1dHRvbnNDb2x1bW4iLCJzZW5kSWNvbiIsInNlbmRUZXh0IiwiYWN0aW9uQnV0dG9uc1JvdyIsInN0b3BJY29uIiwidGl0bGUiLCJyZWZyZXNoSWNvbiIsInR5cGVTZWxlY3RvciIsInR5cGVMYWJlbCIsInR5cGVUb2dnbGVHcm91cCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwiYnRuIiwiZmlyc3RDaGlsZCIsInN3aXRjaFR5cGUiLCJzaGlmdEtleSIsImJ1aWxkTW9kYWwiLCJhcGkiLCJ2aXNpYmlsaXR5Iiwib3Blbk1vZGFsIiwiY3JlYXRlTG9hZGluZ092ZXJsYXkiLCJvcHRpb25zIiwiaW5kaWNhdG9yVHlwZSIsIm92ZXJsYXlDb2xvciIsImluZGljYXRvckNvbG9yIiwiaW5kaWNhdG9yIiwidGV4dGFyZWFTdHlsZXMiLCJnZXRDb21wdXRlZFN0eWxlIiwidGV4dGFyZWFSZWN0Iiwic3R5bGVUZXh0IiwiYW5pbWF0aW9uIiwiZG90IiwibWFyZ2luIiwiYW5pbWF0aW9uRGVsYXkiLCJzdHlsZVNoZWV0IiwicGFyZW50U3R5bGVzIiwicGFyZW50RWxlbWVudCIsIndyYXBwZXIiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwidXBkYXRlZFJlY3QiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJ1aSIsImxvY2FsQ2hhdCIsImhpc3RvcnlOYXZTeW5jIiwiZWxzIiwicHJldlZhbHVlIiwiZ2V0VmFsdWUiLCJzZXRWYWx1ZSIsImZpcmVFdmVudCIsImRvbSIsImhpc3RvcnlOYXYiLCJzaG93IiwiaW5mbyIsInByZXZCdXR0b24iLCJuZXh0QnV0dG9uIiwiY3JlYXRlV2FuZEVsIiwid2FuZEVsIiwiaW5uZXJUZXh0IiwiY3JlYXRlSGlzdG9yeU5hdiIsImNhY2hlIiwic2hvd2luZyIsImhpZGUiLCJjcmVhdGVGcmVlVGV4dFByb21wdCIsImZpZWxkTmFtZSIsIk1PRHgiLCJyZXF1ZXN0IiwiY3JlYXRlRm9yY2VkVGV4dFByb21wdCIsImFpV3JhcHBlciIsIkV4dCIsIk1zZyIsImNyZWF0ZUltYWdlUHJvbXB0Iiwib25TdWNjZXNzIiwiaW1hZ2VXYW5kIiwiYXR0YWNoRmllbGQiLCJjbXAiLCJnZXRDbXAiLCJhdHRhY2hJbWFnZVBsdXMiLCJpbWdQbHVzUGFuZWwiLCJpbWFnZVBsdXMiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImltYWdlQnJvd3NlciIsInNvdXJjZSIsIm9uSW1hZ2VDaGFuZ2UiLCJhbHRUZXh0V2FuZCIsImltZ0VsZW1lbnQiLCJjYW52YXMiLCJnZXRDb250ZXh0IiwiZHJhd0ltYWdlIiwiYmFzZTY0RGF0YSIsInRvRGF0YVVSTCIsImFsdFRleHRGaWVsZCIsImFsdFRhZyIsInVwZGF0ZVZhbHVlIiwianVzdGlmeUl0ZW1zIiwib25SZWFkeSIsImRlZmVyIiwiZmllbGRzTWFwIiwicGFnZXRpdGxlIiwibG9uZ3RpdGxlIiwiaW50cm90ZXh0IiwiZGVzY3JpcHRpb24iLCJyZXNvdXJjZUZpZWxkcyIsImNtcElkIiwiYXR0YWNoUmVzb3VyY2VGaWVsZHMiLCJmb3JtIiwiZ2V0Rm9ybSIsInR2SWQiLCJ0dk5hbWUiLCJ0dnMiLCJmaW5kRmllbGQiLCJ4dHlwZSIsImV2ZW50RGF0YSIsInJlbGF0aXZlVXJsIiwiYXR0YWNoVFZzIl0sInNvdXJjZVJvb3QiOiIifQ==